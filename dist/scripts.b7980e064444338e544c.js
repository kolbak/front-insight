(function(){var t,e,n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C,k,A,M,T,I,D,P,L,E,N,R,O,z,B,F,H,V,W,X,Y,G,U,j,q=[].slice,Z={}.hasOwnProperty,$=function(t,e){function n(){this.constructor=t}for(var i in e)Z.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},K=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};for(b={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},T=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,x=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(t){return setTimeout(t,50)},x=function(t){return clearTimeout(t)}),L=function(t){var e,n;return e=T(),(n=function(){var i;return(i=T()-e)>=33?(e=T(),t(i,(function(){return D(n)}))):setTimeout(n,33-i)})()},P=function(){var t,e,n;return n=arguments[0],e=arguments[1],t=3<=arguments.length?q.call(arguments,2):[],"function"==typeof n[e]?n[e].apply(n,t):n[e]},w=function(){var t,e,n,i,r,a,o;for(e=arguments[0],a=0,o=(i=2<=arguments.length?q.call(arguments,1):[]).length;o>a;a++)if(n=i[a])for(t in n)Z.call(n,t)&&(r=n[t],null!=e[t]&&"object"==typeof e[t]&&null!=r&&"object"==typeof r?w(e[t],r):e[t]=r);return e},m=function(t){var e,n,i,r;for(n=e=0,i=0,r=t.length;r>i;i++)n+=Math.abs(t[i]),e++;return n/e},S=function(t,e){var n,i;if(null==t&&(t="options"),null==e&&(e=!0),i=document.querySelector("[data-pace-"+t+"]")){if(n=i.getAttribute("data-pace-"+t),!e)return n;try{return JSON.parse(n)}catch(a){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",a):void 0}}},o=function(){function t(){}return t.prototype.on=function(t,e,n,i){var r;return null==i&&(i=!1),null==this.bindings&&(this.bindings={}),null==(r=this.bindings)[t]&&(r[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){var n,i,r;if(null!=(null!=(i=this.bindings)?i[t]:void 0)){if(null==e)return delete this.bindings[t];for(n=0,r=[];n<this.bindings[t].length;)r.push(this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):n++);return r}},t.prototype.trigger=function(){var t,e,n,i,r,a,o,s;if(n=arguments[0],t=2<=arguments.length?q.call(arguments,1):[],null!=(a=this.bindings)?a[n]:void 0){for(i=0,s=[];i<this.bindings[n].length;)r=(o=this.bindings[n][i]).once,o.handler.apply(null!=(e=o.ctx)?e:this,t),s.push(r?this.bindings[n].splice(i,1):i++);return s}},t}(),c=window.Pace||{},window.Pace=c,w(c,o.prototype),I=c.options=w({},b,window.paceOptions,S()),W=0,Y=(U=["ajax","document","eventLag","elements"]).length;Y>W;W++)!0===I[O=U[W]]&&(I[O]=b[O]);l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $(e,t),e}(Error),e=function(){function t(){this.progress=0}return t.prototype.getElement=function(){var t;if(null==this.el){if(!(t=document.querySelector(I.target)))throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=t.firstChild?t.insertBefore(this.el,t.firstChild):t.appendChild(this.el)}return this.el},t.prototype.finish=function(){var t;return(t=this.getElement()).className=t.className.replace("pace-active",""),t.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},t.prototype.update=function(t){return this.progress=t,this.render()},t.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(t){l=t}return this.el=void 0},t.prototype.render=function(){var t,e,n,i,r,a;if(null==document.querySelector(I.target))return!1;for(t=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",i=0,r=(a=["webkitTransform","msTransform","transform"]).length;r>i;i++)t.children[0].style[a[i]]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(t.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?e="99":(e=this.progress<10?"0":"",e+=0|this.progress),t.children[0].setAttribute("data-progress",""+e)),this.lastRenderedProgress=this.progress},t.prototype.done=function(){return this.progress>=100},t}(),s=function(){function t(){this.bindings={}}return t.prototype.trigger=function(t,e){var n,i,r,a;if(null!=this.bindings[t]){for(a=[],n=0,i=(r=this.bindings[t]).length;i>n;n++)a.push(r[n].call(this,e));return a}},t.prototype.on=function(t,e){var n;return null==(n=this.bindings)[t]&&(n[t]=[]),this.bindings[t].push(e)},t}(),V=window.XMLHttpRequest,H=window.XDomainRequest,F=window.WebSocket,_=function(t,e){var n,i;for(n in i=[],e.prototype)try{i.push(null==t[n]&&"function"!=typeof e[n]?"function"==typeof Object.defineProperty?Object.defineProperty(t,n,{get:function(){return e.prototype[n]},configurable:!0,enumerable:!0}):t[n]=e.prototype[n]:void 0)}catch(a){}return i},A=[],c.ignore=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?q.call(arguments,1):[],A.unshift("ignore"),n=e.apply(null,t),A.shift(),n},c.track=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?q.call(arguments,1):[],A.unshift("track"),n=e.apply(null,t),A.shift(),n},R=function(t){var e;if(null==t&&(t="GET"),"track"===A[0])return"force";if(!A.length&&I.ajax){if("socket"===t&&I.ajax.trackWebSockets)return!0;if(e=t.toUpperCase(),K.call(I.ajax.trackMethods,e)>=0)return!0}return!1},u=function(t){function e(){var t,n=this;e.__super__.constructor.apply(this,arguments),t=function(t){var e;return e=t.open,t.open=function(i,r,a){return R(i)&&n.trigger("request",{type:i,url:r,request:t}),e.apply(t,arguments)}},window.XMLHttpRequest=function(e){var n;return n=new V(e),t(n),n};try{_(window.XMLHttpRequest,V)}catch(i){}if(null!=H){window.XDomainRequest=function(){var e;return e=new H,t(e),e};try{_(window.XDomainRequest,H)}catch(i){}}if(null!=F&&I.ajax.trackWebSockets){window.WebSocket=function(t,e){var i;return i=null!=e?new F(t,e):new F(t),R("socket")&&n.trigger("request",{type:"socket",url:t,protocols:e,request:i}),i};try{_(window.WebSocket,F)}catch(i){}}}return $(e,t),e}(s),X=null,N=function(t){var e,n,i,r;for(n=0,i=(r=I.ajax.ignoreURLs).length;i>n;n++)if("string"==typeof(e=r[n])){if(-1!==t.indexOf(e))return!0}else if(e.test(t))return!0;return!1},(C=function(){return null==X&&(X=new u),X})().on("request",(function(e){var n,i,r,a;return a=e.type,r=e.request,N(e.url)||c.running||!1===I.restartOnRequestAfter&&"force"!==R(a)?void 0:(i=arguments,"boolean"==typeof(n=I.restartOnRequestAfter||0)&&(n=0),setTimeout((function(){var e,n,o,s,l;if("socket"===a?r.readyState<2:0<(o=r.readyState)&&4>o){for(c.restart(),l=[],e=0,n=(s=c.sources).length;n>e;e++){if((O=s[e])instanceof t){O.watch.apply(O,i);break}l.push(void 0)}return l}}),n))})),t=function(){function t(){var t=this;this.elements=[],C().on("request",(function(){return t.watch.apply(t,arguments)}))}return t.prototype.watch=function(t){var e,n,i;return i=t.type,e=t.request,N(t.url)?void 0:(n="socket"===i?new f(e):new g(e),this.elements.push(n))},t}(),g=function(t){var e,n,i,r,a=this;if(this.progress=0,null!=window.ProgressEvent)for(t.addEventListener("progress",(function(t){return a.progress=t.lengthComputable?100*t.loaded/t.total:a.progress+(100-a.progress)/2}),!1),e=0,n=(r=["load","abort","timeout","error"]).length;n>e;e++)t.addEventListener(r[e],(function(){return a.progress=100}),!1);else i=t.onreadystatechange,t.onreadystatechange=function(){var e;return 0===(e=t.readyState)||4===e?a.progress=100:3===t.readyState&&(a.progress=50),"function"==typeof i?i.apply(null,arguments):void 0}},f=function(t){var e,n,i,r=this;for(this.progress=0,e=0,n=(i=["error","open"]).length;n>e;e++)t.addEventListener(i[e],(function(){return r.progress=100}),!1)},i=function(t){var e,n,i;for(null==t&&(t={}),this.elements=[],null==t.selectors&&(t.selectors=[]),e=0,n=(i=t.selectors).length;n>e;e++)this.elements.push(new r(i[e]))},r=function(){function t(t){this.selector=t,this.progress=0,this.check()}return t.prototype.check=function(){var t=this;return document.querySelector(this.selector)?this.done():setTimeout((function(){return t.check()}),I.elements.checkInterval)},t.prototype.done=function(){return this.progress=100},t}(),n=function(){function t(){var t,e,n=this;this.progress=null!=(e=this.states[document.readyState])?e:100,t=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof t?t.apply(null,arguments):void 0}}return t.prototype.states={loading:0,interactive:50,complete:100},t}(),a=function(){var t,e,n,i,r,a=this;this.progress=0,t=0,r=[],i=0,n=T(),e=setInterval((function(){var o;return o=T()-n-50,n=T(),r.push(o),r.length>I.eventLag.sampleCount&&r.shift(),t=m(r),++i>=I.eventLag.minSamples&&t<I.eventLag.lagThreshold?(a.progress=100,clearInterval(e)):a.progress=3/(t+3)*100}),50)},h=function(){function t(t){this.source=t,this.last=this.sinceLastUpdate=0,this.rate=I.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=P(this.source,"progress"))}return t.prototype.tick=function(t,e){var n;return null==e&&(e=P(this.source,"progress")),e>=100&&(this.done=!0),e===this.last?this.sinceLastUpdate+=t:(this.sinceLastUpdate&&(this.rate=(e-this.last)/this.sinceLastUpdate),this.catchup=(e-this.progress)/I.catchupTime,this.sinceLastUpdate=0,this.last=e),e>this.progress&&(this.progress+=this.catchup*t),n=1-Math.pow(this.progress/100,I.easeFactor),this.progress+=n*this.rate*t,this.progress=Math.min(this.lastProgress+I.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},t}(),z=null,E=null,v=null,B=null,p=null,y=null,c.running=!1,k=function(){return I.restartOnPushState?c.restart():void 0},null!=window.history.pushState&&(G=window.history.pushState,window.history.pushState=function(){return k(),G.apply(window.history,arguments)}),null!=window.history.replaceState&&(j=window.history.replaceState,window.history.replaceState=function(){return k(),j.apply(window.history,arguments)}),d={ajax:t,elements:i,document:n,eventLag:a},(M=function(){var t,n,i,r,a,o,s,l;for(c.sources=z=[],n=0,r=(o=["ajax","elements","document","eventLag"]).length;r>n;n++)!1!==I[t=o[n]]&&z.push(new d[t](I[t]));for(i=0,a=(l=null!=(s=I.extraSources)?s:[]).length;a>i;i++)z.push(new(O=l[i])(I));return c.bar=v=new e,E=[],B=new h})(),c.stop=function(){return c.trigger("stop"),c.running=!1,v.destroy(),y=!0,null!=p&&("function"==typeof x&&x(p),p=null),M()},c.restart=function(){return c.trigger("restart"),c.stop(),c.start()},c.go=function(){var t;return c.running=!0,v.render(),t=T(),y=!1,p=L((function(e,n){var i,r,a,o,s,l,u,d,f,g,p,m,x;for(i=d=0,r=!0,o=f=0,p=z.length;p>f;o=++f)for(O=z[o],u=null!=E[o]?E[o]:E[o]=[],s=g=0,m=(a=null!=(x=O.elements)?x:[O]).length;m>g;s=++g)r&=(l=null!=u[s]?u[s]:u[s]=new h(a[s])).done,l.done||(i++,d+=l.tick(e));return v.update(B.tick(e,d/i)),v.done()||r||y?(v.update(100),c.trigger("done"),setTimeout((function(){return v.finish(),c.running=!1,c.trigger("hide")}),Math.max(I.ghostTime,Math.max(I.minTime-(T()-t),0)))):n()}))},c.start=function(t){w(I,t),c.running=!0;try{v.render()}catch(e){l=e}return document.querySelector(".pace")?(c.trigger("start"),c.go()):setTimeout(c.start,50)},"function"==typeof define&&define.amd?define(["pace"],(function(){return c})):"object"==typeof exports?module.exports=c:I.startOnPageLoad&&c.start()}).call(this),function(t,e){"use strict";function n(t,n,a){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(n===e)throw"invalid module definition, dependencies must be specified";if(a===e)throw"invalid module definition, definition function must be specified";!function(t,e){for(var n,a=[],o=0;o<t.length;++o){if(!(n=r[t[o]]||i(t[o])))throw"module definition dependecy not found: "+t[o];a.push(n)}e.apply(null,a)}(n,(function(){r[t]=a.apply(null,arguments)}))}function i(e){for(var n=t,i=e.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}var r={},a="tinymce/geom/Rect",o="tinymce/util/Promise",s="tinymce/util/Delay",l="tinymce/Env",c="tinymce/dom/EventUtils",u="tinymce/dom/Sizzle",d="tinymce/util/Arr",h="tinymce/util/Tools",f="tinymce/dom/DomQuery",g="tinymce/html/Styles",p="tinymce/dom/TreeWalker",m="tinymce/dom/Range",v="tinymce/html/Entities",y="tinymce/dom/StyleSheetLoader",x="tinymce/dom/DOMUtils",b="tinymce/dom/ScriptLoader",w="tinymce/AddOnManager",_="tinymce/dom/NodeType",S="tinymce/text/Zwsp",C="tinymce/caret/CaretContainer",k="tinymce/dom/RangeUtils",A="tinymce/NodeChange",M="tinymce/html/Node",T="tinymce/html/Schema",I="tinymce/html/SaxParser",D="tinymce/html/DomParser",P="tinymce/html/Writer",L="tinymce/html/Serializer",E="tinymce/dom/Serializer",N="tinymce/dom/TridentSelection",R="tinymce/util/VK",O="tinymce/dom/ControlSelection",z="tinymce/util/Fun",B="tinymce/caret/CaretCandidate",F="tinymce/geom/ClientRect",H="tinymce/text/ExtendingChar",V="tinymce/caret/CaretPosition",W="tinymce/caret/CaretBookmark",X="tinymce/dom/BookmarkManager",Y="tinymce/dom/Selection",G="tinymce/dom/ElementUtils",U="tinymce/fmt/Preview",j="tinymce/fmt/Hooks",q="tinymce/Formatter",Z="tinymce/undo/Diff",$="tinymce/undo/Fragments",K="tinymce/undo/Levels",J="tinymce/UndoManager",Q="tinymce/EnterKey",tt="tinymce/ForceBlocks",et="tinymce/caret/CaretUtils",nt="tinymce/caret/CaretWalker",it="tinymce/InsertList",rt="tinymce/InsertContent",at="tinymce/EditorCommands",ot="tinymce/util/URI",st="tinymce/util/Class",lt="tinymce/util/EventDispatcher",ct="tinymce/data/Binding",ut="tinymce/util/Observable",dt="tinymce/data/ObservableObject",ht="tinymce/ui/Selector",ft="tinymce/ui/Collection",gt="tinymce/ui/DomUtils",pt="tinymce/ui/BoxUtils",mt="tinymce/ui/ClassList",vt="tinymce/ui/ReflowQueue",yt="tinymce/ui/Control",xt="tinymce/ui/Factory",bt="tinymce/ui/KeyboardNavigation",wt="tinymce/ui/Container",_t="tinymce/ui/DragHelper",St="tinymce/ui/Scrollable",Ct="tinymce/ui/Panel",kt="tinymce/ui/Movable",At="tinymce/ui/Resizable",Mt="tinymce/ui/FloatPanel",Tt="tinymce/ui/Window",It="tinymce/ui/MessageBox",Dt="tinymce/WindowManager",Pt="tinymce/ui/Tooltip",Lt="tinymce/ui/Widget",Et="tinymce/ui/Progress",Nt="tinymce/ui/Notification",Rt="tinymce/NotificationManager",Ot="tinymce/dom/NodePath",zt="tinymce/util/Quirks",Bt="tinymce/EditorObservable",Ft="tinymce/Mode",Ht="tinymce/Shortcuts",Vt="tinymce/file/Uploader",Wt="tinymce/file/Conversions",Xt="tinymce/file/ImageScanner",Yt="tinymce/file/BlobCache",Gt="tinymce/file/UploadStatus",Ut="tinymce/ErrorReporter",jt="tinymce/EditorUpload",qt="tinymce/caret/FakeCaret",Zt="tinymce/dom/Dimensions",$t="tinymce/caret/LineWalker",Kt="tinymce/caret/LineUtils",Jt="tinymce/dom/MousePosition",Qt="tinymce/DragDropOverrides",te="tinymce/SelectionOverrides",ee="tinymce/util/Uuid",ne="tinymce/ui/Sidebar",ie="tinymce/Editor",re="tinymce/util/I18n",ae="tinymce/FocusManager",oe="tinymce/EditorManager",se="tinymce/util/XHR",le="tinymce/util/JSON",ce="tinymce/util/JSONRequest",ue="tinymce/util/JSONP",de="tinymce/util/LocalStorage",he="tinymce/Compat",fe="tinymce/ui/Layout",ge="tinymce/ui/AbsoluteLayout",pe="tinymce/ui/Button",me="tinymce/ui/ButtonGroup",ve="tinymce/ui/Checkbox",ye="tinymce/ui/ComboBox",xe="tinymce/ui/ColorBox",be="tinymce/ui/PanelButton",we="tinymce/ui/ColorButton",_e="tinymce/util/Color",Se="tinymce/ui/ColorPicker",Ce="tinymce/ui/Path",ke="tinymce/ui/ElementPath",Ae="tinymce/ui/FormItem",Me="tinymce/ui/Form",Te="tinymce/ui/FieldSet",Ie="tinymce/content/LinkTargets",De="tinymce/ui/FilePicker",Pe="tinymce/ui/FitLayout",Le="tinymce/ui/FlexLayout",Ee="tinymce/ui/FlowLayout",Ne="tinymce/fmt/FontInfo",Re="tinymce/ui/FormatControls",Oe="tinymce/ui/GridLayout",ze="tinymce/ui/Iframe",Be="tinymce/ui/InfoBox",Fe="tinymce/ui/Label",He="tinymce/ui/Toolbar",Ve="tinymce/ui/MenuBar",We="tinymce/ui/MenuButton",Xe="tinymce/ui/MenuItem",Ye="tinymce/ui/Throbber",Ge="tinymce/ui/Menu",Ue="tinymce/ui/ListBox",je="tinymce/ui/Radio",qe="tinymce/ui/ResizeHandle",Ze="tinymce/ui/SelectBox",$e="tinymce/ui/Slider",Ke="tinymce/ui/Spacer",Je="tinymce/ui/SplitButton",Qe="tinymce/ui/StackLayout",tn="tinymce/ui/TabPanel",en="tinymce/ui/TextBox";n(a,[],(function(){function t(t,n,i){var a,o,s,l,c,u;return a=n.x,o=n.y,s=t.w,l=t.h,c=n.w,u=n.h,"b"===(i=(i||"").split(""))[0]&&(o+=u),"r"===i[1]&&(a+=c),"c"===i[0]&&(o+=r(u/2)),"c"===i[1]&&(a+=r(c/2)),"b"===i[3]&&(o-=l),"r"===i[4]&&(a-=s),"c"===i[3]&&(o-=r(l/2)),"c"===i[4]&&(a-=r(s/2)),e(a,o,s,l)}function e(t,e,n,i){return{x:t,y:e,w:n,h:i}}var n=Math.min,i=Math.max,r=Math.round;return{inflate:function(t,n,i){return e(t.x-n,t.y-i,t.w+2*n,t.h+2*i)},relativePosition:t,findBestRelativePosition:function(e,n,i,r){var a,o;for(o=0;o<r.length;o++)if((a=t(e,n,r[o])).x>=i.x&&a.x+a.w<=i.w+i.x&&a.y>=i.y&&a.y+a.h<=i.h+i.y)return r[o];return null},intersect:function(t,r){var a,o,s,l;return a=i(t.x,r.x),o=i(t.y,r.y),s=n(t.x+t.w,r.x+r.w),l=n(t.y+t.h,r.y+r.h),s-a<0||l-o<0?null:e(a,o,s-a,l-o)},clamp:function(t,n,r){var a,o,s,l,c,u,d,h,f,g;return u=t.y,d=t.x+t.w,h=t.y+t.h,f=n.x+n.w,g=n.y+n.h,a=i(0,n.x-(c=t.x)),o=i(0,n.y-u),s=i(0,d-f),l=i(0,h-g),c+=a,u+=o,r&&(d+=a,h+=o,c-=s,u-=l),e(c,u,(d-=s)-c,(h-=l)-u)},create:e,fromClientRect:function(t){return e(t.left,t.top,t.width,t.height)}}})),n(o,[],(function(){function t(t,e){return function(){t.apply(e,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,t(i,this),t(r,this))}function n(t){var e=this;return null===this._state?void this._deferreds.push(t):void l((function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(r){return void t.reject(r)}t.resolve(i)}else(e._state?t.resolve:t.reject)(e._value)}))}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void s(t(n,e),t(i,this),t(r,this))}this._state=!0,this._value=e,a.call(this)}catch(o){r.call(this,o)}}function r(t){this._state=!1,this._value=t,a.call(this)}function a(){for(var t=0,e=this._deferreds.length;t<e;t++)n.call(this,this._deferreds[t]);this._deferreds=null}function o(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function s(t,e,n){var i=!1;try{t((function(t){i||(i=!0,e(t))}),(function(t){i||(i=!0,n(t))}))}catch(r){if(i)return;i=!0,n(r)}}if(window.Promise)return window.Promise;var l=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.then=function(t,i){var r=this;return new e((function(e,a){n.call(r,new o(t,i,e,a))}))},e.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new e((function(e,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){i(a,t)}),n)}t[a]=o,0==--r&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var r=t.length,a=0;a<t.length;a++)i(a,t[a])}))},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)}))},e})),n(s,[o],(function(t){function e(t,e){return"number"!=typeof e&&(e=0),setTimeout(t,e)}function n(t,e){return"number"!=typeof e&&(e=1),setInterval(t,e)}function i(t,n){var i,r;return(r=function(){var r=arguments;clearTimeout(i),i=e((function(){t.apply(this,r)}),n)}).stop=function(){clearTimeout(i)},r}var r;return{requestAnimationFrame:function(e,n){return r?void r.then(e):void(r=new t((function(t){n||(n=document.body),function(t,e){var n,i=window.requestAnimationFrame,r=["ms","moz","webkit"];for(n=0;n<r.length&&!i;n++)i=window[r[n]+"RequestAnimationFrame"];i||(i=function(t){window.setTimeout(t,0)}),i(t,e)}(t,n)})).then(e))},setTimeout:e,setInterval:n,setEditorTimeout:function(t,n,i){return e((function(){t.removed||n()}),i)},setEditorInterval:function(t,e,i){var r;return r=n((function(){t.removed?clearInterval(r):e()}),i)},debounce:i,throttle:i,clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)}}})),n(l,[],(function(){function t(t){return"matchMedia"in window&&matchMedia(t).matches}var e,n,i,r,a,o,s,l,c,u,d,h,f,g=navigator,p=g.userAgent;return e=window.opera&&window.opera.buildNumber,c=/Android/.test(p),i=(i=!(n=/WebKit/.test(p))&&!e&&/MSIE/gi.test(p)&&/Explorer/gi.test(g.appName))&&/MSIE (\w+)\./.exec(p)[1],r=-1!=p.indexOf("Trident/")&&(-1!=p.indexOf("rv:")||-1!=g.appName.indexOf("Netscape"))&&11,a=-1!=p.indexOf("Edge/")&&!i&&!r&&12,i=i||r||a,o=!n&&!r&&/Gecko/.test(p),s=-1!=p.indexOf("Mac"),l=/(iPad|iPhone)/.test(p),u="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,d=t("only screen and (max-device-width: 480px)")&&(c||l),h=t("only screen and (min-width: 800px)")&&(c||l),f=-1!=p.indexOf("Windows Phone"),a&&(n=!1),{opera:e,webkit:n,ie:i,gecko:o,mac:s,iOS:l,android:c,contentEditable:!l||u||p.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i&&!a?document.documentMode||7:10,fileApi:u,ceFalse:!1===i||i>8,canHaveCSP:!1===i||i>11,desktop:!d&&!h,windowsPhone:f}})),n(c,[s,l],(function(t,e){function n(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function i(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)}function r(t,n){function i(){return!1}function r(){return!0}var a,o,s=n||{};for(a in t)c[a]||(s[a]=t[a]);if(s.target||(s.target=s.srcElement||document),e.experimentalShadowDom&&(s.target=function(t,e){var n,i=e;return(n=t.path)&&n.length>0&&(i=n[0]),t.deepPath&&(n=t.deepPath())&&n.length>0&&(i=n[0]),i}(t,s.target)),t&&l.test(t.type)&&t.pageX===o&&t.clientX!==o){var u=s.target.ownerDocument||document,d=u.documentElement,h=u.body;s.pageX=t.clientX+(d&&d.scrollLeft||h&&h.scrollLeft||0)-(d&&d.clientLeft||h&&h.clientLeft||0),s.pageY=t.clientY+(d&&d.scrollTop||h&&h.scrollTop||0)-(d&&d.clientTop||h&&h.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=r,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=i,s.isPropagationStopped=i,s.isImmediatePropagationStopped=i),void 0===s.metaKey&&(s.metaKey=!1),s}function a(e,r,a){function o(){a.domLoaded||(a.domLoaded=!0,r(l))}var s=e.document,l={type:"ready"};return a.domLoaded?void r(l):(s.addEventListener?"complete"===s.readyState?o():n(e,"DOMContentLoaded",o):(n(s,"readystatechange",(function t(){("complete"===s.readyState||"interactive"===s.readyState&&s.body)&&(i(s,"readystatechange",t),o())})),s.documentElement.doScroll&&e.self===e.top&&function n(){try{s.documentElement.doScroll("left")}catch(e){return void t.setTimeout(n)}o()}()),void n(e,"load",o))}function o(){function t(t,e){var n,i,r,a,o=h[e];if(n=o&&o[t.type])for(i=0,r=n.length;i<r;i++)if((a=n[i])&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}var e,o,l,c,u,d=this,h={};o=s+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,d.domLoaded=!1,d.events=h,d.bind=function(i,s,f,g){function p(e){t(r(e||S.event),m)}var m,v,y,x,b,w,_,S=window;if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[o]?m=i[o]:(m=e++,i[o]=m,h[m]={}),g=g||i,y=(s=s.split(" ")).length;y--;)w=p,b=_=!1,"DOMContentLoaded"===(x=s[y])&&(x="ready"),d.domLoaded&&"ready"===x&&"complete"==i.readyState?f.call(g,r({type:x})):(c||(b=u[x])&&(w=function(e){var n,i;if(n=e.currentTarget,(i=e.relatedTarget)&&n.contains)i=n.contains(i);else for(;i&&i!==n;)i=i.parentNode;i||((e=r(e||S.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=n,t(e,m))}),l||"focusin"!==x&&"focusout"!==x||(_=!0,b="focusin"===x?"focus":"blur",w=function(e){(e=r(e||S.event)).type="focus"===e.type?"focusin":"focusout",t(e,m)}),(v=h[m][x])?"ready"===x&&d.domLoaded?f({type:x}):v.push({func:f,scope:g}):(h[m][x]=v=[{func:f,scope:g}],v.fakeName=b,v.capture=_,v.nativeHandler=w,"ready"===x?a(i,w,d):n(i,b||x,w,_)));return i=v=0,f}},d.unbind=function(t,e,n){var r,a,s,l,c,u;if(!t||3===t.nodeType||8===t.nodeType)return d;if(r=t[o]){if(u=h[r],e){for(s=(e=e.split(" ")).length;s--;)if(a=u[c=e[s]]){if(n)for(l=a.length;l--;)if(a[l].func===n){var g=a.nativeHandler,p=a.fakeName,m=a.capture;(a=a.slice(0,l).concat(a.slice(l+1))).nativeHandler=g,a.fakeName=p,a.capture=m,u[c]=a}n&&0!==a.length||(delete u[c],i(t,a.fakeName||c,a.nativeHandler,a.capture))}}else{for(c in u)i(t,(a=u[c]).fakeName||c,a.nativeHandler,a.capture);u={}}for(c in u)return d;delete h[r];try{delete t[o]}catch(f){t[o]=null}}return d},d.fire=function(e,n,i){var a;if(!e||3===e.nodeType||8===e.nodeType)return d;(i=r(null,i)).type=n,i.target=e;do{(a=e[o])&&t(i,a),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!i.isPropagationStopped());return d},d.clean=function(t){var e,n,i=d.unbind;if(!t||3===t.nodeType||8===t.nodeType)return d;if(t[o]&&i(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(i(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[o]&&i(t);return d},d.destroy=function(){h={}},d.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}}var s="mce-data-",l=/^(?:mouse|contextmenu)|click/,c={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};return(o.Event=new o).bind(window,"ready",(function(){})),o})),n(u,[],(function(){function t(t,e,n,i){var r,a,o,s,l,c,d,f,g,p;if((e?e.ownerDocument||e:H)!==L&&P(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||L).nodeType)&&9!==s)return[];if(N&&!i){if(r=vt.exec(t))if(o=r[1]){if(9===s){if(!(a=e.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(o))&&B(e,a)&&a.id===o)return n.push(a),n}else{if(r[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&w.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(o)),n}if(w.qsa&&(!R||!R.test(t))){if(f=d=F,g=e,p=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=k(t),(d=e.getAttribute("id"))?f=d.replace(bt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);g=yt.test(t)&&u(e.parentNode)||e,p=c.join(",")}if(p)try{return Q.apply(n,g.querySelectorAll(p)),n}catch(m){}finally{d||e.removeAttribute("id")}}}return M(t.replace(st,"$1"),e,n,i)}function n(){var t=[];return function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function i(t){return t[F]=!0,t}function r(t){var e=L.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i((function(e){return e=+e,i((function(n,i){for(var r,a=t([],n.length,e),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function u(t){return t&&typeof t.getElementsByTagName!==j&&t}function d(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,a=W++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,a)}:function(e,n,o){var s,l,c=[V,a];if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if((s=(l=e[F]||(e[F]={}))[i])&&s[0]===V&&s[1]===a)return c[2]=s[2];if(l[i]=c,c[2]=t(e,n,o))return!0}}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function p(e,n,i){for(var r=0,a=n.length;r<a;r++)t(e,n[r],i);return i}function m(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,c=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,i,r)||(o.push(a),c&&e.push(s)));return o}function v(t,e,n,r,a,o){return r&&!r[F]&&(r=v(r)),a&&!a[F]&&(a=v(a,o)),i((function(i,o,s,l){var c,u,d,h=[],f=[],g=o.length,v=i||p(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?v:m(v,h,t,s,l),x=n?a||(i?t:g||r)?[]:o:y;if(n&&n(y,x,s,l),r)for(c=m(x,f),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(x[f[u]]=!(y[f[u]]=d));if(i){if(a||t){if(a){for(c=[],u=x.length;u--;)(d=x[u])&&c.push(y[u]=d);a(null,x=[],c,l)}for(u=x.length;u--;)(d=x[u])&&(c=a?et.call(i,d):h[u])>-1&&(i[c]=!(o[c]=d))}}else x=m(x===o?x.splice(g,x.length):x),a?a(null,o,x,l):Q.apply(o,x)}))}function y(t){for(var e,n,i,r=t.length,a=_.relative[t[0].type],o=a||_.relative[" "],s=a?1:0,l=f((function(t){return t===e}),o,!0),c=f((function(t){return et.call(e,t)>-1}),o,!0),u=[function(t,n,i){return!a&&(i||n!==T)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];s<r;s++)if(n=_.relative[t[s].type])u=[f(g(u),n)];else{if((n=_.filter[t[s].type].apply(null,t[s].matches))[F]){for(i=++s;i<r&&!_.relative[t[i].type];i++);return v(s>1&&g(u),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&y(t.slice(s,i)),i<r&&y(t=t.slice(i)),i<r&&h(t))}u.push(n)}return g(u)}function x(e,n){var r=n.length>0,a=e.length>0,o=function(i,o,s,l,c){var u,d,h,f=0,g="0",p=i&&[],v=[],y=T,x=i||a&&_.find.TAG("*",c),b=V+=null==y?1:Math.random()||.1,w=x.length;for(c&&(T=o!==L&&o);g!==w&&null!=(u=x[g]);g++){if(a&&u){for(d=0;h=e[d++];)if(h(u,o,s)){l.push(u);break}c&&(V=b)}r&&((u=!h&&u)&&f--,i&&p.push(u))}if(f+=g,r&&g!==f){for(d=0;h=n[d++];)h(p,v,o,s);if(i){if(f>0)for(;g--;)p[g]||v[g]||(v[g]=K.call(l));v=m(v)}Q.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return c&&(V=b,T=y),p};return r?i(o):o}var b,w,_,S,C,k,A,M,T,I,D,P,L,E,N,R,O,z,B,F="sizzle"+-new Date,H=window.document,V=0,W=0,X=n(),Y=n(),G=n(),U=function(t,e){return t===e&&(D=!0),0},j=typeof e,q=1<<31,Z={}.hasOwnProperty,$=[],K=$.pop,J=$.push,Q=$.push,tt=$.slice,et=$.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+it+"*\\]",ot=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",st=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(ot),ht=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt+"|[*])"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply($=tt.call(H.childNodes),H.childNodes)}catch(xt){Q={apply:$.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(b in w=t.support={},C=t.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=t.setDocument=function(t){var n,i=t?t.ownerDocument||t:H,a=i.defaultView;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,E=i.documentElement,N=!C(i),a&&a!==function(t){try{return t.top}catch(e){}return null}(a)&&(a.addEventListener?a.addEventListener("unload",(function(){P()}),!1):a.attachEvent&&a.attachEvent("onunload",(function(){P()}))),w.attributes=r((function(t){return t.className="i",!t.getAttribute("className")})),w.getElementsByTagName=r((function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length})),w.getElementsByClassName=mt.test(i.getElementsByClassName),w.getById=r((function(t){return E.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length})),w.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==j&&N){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(wt,_t);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(wt,_t);return function(t){var n=typeof t.getAttributeNode!==j&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=w.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==j)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},_.find.CLASS=w.getElementsByClassName&&function(t,e){if(N)return e.getElementsByClassName(t)},O=[],R=[],(w.qsa=mt.test(i.querySelectorAll))&&(r((function(t){t.innerHTML="<select msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+it+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||R.push(":checked")})),r((function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")}))),(w.matchesSelector=mt.test(z=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r((function(t){w.disconnectedMatch=z.call(t,"div"),z.call(t,"[s!='']:x"),O.push("!=",ot)})),R=R.length&&new RegExp(R.join("|")),O=O.length&&new RegExp(O.join("|")),n=mt.test(E.compareDocumentPosition),B=n||mt.test(E.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=n?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===H&&B(H,t)?-1:e===i||e.ownerDocument===H&&B(H,e)?1:I?et.call(I,t)-et.call(I,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,r=0,a=t.parentNode,s=e.parentNode,l=[t],c=[e];if(!a||!s)return t===i?-1:e===i?1:a?-1:s?1:I?et.call(I,t)-et.call(I,e):0;if(a===s)return o(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===H?-1:c[r]===H?1:0},i):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&P(e),n=n.replace(ut,"='$1']"),w.matchesSelector&&N&&(!O||!O.test(n))&&(!R||!R.test(n)))try{var i=z.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,L,null,[e]).length>0},t.contains=function(t,e){return(t.ownerDocument||t)!==L&&P(t),B(t,e)},t.attr=function(t,n){(t.ownerDocument||t)!==L&&P(t);var i=_.attrHandle[n.toLowerCase()],r=i&&Z.call(_.attrHandle,n.toLowerCase())?i(t,n,!N):e;return r!==e?r:w.attributes||!N?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null},t.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},t.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!w.detectDuplicates,I=!w.sortStable&&t.slice(0),t.sort(U),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return I=null,t},S=t.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},(_=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=k(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=X[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&X(t,(function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==j&&t.getAttribute("class")||"")}))},ATTR:function(e,n,i){return function(r){var a=t.attr(r,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,g,p=a!==o?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;p;){for(d=e;d=d[p];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=p="only"===t&&!g&&"nextSibling"}return!0}if(g=[o?m.firstChild:m.lastChild],o&&y){for(h=(c=(u=m[F]||(m[F]={}))[t]||[])[0]===V&&c[2],d=(f=c[0]===V&&c[1])&&m.childNodes[f];d=++f&&d&&d[p]||(h=f=0)||g.pop();)if(1===d.nodeType&&++h&&d===e){u[t]=[V,f,h];break}}else if(y&&(c=(e[F]||(e[F]={}))[t])&&c[0]===V)h=c[1];else for(;(d=++f&&d&&d[p]||(h=f=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[F]||(d[F]={}))[t]=[V,h]),d!==e)););return(h-=r)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,n){var r,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(n):a.length>1?(r=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i((function(t,e){for(var i,r=a(t,n),o=r.length;o--;)t[i=et.call(t,r[o])]=!(e[i]=r[o])})):function(t){return a(t,0,r)}):a}},pseudos:{not:i((function(t){var e=[],n=[],r=A(t.replace(st,"$1"));return r[F]?i((function(t,e,n,i){for(var a,o=r(t,null,i,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))})):function(t,i,a){return e[0]=t,r(e,null,a,n),!n.pop()}})),has:i((function(e){return function(n){return t(e,n).length>0}})),contains:i((function(t){return t=t.replace(wt,_t),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}})),lang:i((function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,_t).toLowerCase(),function(t){var n;do{if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===E},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c((function(){return[0]})),last:c((function(t,e){return[e-1]})),eq:c((function(t,e,n){return[n<0?n+e:n]})),even:c((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:c((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:c((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:c((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=l(b);return d.prototype=_.filters=_.pseudos,_.setFilters=new d,k=t.tokenize=function(e,n){var i,r,a,o,s,l,c,u=Y[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=_.preFilter;s;){for(o in i&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=ct.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length)),_.filter)!(r=ft[o].exec(s))||c[o]&&!(r=c[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):Y(e,l).slice(0)},A=t.compile=function(t,e){var n,i=[],r=[],a=G[t+" "];if(!a){for(e||(e=k(t)),n=e.length;n--;)(a=y(e[n]))[F]?i.push(a):r.push(a);(a=G(t,x(r,i))).selector=t}return a},M=t.select=function(t,e,n,i){var r,a,o,s,l,c="function"==typeof t&&t,d=!i&&k(t=c.selector||t);if(n=n||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&w.getById&&9===e.nodeType&&N&&_.relative[a[1].type]){if(!(e=(_.find.ID(o.matches[0].replace(wt,_t),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(r=ft.needsContext.test(t)?0:a.length;r--&&!_.relative[s=(o=a[r]).type];)if((l=_.find[s])&&(i=l(o.matches[0].replace(wt,_t),yt.test(a[0].type)&&u(e.parentNode)||e))){if(a.splice(r,1),!(t=i.length&&h(a)))return Q.apply(n,i),n;break}}return(c||A(t,d))(i,e,!N,n,yt.test(t)&&u(e.parentNode)||e),n},w.sortStable=F.split("").sort(U).join("")===F,w.detectDuplicates=!!D,P(),w.sortDetached=r((function(t){return 1&t.compareDocumentPosition(L.createElement("div"))})),r((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||a("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),w.attributes&&r((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||a("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),r((function(t){return null==t.getAttribute("disabled")}))||a(nt,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),t})),n(d,[],(function(){function t(t,n,i){var r,a;if(!t)return 0;if(i=i||t,t.length!==e){for(r=0,a=t.length;r<a;r++)if(!1===n.call(i,t[r],r,t))return 0}else for(r in t)if(t.hasOwnProperty(r)&&!1===n.call(i,t[r],r,t))return 0;return 1}function n(t,e,n){var i,r;for(i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return i;return-1}var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};return{isArray:i,toArray:function(t){var e,n,r=t;if(!i(t))for(r=[],e=0,n=t.length;e<n;e++)r[e]=t[e];return r},each:t,map:function(e,n){var i=[];return t(e,(function(t,r){i.push(n(t,r,e))})),i},filter:function(e,n){var i=[];return t(e,(function(t,r){n&&!n(t,r,e)||i.push(t)})),i},indexOf:function(t,e){var n,i;if(t)for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},reduce:function(t,e,n,i){var r=0;for(arguments.length<3&&(n=t[0]);r<t.length;r++)n=e.call(i,n,t[r],r);return n},findIndex:n,find:function(t,i,r){var a=n(t,i,r);return-1!==a?t[a]:e},last:function(t){return t[t.length-1]}}})),n(h,[l,d],(function(t,n){function i(t){return null===t||t===e?"":(""+t).replace(a,"")}function r(t,i){return i?!("array"!=i||!n.isArray(t))||typeof t==i:t!==e}var a=/^\s*|\s*$/g;return{trim:i,isArray:n.isArray,is:r,toArray:n.toArray,makeMap:function(t,e,n){var i;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},i=t.length;i--;)n[t[i]]={};return n},each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t,n){var i,r,a,o,s=arguments;for(i=1,r=s.length;i<r;i++)for(a in n=s[i])n.hasOwnProperty(a)&&(o=n[a])!==e&&(t[a]=o);return t},create:function(t,e,n){var i,r,a,o,s,l=this,c=0;if(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t),a=t[3].match(/(^|\.)(\w+)$/i)[2],!(r=l.createNS(t[3].replace(/\.\w+$/,""),n))[a]){if("static"==t[2])return r[a]=e,void(this.onCreate&&this.onCreate(t[2],t[3],r[a]));e[a]||(e[a]=function(){},c=1),r[a]=e[a],l.extend(r[a].prototype,e),t[5]&&(i=l.resolve(t[5]).prototype,o=t[5].match(/\.(\w+)$/i)[1],s=r[a],r[a]=c?function(){return i[o].apply(this,arguments)}:function(){return this.parent=i[o],s.apply(this,arguments)},r[a].prototype[a]=r[a],l.each(i,(function(t,e){r[a].prototype[e]=i[e]})),l.each(e,(function(t,e){i[e]?r[a].prototype[e]=function(){return this.parent=i[e],t.apply(this,arguments)}:e!=a&&(r[a].prototype[e]=t)}))),l.each(e.static,(function(t,e){r[a][e]=t}))}},walk:function t(e,i,r,a){a=a||this,e&&(r&&(e=e[r]),n.each(e,(function(e,n){return!1!==i.call(a,e,n,r)&&void t(e,i,r,a)})))},createNS:function(t,e){var n,i;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)e[i=t[n]]||(e[i]={}),e=e[i];return e},resolve:function(t,e){var n,i;for(e=e||window,n=0,i=(t=t.split(".")).length;n<i&&(e=e[t[n]]);n++);return e},explode:function(t,e){return!t||r(t,"array")?t:n.map(t.split(e||","),i)},_addCacheSuffix:function(e){var n=t.cacheSuffix;return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}}})),n(f,[c,u,h,l],(function(t,n,i,r){function a(t){return void 0!==t}function o(t){return"string"==typeof t}function s(t,e){var n,i,r;for(r=(e=e||w).createElement("div"),n=e.createDocumentFragment(),r.innerHTML=t;i=r.firstChild;)n.appendChild(i);return n}function l(t,e,n,i){var r;if(o(e))e=s(e,p(t[0]));else if(e.length&&!e.nodeType){if(e=d.makeArray(e),i)for(r=e.length-1;r>=0;r--)l(t,e[r],n,i);else for(r=0;r<e.length;r++)l(t,e[r],n,i);return t}if(e.nodeType)for(r=t.length;r--;)n.call(t[r],e);return t}function c(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function u(t,e,n){var i,r;return e=d(e)[0],t.each((function(){var t=this;n&&i==t.parentNode||(i=t.parentNode,r=e.cloneNode(!1),t.parentNode.insertBefore(r,t)),r.appendChild(t)})),t}function d(t,e){return new d.fn.init(t,e)}function h(t){return null===t||t===b?"":(""+t).replace(E,"")}function f(t,e){var n,i,r,a;if(t)if(void 0===(n=t.length)){for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(a=t[i],i,a))break}else for(r=0;r<n&&!1!==e.call(a=t[r],r,a);r++);return t}function g(t,e){var n=[];return f(t,(function(t,i){e(i,t)&&n.push(i)})),n}function p(t){return t?9==t.nodeType?t:t.ownerDocument:w}function m(t,n,i){var r=[],a=t[n];for("string"!=typeof i&&i instanceof d&&(i=i[0]);a&&9!==a.nodeType;){if(i!==e){if(a===i)break;if("string"==typeof i&&d(a).is(i))break}1===a.nodeType&&r.push(a),a=a[n]}return r}function v(t,n,i,r){var a=[];for(r instanceof d&&(r=r[0]);t;t=t[n])if(!i||t.nodeType===i){if(r!==e){if(t===r)break;if("string"==typeof r&&d(t).is(r))break}a.push(t)}return a}function y(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType==n)return t;return null}function x(t,e,n){f(n,(function(n,i){t[n]=t[n]||{},t[n][e]=i}))}var b,w=document,_=Array.prototype.push,S=Array.prototype.slice,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=t.Event,A=i.makeMap("children,contents,next,prev"),M=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),T=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),I={for:"htmlFor",class:"className",readonly:"readOnly"},D={float:"cssFloat"},P={},L={},E=/^\s*|\s*$/g;return d.fn=d.prototype={constructor:d,selector:"",context:null,length:0,init:function(t,e){var n,i,r=this;if(!t)return r;if(t.nodeType)return r.context=r[0]=t,r.length=1,r;if(e&&e.nodeType)r.context=e;else{if(e)return d(t).attr(e);r.context=e=document}if(o(t)){if(r.selector=t,!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:C.exec(t)))return d(e).find(t);if(n[1])for(i=s(t,p(e)).firstChild;i;)_.call(r,i),i=i.nextSibling;else{if(!(i=p(e).getElementById(n[2])))return r;if(i.id!==n[2])return r.find(t);r.length=1,r[0]=i}}else this.add(t,!1);return r},toArray:function(){return i.toArray(this)},add:function(t,e){var n,i,r=this;if(o(t))return r.add(d(t));if(!1!==e)for(n=d.unique(r.toArray().concat(d.makeArray(t))),r.length=n.length,i=0;i<n.length;i++)r[i]=n[i];else _.apply(r,d.makeArray(t));return r},attr:function(t,e){var n,i=this;if("object"==typeof t)f(t,(function(t,e){i.attr(t,e)}));else{if(!a(e)){if(i[0]&&1===i[0].nodeType){if((n=P[t])&&n.get)return n.get(i[0],t);if(T[t])return i.prop(t)?t:b;null===(e=i[0].getAttribute(t,2))&&(e=b)}return e}this.each((function(){var n;if(1===this.nodeType){if((n=P[t])&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}}))}return i},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=I[t]||t))f(t,(function(t,e){n.prop(t,e)}));else{if(!a(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each((function(){1==this.nodeType&&(this[t]=e)}))}return n},css:function(t,e){function n(t){return t.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()}))}function i(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t}))}var r,o,l=this;if("object"==typeof t)f(t,(function(t,e){l.css(t,e)}));else if(a(e))t=n(t),"number"!=typeof e||M[t]||(e+="px"),l.each((function(){var n=this.style;if((o=L[t])&&o.set)o.set(this,e);else{try{this.style[D[t]||t]=e}catch(l){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(i(t)):n.removeAttribute(t))}}));else{if(r=l[0],(o=L[t])&&o.get)return o.get(r);if(r.ownerDocument.defaultView)try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(i(t))}catch(s){return b}else if(r.currentStyle)return r.currentStyle[n(t)]}return l},remove:function(){for(var t,e=this.length;e--;)k.clean(t=this[e]),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this.length;e--;)for(t=this[e];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e,n=this;if(a(t)){e=n.length;try{for(;e--;)n[e].innerHTML=t}catch(i){d(n[e]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(t){var e,n=this;if(a(t)){for(e=n.length;e--;)"innerText"in n[e]?n[e].innerText=t:n[0].textContent=t;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)}))},prepend:function(){return l(this,arguments,(function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)}),!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?l(t,arguments,(function(t){this.parentNode.insertBefore(t,this)})):t},after:function(){var t=this;return t[0]&&t[0].parentNode?l(t,arguments,(function(t){this.parentNode.insertBefore(t,this.nextSibling)}),!0):t},appendTo:function(t){return d(t).append(this),this},prependTo:function(t){return d(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return u(this,t)},wrapAll:function(t){return u(this,t,!0)},wrapInner:function(t){return this.each((function(){d(this).contents().wrapAll(t)})),this},unwrap:function(){return this.parent().each((function(){d(this).replaceWith(this.childNodes)}))},clone:function(){var t=[];return this.each((function(){t.push(this.cloneNode(!0))})),d(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!=typeof t||(-1!==t.indexOf(" ")?f(t.split(" "),(function(){n.toggleClass(this,e)})):n.each((function(n,i){var r,a;(a=c(i,t))!==e&&(r=i.className,a?i.className=h((" "+r+" ").replace(" "+t+" "," ")):i.className+=r?" "+t:t)}))),n},hasClass:function(t){return c(this[0],t)},each:function(t){return f(this,t)},on:function(t,e){return this.each((function(){k.bind(this,t,e)}))},off:function(t,e){return this.each((function(){k.unbind(this,t,e)}))},trigger:function(t){return this.each((function(){"object"==typeof t?k.fire(this,t.type,t):k.fire(this,t)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new d(S.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,i=[];for(e=0,n=this.length;e<n;e++)d.find(t,this[e],i);return d(i)},filter:function(t){return d("function"==typeof t?g(this.toArray(),(function(e,n){return t(n,e)})):d.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof d&&(t=t[0]),this.each((function(n,i){for(;i;){if("string"==typeof t&&d(i).is(t)){e.push(i);break}if(i==t){e.push(i);break}i=i.parentNode}})),d(e)},offset:function(t){var e,n,i,r,a=0,o=0;return t?this.css(t):((e=this[0])&&(i=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(a=(r=e.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,o=r.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:a,top:o})},push:_,sort:[].sort,splice:[].splice},i.extend(d,{extend:i.extend,makeArray:function(t){return function(t){return t&&t==t.window}(t)||t.nodeType?[t]:i.toArray(t)},inArray:function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},isArray:i.isArray,each:f,trim:h,grep:g,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(t,e,n){var i=e.length;for(n&&(t=":not("+t+")");i--;)1!=e[i].nodeType&&e.splice(i,1);return 1===e.length?d.find.matchesSelector(e[0],t)?[e[0]]:[]:d.find.matches(t,e)}}),f({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return m(t,"parentNode")},next:function(t){return y(t,"nextSibling",1)},prev:function(t){return y(t,"previousSibling",1)},children:function(t){return v(t.firstChild,"nextSibling",1)},contents:function(t){return i.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},(function(t,e){d.fn[t]=function(n){var i=[];return this.each((function(){var t=e.call(i,this,n,i);t&&(d.isArray(t)?i.push.apply(i,t):i.push(t))})),this.length>1&&(A[t]||(i=d.unique(i)),0===t.indexOf("parents")&&(i=i.reverse())),i=d(i),n?i.filter(n):i}})),f({parentsUntil:function(t,e){return m(t,"parentNode",e)},nextUntil:function(t,e){return v(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return v(t,"previousSibling",1,e).slice(1)}},(function(t,e){d.fn[t]=function(n,i){var r=[];return this.each((function(){var t=e.call(r,this,n,r);t&&(d.isArray(t)?r.push.apply(r,t):r.push(t))})),this.length>1&&(r=d.unique(r),0!==t.indexOf("parents")&&"prevUntil"!==t||(r=r.reverse())),r=d(r),i?r.filter(i):r}})),d.fn.is=function(t){return!!t&&this.filter(t).length>0},d.fn.init.prototype=d.fn,d.overrideDefaults=function(t){function e(i,r){return n=n||t(),0===arguments.length&&(i=n.element),r||(r=n.context),new e.fn.init(i,r)}var n;return d.extend(e,this),e},r.ie&&r.ie<8&&(x(P,"get",{maxlength:function(t){var e=t.maxLength;return 2147483647===e?b:e},size:function(t){var e=t.size;return 20===e?b:e},class:function(t){return t.className},style:function(t){var e=t.style.cssText;return 0===e.length?b:e}}),x(P,"set",{class:function(t,e){t.className=e},style:function(t,e){t.style.cssText=e}})),r.ie&&r.ie<9&&(D.float="styleFloat",x(L,"set",{opacity:function(t,e){var n=t.style;null===e||""===e?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*e+")")}})),d.attrHooks=P,d.cssHooks=L,d})),n(g,[],(function(){return function(t,e){function n(t,e,n,i){function r(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t}return"#"+r(e)+r(n)+r(i)}var i,r,a,o,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,d={};for(t=t||{},e&&(a=e.getValidStyles(),o=e.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<r.length;i++)d[r[i]]="\ufeff"+i,d["\ufeff"+i]=r[i];return{toHex:function(t){return t.replace(s,n)},parse:function(e){function r(t,e,n){var r,a,o,s;if((r=b[t+"-top"+e])&&(a=b[t+"-right"+e])&&(o=b[t+"-bottom"+e])&&(s=b[t+"-left"+e])){var l=[r,a,o,s];for(i=l.length-1;i--&&l[i]===l[i+1];);i>-1&&n||(b[t+e]=-1==i?l[0]:l.join(" "),delete b[t+"-top"+e],delete b[t+"-right"+e],delete b[t+"-bottom"+e],delete b[t+"-left"+e])}}function a(t){var e,n=b[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return b[t]=n[0],!0}}function o(t){return x=!0,d[t]}function h(t,e){return x&&(t=t.replace(/\uFEFF[0-9]/g,(function(t){return d[t]}))),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t}function f(t){return String.fromCharCode(parseInt(t.slice(1),16))}function g(t){return t.replace(/\\[0-9a-f]+/gi,f)}function p(e,n,i,r,a,o){if(a=a||o)return"'"+(a=h(a)).replace(/\'/g,"\\'")+"'";if(n=h(n||i||r),!t.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return w&&(n=w.call(_,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var m,v,y,x,b={},w=t.url_converter,_=t.url_converter_scope||this;if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(t){return t.replace(/[;:]/g,o)}));m=c.exec(e);)if(c.lastIndex=m.index+m[0].length,v=m[1].replace(u,"").toLowerCase(),y=m[2].replace(u,""),v&&y){if(v=g(v),y=g(y),-1!==v.indexOf("\ufeff")||-1!==v.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"==v||/expression\s*\(|\/\*|\*\//.test(y)))continue;"font-weight"===v&&"700"===y?y="bold":"color"!==v&&"background-color"!==v||(y=y.toLowerCase()),y=(y=y.replace(s,n)).replace(l,p),b[v]=x?h(y,!0):y}r("border","",!0),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),function(t,e,n,i){a(e)&&a(n)&&a(i)&&(b.border=b[e]+" "+b[n]+" "+b[i],delete b[e],delete b[n],delete b[i])}(0,"border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(t,e){function n(e){var n,i,r,o;if(n=a[e])for(i=0,r=n.length;i<r;i++)(o=t[e=n[i]])&&(l+=(l.length>0?" ":"")+e+": "+o+";")}function i(t,e){var n;return!((n=o["*"])&&n[t]||(n=o[e],n&&n[t]))}var r,s,l="";if(e&&a)n("*"),n(e);else for(r in t)!(s=t[r])||o&&!i(r,e)||(l+=(l.length>0?" ":"")+r+": "+s+";");return l}}}})),n(p,[],(function(){return function(t,e){function n(t,n,i,r){var a,o;if(t){if(!r&&t[n])return t[n];if(t!=e){if(a=t[i])return a;for(o=t.parentNode;o&&o!=e;o=o.parentNode)if(a=o[i])return a}}}var i=t;this.current=function(){return i},this.next=function(t){return i=n(i,"firstChild","nextSibling",t)},this.prev=function(t){return i=n(i,"lastChild","previousSibling",t)},this.prev2=function(t){return i=function(t,n,i,r){var a,o,s;if(t){if(a=t.previousSibling,e&&a===e)return;if(a){if(!r)for(s=a[n];s;s=s[n])if(!s[n])return s;return a}if((o=t.parentNode)&&o!==e)return o}}(i,"lastChild",0,t)}}})),n(m,[h],(function(t){function e(n){function i(){return _.createDocumentFragment()}function r(t,e){d(k,t,e)}function a(t,e){d(A,t,e)}function o(t){r(t.parentNode,L(t))}function s(t){a(t.parentNode,L(t)+1)}function l(){return h(S)}function c(t,e){var n;if(3==t.nodeType)return t;if(e<0)return t;for(n=t.firstChild;n&&e>0;)--e,n=n.nextSibling;return n||t}function u(t,e,i,r){var a,o,s,l,c,u;if(t==i)return e==r?0:e<r?-1:1;for(a=i;a&&a.parentNode!=t;)a=a.parentNode;if(a){for(o=0,s=t.firstChild;s!=a&&o<e;)o++,s=s.nextSibling;return e<=o?-1:1}for(a=t;a&&a.parentNode!=i;)a=a.parentNode;if(a){for(o=0,s=i.firstChild;s!=a&&o<r;)o++,s=s.nextSibling;return o<r?-1:1}for(l=n.findCommonAncestor(t,i),c=t;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=i;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function d(t,e,i){var r,a;for(t?(w[T]=e,w[M]=i):(w[I]=e,w[D]=i),r=w[I];r.parentNode;)r=r.parentNode;for(a=w[T];a.parentNode;)a=a.parentNode;a==r?u(w[T],w[M],w[I],w[D])>0&&w.collapse(t):w.collapse(t),w.collapsed=w[T]==w[I]&&w[M]==w[D],w.commonAncestorContainer=n.findCommonAncestor(w[T],w[I])}function h(t){var e,n,i,r,a,o,s,l=0,c=0;if(w[T]==w[I])return f(t);for(n=(e=w[I]).parentNode;n;e=n,n=n.parentNode){if(n==w[T])return g(e,t);++l}for(n=(e=w[T]).parentNode;n;e=n,n=n.parentNode){if(n==w[I])return p(e,t);++c}for(i=c-l,r=w[T];i>0;)r=r.parentNode,i--;for(a=w[I];i<0;)a=a.parentNode,i++;for(o=r.parentNode,s=a.parentNode;o!=s;o=o.parentNode,s=s.parentNode)r=o,a=s;return m(r,a,t)}function f(t){var e,n,r,a,o,s,l,u;if(t!=C&&(e=i()),w[M]==w[D])return e;if(3==w[T].nodeType){if(n=w[T].nodeValue.substring(w[M],w[D]),t!=S&&(r=w[T],u=w[D]-w[M],0===(l=w[M])&&u>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(l,u),w.collapse(k)),t==C)return;return n.length>0&&e.appendChild(_.createTextNode(n)),e}for(r=c(w[T],w[M]),a=w[D]-w[M];r&&a>0;)o=r.nextSibling,s=b(r,t),e&&e.appendChild(s),--a,r=o;return t!=S&&w.collapse(k),e}function g(t,e){var n,r,a,o,s;if(e!=C&&(n=i()),r=v(t,e),n&&n.appendChild(r),(a=L(t)-w[M])<=0)return e!=S&&(w.setEndBefore(t),w.collapse(A)),n;for(r=t.previousSibling;a>0;)o=r.previousSibling,s=b(r,e),n&&n.insertBefore(s,n.firstChild),--a,r=o;return e!=S&&(w.setEndBefore(t),w.collapse(A)),n}function p(t,e){var n,r,a,o,s,l;for(e!=C&&(n=i()),a=y(t,e),n&&n.appendChild(a),r=L(t),++r,o=w[D]-r,a=t.nextSibling;a&&o>0;)s=a.nextSibling,l=b(a,e),n&&n.appendChild(l),--o,a=s;return e!=S&&(w.setStartAfter(t),w.collapse(k)),n}function m(t,e,n){var r,a,o,s,l,c;for(n!=C&&(a=i()),r=y(t,n),a&&a.appendChild(r),o=L(t),s=L(e)-++o,l=t.nextSibling;s>0;)c=l.nextSibling,r=b(l,n),a&&a.appendChild(r),l=c,--s;return r=v(e,n),a&&a.appendChild(r),n!=S&&(w.setStartAfter(t),w.collapse(k)),a}function v(t,e){var n,i,r,a,o,s=c(w[I],w[D]-1),l=s!=w[I];if(s==t)return x(s,l,A,e);for(i=x(n=s.parentNode,A,A,e);n;){for(;s;)r=s.previousSibling,a=x(s,l,A,e),e!=C&&i.insertBefore(a,i.firstChild),l=k,s=r;if(n==t)return i;s=n.previousSibling,o=x(n=n.parentNode,A,A,e),e!=C&&o.appendChild(i),i=o}}function y(t,e){var n,i,r,a,o,s=c(w[T],w[M]),l=s!=w[T];if(s==t)return x(s,l,k,e);for(i=x(n=s.parentNode,A,k,e);n;){for(;s;)r=s.nextSibling,a=x(s,l,k,e),e!=C&&i.appendChild(a),l=k,s=r;if(n==t)return i;s=n.nextSibling,o=x(n=n.parentNode,A,k,e),e!=C&&o.appendChild(i),i=o}}function x(t,e,i,r){var a,o,s,l,c;if(e)return b(t,r);if(3==t.nodeType){if(a=t.nodeValue,i?(o=a.substring(l=w[M]),s=a.substring(0,l)):(o=a.substring(0,l=w[D]),s=a.substring(l)),r!=S&&(t.nodeValue=s),r==C)return;return(c=n.clone(t,A)).nodeValue=o,c}return r!=C?n.clone(t,A):void 0}function b(t,e){return e!=C?e==S?n.clone(t,k):t:void t.parentNode.removeChild(t)}var w=this,_=n.doc,S=1,C=2,k=!0,A=!1,M="startOffset",T="startContainer",I="endContainer",D="endOffset",P=t.extend,L=n.nodeIndex;return P(w,{startContainer:_,startOffset:0,endContainer:_,endOffset:0,collapsed:k,commonAncestorContainer:_,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:a,setStartBefore:o,setStartAfter:function(t){r(t.parentNode,L(t)+1)},setEndBefore:function(t){a(t.parentNode,L(t))},setEndAfter:s,collapse:function(t){t?(w[I]=w[T],w[D]=w[M]):(w[T]=w[I],w[M]=w[D]),w.collapsed=k},selectNode:function(t){o(t),s(t)},selectNodeContents:function(t){r(t,0),a(t,1===t.nodeType?t.childNodes.length:t.nodeValue.length)},compareBoundaryPoints:function(t,e){var n=w[T],i=w[M],r=w[I],a=w[D],o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset;return 0===t?u(n,i,o,s):1===t?u(r,a,o,s):2===t?u(r,a,l,c):3===t?u(n,i,l,c):void 0},deleteContents:function(){h(C)},extractContents:function(){return h(0)},cloneContents:l,insertNode:function(t){var e,i,r=this[T],a=this[M];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(i=r.childNodes[a]),i?r.insertBefore(t,i):3==r.nodeType?n.insertAfter(t,r):r.appendChild(t)):a?a>=r.nodeValue.length?n.insertAfter(t,r):(e=r.splitText(a),r.parentNode.insertBefore(t,e)):r.parentNode.insertBefore(t,r)},surroundContents:function(t){var e=w.extractContents();w.insertNode(t),t.appendChild(e),w.selectNode(t)},cloneRange:function(){return P(new e(n),{startContainer:w[T],startOffset:w[M],endContainer:w[I],endOffset:w[D],collapsed:w.collapsed,commonAncestorContainer:w.commonAncestorContainer})},toStringIE:function(){return n.create("body",null,l()).outerText}}),w}return e.prototype.toString=function(){return this.toStringIE()},e})),n(v,[h],(function(t){function e(t,e){var n,r,a,o={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)r=String.fromCharCode(parseInt(t[n],e)),i[r]||(o[r]=a="&"+t[n+1]+";",o[a]=r);return o}}var n,i,r,a=t.makeMap,o=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\"\']/g,c=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,u={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},n=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var d={encodeRaw:function(t,e){return t.replace(e?o:s,(function(t){return i[t]||t}))},encodeAllRaw:function(t){return(""+t).replace(l,(function(t){return i[t]||t}))},encodeNumeric:function(t,e){return t.replace(e?o:s,(function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":i[t]||"&#"+t.charCodeAt(0)+";"}))},encodeNamed:function(t,e,r){return r=r||n,t.replace(e?o:s,(function(t){return i[t]||r[t]||t}))},getEncodeFunc:function(t,r){return r=e(r)||n,(t=a(t.replace(/\+/g,","))).named&&t.numeric?function(t,e){return t.replace(e?o:s,(function(t){return i[t]||r[t]||"&#"+t.charCodeAt(0)+";"||t}))}:t.named?r?function(t,e){return d.encodeNamed(t,e,r)}:d.encodeNamed:t.numeric?d.encodeNumeric:d.encodeRaw},decode:function(t){return t.replace(c,(function(t,e){return e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):u[e]||String.fromCharCode(e):r[t]||n[t]||function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.textContent||e.innerText||t}(t)}))}};return d})),n(y,[h,s],(function(t,e){return function(n,i){function r(t){n.getElementsByTagName("head")[0].appendChild(t)}var a,o=0,s={};a=(i=i||{}).maxLoadTime||5e3,this.load=function(i,l,c){function u(){for(var t=v.passed,e=t.length;e--;)t[e]();v.status=2,v.passed=[],v.failed=[]}function d(){for(var t=v.failed,e=t.length;e--;)t[e]();v.status=3,v.passed=[],v.failed=[]}function h(t,n){t()||((new Date).getTime()-m<a?e.setTimeout(n):d())}function f(){h((function(){for(var t,e,i=n.styleSheets,r=i.length;r--;)if((e=(t=i[r]).ownerNode?t.ownerNode:t.owningElement)&&e.id===g.id)return u(),!0}),f)}var g,p,m,v;if(i=t._addCacheSuffix(i),s[i]?v=s[i]:s[i]=v={passed:[],failed:[]},l&&v.passed.push(l),c&&v.failed.push(c),1!=v.status){if(2==v.status)return void u();if(3==v.status)return void d();if(v.status=1,(g=n.createElement("link")).rel="stylesheet",g.type="text/css",g.id="u"+o++,g.async=!1,g.defer=!1,m=(new Date).getTime(),"onload"in g&&!function(){var t=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(t&&t[1]<536)}())g.onload=f,g.onerror=d;else{if(navigator.userAgent.indexOf("Firefox")>0)return(p=n.createElement("style")).textContent='@import "'+i+'"',function t(){h((function(){try{var t=p.sheet.cssRules;return u(),!!t}catch(e){}}),t)}(),void r(p);f()}r(g),g.href=i}}}})),n(x,[u,f,g,c,p,m,v,l,h,y],(function(t,n,i,r,a,o,s,l,c,u){function d(t,e){var n=e.attr("style");(n=t.serializeStyle(t.parseStyle(n),e[0].nodeName))||(n=null),e.attr("data-mce-style",n)}function h(t,e){var n,i,r=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)i=t.nodeType,(!e||3!=i||i!=n&&t.nodeValue.length)&&(r++,n=i);return r}function f(t,e){var a,o=this;o.doc=t,o.win=window,o.files={},o.counter=0,o.stdMode=!y||t.documentMode>=8,o.boxModel=!y||"CSS1Compat"==t.compatMode||o.stdMode,o.styleSheetLoader=new u(t),o.boundEvents=[],o.settings=e=e||{},o.schema=e.schema,o.styles=new i({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),o.fixDoc(t),o.events=e.ownEvents?new r(e.proxy):r.Event,o.attrHooks=function(t,e){var n,i={},r=e.keep_values;return n={set:function(n,i,r){e.url_converter&&(i=e.url_converter.call(e.url_converter_scope||t,i,r,n[0])),n.attr("data-mce-"+r,i).attr(r,i)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},i={style:{set:function(t,e){return null!==e&&"object"==typeof e?void t.css(e):(r&&t.attr("data-mce-style",e),void t.attr("style",e))},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return t.serializeStyle(t.parseStyle(n),e[0].nodeName)}}},r&&(i.href=i.src=n),i}(o,e),a=e.schema?e.schema.getBlockElements():{},o.$=n.overrideDefaults((function(){return{context:t,element:o.getRoot()}})),o.isBlock=function(t){if(!t)return!1;var e=t.nodeType;return e?!(1!==e||!a[t.nodeName]):!!a[t]}}var g=c.each,p=c.is,m=c.grep,v=c.trim,y=l.ie,x=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return f.prototype={$$:function(t){return"string"==typeof t&&(t=this.get(t)),this.$(t)},root:null,fixDoc:function(t){var e,n=this.settings;if(y&&n.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,(function(e){t.createElement(e)})),n.schema.getCustomElements())t.createElement(e)},clone:function(t,e){var n,i=this;return!y||1!==t.nodeType||e?t.cloneNode(e):e?n.firstChild:(n=i.doc.createElement(t.nodeName),g(i.getAttribs(t),(function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))})),n)},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(t){var e,n;return e=(t=t||this.win).document,n=this.boxModel?e.documentElement:e.body,{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(t){var e,n,i=this;return t=i.get(t),e=i.getPos(t),n=i.getSize(t),{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:function(t){var e,n,i=this;return t=i.get(t),e=i.getStyle(t,"width"),n=i.getStyle(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},getParent:function(t,e,n){return this.getParents(t,e,n,!1)},getParents:function(t,n,i,r){var a,o=this,s=[];for(t=o.get(t),r=r===e,i=i||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),p(n,"string")&&(a=n,n="*"===n?function(t){return 1==t.nodeType}:function(t){return o.is(t,a)});t&&t!=i&&t.nodeType&&9!==t.nodeType;){if(!n||n(t)){if(!r)return t;s.push(t)}t=t.parentNode}return r?s:null},get:function(t){var e;return t&&this.doc&&"string"==typeof t&&(e=t,(t=this.doc.getElementById(t))&&t.id!==e)?this.doc.getElementsByName(e)[1]:t},getNext:function(t,e){return this._findSib(t,e,"nextSibling")},getPrev:function(t,e){return this._findSib(t,e,"previousSibling")},select:function(e,n){var i=this;return t(e,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var r;if(n.length===e){if("*"===i)return 1==n.nodeType;if(x.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),r=i.length-1;r>=0;r--)if(i[r]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var a=n.nodeType?[n]:n;return t(i,a[0].ownerDocument||a[0],null,a).length>0},add:function(t,e,n,i,r){var a=this;return this.run(t,(function(t){var o;return o=p(e,"string")?a.doc.createElement(e):e,a.setAttribs(o,n),i&&(i.nodeType?o.appendChild(i):a.setHTML(o,i)),r?o:t.appendChild(o)}))},create:function(t,e,n){return this.add(this.doc.createElement(t),t,e,n,1)},createHTML:function(t,e,n){var i,r="";for(i in r+="<"+t,e)e.hasOwnProperty(i)&&null!=e[i]&&(r+=" "+i+'="'+this.encode(e[i])+'"');return void 0!==n?r+">"+n+"</"+t+">":r+" />"},createFragment:function(t){var e,n,i,r=this.doc;for(i=r.createElement("div"),e=r.createDocumentFragment(),t&&(i.innerHTML=t);n=i.firstChild;)e.appendChild(n);return e},remove:function(t,e){return t=this.$$(t),e?t.each((function(){for(var t;t=this.firstChild;)3==t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)})).remove():t.remove(),t.length>1?t.toArray():t[0]},setStyle:function(t,e,n){t=this.$$(t).css(e,n),this.settings.update_styles&&d(this,t)},getStyle:function(t,n,i){return t=this.$$(t),i?t.css(n):("float"==(n=n.replace(/-(\D)/g,(function(t,e){return e.toUpperCase()})))&&(n=l.ie&&l.ie<12?"styleFloat":"cssFloat"),t[0]&&t[0].style?t[0].style[n]:e)},setStyles:function(t,e){t=this.$$(t).css(e),this.settings.update_styles&&d(this,t)},removeAllAttribs:function(t){return this.run(t,(function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))}))},setAttrib:function(t,e,n){var i,r,a=this,o=a.settings;""===n&&(n=null),i=(t=a.$$(t)).attr(e),t.length&&((r=a.attrHooks[e])&&r.set?r.set(t,n,e):t.attr(e,n),i!=n&&o.onSetAttrib&&o.onSetAttrib({attrElm:t,attrName:e,attrValue:n}))},setAttribs:function(t,e){var n=this;n.$$(t).each((function(t,i){g(e,(function(t,e){n.setAttrib(i,e,t)}))}))},getAttrib:function(t,e,n){var i,r;return(t=this.$$(t)).length&&(r=(i=this.attrHooks[e])&&i.get?i.get(t,e):t.attr(e)),void 0===r&&(r=n||""),r},getPos:function(t,e){var i,r,a=this,o=0,s=0,l=a.doc,c=l.body;if(e=e||c,t=a.get(t)){if(e===c&&t.getBoundingClientRect&&"static"===n(c).css("position"))return{x:o=(r=t.getBoundingClientRect()).left+(l.documentElement.scrollLeft||c.scrollLeft)-(e=a.boxModel?l.documentElement:c).clientLeft,y:s=r.top+(l.documentElement.scrollTop||c.scrollTop)-e.clientTop};for(i=t;i&&i!=e&&i.nodeType;)o+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!=e&&i.nodeType;)o-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:o,y:s}},parseStyle:function(t){return this.styles.parse(t)},serializeStyle:function(t,e){return this.styles.serialize(t,e)},addStyle:function(t){var e,n,i=this.doc;if(this!==f.DOM&&i===document){var r=f.DOM.addedStyles;if((r=r||[])[t])return;r[t]=!0,f.DOM.addedStyles=r}(n=i.getElementById("mceDefaultStyles"))||((n=i.createElement("style")).id="mceDefaultStyles",n.type="text/css",(e=i.getElementsByTagName("head")[0]).firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(i.createTextNode(t))},loadCSS:function(t){var e,n=this,i=n.doc;return n!==f.DOM&&i===document?void f.DOM.loadCSS(t):(t||(t=""),e=i.getElementsByTagName("head")[0],void g(t.split(","),(function(t){var r;t=c._addCacheSuffix(t),n.files[t]||(n.files[t]=!0,r=n.create("link",{rel:"stylesheet",href:t}),y&&i.documentMode&&i.recalc&&(r.onload=function(){i.recalc&&i.recalc(),r.onload=null}),e.appendChild(r))})))},addClass:function(t,e){this.$$(t).addClass(e)},removeClass:function(t,e){this.toggleClass(t,e,!1)},hasClass:function(t,e){return this.$$(t).hasClass(e)},toggleClass:function(t,e,i){this.$$(t).toggleClass(e,i).each((function(){""===this.className&&n(this).attr("class",null)}))},show:function(t){this.$$(t).show()},hide:function(t){this.$$(t).hide()},isHidden:function(t){return"none"==this.$$(t).css("display")},uniqueId:function(t){return(t||"mce_")+this.counter++},setHTML:function(t,e){t=this.$$(t),y?t.each((function(t,i){if(!1!==i.canHaveHTML){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+e,i.removeChild(i.firstChild)}catch(r){n("<div></div>").html("<br>"+e).contents().slice(1).appendTo(i)}return e}})):t.html(e)},getOuterHTML:function(t){return 1==(t=this.get(t)).nodeType&&"outerHTML"in t?t.outerHTML:n("<div></div>").append(n(t).clone()).html()},setOuterHTML:function(t,e){var i=this;i.$$(t).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}i.remove(n(this).html(e),!0)}))},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(t,e){return e=this.get(e),this.run(t,(function(t){var n,i;return n=e.parentNode,(i=e.nextSibling)?n.insertBefore(t,i):n.appendChild(t),t}))},replace:function(t,e,n){return this.run(e,(function(e){return p(e,"array")&&(t=t.cloneNode(!0)),n&&g(m(e.childNodes),(function(e){t.appendChild(e)})),e.parentNode.replaceChild(t,e)}))},rename:function(t,e){var n,i=this;return t.nodeName!=e.toUpperCase()&&(n=i.create(e),g(i.getAttribs(t),(function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))})),i.replace(n,t,1)),n||t},findCommonAncestor:function(t,e){for(var n,i=t;i;){for(n=e;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&t.ownerDocument?t.ownerDocument.documentElement:i},toHex:function(t){return this.styles.toHex(c.trim(t))},run:function(t,e,n){var i,r=this;return"string"==typeof t&&(t=r.get(t)),!!t&&(n=n||this,t.nodeType||!t.length&&0!==t.length?e.call(n,t):(i=[],g(t,(function(t,a){t&&("string"==typeof t&&(t=r.get(t)),i.push(e.call(n,t,a)))})),i))},getAttribs:function(t){var e;return(t=this.get(t))?y?(e=[],"OBJECT"==t.nodeName?t.attributes:("OPTION"===t.nodeName&&this.getAttrib(t,"selected")&&e.push({specified:1,nodeName:"selected"}),t.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,(function(t){e.push({specified:1,nodeName:t})})),e)):t.attributes:[]},isEmpty:function(t,e){var n,i,r,o,s,l,c=this,u=0;if(t=t.firstChild){s=new a(t,t.parentNode),e=e||(c.schema?c.schema.getNonEmptyElements():null),o=c.schema?c.schema.getWhiteSpaceElements():{};do{if(1===(r=t.nodeType)){var d=t.getAttribute("data-mce-bogus");if(d){t=s.next("all"===d);continue}if(l=t.nodeName.toLowerCase(),e&&e[l]){if("br"===l){u++,t=s.next();continue}return!1}for(n=(i=c.getAttribs(t)).length;n--;)if("name"===(l=i[n].nodeName)||"data-mce-bookmark"===l)return!1}if(8==r)return!1;if(3===r&&!b.test(t.nodeValue))return!1;if(3===r&&t.parentNode&&o[t.parentNode.nodeName]&&b.test(t.nodeValue))return!1;t=s.next()}while(t)}return u<=1},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new o(this)},nodeIndex:h,split:function(t,e,n){function i(t){var e,n=t.childNodes,r=t.nodeType;if(1!=r||"bookmark"!=t.getAttribute("data-mce-type")){for(e=n.length-1;e>=0;e--)i(n[e]);if(9!=r){if(3==r&&t.nodeValue.length>0){var a=v(t.nodeValue).length;if(!s.isBlock(t.parentNode)||a>0||0===a&&function(t){return t.previousSibling&&"SPAN"==t.previousSibling.nodeName&&t.nextSibling&&"SPAN"==t.nextSibling.nodeName}(t))return}else if(1==r&&(1==(n=t.childNodes).length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(n[0],t),n.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;s.remove(t)}return t}}var r,a,o,s=this,l=s.createRng();if(t&&e)return l.setStart(t.parentNode,s.nodeIndex(t)),l.setEnd(e.parentNode,s.nodeIndex(e)),r=l.extractContents(),(l=s.createRng()).setStart(e.parentNode,s.nodeIndex(e)+1),l.setEnd(t.parentNode,s.nodeIndex(t)+1),a=l.extractContents(),(o=t.parentNode).insertBefore(i(r),t),o.insertBefore(n||e,t),o.insertBefore(i(a),t),s.remove(t),n||e},bind:function(t,e,n,i){var r=this;if(c.isArray(t)){for(var a=t.length;a--;)t[a]=r.bind(t[a],e,n,i);return t}return!r.settings.collect||t!==r.doc&&t!==r.win||r.boundEvents.push([t,e,n,i]),r.events.bind(t,e,n,i||r)},unbind:function(t,e,n){var i,r=this;if(c.isArray(t)){for(i=t.length;i--;)t[i]=r.unbind(t[i],e,n);return t}if(r.boundEvents&&(t===r.doc||t===r.win))for(i=r.boundEvents.length;i--;){var a=r.boundEvents[i];t!=a[0]||e&&e!=a[1]||n&&n!=a[2]||this.events.unbind(a[0],a[1],a[2])}return this.events.unbind(t,e,n)},fire:function(t,e,n){return this.events.fire(t,e,n)},getContentEditable:function(t){var e;return t&&1==t.nodeType?(e=t.getAttribute("data-mce-contenteditable"))&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null:null},getContentEditableParent:function(t){for(var e=this.getRoot(),n=null;t&&t!==e&&null===(n=this.getContentEditable(t));t=t.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var n=e.boundEvents.length;n--;){var i=e.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}e.boundEvents=null}t.setDocument&&t.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},_findSib:function(t,e,n){var i=this,r=e;if(t)for("string"==typeof r&&(r=function(t){return i.is(t,e)}),t=t[n];t;t=t[n])if(r(t))return t;return null}},f.DOM=new f(document),f.nodeIndex=h,f})),n(b,[x,h],(function(t,e){function n(){function t(t,n,r){function a(){c.remove(l),s&&(s.onreadystatechange=s.onload=s=null),n()}var s,l,c=i;l=c.uniqueId(),(s=document.createElement("script")).id=l,s.type="text/javascript",s.src=e._addCacheSuffix(t),"onreadystatechange"in s?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&a()}:s.onload=a,s.onerror=function(){o(r)?r():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n,s={},l=[],c={},u=[],d=0;this.isDone=function(t){return 2==s[t]},this.markDone=function(t){s[t]=2},this.add=this.load=function(t,e,i,r){s[t]==n&&(l.push(t),s[t]=0),e&&(c[t]||(c[t]=[]),c[t].push({success:e,failure:r,scope:i||this}))},this.remove=function(t){delete s[t],delete c[t]},this.loadQueue=function(t,e,n){this.loadScripts(l,t,e,n)},this.loadScripts=function(e,i,l,h){function f(t,e){r(c[e],(function(e){o(e[t])&&e[t].call(e.scope)})),c[e]=n}var g,p=[];u.push({success:i,failure:h,scope:l||this}),(g=function(){var n=a(e);e.length=0,r(n,(function(e){return 2===s[e]?void f("success",e):3===s[e]?void f("failure",e):void(1!==s[e]&&(s[e]=1,d++,t(e,(function(){s[e]=2,d--,f("success",e),g()}),(function(){s[e]=3,d--,p.push(e),f("failure",e),g()}))))})),d||(r(u,(function(t){0===p.length?o(t.success)&&t.success.call(t.scope):o(t.failure)&&t.failure.call(t.scope,p)})),u.length=0)})()}}var i=t.DOM,r=e.each,a=e.grep,o=function(t){return"function"==typeof t};return n.ScriptLoader=new n,n})),n(w,[b,h],(function(t,n){function i(){var t=this;t.items=[],t.urls={},t.lookup={}}var r=n.each;return i.prototype={get:function(t){return this.lookup[t]?this.lookup[t].instance:e},dependencies:function(t){var e;return this.lookup[t]&&(e=this.lookup[t].dependencies),e||[]},requireLangPack:function(e,n){var r=i.language;if(r&&!1!==i.languageLoad){if(n)if(-1!=(n=","+n+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1==n.indexOf(","+r+","))return;t.ScriptLoader.add(this.urls[e]+"/langs/"+r+".js")}},add:function(t,e,n){return this.items.push(e),this.lookup[t]={instance:e,dependencies:n},e},remove:function(t){delete this.urls[t],delete this.lookup[t]},createUrl:function(t,e){return"object"==typeof e?e:{prefix:t.prefix,resource:e,suffix:t.suffix}},addComponents:function(e,n){var i=this.urls[e];r(n,(function(e){t.ScriptLoader.add(i+"/"+e)}))},load:function(n,a,o,s,l){function c(){var i=u.dependencies(n);r(i,(function(t){var n=u.createUrl(a,t);u.load(n.resource,n,e,e)})),o&&o.call(s||t)}var u=this,d=a;u.urls[n]||("object"==typeof a&&(d=a.prefix+a.resource+a.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=i.baseURL+"/"+d),u.urls[n]=d.substring(0,d.lastIndexOf("/")),u.lookup[n]?c():t.ScriptLoader.add(d,c,s,l))}},i.PluginManager=new i,i.ThemeManager=new i,i})),n(_,[],(function(){function t(t){return function(e){return!!e&&e.nodeType==t}}function e(t){return t=t.toLowerCase().split(" "),function(e){var n,i;if(e&&e.nodeType)for(i=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(i===t[n])return!0;return!1}}function n(t){return function(e){if(i(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}var i=t(1);return{isText:t(3),isElement:i,isComment:t(8),isBr:e("br"),isContentEditableTrue:n("true"),isContentEditableFalse:n("false"),matchNodeNames:e,hasPropValue:function(t,e){return function(n){return i(n)&&n[t]===e}},hasAttributeValue:function(t,e){return function(n){return i(n)&&n.getAttribute(t)===e}},matchStyleValues:function(t,e){return e=e.toLowerCase().split(" "),function(n){var r;if(i(n))for(r=0;r<e.length;r++)if(getComputedStyle(n,null).getPropertyValue(t)===e[r])return!0;return!1}},isBogus:function(t){return i(t)&&t.hasAttribute("data-mce-bogus")}}})),n(S,[],(function(){return{isZwsp:function(t){return"\ufeff"==t},ZWSP:"\ufeff",trim:function(t){return t.replace(new RegExp("\ufeff","g"),"")}}})),n(C,[_,S],(function(t,e){function n(t){return d(t)&&(t=t.parentNode),u(t)&&t.hasAttribute("data-mce-caret")}function i(t){return d(t)&&e.isZwsp(t.data)}function r(t){return n(t)||i(t)}function a(t){var e=t.parentNode;e&&e.removeChild(t)}function o(e){return e.firstChild!==e.lastChild||!t.isBr(e.firstChild)}function s(t){return d(t)&&t.data[0]==e.ZWSP}function l(t){return d(t)&&t.data[t.data.length-1]==e.ZWSP}function c(e){var n=e.getElementsByTagName("br"),i=n[n.length-1];t.isBogus(i)&&i.parentNode.removeChild(i)}var u=t.isElement,d=t.isText;return{isCaretContainer:r,isCaretContainerBlock:n,isCaretContainerInline:i,showCaretContainerBlock:function(t){return t&&t.hasAttribute("data-mce-caret")?(c(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null},insertInline:function(t,n){var i,a,o;if(a=t.ownerDocument.createTextNode(e.ZWSP),o=t.parentNode,n){if(d(i=t.previousSibling)){if(r(i))return i;if(l(i))return i.splitText(i.data.length-1)}o.insertBefore(a,t)}else{if(d(i=t.nextSibling)){if(r(i))return i;if(s(i))return i.splitText(1),i}t.nextSibling?o.insertBefore(a,t.nextSibling):o.appendChild(a)}return a},insertBlock:function(t,e,n){var i,r;return(i=e.ownerDocument.createElement(t)).setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(function(){var t=document.createElement("br");return t.setAttribute("data-mce-bogus","1"),t}()),r=e.parentNode,n?r.insertBefore(i,e):e.nextSibling?r.insertBefore(i,e.nextSibling):r.appendChild(i),i},hasContent:o,remove:function(t){u(t)&&r(t)&&(o(t)?t.removeAttribute("data-mce-caret"):a(t)),d(t)&&function(t,e){0===e.length?a(t):t.nodeValue=e}(t,e.trim(function(t){try{return t.nodeValue}catch(e){return""}}(t)))},startsWithCaretContainer:s,endsWithCaretContainer:l}})),n(k,[h,p,_,m,C],(function(t,e,n,i,r){function a(t){return h(t)||f(t)}function o(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}function s(t){return"_mce_caret"===t.id}function l(t,e){return g(t)&&!1===function(t,e,n){return null!==o(t,e,n)}(t,e,s)}function c(t){this.walk=function(e,n){function i(t){var e;return 3===(e=t[0]).nodeType&&e===p&&m>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===y&&t.length>0&&e===v&&3===e.nodeType&&t.splice(t.length-1,1),t}function r(t,e,n){for(var i=[];t&&t!=n;t=t[e])i.push(t);return i}function a(t,e){do{if(t.parentNode==e)return t;t=t.parentNode}while(t)}function o(t,e,a){var o=a?"nextSibling":"previousSibling";for(h=(u=t).parentNode;u&&u!=e;u=h)h=u.parentNode,(f=r(u==t?u:u[o],o)).length&&(a||f.reverse(),n(i(f)))}var s,l,c,u,h,f,g,p=e.startContainer,m=e.startOffset,v=e.endContainer,y=e.endOffset;if((g=t.select("td[data-mce-selected],th[data-mce-selected]")).length>0)d(g,(function(t){n([t])}));else{if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[m]),1==v.nodeType&&v.hasChildNodes()&&(v=function(t,e){var n=t.childNodes;return--e>n.length-1?e=n.length-1:e<0&&(e=0),n[e]||t}(v,y)),p==v)return n(i([p]));for(s=t.findCommonAncestor(p,v),u=p;u;u=u.parentNode){if(u===v)return o(p,s,!0);if(u===s)break}for(u=v;u;u=u.parentNode){if(u===p)return o(v,s);if(u===s)break}l=a(p,s)||p,c=a(v,s)||v,o(p,l,!0),(f=r(l==p?l:l.nextSibling,"nextSibling",c==v?c.nextSibling:c)).length&&n(i(f)),o(v,c)}},this.split=function(t){function e(t,e){return t.splitText(e)}var n=t.startContainer,i=t.startOffset,r=t.endContainer,a=t.endOffset;return n==r&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(n=(r=e(n,i)).previousSibling,a>i?(n=r=e(r,a-=i).previousSibling,a=r.nodeValue.length,i=0):a=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=e(n,i),i=0),3==r.nodeType&&a>0&&a<r.nodeValue.length&&(a=(r=e(r,a).previousSibling).nodeValue.length)),{startContainer:n,startOffset:i,endContainer:r,endOffset:a}},this.normalize=function(n){function i(i){function o(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}function s(n,i){for(var r=new e(n,t.getParent(n.parentNode,t.isBlock)||x);n=r[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function c(n,i){var o,s,c;if(c=t.getParent((i=i||u).parentNode,t.isBlock)||x,n&&"BR"==i.nodeName&&y&&t.isEmpty(c))return u=i.parentNode,d=t.nodeIndex(i),void(r=!0);for(o=new e(i,c);p=o[n?"prev":"next"]();){if("false"===t.getContentEditableParent(p)||l(p,t.getRoot()))return;if(3===p.nodeType&&p.nodeValue.length>0)return u=p,d=n?p.nodeValue.length:0,void(r=!0);if(t.isBlock(p)||m[p.nodeName.toLowerCase()])return;s=p}a&&s&&(u=s,r=!0,d=0)}var u,d,h,p,m,v,y,x=t.getRoot();if(d=n[(i?"start":"end")+"Offset"],y=1==(u=n[(i?"start":"end")+"Container"]).nodeType&&d===u.childNodes.length,m=t.schema.getNonEmptyElements(),v=i,!g(u)){if(1==u.nodeType&&d>u.childNodes.length-1&&(v=!1),9===u.nodeType&&(u=t.getRoot(),d=0),u===x){if(v&&(p=u.childNodes[d>0?d-1:0])){if(g(p))return;if(m[p.nodeName]||"TABLE"==p.nodeName)return}if(u.hasChildNodes()){if(d=Math.min(!v&&d>0?d-1:d,u.childNodes.length-1),u=u.childNodes[d],d=0,!a&&u===x.lastChild&&"TABLE"===u.nodeName)return;if(function(t){for(;t&&t!=x;){if(f(t))return!0;t=t.parentNode}return!1}(u)||g(u))return;if(u.hasChildNodes()&&!/TABLE/.test(u.nodeName)){p=u,h=new e(u,x);do{if(f(p)||g(p)){r=!1;break}if(3===p.nodeType&&p.nodeValue.length>0){d=v?0:p.nodeValue.length,u=p,r=!0;break}if(m[p.nodeName.toLowerCase()]&&!o(p)){d=t.nodeIndex(p),u=p.parentNode,"IMG"!=p.nodeName||v||d++,r=!0;break}}while(p=v?h.next():h.prev())}}}a&&(3===u.nodeType&&0===d&&c(!0),1===u.nodeType&&((p=u.childNodes[d])||(p=u.childNodes[d-1]),!p||"BR"!==p.nodeName||function(t,e){return t.previousSibling&&"A"==t.previousSibling.nodeName}(p)||s(p)||s(p,!0)||c(!0,p))),v&&!a&&3===u.nodeType&&d===u.nodeValue.length&&c(!1),r&&n["set"+(i?"Start":"End")](u,d)}}var r,a;return a=n.collapsed,i(!0),a||i(),r&&a&&n.collapse(!0),r}}function u(e,n,i){var r,a,s;if(r=i.elementFromPoint(e,n),a=i.body.createTextRange(),r&&"HTML"!=r.tagName||(r=i.body),a.moveToElementText(r),(s=(s=t.toArray(a.getClientRects())).sort((function(t,e){return(t=Math.abs(Math.max(t.top-n,t.bottom-n)))-Math.abs(Math.max(e.top-n,e.bottom-n))}))).length>0){n=(s[0].bottom+s[0].top)/2;try{return a.moveToPoint(e,n),a.collapse(!0),a}catch(o){}}return null}var d=t.each,h=n.isContentEditableTrue,f=n.isContentEditableFalse,g=r.isCaretContainer;return c.compareRanges=function(t,e){if(t&&e){if(!t.item&&!t.duplicate)return t.startContainer==e.startContainer&&t.startOffset==e.startOffset;if(t.item&&e.item&&t.item(0)===e.item(0))return!0;if(t.isEqual&&e.isEqual&&e.isEqual(t))return!0}return!1},c.getCaretRangeFromPoint=function(t,e,n){var i,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(t,e),(i=n.createRange()).setStart(r.offsetNode,r.offset),i.collapse(!0);else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(t,e);else if(n.body.createTextRange){i=n.body.createTextRange();try{i.moveToPoint(t,e),i.collapse(!0)}catch(a){i=u(t,e,n)}return function(t,e){var n=t&&t.parentElement?t.parentElement():null;return f(o(n,e,a))?null:t}(i,n.body)}return i},c.getSelectedNode=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset==n+1?e.childNodes[n]:null},c.getNode=function(t,e){return 1==t.nodeType&&t.hasChildNodes()&&(e>=t.childNodes.length&&(e=t.childNodes.length-1),t=t.childNodes[e]),t},c})),n(A,[k,l,s],(function(t,e,n){return function(i){var r,a=[];"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",(function(e){var n,a;a={startContainer:(n=i.selection.getRng()).startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=e.type&&t.compareRanges(a,r)||i.fire("SelectionChange"),r=a})),i.on("contextmenu",(function(){i.fire("SelectionChange")})),i.on("SelectionChange",(function(){var t=i.selection.getStart(!0);!e.range&&i.selection.isCollapsed()||!function(t){var e,n;if((n=i.$(t).parentsUntil(i.getBody()).add(t)).length===a.length){for(e=n.length;e>=0&&n[e]===a[e];e--);if(-1===e)return a=n,!0}return a=n,!1}(t)&&i.dom.isChildOf(t,i.getBody())&&i.nodeChanged({selectionChange:!0})})),i.on("MouseUp",(function(t){t.isDefaultPrevented()||("IMG"==i.selection.getNode().nodeName?n.setEditorTimeout(i,(function(){i.nodeChanged()})):i.nodeChanged())})),this.nodeChanged=function(t){var e,n,r,a=i.selection;i.initialized&&a&&!i.settings.disable_nodechange&&!i.readonly&&(r=i.getBody(),(e=a.getStart()||r).ownerDocument==i.getDoc()&&i.dom.isChildOf(e,r)||(e=r),"IMG"==e.nodeName&&a.isCollapsed()&&(e=e.parentNode),n=[],i.dom.getParent(e,(function(t){return t===r||void n.push(t)})),(t=t||{}).element=e,t.parents=n,i.fire("NodeChange",t))}}})),n(M,[],(function(){function t(t,e,n){var i,r,a=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[a])return t[a];if(t!==e){if(i=t[o])return i;for(r=t.parent;r&&r!==e;r=r.parent)if(i=r[o])return i}}function e(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return e.prototype={replace:function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},attr:function(t,e){var n,i,r=this;if("string"!=typeof t){for(i in t)r.attr(i,t[i]);return r}if(n=r.attributes){if(void 0!==e){if(null===e){if(t in n.map)for(delete n.map[t],i=n.length;i--;)if(n[i].name===t)return n=n.splice(i,1),r;return r}if(t in n.map){for(i=n.length;i--;)if(n[i].name===t){n[i].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,r}return n.map[t]}},clone:function(){var t,n,i,r,a,o=this,s=new e(o.name,o.type);if(i=o.attributes){for((a=[]).map={},t=0,n=i.length;t<n;t++)"id"!==(r=i[t]).name&&(a[a.length]={name:r.name,value:r.value},a.map[r.name]=r.value);s.attributes=a}return s.value=o.value,s.shortEnded=o.shortEnded,s},wrap:function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},unwrap:function(){var t,e,n=this;for(t=n.firstChild;t;)e=t.next,n.insert(t,n,!0),t=e;n.remove()},remove:function(){var t=this,e=t.parent,n=t.next,i=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):i.next=n,e.lastChild===t?(e.lastChild=i,i&&(i.next=null)):n.prev=i,t.parent=t.next=t.prev=null),t},append:function(t){var e,n=this;return t.parent&&t.remove(),(e=n.lastChild)?(e.next=t,t.prev=e,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t},insert:function(t,e,n){var i;return t.parent&&t.remove(),i=e.parent||this,n?(e===i.firstChild?i.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===i.lastChild?i.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=i,t},getAll:function(e){var n,i=[];for(n=this.firstChild;n;n=t(n,this))n.name===e&&i.push(n);return i},empty:function(){var e,n,i,r=this;if(r.firstChild){for(e=[],i=r.firstChild;i;i=t(i,r))e.push(i);for(n=e.length;n--;)(i=e[n]).parent=i.firstChild=i.lastChild=i.next=i.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(e,i){var r,a,o=this.firstChild;if(i=i||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(r=o.attributes.length;r--;)if("name"===(a=o.attributes[r].name)||0===a.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!n.test(o.value))return!1;if(3===o.type&&o.parent&&i[o.parent.name]&&n.test(o.value))return!1}while(o=t(o,this));return!0},walk:function(e){return t(this,null,e)}},e.create=function(t,n){var r,a;if(r=new e(t,i[t]||1),n)for(a in n)r.attr(a,n[a]);return r},e})),n(T,[h],(function(t){function e(e,n){return(e=t.trim(e))?e.split(n||" "):[]}function n(t){function n(t,n,i){function r(t,e){var n,i,r={};for(n=0,i=t.length;n<i;n++)r[t[n]]=e||{};return r}var s,l,c;for(n=n||"","string"==typeof(i=i||[])&&(i=e(i)),s=(t=e(t)).length;s--;)c={attributes:r(l=e([o,n].join(" "))),attributesOrder:l,children:r(i,a)},f[t[s]]=c}function i(t,n){var i,r,a,o;for(i=(t=e(t)).length,n=e(n);i--;)for(r=f[t[i]],a=0,o=n.length;a<o;a++)r.attributes[n[a]]={},r.attributesOrder.push(n[a])}var o,l,c,u,d,h,f={};return r[t]?r[t]:(o="id accesskey class dir lang style tabindex title",l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=t&&(o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure header footer hgroup section nav",c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=t&&(o+=" xml:lang",c=[c,h="acronym applet basefont big font strike tt"].join(" "),s(e(h),(function(t){n(t,"",c)})),l=[l,d="center dir isindex noframes"].join(" "),u=[l,c].join(" "),s(e(d),(function(t){n(t,"",u)}))),u=u||[l,c].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),n("address dt dd div caption","",u),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",u),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",u),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",u),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",u),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),n("param","name value"),n("map","name",[u,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==t?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",u),n("th","colspan rowspan headers scope abbr",u),n("form","accept-charset action autocomplete enctype method name novalidate target",u),n("fieldset","disabled form name",[u,"legend"].join(" ")),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==t?u:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[u,"li"].join(" ")),n("noscript","",u),"html4"!=t&&(n("wbr"),n("ruby","",[c,"rt rp"].join(" ")),n("figcaption","",u),n("mark rt rp summary bdi","",c),n("canvas","width height",u),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[c,"option"].join(" ")),n("article section nav aside header footer","",u),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[u,"figcaption"].join(" ")),n("time","datetime",c),n("dialog","open",u),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",[u,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=t&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=t&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(e("a form meter progress dfn"),(function(t){f[t]&&delete f[t].children[t]})),delete f.caption.children.table,delete f.script,r[t]=f,f)}function i(t,e){var n;return t&&(n={},"string"==typeof t&&(t={"*":t}),s(t,(function(t,i){n[i]=n[i.toUpperCase()]="map"==e?o(t,/[, ]/):c(t,/[, ]/)}))),n}var r={},a={},o=t.makeMap,s=t.each,l=t.extend,c=t.explode,u=t.inArray;return function(t){function a(e,n,i){var a=t[e];return a?a=o(a,/[, ]/,o(a.toUpperCase(),/[, ]/)):(a=r[e])||(a=o(n," ",o(n.toUpperCase()," ")),a=l(a,i),r[e]=a),a}function d(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")}function h(t){var n,i,r,a,s,l,c,h,f,g,p,m,v,y,x,b,w,_,S,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,A=/[*?+]/;if(t)for(t=e(t,","),P["@"]&&(b=P["@"].attributes,w=P["@"].attributesOrder),n=0,i=t.length;n<i;n++)if(s=C.exec(t[n])){if(f=s[2],x=s[3],h=s[5],l={attributes:m={},attributesOrder:v=[]},"#"===(y=s[1])&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),b){for(_ in b)m[_]=b[_];v.push.apply(v,w)}if(h)for(r=0,a=(h=e(h,"|")).length;r<a;r++)if(s=k.exec(h[r])){if(c={},p=s[1],g=s[2].replace(/::/g,":"),y=s[3],S=s[4],"!"===p&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(g),c.required=!0),"-"===p){delete m[g],v.splice(u(v,g),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:g,value:S}),c.defaultValue=S),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:g,value:S}),c.forcedValue=S),"<"===y&&(c.validValues=o(S,"?"))),A.test(g)?(l.attributePatterns=l.attributePatterns||[],c.pattern=d(g),l.attributePatterns.push(c)):(m[g]||v.push(g),m[g]=c)}b||"@"!=f||(b=m,w=v),x&&(l.outputName=f,P[x]=l),A.test(f)?(l.pattern=d(f),E.push(l)):P[f]=l}}function f(t){P={},E=[],h(t),s(x,(function(t,e){L[e]=t.children}))}function g(t){var n=/^(~)?(.+)$/;t&&(r.text_block_elements=r.block_elements=null,s(e(t,","),(function(t){var e=n.exec(t),i="~"===e[1],r=i?"span":"div",a=e[2];if(L[a]=L[r],N[a]=r,i||(k[a.toUpperCase()]={},k[a]={}),!P[a]){var o=P[r];delete(o=l({},o)).removeEmptyAttrs,delete o.removeEmpty,P[a]=o}s(L,(function(t,e){t[r]&&(L[e]=t=l({},L[e]),t[a]=t[r])}))})))}function p(n){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[t.schema]=null,n&&s(e(n,","),(function(t){var n,r,a=i.exec(t);a&&(n=(r=a[1])?L[a[2]]:L[a[2]]={"#comment":{}},n=L[a[2]],s(e(a[3],"|"),(function(t){"-"===r?delete n[t]:n[t]={}})))}))}function m(t){var e,n=P[t];if(n)return n;for(e=E.length;e--;)if((n=E[e]).pattern.test(t))return n}var v,y,x,b,w,_,S,C,k,A,M,T,I,D=this,P={},L={},E=[],N={},R={};x=n((t=t||{}).schema),!1===t.verify_html&&(t.valid_elements="*[*]"),v=i(t.valid_styles),y=i(t.invalid_styles,"map"),C=i(t.valid_classes,"map"),b=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),_=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),A=a("non_empty_elements","td th iframe video audio object script pre code",_),M=a("move_caret_before_on_enter_elements","table",A),T=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),k=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",T),I=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((t.special||"script noscript style textarea").split(" "),(function(t){R[t]=new RegExp("</"+t+"[^>]*>","gi")})),t.valid_elements?f(t.valid_elements):(s(x,(function(t,e){P[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},L[e]=t.children})),"html5"!=t.schema&&s(e("strong/b em/i"),(function(t){t=e(t,"/"),P[t[1]].outputName=t[0]})),s(e("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(t){P[t]&&(P[t].removeEmpty=!0)})),s(e("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),(function(t){P[t].paddEmpty=!0})),s(e("span"),(function(t){P[t].removeEmptyAttrs=!0}))),g(t.custom_elements),p(t.valid_children),h(t.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),s({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(t,n){P[n]&&(P[n].parentsRequired=e(t))})),t.invalid_elements&&s(c(t.invalid_elements),(function(t){P[t]&&delete P[t]})),m("span")||h("span[!data-mce-type|*]"),D.children=L,D.getValidStyles=function(){return v},D.getInvalidStyles=function(){return y},D.getValidClasses=function(){return C},D.getBoolAttrs=function(){return S},D.getBlockElements=function(){return k},D.getTextBlockElements=function(){return T},D.getTextInlineElements=function(){return I},D.getShortEndedElements=function(){return _},D.getSelfClosingElements=function(){return w},D.getNonEmptyElements=function(){return A},D.getMoveCaretBeforeOnEnterElements=function(){return M},D.getWhiteSpaceElements=function(){return b},D.getSpecialElements=function(){return R},D.isValidChild=function(t,e){var n=L[t];return!(!n||!n[e])},D.isValid=function(t,e){var n,i,r=m(t);if(r){if(!e)return!0;if(r.attributes[e])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(t))return!0}return!1},D.getElementRule=m,D.getCustomElements=function(){return N},D.addValidElements=h,D.setValidElements=f,D.addCustomElements=g,D.addValidChildren=p,D.elements=P}})),n(I,[T,v,h],(function(t,e,n){function i(t,e,n){var i,r,a,o,s=1;for(o=t.getShortEndedElements(),(a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;r=a.exec(e);){if(i=a.lastIndex,"/"===r[1])s--;else if(!r[1]){if(r[2]in o)continue;s++}if(0===s)break}return i}function r(r,o){function s(){}var l=this;r=r||{},l.schema=o=o||new t,!1!==r.fix_self_closing&&(r.fix_self_closing=!0),a("comment cdata text start end pi doctype".split(" "),(function(t){t&&(l[t]=r[t]||s)})),l.parse=function(t){function a(t){var e,n;for(e=B.length;e--&&B[e].name!==t;);if(e>=0){for(n=B.length-1;n>=e;n--)(t=B[n]).valid&&O.end(t.name);B.length=e}}function s(t,e,n,i,a){var o,s;if(n=(e=e.toLowerCase())in y?e:H(n||i||a||""),b&&!p&&0!==e.indexOf("data-")){if(!(o=k[e])&&A){for(s=A.length;s--&&!(o=A[s]).pattern.test(e););-1===s&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(V[e]&&!r.allow_script_urls){var l=n.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(z){l=unescape(l)}if(W.test(l))return;if(!r.allow_html_data_urls&&X.test(l)&&!/^data:image\//i.test(l))return}d.map[e]=n,d.push({name:e,value:n})}var l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C,k,A,M,T,I,D,P,L,E,N,R,O=this,z=0,B=[],F=0,H=e.decode,V=n.makeMap("src,href,data,background,formaction,poster"),W=/((java|vb)script|mhtml):/i,X=/^data:/i;for(P=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=o.getShortEndedElements(),D=r.self_closing_elements||o.getSelfClosingElements(),y=o.getBoolAttrs(),b=r.validate,m=r.remove_internals,R=r.fix_self_closing,E=o.getSpecialElements();l=P.exec(t);){if(z<l.index&&O.text(H(t.substr(z,l.index-z))),c=l[6])":"===(c=c.toLowerCase()).charAt(0)&&(c=c.substr(1)),a(c);else if(c=l[7]){if(":"===(c=c.toLowerCase()).charAt(0)&&(c=c.substr(1)),x=c in v,R&&D[c]&&B.length>0&&B[B.length-1].name===c&&a(c),!b||(w=o.getElementRule(c))){if(_=!0,b&&(k=w.attributes,A=w.attributePatterns),(C=l[8])?((p=-1!==C.indexOf("data-mce-type"))&&m&&(_=!1),(d=[]).map={},C.replace(L,s)):(d=[]).map={},b&&!p){if(M=w.attributesRequired,T=w.attributesDefault,w.removeEmptyAttrs&&!d.length&&(_=!1),I=w.attributesForced)for(h=I.length;h--;)"{$uid}"===(N=(S=I[h]).value)&&(N="mce_"+F++),d.map[g=S.name]=N,d.push({name:g,value:N});if(T)for(h=T.length;h--;)(g=(S=T[h]).name)in d.map||("{$uid}"===(N=S.value)&&(N="mce_"+F++),d.map[g]=N,d.push({name:g,value:N}));if(M){for(h=M.length;h--&&!(M[h]in d.map););-1===h&&(_=!1)}if(S=d.map["data-mce-bogus"]){if("all"===S){z=i(o,t,P.lastIndex),P.lastIndex=z;continue}_=!1}}_&&O.start(c,d,x)}else _=!1;if(u=E[c]){u.lastIndex=z=l.index+l[0].length,(l=u.exec(t))?(_&&(f=t.substr(z,l.index-z)),z=l.index+l[0].length):(f=t.substr(z),z=t.length),_&&(f.length>0&&O.text(f,!0),O.end(c)),P.lastIndex=z;continue}x||(C&&C.indexOf("/")==C.length-1?_&&O.end(c):B.push({name:c,valid:_}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),r.allow_conditional_comments||"[if"!==c.substr(0,3).toLowerCase()||(c=" "+c),O.comment(c)):(c=l[2])?O.cdata(c):(c=l[3])?O.doctype(c):(c=l[4])&&O.pi(c,l[5]);z=l.index+l[0].length}for(z<t.length&&O.text(H(t.substr(z))),h=B.length-1;h>=0;h--)(c=B[h]).valid&&O.end(c.name)}}var a=n.each;return r.findEndTag=i,r})),n(D,[M,T,I,h],(function(t,e,n,i){var r=i.makeMap,a=i.each,o=i.explode,s=i.extend,l=function(e,n){e.padd_empty_with_br?n.empty().append(new t("br","1")).shortEnded=!0:n.empty().append(new t("#text","3")).value=""},c=function(t,e){return t&&t.firstChild===t.lastChild&&t.firstChild.name===e};return function(u,d){function h(e){var n,i,a,o,s,l,u,h,g,p,m,v,y,x,b,w;for(v=r("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements(),m=d.getWhiteSpaceElements(),y=d.getTextBlockElements(),x=d.getSpecialElements(),n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(y[i.name]&&"li"==i.parent.name){for(b=i.next;b&&y[b.name];)b.name="li",b.fixed=!0,i.parent.insert(b,i.parent),b=b.next;i.unwrap(i)}else{for(o=[i],a=i.parent;a&&!d.isValidChild(a.name,i.name)&&!v[a.name];a=a.parent)o.push(a);if(a&&o.length>1){for(o.reverse(),s=l=f.filterNode(o[0].clone()),g=0;g<o.length-1;g++){for(d.isValidChild(l.name,o[g].name)?(u=f.filterNode(o[g].clone()),l.append(u)):u=l,h=o[g].firstChild;h&&h!=o[g+1];)w=h.next,u.append(h),h=w;l=u}s.isEmpty(p,m)?a.insert(i,o[0],!0):(a.insert(s,o[0],!0),a.insert(i,s)),((a=o[0]).isEmpty(p,m)||c(a,"br"))&&a.empty().remove()}else if(i.parent){if("li"===i.name){if((b=i.prev)&&("ul"===b.name||"ul"===b.name)){b.append(i);continue}if((b=i.next)&&("ul"===b.name||"ul"===b.name)){b.insert(i,b.firstChild,!0);continue}i.wrap(f.filterNode(new t("ul",1)));continue}d.isValidChild(i.parent.name,"div")&&d.isValidChild("div",i.name)?i.wrap(f.filterNode(new t("div",1))):x[i.name]?i.empty().remove():i.unwrap()}}}var f=this,g={},p=[],m={},v={};(u=u||{}).validate=!("validate"in u)||u.validate,u.root_name=u.root_name||"body",f.schema=d=d||new e,f.filterNode=function(t){var e,n,i;n in g&&((i=m[n])?i.push(t):m[n]=[t]),e=p.length;for(;e--;)(n=p[e].name)in t.attributes.map&&((i=v[n])?i.push(t):v[n]=[t]);return t},f.addNodeFilter=function(t,e){a(o(t),(function(t){var n=g[t];n||(g[t]=n=[]),n.push(e)}))},f.addAttributeFilter=function(t,e){a(o(t),(function(t){var n;for(n=0;n<p.length;n++)if(p[n].name===t)return void p[n].callbacks.push(e);p.push({name:t,callbacks:[e]})}))},f.parse=function(e,i){function a(e,n){var i,r=new t(e,n);return e in g&&((i=m[e])?i.push(r):m[e]=[r]),r}function o(t){var e,n,i,r,a=d.getBlockElements();for(e=t.prev;e&&3===e.type;){if((i=e.value.replace(D,"")).length>0)return void(e.value=i);if(n=e.next){if(3==n.type&&n.value.length){e=e.prev;continue}if(!a[n.name]&&"script"!=n.name&&"style"!=n.name){e=e.prev;continue}}r=e.prev,e.remove(),e=r}}var c,f,y,x,b,w,_,S,C,k,A,M,T,I,D,P,L,E,N,R,O,z=[];if(i=i||{},m={},v={},M=s(r("script,style,head,html,body,title,meta,param"),d.getBlockElements()),R=d.getNonEmptyElements(),N=d.children,A=u.validate,O="forced_root_block"in i?i.forced_root_block:u.forced_root_block,E=d.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,L=/^[ \t\r\n]+$/,c=new n({validate:A,allow_script_urls:u.allow_script_urls,allow_conditional_comments:u.allow_conditional_comments,self_closing_elements:function(t){var e,n={};for(e in t)"li"!==e&&"p"!=e&&(n[e]=t[e]);return n}(d.getSelfClosingElements()),cdata:function(t){y.append(a("#cdata",4)).value=t},text:function(t,e){var n;I||(t=t.replace(P," "),y.lastChild&&M[y.lastChild.name]&&(t=t.replace(T,""))),0!==t.length&&((n=a("#text",3)).raw=!!e,y.append(n).value=t)},comment:function(t){y.append(a("#comment",8)).value=t},pi:function(t,e){y.append(a(t,7)).value=e,o(y)},doctype:function(t){y.append(a("#doctype",10)).value=t,o(y)},start:function(t,e,n){var i,r,s,l,c;if(s=A?d.getElementRule(t):{}){for((i=a(s.outputName||t,1)).attributes=e,i.shortEnded=n,y.append(i),(c=N[y.name])&&N[i.name]&&!c[i.name]&&z.push(i),r=p.length;r--;)(l=p[r].name)in e.map&&((C=v[l])?C.push(i):v[l]=[i]);M[t]&&o(i),n||(y=i),!I&&E[t]&&(I=!0)}},end:function(t){var e,n,i,r,a;if(n=A?d.getElementRule(t):{}){if(M[t]&&!I){if((e=y.firstChild)&&3===e.type)if((i=e.value.replace(T,"")).length>0)e.value=i,e=e.next;else for(r=e.next,e.remove(),e=r;e&&3===e.type;)r=e.next,(0===(i=e.value).length||L.test(i))&&(e.remove(),e=r),e=r;if((e=y.lastChild)&&3===e.type)if((i=e.value.replace(D,"")).length>0)e.value=i,e=e.prev;else for(r=e.prev,e.remove(),e=r;e&&3===e.type;)r=e.prev,(0===(i=e.value).length||L.test(i))&&(e.remove(),e=r),e=r}if(I&&E[t]&&(I=!1),(n.removeEmpty||n.paddEmpty)&&y.isEmpty(R,E))if(n.paddEmpty)l(u,y);else if(!y.attributes.map.name&&!y.attributes.map.id)return a=y.parent,M[y.name]?y.empty().remove():y.unwrap(),void(y=a);y=y.parent}}},d),f=y=new t(i.context||u.root_name,11),c.parse(e),A&&z.length&&(i.context?i.invalid=!0:h(z)),O&&("body"==f.name||i.isRootContent)&&function(){function t(t){t&&((i=t.firstChild)&&3==i.type&&(i.value=i.value.replace(T,"")),(i=t.lastChild)&&3==i.type&&(i.value=i.value.replace(D,"")))}var e,n,i=f.firstChild;if(d.isValidChild(f.name,O.toLowerCase())){for(;i;)e=i.next,3==i.type||1==i.type&&"p"!==i.name&&!M[i.name]&&!i.attr("data-mce-type")?(n||((n=a(O,1)).attr(u.forced_root_block_attrs),f.insert(n,i)),n.append(i)):(t(n),n=null),i=e;t(n)}}(),!i.invalid){for(k in m){for(C=g[k],_=(x=m[k]).length;_--;)x[_].parent||x.splice(_,1);for(b=0,w=C.length;b<w;b++)C[b](x,k,i)}for(b=0,w=p.length;b<w;b++)if((C=p[b]).name in v){for(_=(x=v[C.name]).length;_--;)x[_].parent||x.splice(_,1);for(_=0,S=C.callbacks.length;_<S;_++)C.callbacks[_](x,C.name,i)}}return f},u.remove_trailing_brs&&f.addNodeFilter("br",(function(e){var n,i,r,a,o,c,h,f,g=e.length,p=s({},d.getBlockElements()),m=d.getNonEmptyElements(),v=d.getNonEmptyElements();for(p.body=1,n=0;n<g;n++)if(r=(i=e[n]).parent,p[i.parent.name]&&i===r.lastChild){for(o=i.prev;o;){if("span"!==(c=o.name)||"bookmark"!==o.attr("data-mce-type")){if("br"!==c)break;if("br"===c){i=null;break}}o=o.prev}i&&(i.remove(),r.isEmpty(m,v)&&(h=d.getElementRule(r.name))&&(h.removeEmpty?r.remove():h.paddEmpty&&l(u,r)))}else{for(a=i;r&&r.firstChild===a&&r.lastChild===a&&(a=r,!p[r.name]);)r=r.parent;a===r&&!0!==u.padd_empty_with_br&&((f=new t("#text",3)).value="",i.replace(f))}})),u.allow_unsafe_link_target||f.addAttributeFilter("href",(function(t){function e(t){var e=new RegExp("("+s.replace(" ","|")+")","g");return t&&(t=i.trim(t.replace(e,""))),t||null}function n(t,n){return n?function(t){return(t=e(t))?[t,s].join(" "):s}(t):e(t)}for(var r,a,o=t.length,s="noopener noreferrer";o--;)a=(r=t[o]).attr("rel"),"a"===r.name&&r.attr("rel",n(a,"_blank"==r.attr("target")))})),u.allow_html_in_named_anchor||f.addAttributeFilter("id,name",(function(t){for(var e,n,i,r,a=t.length;a--;)if("a"===(r=t[a]).name&&r.firstChild&&!r.attr("href")){i=r.parent,e=r.lastChild;do{n=e.prev,i.insert(e,r),e=n}while(e)}})),u.fix_list_elements&&f.addNodeFilter("ul,ol",(function(e){for(var n,i,r=e.length;r--;)if("ul"===(i=(n=e[r]).parent).name||"ol"===i.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var a=new t("li",1);a.attr("style","list-style-type: none"),n.wrap(a)}})),u.validate&&d.getValidClasses()&&f.addAttributeFilter("class",(function(t){for(var e,n,i,r,a,o,s,l=t.length,c=d.getValidClasses();l--;){for(n=(e=t[l]).attr("class").split(" "),a="",i=0;i<n.length;i++)r=n[i],s=!1,(o=c["*"])&&o[r]&&(s=!0),o=c[e.name],!s&&o&&o[r]&&(s=!0),s&&(a&&(a+=" "),a+=r);a.length||(a=null),e.attr("class",a)}}))}})),n(P,[v,h],(function(t,e){var n=e.makeMap;return function(e){var i,r,a,o,s,l=[];return i=(e=e||{}).indent,r=n(e.indent_before||""),a=n(e.indent_after||""),o=t.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="html"==e.element_format,{start:function(t,e,n){var c,u,d,h;if(i&&r[t]&&l.length>0&&(h=l[l.length-1]).length>0&&"\n"!==h&&l.push("\n"),l.push("<",t),e)for(c=0,u=e.length;c<u;c++)l.push(" ",(d=e[c]).name,'="',o(d.value,!0),'"');l[l.length]=!n||s?">":" />",n&&i&&a[t]&&l.length>0&&(h=l[l.length-1]).length>0&&"\n"!==h&&l.push("\n")},end:function(t){var e;l.push("</",t,">"),i&&a[t]&&l.length>0&&(e=l[l.length-1]).length>0&&"\n"!==e&&l.push("\n")},text:function(t,e){t.length>0&&(l[l.length]=e?t:o(t))},cdata:function(t){l.push("<![CDATA[",t,"]]>")},comment:function(t){l.push("\x3c!--",t,"--\x3e")},pi:function(t,e){e?l.push("<?",t," ",o(e),"?>"):l.push("<?",t,"?>"),i&&l.push("\n")},doctype:function(t){l.push("<!DOCTYPE",t,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}})),n(L,[P,T],(function(t,e){return function(n,i){var r=this,a=new t(n);(n=n||{}).validate=!("validate"in n)||n.validate,r.schema=i=i||new e,r.writer=a,r.serialize=function(t){function e(t){var n,s,l,c,u,d,h,f,g,p=r[t.type];if(p)p(t);else{if(n=t.name,s=t.shortEnded,l=t.attributes,o&&l&&l.length>1&&((d=[]).map={},g=i.getElementRule(t.name))){for(h=0,f=g.attributesOrder.length;h<f;h++)(c=g.attributesOrder[h])in l.map&&(d.map[c]=u=l.map[c],d.push({name:c,value:u}));for(h=0,f=l.length;h<f;h++)(c=l[h].name)in d.map||(d.map[c]=u=l.map[c],d.push({name:c,value:u}));l=d}if(a.start(t.name,l,s),!s){if(t=t.firstChild)do{e(t)}while(t=t.next);a.end(n)}}}var r,o;return o=n.validate,r={3:function(t){a.text(t.value,t.raw)},8:function(t){a.comment(t.value)},7:function(t){a.pi(t.name,t.value)},10:function(t){a.doctype(t.value)},4:function(t){a.cdata(t.value)},11:function(t){if(t=t.firstChild)do{e(t)}while(t=t.next)}},a.reset(),1!=t.type||n.inner?r[11](t):e(t),a.getContent()}}})),n(E,[x,D,I,v,L,M,T,l,h,S],(function(t,e,n,i,r,a,o,s,l,c){var u=l.each,d=l.trim,h=t.DOM;return function(t,a){function f(t){var e=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\ufeff]+<\\/span>","\\s?("+y.join("|")+')="[^"]+"'].join("|"),"gi");return c.trim(t.replace(e,""))}function g(t){var e,i,r,o,s,l=t,c=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=a.schema;for(l=f(l),s=u.getShortEndedElements();o=c.exec(l);)i=c.lastIndex,r=o[0].length,e=s[o[1]]?i:n.findEndTag(u,l,i),l=l.substring(0,i-r)+l.substring(e),c.lastIndex=i-r;return l}var p,m,v,y=["data-mce-selected"];return a&&(p=a.dom,m=a.schema),p=p||h,m=m||new o(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs,(v=new e(t,m)).addAttributeFilter("data-mce-tabindex",(function(t,e){for(var n,i=t.length;i--;)(n=t[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(e,null)})),v.addAttributeFilter("src,href,style",(function(e,n){for(var i,r,a=e.length,o="data-mce-"+n,s=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(r=(i=e[a]).attributes.map[o])?(i.attr(n,r.length>0?r:null),i.attr(o,null)):(r=i.attributes.map[n],"style"===n?r=p.serializeStyle(p.parseStyle(r),i.name):s&&(r=s.call(l,r,n,i.name)),i.attr(n,r.length>0?r:null))})),v.addAttributeFilter("class",(function(t){for(var e,n,i=t.length;i--;)(n=(e=t[i]).attr("class"))&&(n=e.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),e.attr("class",n.length>0?n:null))})),v.addAttributeFilter("data-mce-type",(function(t,e,n){for(var i,r=t.length;r--;)"bookmark"!==(i=t[r]).attributes.map["data-mce-type"]||n.cleanup||i.remove()})),v.addNodeFilter("noscript",(function(t){for(var e,n=t.length;n--;)(e=t[n].firstChild)&&(e.value=i.decode(e.value))})),v.addNodeFilter("script,style",(function(t,e){function n(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,r,a,o=t.length;o--;)r=(i=t[o]).firstChild?i.firstChild.value:"","script"===e?((a=i.attr("type"))&&i.attr("type","mce-no/type"==a?null:a.replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(i.firstChild.value="\x3c!--\n"+n(r)+"\n--\x3e")})),v.addNodeFilter("#comment",(function(t){for(var e,n=t.length;n--;)0===(e=t[n]).value.indexOf("[CDATA[")?(e.name="#cdata",e.type=4,e.value=e.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===e.value.indexOf("mce:protected ")&&(e.name="#text",e.type=3,e.raw=!0,e.value=unescape(e.value).substr(14))})),v.addNodeFilter("xml:namespace,input",(function(t,e){for(var n,i=t.length;i--;)7===(n=t[i]).type?n.remove():1===n.type&&("input"!==e||"type"in n.attributes.map||n.attr("type","text"))})),v.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})),{schema:m,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:function(e,n){var i,a,o,l,h,f;return s.ie&&p.select("script,style,select,map").length>0?(h=e.innerHTML,e=e.cloneNode(!1),p.setHTML(e,h)):e=e.cloneNode(!0),(i=document.implementation).createHTMLDocument&&(a=i.createHTMLDocument(""),u("BODY"==e.nodeName?e.childNodes:[e],(function(t){a.body.appendChild(a.importNode(t,!0))})),e="BODY"!=e.nodeName?a.body.firstChild:a.body,o=p.doc,p.doc=a),(n=n||{}).format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=e,this.onPreProcess(n)),function(t){function e(t){return t&&"br"===t.name}var n,i;e(n=t.lastChild)&&e(i=n.prev)&&(n.remove(),i.remove())}(f=v.parse(d(n.getInner?e.innerHTML:p.getOuterHTML(e)),n)),l=new r(t,m),n.content=l.serialize(f),n.cleanup||(n.content=c.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||this.onPostProcess(n),o&&(p.doc=o),n.node=null,n.content},addRules:function(t){m.addValidElements(t)},setRules:function(t){m.setValidElements(t)},onPreProcess:function(t){a&&a.fire("PreProcess",t)},onPostProcess:function(t){a&&a.fire("PostProcess",t)},addTempAttr:function(t){-1===l.inArray(y,t)&&(v.addAttributeFilter(t,(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})),y.push(t))},trimHtml:f,getTrimmedContent:function(){return g(a.getBody().innerHTML)},trimContent:g}}})),n(N,[],(function(){return function(t){function e(e,n){var i,r,a,o,s,l,c,u,d=0,h=-1;if((i=e.duplicate()).collapse(n),(u=i.parentElement()).ownerDocument===t.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(r=(o=u.children).length-1;d<=r;)if(c=Math.floor((d+r)/2),i.moveToElementText(s=o[c]),(h=i.compareEndPoints(n?"StartToStart":"EndToEnd",e))>0)r=c-1;else{if(!(h<0))return{node:s};d=c+1}if(h<0)for(s?i.collapse(!1):(i.moveToElementText(u),i.collapse(!0),s=u,a=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",1)&&u==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",-1)&&u==i.parentElement();)l++;return{node:s,position:h,offset:l,inside:a}}}var n=this,i=t.dom;this.getBookmark=function(n){function r(t){var e,n,r,a,o=[];for(e=t.parentNode,n=i.getRoot().parentNode;e!=n&&9!==e.nodeType;){for(a=(r=e.children).length;a--;)if(t===r[a]){o.push(a);break}t=e,e=e.parentNode}return o}function a(t){var n;if(n=e(o,t))return{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}}var o=t.getRng(),s={};return 2===n&&(o.item?s.start={ctrl:!0,indexes:r(o.item(0))}:(s.start=a(!0),t.isCollapsed()||(s.end=a()))),s},this.moveToBookmark=function(t){function e(t){var e,n,r,a;for(e=i.getRoot(),n=t.length-1;n>=0;n--)(r=t[n])<=(a=e.children).length-1&&(e=a[r]);return e}function n(n){var i,o,s,l=t[n?"start":"end"];l&&(i=l.position>0,(o=a.createTextRange()).moveToElementText(e(l.indexes)),void 0!==(s=l.offset)?(o.collapse(l.inside||i),o.moveStart("character",i?-s:s)):o.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",o),n&&r.collapse(!0))}var r,a=i.doc.body;t.start&&(t.start.ctrl?((r=a.createControlRange()).addElement(e(t.start.indexes)),r.select()):(r=a.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(e){function n(t){var e,n,a,u,d;a=i.create("a"),e=t?o:l,n=t?s:c,u=r.duplicate(),e!=g&&e!=g.documentElement||(e=p,n=0),3==e.nodeType?(e.parentNode.insertBefore(a,e),u.moveToElementText(a),u.moveStart("character",n),i.remove(a),r.setEndPoint(t?"StartToStart":"EndToEnd",u)):((d=e.childNodes).length?(n>=d.length?i.insertAfter(a,d[d.length-1]):e.insertBefore(a,d[n]),u.moveToElementText(a)):e.canHaveHTML&&(e.innerHTML="<span>&#xFEFF;</span>",u.moveToElementText(a=e.firstChild),u.collapse(!1)),r.setEndPoint(t?"StartToStart":"EndToEnd",u),i.remove(a))}var r,a,o,s,l,c,u,d,h,g=t.dom.doc,p=g.body;if(o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,r=p.createTextRange(),o==l&&1==o.nodeType){if(s==c&&!o.hasChildNodes()){if(o.canHaveHTML)return(u=o.previousSibling)&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,o.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(o.lastChild),r.select(),i.doc.selection.clear(),o.innerHTML="",void(u&&(u.innerHTML=""));s=i.nodeIndex(o),o=o.parentNode}if(s==c-1)try{if(h=o.childNodes[s],(a=p.createControlRange()).addElement(h),a.select(),(d=t.getRng()).item&&h===d.item(0))return}catch(f){}}n(!0),n(),r.select()},this.getRangeAt=function(){function r(t){var n,i,r,a,o=e(d,t),s=0;if(n=o.node,i=o.offset,!o.inside||n.hasChildNodes())if(void 0!==i){if(o.position<0){if(!(r=o.inside?n.firstChild:n.nextSibling))return void h[t?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==r.nodeType?h[t?"setStart":"setEnd"](r,0):h[t?"setStartBefore":"setEndBefore"](r));for(;r;){if(3==r.nodeType&&(s+=(a=r.nodeValue).length)>=i){n=r,s=a.length-(s-=i);break}r=r.nextSibling}}else{if(!(r=n.previousSibling))return h[t?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?h[t?"setStart":"setEnd"](r,n.nodeValue.length):h[t?"setStartAfter":"setEndAfter"](r));for(;r;){if(3==r.nodeType&&(s+=r.nodeValue.length)>=i){n=r,s-=i;break}r=r.previousSibling}}h[t?"setStart":"setEnd"](n,s)}else h[t?"setStartBefore":"setEndAfter"](n);else h[t?"setStart":"setEnd"](n,0)}var a,o,s,l,u,d=t.getRng(),h=i.createRng();if((a=d.item?d.item(0):d.parentElement()).ownerDocument!=i.doc)return h;if(o=t.isCollapsed(),d.item)return h.setStart(a.parentNode,i.nodeIndex(a)),h.setEnd(h.startContainer,h.startOffset+1),h;try{r(!0),o||r()}catch(c){if(-2147024809!=c.number)throw c;u=n.getBookmark(2),(s=d.duplicate()).collapse(!0),a=s.parentElement(),o||((s=d.duplicate()).collapse(!1),(l=s.parentElement()).innerHTML=l.innerHTML),a.innerHTML=a.innerHTML,n.moveToBookmark(u),d=t.getRng(),r(!0),o||r()}return h}}})),n(R,[l],(function(t){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||this.metaKeyPressed(t)},metaKeyPressed:function(e){return t.mac?e.metaKey:e.ctrlKey&&!e.altKey}}})),n(O,[R,h,s,l,_],(function(t,e,n,i,r){function a(t,e){for(;e&&e!=t;){if(s(e)||o(e))return e;e=e.parentNode}return null}var o=r.isContentEditableFalse,s=r.isContentEditableTrue;return function(r,s){function l(t){var e=s.settings.object_resizing;return!1!==e&&!i.iOS&&("string"!=typeof e&&(e="table,img,div"),"false"!==t.getAttribute("data-mce-resize")&&t!=s.getBody()&&s.dom.is(t,e))}function c(e){var n,i,r,a;z=(z=(n=e.screenX-I)*M[2]+E)<5?5:z,B=(B=(i=e.screenY-D)*M[3]+N)<5?5:B,("IMG"==S.nodeName&&!1!==s.settings.resize_img_proportional?!t.modifierPressed(e):t.modifierPressed(e)||"IMG"==S.nodeName&&M[2]*M[3]!=0)&&(U(n)>U(i)?(B=j(z*R),z=j(B/R)):(z=j(B/R),B=j(z*R))),V.setStyles(C,{width:z,height:B}),V.setStyles(k,{left:r=(r=M.startPos.x+n)>0?r:0,top:a=(a=M.startPos.y+i)>0?a:0,display:"block"}),k.innerHTML=z+" &times; "+B,M[2]<0&&C.clientWidth<=z&&V.setStyle(C,"left",P+(E-z)),M[3]<0&&C.clientHeight<=B&&V.setStyle(C,"top",L+(N-B)),(n=q.scrollWidth-F)+(i=q.scrollHeight-H)!=0&&V.setStyles(k,{left:r-n,top:a-i}),O||(s.fire("ObjectResizeStart",{target:S,width:E,height:N}),O=!0)}function u(){function t(t,e){e&&(S.style[t]||!s.schema.isValid(S.nodeName.toLowerCase(),t)?V.setStyle(S,t,e):V.setAttrib(S,t,e))}O=!1,t("width",z),t("height",B),V.unbind(X,"mousemove",c),V.unbind(X,"mouseup",u),Y!=X&&(V.unbind(Y,"mousemove",c),V.unbind(Y,"mouseup",u)),V.remove(C),V.remove(k),G&&"TABLE"!=S.nodeName||d(S),s.fire("ObjectResized",{target:S,width:z,height:B}),V.setAttrib(S,"style",V.getAttrib(S,"style")),s.nodeChanged()}function d(t,e,n){var r,a,o,d,f;h(),b(),r=V.getPos(t,q),P=r.x,L=r.y,f=t.getBoundingClientRect(),a=f.width||f.right-f.left,o=f.height||f.bottom-f.top,S!=t&&(x(),S=t,z=B=0),d=s.fire("ObjectSelected",{target:t}),l(t)&&!d.isDefaultPrevented()?W(A,(function(t,r){function s(e){I=e.screenX,D=e.screenY,R=(N=S.clientHeight)/(E=S.clientWidth),M=t,t.startPos={x:a*t[0]+P,y:o*t[1]+L},F=q.scrollWidth,H=q.scrollHeight,C=S.cloneNode(!0),V.addClass(C,"mce-clonedresizable"),V.setAttrib(C,"data-mce-bogus","all"),C.contentEditable=!1,C.unSelectabe=!0,V.setStyles(C,{left:P,top:L,margin:0}),C.removeAttribute("data-mce-selected"),q.appendChild(C),V.bind(X,"mousemove",c),V.bind(X,"mouseup",u),Y!=X&&(V.bind(Y,"mousemove",c),V.bind(Y,"mouseup",u)),k=V.add(q,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},E+" &times; "+N)}var l;return e?void(r==e&&s(n)):((l=V.get("mceResizeHandle"+r))&&V.remove(l),l=V.add(q,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),i.ie&&(l.contentEditable=!1),V.bind(l,"mousedown",(function(t){t.stopImmediatePropagation(),t.preventDefault(),s(t)})),t.elm=l,void V.setStyles(l,{left:a*t[0]+P-l.offsetWidth/2,top:o*t[1]+L-l.offsetHeight/2}))})):h(),S.setAttribute("data-mce-selected","1")}function h(){var t,e;for(t in b(),S&&S.removeAttribute("data-mce-selected"),A)(e=V.get("mceResizeHandle"+t))&&(V.unbind(e),V.remove(e))}function f(t){function e(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)}var n,i;if(!O&&!s.removed)return W(V.select("img[data-mce-selected],hr[data-mce-selected]"),(function(t){t.removeAttribute("data-mce-selected")})),i="mousedown"==t.type?t.target:r.getNode(),e(i=V.$(i).closest(G?"table":"table,img,hr")[0],q)&&(w(),e(n=r.getStart(!0),i)&&e(r.getEnd(!0),i)&&(!G||i!=n&&"IMG"!==n.nodeName))?void d(i):void h()}function g(t,e,n){t&&t.attachEvent&&t.attachEvent("on"+e,n)}function p(t,e,n){t&&t.detachEvent&&t.detachEvent("on"+e,n)}function m(t){var e,n,i,r,a,o,l=t.srcElement;for(n in e=l.getBoundingClientRect(),a=T.clientX-e.left,o=T.clientY-e.top,A)if(r=l.offsetHeight*(i=A[n])[1],U(l.offsetWidth*i[0]-a)<8&&U(r-o)<8){M=i;break}O=!0,s.fire("ObjectResizeStart",{target:S,width:S.clientWidth,height:S.clientHeight}),s.getDoc().selection.empty(),d(l,n,T)}function v(t){return o(a(s.getBody(),t))}function y(t){var e=t.srcElement;if(v(e))!function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(t);else if(e!=S){if(s.fire("ObjectSelected",{target:e}),x(),0===e.id.indexOf("mceResizeHandle"))return void(t.returnValue=!1);"IMG"!=e.nodeName&&"TABLE"!=e.nodeName||(h(),S=e,g(e,"resizestart",m))}}function x(){p(S,"resizestart",m)}function b(){for(var t in A){var e=A[t];e.elm&&(V.unbind(e.elm),delete e.elm)}}function w(){try{s.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(t){}}function _(t){var e;if(G){e=X.body.createControlRange();try{return e.addElement(t),e.select(),!0}catch(n){}}}var S,C,k,A,M,T,I,D,P,L,E,N,R,O,z,B,F,H,V=s.dom,W=e.each,X=s.getDoc(),Y=document,G=i.ie&&i.ie<11,U=Math.abs,j=Math.round,q=s.getBody();A={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Z=".mce-content-body";return s.contentStyles.push(Z+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Z+" .mce-resizehandle:hover {background: #000}"+Z+" img[data-mce-selected],"+Z+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Z+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Z+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),s.on("init",(function(){G?(s.on("ObjectResized",(function(t){"TABLE"!=t.target.nodeName&&(h(),_(t.target))})),g(q,"controlselect",y),s.on("mousedown",(function(t){T=t}))):(w(),i.ie>=11&&(s.on("mousedown click",(function(t){var e=t.target,n=e.nodeName;O||!/^(TABLE|IMG|HR)$/.test(n)||v(e)||(s.selection.select(e,"TABLE"==n),"mousedown"==t.type&&s.nodeChanged())})),s.dom.bind(q,"mscontrolselect",(function(t){function e(t){n.setEditorTimeout(s,(function(){s.selection.select(t)}))}return v(t.target)?(t.preventDefault(),void e(t.target)):void(/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"==t.target.tagName&&e(t.target)))}))));var t=n.throttle((function(t){s.composing||f(t)}));s.on("nodechange ResizeEditor ResizeWindow drop",t),s.on("keyup compositionend",(function(e){S&&"TABLE"==S.nodeName&&t(e)})),s.on("hide blur",h)})),s.on("remove",b),{isResizable:l,showResizeRect:d,hideResizeRect:h,updateResizeRect:f,controlSelect:_,destroy:function(){S=C=null,G&&(x(),p(q,"controlselect",y))}}}})),n(z,[],(function(){var t=[].slice;return{constant:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},and:function(){var e=t.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}},or:function(){var e=t.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}},curry:function e(n){var i=t.call(arguments);return i.length-1>=n.length?n.apply(this,i.slice(1)):function(){var t=i.concat([].slice.call(arguments));return e.apply(this,t)}},compose:function(t,e){return function(n){return t(e(n))}},noop:function(){}}})),n(B,[_,d,C],(function(t,e,n){function i(t){return!h(t)&&(l(t)?!c(t.parentNode):u(t)||s(t)||d(t)||o(t))}function r(t,e){for(t=t.parentNode;t&&t!=e;t=t.parentNode){if(o(t))return!1;if(a(t))return!0}return!0}var a=t.isContentEditableTrue,o=t.isContentEditableFalse,s=t.isBr,l=t.isText,c=t.matchNodeNames("script style textarea"),u=t.matchNodeNames("img input textarea hr iframe video audio object"),d=t.matchNodeNames("table"),h=n.isCaretContainer;return{isCaretCandidate:i,isInEditable:r,isAtomic:function(t){return u(t)||function(t){return!!o(t)&&!0!==e.reduce(t.getElementsByTagName("*"),(function(t,e){return t||a(e)}),!1)}(t)},isEditableCaretCandidate:function(t,e){return i(t)&&r(t,e)}}})),n(F,[],(function(){function t(t){return t?{left:o(t.left),top:o(t.top),bottom:o(t.bottom),right:o(t.right),width:o(t.width),height:o(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function e(t,e,n){return t>=0&&t<=Math.min(e.height,n.height)/2}function n(t,n){return t.bottom<n.top||!(t.top>n.bottom)&&e(n.top-t.bottom,t,n)}function i(t,n){return t.top>n.bottom||!(t.bottom<n.top)&&e(n.bottom-t.top,t,n)}function r(t,e){return t.left<e.left}function a(t,e){return t.right>e.right}var o=Math.round;return{clone:t,collapse:function(e,n){return e=t(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},isEqual:function(t,e){return t.left===e.left&&t.top===e.top&&t.bottom===e.bottom&&t.right===e.right},isAbove:n,isBelow:i,isLeft:r,isRight:a,compare:function(t,e){return n(t,e)?-1:i(t,e)?1:r(t,e)?-1:a(t,e)?1:0},containsXY:function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom}}})),n(H,[],(function(){var t=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]");return{isExtendingChar:function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}}})),n(V,[z,_,x,k,B,F,H],(function(t,e,n,i,r,a,o){function s(t){return"createRange"in t?t.createRange():n.DOM.createRng()}function l(t){return t&&/[\r\n\t ]/.test(t)}function c(t){var e,n=t.startContainer,i=t.startOffset;return!!(l(t.toString())&&m(n.parentNode)&&(e=n.data,l(e[i-1])||l(e[i+1])))}function u(e,n,i){function r(){return i||(i=function(t){function e(t){var e,n;return n=t.getClientRects(),e=a.clone(n.length>0?n[0]:t.getBoundingClientRect()),y(t)&&0===e.left?function(t){var e,n=t.ownerDocument,i=s(n),r=n.createTextNode(""),o=t.parentNode;return o.insertBefore(r,t),i.setStart(r,0),i.setEnd(r,1),e=a.clone(i.getBoundingClientRect()),o.removeChild(r),e}(t):e}function n(t,e){return(t=a.collapse(t,e)).width=1,t.right=t.left+1,t}function i(t){0!==t.height&&(h.length>0&&a.isEqual(t,h[h.length-1])||h.push(t))}function r(t,r){var a=s(t.ownerDocument);if(r<t.data.length){if(o.isExtendingChar(t.data[r]))return h;if(o.isExtendingChar(t.data[r-1])&&(a.setStart(t,r),a.setEnd(t,r+1),!c(a)))return i(n(e(a),!1)),h}r>0&&(a.setStart(t,r-1),a.setEnd(t,r),c(a)||i(n(e(a),!1))),r<t.data.length&&(a.setStart(t,r),a.setEnd(t,r+1),c(a)||i(n(e(a),!0)))}var l,u,h=[];if(v(t.container()))return r(t.container(),t.offset()),h;if(d(t.container()))if(t.isAtEnd())u=b(t.container(),t.offset()),v(u)&&r(u,u.data.length),p(u)&&!y(u)&&i(n(e(u),!1));else{if(u=b(t.container(),t.offset()),v(u)&&r(u,0),p(u)&&t.isAtEnd())return i(n(e(u),!1)),h;l=b(t.container(),t.offset()-1),p(l)&&!y(l)&&(f(l)||f(u)||!p(u))&&i(n(e(l),!1)),p(u)&&i(n(e(u),!0))}return h}(new u(e,n))),i}return{container:t.constant(e),offset:t.constant(n),toRange:function(){var t;return(t=s(e.ownerDocument)).setStart(e,n),t.setEnd(e,n),t},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return v(e),0===n},isAtEnd:function(){return v(e)?n>=e.data.length:n>=e.childNodes.length},isEqual:function(t){return t&&e===t.container()&&n===t.offset()},getNode:function(t){return b(e,t?n-1:n)}}}var d=e.isElement,h=r.isCaretCandidate,f=e.matchStyleValues("display","block table"),g=e.matchStyleValues("float","left right"),p=t.and(d,h,t.negate(g)),m=t.negate(e.matchStyleValues("white-space","pre pre-line pre-wrap")),v=e.isText,y=e.isBr,x=n.nodeIndex,b=i.getNode;return u.fromRangeStart=function(t){return new u(t.startContainer,t.startOffset)},u.fromRangeEnd=function(t){return new u(t.endContainer,t.endOffset)},u.after=function(t){return new u(t.parentNode,x(t)+1)},u.before=function(t){return new u(t.parentNode,x(t))},u})),n(W,[_,x,z,d,V],(function(t,e,n,i,r){function a(t){return t?i.reduce(t.childNodes,(function(t,e){return d(e)&&"BR"!=e.nodeName?t=t.concat(a(e)):t.push(e),t}),[]):[]}function o(t){return function(e){return t===e}}function s(e){var n,r,s;return n=a(function t(e){var n=e.parentNode;return d(n)?t(n):n}(e)),r=i.findIndex(n,o(e),e),n=n.slice(0,r+1),s=i.reduce(n,(function(t,e,i){return u(e)&&u(n[i-1])&&t++,t}),0),n=i.filter(n,t.matchNodeNames(e.nodeName)),(r=i.findIndex(n,o(e),e))-s}function l(t){return(u(t)?"text()":t.nodeName.toLowerCase())+"["+s(t)+"]"}function c(e,n,r){var o=a(e);return o=i.filter(o,(function(t,e){return!u(t)||!u(o[e-1])})),(o=i.filter(o,t.matchNodeNames(n)))[r]}var u=t.isText,d=t.isBogus,h=e.nodeIndex;return{create:function(e,r){var a,o,s,c,d,h=[];return a=r.container(),o=r.offset(),u(a)?s=function(t,e){for(;(t=t.previousSibling)&&u(t);)e+=t.data.length;return e}(a,o):(o>=(c=a.childNodes).length?(s="after",o=c.length-1):s="before",a=c[o]),h.push(l(a)),d=function(t,e,n){var i=[];for(e=e.parentNode;e!=t;e=e.parentNode)i.push(e);return i}(e,a),d=i.filter(d,n.negate(t.isBogus)),(h=h.concat(i.map(d,(function(t){return l(t)})))).reverse().join("/")+","+s},resolve:function(t,e){var n,a,o;return e?(n=e.split(","),e=n[0].split("/"),o=n.length>1?n[1]:"before",(a=i.reduce(e,(function(t,e){return(e=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e))?("text()"===e[1]&&(e[1]="#text"),c(t,e[1],parseInt(e[2],10))):null}),t))?u(a)?function(t,e){for(var n,i=t,a=0;u(i);){if(n=i.data.length,e>=a&&e<=a+n){t=i,e-=a;break}if(!u(i.nextSibling)){t=i,e=n;break}a+=n,i=i.nextSibling}return e>t.data.length&&(e=t.data.length),new r(t,e)}(a,parseInt(o,10)):(o="after"===o?h(a)+1:h(a),new r(a.parentNode,o)):null):null}}})),n(X,[l,h,C,W,V,_,k],(function(t,e,n,i,r,a,o){function s(s){var c=s.dom;this.getBookmark=function(t,u){function d(t,n){var i=0;return e.each(c.select(t),(function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!=n&&void i++})),i}function h(t){function e(e){var n,i,r,a=e?"start":"end";i=t[a+"Offset"],1==(n=t[a+"Container"]).nodeType&&"TR"==n.nodeName&&(n=(r=n.childNodes)[Math.min(e?i:i-1,r.length-1)])&&t["set"+(e?"Start":"End")](n,i=e?0:n.childNodes.length)}return e(!0),e(),t}var f,g,p,m,v,y,x,w="&#xFEFF;";if(2==t)return v=(y=s.getNode())?y.nodeName:null,f=s.getRng(),l(y)||"IMG"==v?{name:v,index:d(v,y)}:s.tridentSel?s.tridentSel.getBookmark(t):(y=function(t){function e(t,e){var i;if(a.isElement(t)&&(t=o.getNode(t,e),l(t)))return t;if(n.isCaretContainer(t)){if(a.isText(t)&&n.isCaretContainerBlock(t)&&(t=t.parentNode),l(i=t.previousSibling))return i;if(l(i=t.nextSibling))return i}}return e(t.startContainer,t.startOffset)||e(t.endContainer,t.endOffset)}(f))?{name:v=y.tagName,index:d(v,y)}:function(t){function e(t,e){var i,r,a=t[e?"startContainer":"endContainer"],o=t[e?"startOffset":"endOffset"],s=[],l=0;if(3==a.nodeType){if(u)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)o+=i.nodeValue.length;s.push(o)}else o>=(r=a.childNodes).length&&r.length&&(l=1,o=Math.max(0,r.length-1)),s.push(c.nodeIndex(r[o],u)+l);for(;a&&a!=n;a=a.parentNode)s.push(c.nodeIndex(a,u));return s}var n=c.getRoot(),i={};return i.start=e(t,!0),s.isCollapsed()||(i.end=e(t)),i}(f);if(3==t)return f=s.getRng(),{start:i.create(c.getRoot(),r.fromRangeStart(f)),end:i.create(c.getRoot(),r.fromRangeEnd(f))};if(t)return{rng:s.getRng()};if(f=s.getRng(),p=c.uniqueId(),m=s.isCollapsed(),x="overflow:hidden;line-height:0px",f.duplicate||f.item){if(f.item)return{name:v=(y=f.item(0)).nodeName,index:d(v,y)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+p+'_start" style="'+x+'">'+w+"</span>"),m||(g.collapse(!1),f.moveToElementText(g.parentElement()),0===f.compareEndPoints("StartToEnd",g)&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+p+'_end" style="'+x+'">'+w+"</span>"))}catch(b){return null}}else{if("IMG"==(v=(y=s.getNode()).nodeName))return{name:v,index:d(v,y)};g=h(f.cloneRange()),m||(g.collapse(!1),g.insertNode(c.create("span",{"data-mce-type":"bookmark",id:p+"_end",style:x},w))),(f=h(f)).collapse(!0),f.insertNode(c.create("span",{"data-mce-type":"bookmark",id:p+"_start",style:x},w))}return s.moveToBookmark({id:p,keep:1}),{id:p}},this.moveToBookmark=function(n){function r(t){var e,i,r,a,o=n[t?"start":"end"];if(o){for(r=o[0],i=u,e=o.length-1;e>=1;e--){if(o[e]>(a=i.childNodes).length-1)return;i=a[o[e]]}3===i.nodeType&&(r=Math.min(o[0],i.nodeValue.length)),1===i.nodeType&&(r=Math.min(o[0],i.childNodes.length)),t?l.setStart(i,r):l.setEnd(i,r)}return!0}function a(i){var r,a,o,s,l=c.get(n.id+"_"+i),u=n.keep;if(l&&(r=l.parentNode,"start"==i?(u?(r=l.firstChild,a=1):a=c.nodeIndex(l),d=h=r,f=g=a):(u?(r=l.firstChild,a=1):a=c.nodeIndex(l),h=r,g=a),!u)){for(s=l.previousSibling,o=l.nextSibling,e.each(e.grep(l.childNodes),(function(t){3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))}));l=c.get(n.id+"_"+i);)c.remove(l,1);s&&o&&s.nodeType==o.nodeType&&3==s.nodeType&&!t.opera&&(a=s.nodeValue.length,s.appendData(o.nodeValue),c.remove(o),"start"==i?(d=h=s,f=g=a):(h=s,g=a))}}function o(e){return!c.isBlock(e)||e.innerHTML||t.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}var l,u,d,h,f,g;if(n)if(e.isArray(n.start)){if(l=c.createRng(),u=c.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(n);r(!0)&&r()&&s.setRng(l)}else"string"==typeof n.start?s.setRng(function(){var t,e;return t=c.createRng(),e=i.resolve(c.getRoot(),n.start),t.setStart(e.container(),e.offset()),e=i.resolve(c.getRoot(),n.end),t.setEnd(e.container(),e.offset()),t}()):n.id?(a("start"),a("end"),d&&((l=c.createRng()).setStart(o(d),f),l.setEnd(o(h),g),s.setRng(l))):n.name?s.select(c.select(n.name)[n.index]):n.rng&&s.setRng(n.rng)}}var l=a.isContentEditableFalse;return s.isBookmarkNode=function(t){return t&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},s})),n(Y,[p,N,O,k,X,_,l,h,V],(function(t,n,i,r,a,o,s,l,c){function u(t,e,r,o){var s=this;s.dom=t,s.win=e,s.serializer=r,s.editor=o,s.bookmarkManager=new a(s),s.controlSelection=new i(s,o),s.win.getSelection||(s.tridentSel=new n(s))}var d=l.each,h=l.trim,f=s.ie;return u.prototype={setCursorLocation:function(t,e){var n=this,i=n.dom.createRng();t?(i.setStart(t,e),i.setEnd(t,e),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(t){var n,i,r,a=this,o=a.getRng(),s=a.dom.create("body"),l=a.getSel();return n=i="",(t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,a.editor.fire("BeforeGetContent",t),"text"==t.format?a.isCollapsed()?"":o.text||(l.toString?l.toString():""):(o.cloneContents?(r=o.cloneContents())&&s.appendChild(r):o.item!==e||o.htmlText!==e?(s.innerHTML="<br>"+(o.item?o.item(0).outerHTML:o.htmlText),s.removeChild(s.firstChild)):s.innerHTML=o.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),t.getInner=!0,t.content=a.isCollapsed()?"":n+a.serializer.serialize(s,t)+i,a.editor.fire("GetContent",t),t.content)},setContent:function(t,e){var n,i,r,a=this,o=a.getRng(),s=a.win.document;if((e=e||{format:"html"}).set=!0,e.selection=!0,e.content=t,e.no_events||a.editor.fire("BeforeSetContent",e),t=e.content,o.insertNode){t+='<span id="__caret">_</span>',o.startContainer==s&&o.endContainer==s?s.body.innerHTML=t:(o.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:o.createContextualFragment?o.insertNode(o.createContextualFragment(t)):(i=s.createDocumentFragment(),r=s.createElement("div"),i.appendChild(r),r.outerHTML=t,o.insertNode(i))),n=a.dom.get("__caret"),(o=s.createRange()).setStartBefore(n),o.setEndBefore(n),a.setRng(o),a.dom.remove("__caret");try{a.setRng(o)}catch(l){}}else o.item&&(s.execCommand("Delete",!1,null),o=a.getRng()),/^\s+/.test(t)?(o.pasteHTML('<span id="__mce_tmp">_</span>'+t),a.dom.remove("__mce_tmp")):o.pasteHTML(t);e.no_events||a.editor.fire("SetContent",e)},getStart:function(t){var e,n,i,r,a=this,o=a.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for((i=o.duplicate()).collapse(1),(e=i.parentElement()).ownerDocument!==a.dom.doc&&(e=a.dom.getRoot()),n=r=o.parentElement();r=r.parentNode;)if(r==e){e=n;break}return e}return 1==(e=o.startContainer).nodeType&&e.hasChildNodes()&&(t&&o.collapsed||(e=e.childNodes[Math.min(e.childNodes.length-1,o.startOffset)])),e&&3==e.nodeType?e.parentNode:e},getEnd:function(t){var e,n,i=this,r=i.getRng();return r.duplicate||r.item?r.item?r.item(0):((r=r.duplicate()).collapse(0),(e=r.parentElement()).ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),e&&"BODY"==e.nodeName&&e.lastChild||e):(n=r.endOffset,1==(e=r.endContainer).nodeType&&e.hasChildNodes()&&(t&&r.collapsed||(e=e.childNodes[n>0?n-1:n])),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(t,e){return this.bookmarkManager.getBookmark(t,e)},moveToBookmark:function(t){return this.bookmarkManager.moveToBookmark(t)},select:function(t,e){var n,i=this,r=i.dom,a=r.createRng();if(i.lastFocusBookmark=null,t){if(!e&&i.controlSelection.controlSelect(t))return;n=r.nodeIndex(t),a.setStart(t.parentNode,n),a.setEnd(t.parentNode,n+1),e&&(i._moveEndPoint(a,t,!0),i._moveEndPoint(a,t)),i.setRng(a)}return t},isCollapsed:function(){var t=this.getRng(),e=this.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},collapse:function(t){var e,n=this,i=n.getRng();i.item&&(e=i.item(0),(i=n.win.document.body.createTextRange()).moveToElementText(e)),i.collapse(!!t),n.setRng(i)},getSel:function(){var t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){function e(t,e,i){try{return e.compareBoundaryPoints(t,i)}catch(n){return-1}}var n,i,r,a,o,s,l=this;if(!l.win)return null;if(null==(a=l.win.document))return null;if(!t&&l.lastFocusBookmark){var c=l.lastFocusBookmark;return c.startContainer?((i=a.createRange()).setStart(c.startContainer,c.startOffset),i.setEnd(c.endContainer,c.endOffset)):i=c,i}if(t&&l.tridentSel)return l.tridentSel.getRangeAt(0);try{(n=l.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():a.createRange())}catch(u){}if((s=l.editor.fire("GetSelectionRange",{range:i})).range!==i)return s.range;if(f&&i&&i.setStart&&a.selection){try{o=a.selection.createRange()}catch(u){}o&&o.item&&(r=o.item(0),(i=a.createRange()).setStartBefore(r),i.setEndAfter(r))}return i||(i=a.createRange?a.createRange():a.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(r=l.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0)),l.selectedRange&&l.explicitRange&&(0===e(i.START_TO_START,i,l.selectedRange)&&0===e(i.END_TO_END,i,l.selectedRange)?i=l.explicitRange:(l.selectedRange=null,l.explicitRange=null)),i},setRng:function(t,e){var n,i,r=this;if(t)if(t.select){r.explicitRange=null;try{t.select()}catch(o){}}else if(r.tridentSel){if(t.cloneRange)try{r.tridentSel.addRange(t)}catch(o){}}else{if(n=r.getSel(),t=r.editor.fire("SetSelectionRange",{range:t}).range,n){r.explicitRange=t;try{n.removeAllRanges(),n.addRange(t)}catch(o){}!1===e&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),r.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}t.collapsed||t.startContainer!=t.endContainer||!n.setBaseAndExtent||s.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(i=t.startContainer.childNodes[t.startOffset])&&"IMG"==i.tagName&&(n.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),n.anchorNode===t.startContainer&&n.focusNode===t.endContainer||n.setBaseAndExtent(i,0,i,1)),r.editor.fire("AfterSetSelectionRange",{range:t})}},setNode:function(t){return this.setContent(this.dom.getOuterHTML(t)),t},getNode:function(){function t(t,e){for(var n=t;t&&3===t.nodeType&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n}var e,n,i,r,a,o=this,s=o.getRng(),l=o.dom.getRoot();return s?(n=s.startContainer,i=s.endContainer,r=s.startOffset,a=s.endOffset,s.setStart?(e=s.commonAncestorContainer,!s.collapsed&&(n==i&&a-r<2&&n.hasChildNodes()&&(e=n.childNodes[r]),3===n.nodeType&&3===i.nodeType&&(n=n.length===r?t(n.nextSibling,!0):n.parentNode,i=0===a?t(i.previousSibling,!1):i.parentNode,n&&n===i))?n:e&&3==e.nodeType?e.parentNode:e):((e=s.item?s.item(0):s.parentElement()).ownerDocument!==o.win.document&&(e=l),e)):l},getSelectedBlocks:function(e,n){var i,r,a=this,o=a.dom,s=[];if(r=o.getRoot(),e=o.getParent(e||a.getStart(),o.isBlock),n=o.getParent(n||a.getEnd(),o.isBlock),e&&e!=r&&s.push(e),e&&n&&e!=n){i=e;for(var l=new t(e,r);(i=l.next())&&i!=n;)o.isBlock(i)&&s.push(i)}return n&&e!=n&&n!=r&&s.push(n),s},isForward:function(){var t,e,n=this.dom,i=this.getSel();return!(i&&i.anchorNode&&i.focusNode)||((t=n.createRng()).setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),(e=n.createRng()).setStart(i.focusNode,i.focusOffset),e.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,e)<=0)},normalize:function(){var t=this,e=t.getRng();return s.range&&new r(t.dom).normalize(e)&&t.setRng(e,t.isForward()),e},selectorChanged:function(t,e){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",(function(t){var e=t.element,r=i.dom,a=r.getParents(e,null,r.getRoot()),o={};d(i.selectorChangedData,(function(t,e){d(a,(function(i){if(r.is(i,e))return n[e]||(d(t,(function(t){t(!0,{node:i,selector:e,parents:a})})),n[e]=t),o[e]=t,!1}))})),d(n,(function(t,i){o[i]||(delete n[i],d(t,(function(t){t(!1,{node:e,selector:i,parents:a})})))}))}))),i.selectorChangedData[t]||(i.selectorChangedData[t]=[]),i.selectorChangedData[t].push(e),i},getScrollContainer:function(){for(var t,e=this.dom.getRoot();e&&"BODY"!=e.nodeName;){if(e.scrollHeight>e.clientHeight){t=e;break}e=e.parentNode}return t},scrollIntoView:function(t,e){function n(t){for(var e=0,n=0,i=t;i&&i.nodeType;)e+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:e,y:n}}var i,r,a,s,l=this,c=l.dom,u=c.getRoot(),d=0;if(o.isElement(t)){if(!1===e&&(d=t.offsetHeight),"BODY"!=u.nodeName){var h=l.getScrollContainer();if(h)return i=n(t).y-n(h).y+d,s=h.clientHeight,void((i<(a=h.scrollTop)||i+25>a+s)&&(h.scrollTop=i<a?i:i-s+25))}r=c.getViewPort(l.editor.getWin()),i=c.getPos(t).y+d,a=r.y,s=r.h,(i<r.y||i+25>a+s)&&l.editor.getWin().scrollTo(0,i<a?i:i-s+25)}},placeCaretAt:function(t,e){this.setRng(r.getCaretRangeFromPoint(t,e,this.editor.getDoc()))},_moveEndPoint:function(e,n,i){var r=n,a=new t(n,r),o=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==h(n.nodeValue).length)return void(i?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(o[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?e.setStartBefore(n):"BR"==n.nodeName?e.setEndBefore(n):e.setEndAfter(n));if(s.ie&&s.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?e.setStart(n,0):e.setEnd(n,0))}while(n=i?a.next():a.prev());"BODY"==r.nodeName&&(i?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},getBoundingClientRect:function(){var t=this.getRng();return t.collapsed?c.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},u})),n(G,[X,h],(function(t,e){var n=e.each;return function(e){this.compare=function(i,r){function a(t){var i={};return n(e.getAttribs(t),(function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-")&&(i[r]=e.getAttrib(t,r))})),i}function o(t,e){var n,i;for(i in t)if(t.hasOwnProperty(i)){if(void 0===(n=e[i]))return!1;if(t[i]!=n)return!1;delete e[i]}for(i in e)if(e.hasOwnProperty(i))return!1;return!0}return!(i.nodeName!=r.nodeName||!o(a(i),a(r))||!o(e.parseStyle(e.getAttrib(i,"style")),e.parseStyle(e.getAttrib(r,"style")))||t.isBookmarkNode(i)||t.isBookmarkNode(r))}}})),n(U,[x,h,T],(function(t,e,n){function i(t,i){function r(t){var e;return function(t,e){e.classes.length&&s.addClass(t,e.classes.join(" ")),s.setAttribs(t,e.attrs)}(e=s.create((l="string"==typeof t?{name:t,classes:[],attrs:{}}:t).name),l),e}function a(t,n){var i="string"!=typeof t?t.nodeName.toLowerCase():t,r=u.getElementRule(i).parentsRequired;return!(!r||!r.length)&&(n&&-1!==e.inArray(r,n)?n:r[0])}var o,l,c,u=i&&i.schema||new n({});return t&&t.length?(o=r(l=t[0]),(c=s.create("div")).appendChild(function t(n,i,o){var l,c,u,d=i.length&&i[0],h=d&&d.name;if(u=a(n,h))h==u?(c=i[0],i=i.slice(1)):c=u;else if(d)c=i[0],i=i.slice(1);else if(!o)return n;return c&&(l=r(c)).appendChild(n),o&&(l||(l=s.create("div")).appendChild(n),e.each(o,(function(t){var e=r(t);l.insertBefore(e,n)}))),t(l,i,c&&c.siblings)}(o,t.slice(1),l.siblings)),c):""}function r(t){var n,i={classes:[],attrs:{}};return"*"!==(t=i.selector=e.trim(t))&&(n=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(t,n,r,a,o){switch(n){case"#":i.attrs.id=r;break;case".":i.classes.push(r);break;case":":-1!==e.inArray("checked disabled enabled read-only required".split(" "),r)&&(i.attrs[r]=r)}if("["==a){var s=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);s&&(i.attrs[s[1]]=s[2])}return""}))),i.name=n||"div",i}function a(t){return t&&"string"==typeof t?(t=(t=t.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),e.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(t){var n=e.map(t.split(/(?:~\+|~|\+)/),r),i=n.pop();return n.length&&(i.siblings=n),i})).reverse()):[]}var o=e.each,s=t.DOM;return{getCssText:function(t,e){function n(t){return t.replace(/%(\w+)/g,"")}var r,l,c,u,d,h,f="";if(!1===(h=t.settings.preview_styles))return"";if("string"!=typeof h&&(h="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(h=e.preview)?"":(r=e.block||e.inline||"span",(u=a(e.selector)).length?(u[0].name||(u[0].name=r),r=e.selector,l=i(u,t)):l=i([r],t),c=s.select(r,l)[0]||l.firstChild,o(e.styles,(function(t,e){(t=n(t))&&s.setStyle(c,e,t)})),o(e.attributes,(function(t,e){(t=n(t))&&s.setAttrib(c,e,t)})),o(e.classes,(function(t){t=n(t),s.hasClass(c,t)||s.addClass(c,t)})),t.fire("PreviewFormats"),s.setStyles(l,{position:"absolute",left:-65535}),t.getBody().appendChild(l),d=s.getStyle(t.getBody(),"fontSize",!0),d=/px$/.test(d)?parseInt(d,10):0,o(h.split(" "),(function(e){var n=s.getStyle(c,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=s.getStyle(t.getBody(),e,!0),"#ffffff"==s.toHex(n).toLowerCase())||"color"==e&&"#000000"==s.toHex(n).toLowerCase())){if("font-size"==e&&/em|%$/.test(n)){if(0===d)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*d+"px"}"border"==e&&n&&(f+="padding:0 2px;"),f+=e+":"+n+";"}})),t.fire("AfterPreviewFormats"),s.remove(l),f)},parseSelector:a,selectorToHtml:function(t,e){return i(a(t),e)}}})),n(j,[d,_,f],(function(t,e,n){var i={},r=t.filter,a=t.each;return function(t,e){var n=i.pre;n||(i.pre=n=[]),i.pre.push(e)}(0,(function(i){var o,s,l=i.selection.getRng();o=e.matchNodeNames("pre"),l.collapsed||(s=i.selection.getSelectedBlocks(),a(r(r(s,o),(function(e){return o(e.previousSibling)&&-1!=t.indexOf(s,e.previousSibling)})),(function(t){!function(t,e){n(e).remove(),n(t).append("<br><br>").append(e.childNodes)}(t.previousSibling,t)})))})),{postProcess:function(t,e){a(i[t],(function(t){t(e)}))}}})),n(q,[p,k,X,G,z,h,U,j],(function(t,e,n,i,r,a,o,s){return function(l){function c(t){return t.nodeType&&(t=t.nodeName),!!l.schema.getTextBlockElements()[t.toLowerCase()]}function u(t){return/^(TH|TD)$/.test(t.nodeName)}function d(t,e){return Y.getParents(t,e,Y.getRoot())}function h(t){return 1===t.nodeType&&"_mce_caret"===t.id}function f(t){return t?X[t]:X}function g(t,e){t&&("string"!=typeof t?it(t,(function(t,e){g(e,t)})):(it(e=e.length?e:[e],(function(t){t.deep===H&&(t.deep=!t.selector),t.split===H&&(t.split=!t.selector||t.inline),t.remove===H&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))})),X[t]=e))}function p(t,e){var n=f(e);if(n)for(var i=0;i<n.length;i++)if(!1===n[i].inherit&&Y.is(t,n[i].selector))return!0;return!1}function m(t){var e;return l.dom.getParent(t,(function(t){return(e=l.dom.getStyle(t,"text-decoration"))&&"none"!==e})),e}function v(t){var e;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(e=m(t.parentNode),l.dom.getStyle(t,"color")&&e?l.dom.setStyle(t,"text-decoration",e):l.dom.getStyle(t,"text-decoration")===e&&l.dom.setStyle(t,"text-decoration",null))}function y(e,n,i){function r(t,e){if(e=e||p,t){if(e.onformat&&e.onformat(t,e,n,i),it(e.styles,(function(e,i){Y.setStyle(t,i,I(e,n))})),e.styles){var r=Y.getAttrib(t,"style");r&&t.setAttribute("data-mce-style",r)}it(e.attributes,(function(e,i){Y.setAttrib(t,i,I(e,n))})),it(e.classes,(function(e){e=I(e,n),Y.hasClass(t,e)||Y.addClass(t,e)}))}}function a(t,e){var n=!1;return!!p.selector&&(it(t,(function(t){if(!("collapsed"in t)||t.collapsed===m)return Y.is(e,t.selector)&&!h(e)?(r(e,t),n=!0,!1):void 0})),n)}function o(t,i,o){var s,l,u=[],d=!0;r(l=Y.create(s=p.inline||p.block)),U.walk(t,(function(t){var i;it(t,(function t(f){var m,v,y,x;if(x=d,m=f.nodeName.toLowerCase(),v=f.parentNode.nodeName.toLowerCase(),1===f.nodeType&&et(f)&&(x=d,d="true"===et(f),y=!0),S(m,"br"))return i=0,void(p.block&&Y.remove(f));if(p.wrapper&&b(f,e,n))i=0;else{if(d&&!y&&p.block&&!p.wrapper&&c(m)&&j(v,s))return r(f=Y.rename(f,s)),u.push(f),void(i=0);if(p.selector){var w=a(g,f);if(!p.inline||w)return void(i=0)}!d||y||!j(s,m)||!j(v,s)||!o&&3===f.nodeType&&1===f.nodeValue.length&&65279===f.nodeValue.charCodeAt(0)||h(f)||p.inline&&q(f)?(i=0,it(rt(f.childNodes),t),y&&(d=x),i=0):(i||(i=Y.clone(l,Q),f.parentNode.insertBefore(i,f),u.push(i)),i.appendChild(f))}}))})),!0===p.links&&it(u,(function(t){!function t(e){"A"===e.nodeName&&r(e,p),it(rt(e.childNodes),t)}(t)})),it(u,(function(t){function i(t){var e=0;return it(t.childNodes,(function(t){D(t)||nt(t)||e++})),e}function a(t){var e=!1;return it(t.childNodes,(function(t){if(C(t))return e=t,!1})),e}var o;if(o=i(t),!(u.length>1)&&q(t)||0!==o){if(p.inline||p.wrapper){if(p.exact||1!==o||(t=function(t){var e,n;return(e=a(t))&&!nt(e)&&_(e,p)&&(r(n=Y.clone(e,Q)),Y.replace(n,t,tt),Y.remove(e,1)),n||t}(t)),it(g,(function(e){it(Y.select(e.inline,t),(function(t){nt(t)||E(e,n,t,e.exact?t:null)}))})),b(t.parentNode,e,n)&&E(p,n,t)&&(t=0),p.merge_with_parents&&Y.getParent(t.parentNode,(function(i){if(b(i,e,n))return E(p,n,t)&&(t=0),tt})),!q(t)&&!M(t,"fontSize")){var s=function(t,e){do{if(1!==i(t))break;if(!(t=a(t)))break;if(e(t))return t}while(t);return null}(t,k("fontSize"));s&&y("fontsize",{value:M(s,"fontSize")},t)}t&&!1!==p.merge_siblings&&(t=R(N(t),t),t=R(t,N(t,tt)))}}else Y.remove(t,1)}))}var u,d,g=f(e),p=g[0],m=!i&&G.isCollapsed();if("false"!==et(G.getNode())){if(p){if(i)i.nodeType?a(g,i)||((d=Y.createRng()).setStartBefore(i),d.setEndAfter(i),o(L(d,g),0,!0)):o(i,0,!0);else if(m&&p.inline&&!Y.select("td[data-mce-selected],th[data-mce-selected]").length)z("apply",e,n);else{var x=l.selection.getNode();Z||!g[0].defaultBlock||Y.getParent(x,Y.isBlock)||y(g[0].defaultBlock),l.selection.setRng(function(){var e=l.selection.getRng(),n=e.startContainer,r=e.endContainer;if(n!=r&&0===e.endOffset){var a=function(e,n){var r=new t(n);for(i=r.prev2();i;i=r.prev2()){if(3==i.nodeType&&i.data.length>0)return i;if(i.childNodes.length>1||i==e||"BR"==i.tagName)return i}}(n,r);e.setEnd(a,3==a.nodeType?a.data.length:a.childNodes.length)}return e}()),u=G.getBookmark(),o(L(G.getRng(tt),g)),p.styles&&((p.styles.color||p.styles.textDecoration)&&(at(x,v,"childNodes"),v(x)),p.styles.backgroundColor&&function t(e,n,i){it(e.childNodes,(function(e){C(e)&&(n(e)&&i(e),e.hasChildNodes()&&t(e,n,i))}))}(x,k("fontSize"),A("backgroundColor",I(p.styles.backgroundColor,n)))),G.moveToBookmark(u),B(G.getRng(tt)),l.nodeChanged()}s.postProcess(e,l)}}else{i=G.getNode();for(var w=0,T=g.length;w<T;w++)if(g[w].ceFalseOverride&&Y.is(i,g[w].selector))return void r(i,g[w])}}function x(t,e,n,i){function r(t){var n,i,a,o,s;if(1===t.nodeType&&et(t)&&(o=y,y="true"===et(t),s=!0),n=rt(t.childNodes),y&&!s)for(i=0,a=p.length;i<a&&!E(p[i],e,t,t);i++);if(v.deep&&n.length){for(i=0,a=n.length;i<a;i++)r(n[i]);s&&(y=o)}}function a(n){var r;return it(d(n.parentNode).reverse(),(function(n){var a;r||"_start"==n.id||"_end"==n.id||(a=b(n,t,e,i))&&!1!==a.split&&(r=n)})),r}function o(t){return function(t,n,i,r){var a,o,s,l,c,u;if(t){for(u=t.parentNode,a=n.parentNode;a&&a!=u;a=a.parentNode){for(o=Y.clone(a,Q),c=0;c<p.length;c++)if(E(p[c],e,o,o)){o=0;break}o&&(s&&o.appendChild(s),l||(l=o),s=o)}v.mixed&&q(t)||(n=Y.split(t,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}(a(t),t,t)}function s(t){var e=Y.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return nt(n)&&(n=n[t?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),Y.remove(e,!0),n}function c(t){var e,n,i=t.commonAncestorContainer;if(t=L(t,p,tt),v.split){if((e=O(t,tt))!=(n=O(t))){if(/^(TR|TH|TD)$/.test(e.nodeName)&&e.firstChild&&(e="TR"==e.nodeName?e.firstChild.firstChild||e:e.firstChild||e),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&u(n)&&n.firstChild&&(n=n.firstChild||n),Y.isChildOf(e,n)&&!q(n)&&!u(e)&&!u(n))return o(e=P(e,"span",{id:"_start","data-mce-type":"bookmark"})),void(e=s(tt));e=P(e,"span",{id:"_start","data-mce-type":"bookmark"}),n=P(n,"span",{id:"_end","data-mce-type":"bookmark"}),o(e),o(n),e=s(tt),n=s()}else e=n=o(e);t.startContainer=e.parentNode?e.parentNode:e,t.startOffset=$(e),t.endContainer=n.parentNode?n.parentNode:n,t.endOffset=$(n)+1}U.walk(t,(function(t){it(t,(function(t){r(t),1===t.nodeType&&"underline"===l.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===m(t.parentNode)&&E({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)}))}))}var h,g,p=f(t),v=p[0],y=!0;if(n)n.nodeType?((g=Y.createRng()).setStartBefore(n),g.setEndAfter(n),c(g)):c(n);else if("false"!==et(G.getNode()))G.isCollapsed()&&v.inline&&!Y.select("td[data-mce-selected],th[data-mce-selected]").length?z("remove",t,e,i):(h=G.getBookmark(),c(G.getRng(tt)),G.moveToBookmark(h),v.inline&&w(t,e,G.getStart())&&B(G.getRng(!0)),l.nodeChanged());else{n=G.getNode();for(var x=0,_=p.length;x<_&&(!p[x].ceFalseOverride||!E(p[x],e,n,n));x++);}}function b(t,e,n,i){function r(t,e,r){var a,o,s,l=e[r];if(e.onmatch)return e.onmatch(t,e,r);if(l)if(l.length===H){for(a in l)if(l.hasOwnProperty(a)){if(o="attributes"===r?Y.getAttrib(t,a):M(t,a),i&&!o&&!e.exact)return;if((!i||e.exact)&&!S(o,T(I(l[a],n),a)))return}}else for(s=0;s<l.length;s++)if("attributes"===r?Y.getAttrib(t,l[s]):M(t,l[s]))return e;return e}var a,o,s,l=f(e);if(l&&t)for(o=0;o<l.length;o++)if(_(t,a=l[o])&&r(t,a,"attributes")&&r(t,a,"styles")){if(s=a.classes)for(o=0;o<s.length;o++)if(!Y.hasClass(t,s[o]))return;return a}}function w(t,e,n){function i(n){var i=Y.getRoot();return n!==i&&(n=Y.getParent(n,(function(n){return!!p(n,t)||n.parentNode===i||!!b(n,t,e,!0)})),b(n,t,e))}var r;return n?i(n):i(n=G.getNode())||(r=G.getStart())!=n&&i(r)?tt:Q}function _(t,e){return S(t,e.inline)||S(t,e.block)?tt:e.selector?1==t.nodeType&&Y.is(t,e.selector):void 0}function S(t,e){return e=""+((e=e||"").nodeName||e),(t=""+((t=t||"").nodeName||t)).toLowerCase()==e.toLowerCase()}function C(t){return 1==t.nodeType&&!nt(t)&&!D(t)&&!h(t)}function k(t){return r.curry((function(t,e){return!(!e||!M(e,t))}),t)}function A(t,e){return r.curry((function(t,e,n){Y.setStyle(n,t,e)}),t,e)}function M(t,e){return T(Y.getStyle(t,e),e)}function T(t,e){return"color"!=e&&"backgroundColor"!=e||(t=Y.toHex(t)),"fontWeight"==e&&700==t&&(t="bold"),"fontFamily"==e&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t}function I(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,(function(t,n){return e[n]||t}))),t}function D(t){return t&&3===t.nodeType&&/^([\t \r\n]+|)$/.test(t.nodeValue)}function P(t,e,n){var i=Y.create(e,n);return t.parentNode.insertBefore(i,t),i.appendChild(t),i}function L(e,n,i){function r(t){function e(t){return"BR"==t.nodeName&&t.getAttribute("data-mce-bogus")&&!t.nextSibling}var i,r,a,o,s;if(i=r=t?m:y,o=t?"previousSibling":"nextSibling",s=Y.getRoot(),3==i.nodeType&&!D(i)&&(t?v>0:x<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&q(r))return r;for(a=r[o];a;a=a[o])if(!nt(a)&&!D(a)&&!e(a))return r;if(r==s||r.parentNode==s){i=r;break}r=r.parentNode}return i}function a(t,e){for(e===H&&(e=3===t.nodeType?t.length:t.childNodes.length);t&&t.hasChildNodes();)(t=t.childNodes[e])&&(e=3===t.nodeType?t.length:t.childNodes.length);return{node:t,offset:e}}function o(t){for(var e=t;e;){if(1===e.nodeType&&et(e))return"false"===et(e)?e:t;e=e.parentNode}return t}function s(e,n,r){function a(t,e){var n,a,o=t.nodeValue;return void 0===e&&(e=r?o.length:0),r?-1===(n=(n=o.lastIndexOf(" ",e))>(a=o.lastIndexOf("",e))?n:a)||i||n++:(n=o.indexOf(" ",e),a=o.indexOf("",e),n=-1!==n&&(-1===a||n<a)?n:a),n}var o,s,c,u;if(3===e.nodeType){if(-1!==(c=a(e,n)))return{container:e,offset:c};u=e}for(o=new t(e,Y.getParent(e,q)||l.getBody());s=o[r?"prev":"next"]();)if(3===s.nodeType){if(u=s,-1!==(c=a(s)))return{container:s,offset:c}}else if(q(s))break;if(u)return{container:u,offset:n=r?0:u.length}}function u(t,i){var r,a,o,s;for(3==t.nodeType&&0===t.nodeValue.length&&t[i]&&(t=t[i]),r=d(t),a=0;a<r.length;a++)for(o=0;o<n.length;o++)if((!("collapsed"in(s=n[o]))||s.collapsed===e.collapsed)&&Y.is(r[a],s.selector))return r[a];return t}function h(t,e){var i,r=Y.getRoot();if(n[0].wrapper||(i=Y.getParent(t,n[0].block,r)),i||(i=Y.getParent(3==t.nodeType?t.parentNode:t,(function(t){return t!=r&&c(t)}))),i&&n[0].wrapper&&(i=d(i,"ul,ol").reverse()[0]||i),!i)for(i=t;i[e]&&!q(i[e])&&!S(i=i[e],"br"););return i||t}var f,g,p,m=e.startContainer,v=e.startOffset,y=e.endContainer,x=e.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&3==(m=m.childNodes[v>(f=m.childNodes.length-1)?f:v]).nodeType&&(v=0),1==y.nodeType&&y.hasChildNodes()&&3==(y=y.childNodes[x>(f=y.childNodes.length-1)?f:x-1]).nodeType&&(x=y.nodeValue.length),m=o(m),y=o(y),(nt(m.parentNode)||nt(m))&&3==(m=(m=nt(m)?m:m.parentNode).nextSibling||m).nodeType&&(v=0),(nt(y.parentNode)||nt(y))&&3==(y=(y=nt(y)?y:y.parentNode).previousSibling||y).nodeType&&(x=y.length),n[0].inline&&(e.collapsed&&((p=s(m,v,!0))&&(m=p.container,v=p.offset),(p=s(y,x))&&(y=p.container,x=p.offset)),(g=a(y,x)).node)){for(;g.node&&0===g.offset&&g.node.previousSibling;)g=a(g.node.previousSibling);g.node&&g.offset>0&&3===g.node.nodeType&&" "===g.node.nodeValue.charAt(g.offset-1)&&g.offset>1&&(y=g.node).splitText(g.offset-1)}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==v||(m=r(!0)),n[0].inline&&3==y.nodeType&&x!==y.nodeValue.length||(y=r())),n[0].selector&&n[0].expand!==Q&&!n[0].inline&&(m=u(m,"previousSibling"),y=u(y,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(q(m)||(m=r(!0)),q(y)||(y=r()))),1==m.nodeType&&(v=$(m),m=m.parentNode),1==y.nodeType&&(x=$(y)+1,y=y.parentNode),{startContainer:m,startOffset:v,endContainer:y,endOffset:x}}function E(t,e,n,i){var r,a,o;if(!_(n,t)&&!function(t,e){return e.links&&"A"==t.tagName}(n,t))return Q;if("all"!=t.remove)for(it(t.styles,(function(r,a){r=T(I(r,e),a),"number"==typeof a&&(a=r,i=0),(t.remove_similar||!i||S(M(i,a),r))&&Y.setStyle(n,a,""),o=1})),o&&""===Y.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),it(t.attributes,(function(t,r){var a;if(t=I(t,e),"number"==typeof r&&(r=t,i=0),!i||S(Y.getAttrib(i,r),t)){if("class"==r&&(t=Y.getAttrib(n,r))&&(a="",it(t.split(/\s+/),(function(t){/mce\-\w+/.test(t)&&(a+=(a?" ":"")+t)})),a))return void Y.setAttrib(n,r,a);"class"==r&&n.removeAttribute("className"),J.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}})),it(t.classes,(function(t){t=I(t,e),i&&!Y.hasClass(i,t)||Y.removeClass(n,t)})),a=Y.getAttribs(n),r=0;r<a.length;r++){var s=a[r].nodeName;if(0!==s.indexOf("_")&&0!==s.indexOf("data-"))return Q}return"none"!=t.remove?(function(t,e){function n(t,e,n){return!(t=N(t,e,n))||"BR"==t.nodeName||q(t)}var i,r=t.parentNode;e.block&&(Z?r==Y.getRoot()&&(e.list_block&&S(t,e.list_block)||it(rt(t.childNodes),(function(t){j(Z,t.nodeName.toLowerCase())?i?i.appendChild(t):(i=P(t,Z),Y.setAttribs(i,l.settings.forced_root_block_attrs)):i=0}))):q(t)&&!q(r)&&(n(t,Q)||n(t.firstChild,tt,1)||t.insertBefore(Y.create("br"),t.firstChild),n(t,tt)||n(t.lastChild,Q,1)||t.appendChild(Y.create("br")))),e.selector&&e.inline&&!S(e.inline,t)||Y.remove(t,1)}(n,t),tt):void 0}function N(t,e,n){if(t)for(e=e?"nextSibling":"previousSibling",t=n?t:t[e];t;t=t[e])if(1==t.nodeType||!D(t))return t}function R(t,e){function n(t,e){for(r=t;r;r=r[e]){if(3==r.nodeType&&0!==r.nodeValue.length)return t;if(1==r.nodeType&&!nt(r))return r}return t}var r,a,o=new i(Y);if(t&&e&&(t=n(t,"previousSibling"),e=n(e,"nextSibling"),o.compare(t,e))){for(r=t.nextSibling;r&&r!=e;)a=r,r=r.nextSibling,t.appendChild(a);return Y.remove(e),it(rt(e.childNodes),(function(e){t.appendChild(e)})),t}return e}function O(e,n){var i,r,a;return r=e[n?"startOffset":"endOffset"],1==(i=e[n?"startContainer":"endContainer"]).nodeType&&(!n&&r&&r--,i=i.childNodes[r>(a=i.childNodes.length-1)?a:r]),3===i.nodeType&&n&&r>=i.nodeValue.length&&(i=new t(i,l.getBody()).next()||i),3!==i.nodeType||n||0!==r||(i=new t(i,l.getBody()).prev()||i),i}function z(e,n,i,r){function a(t){var e=Y.create("span",{id:g,"data-mce-bogus":!0,style:p?"color:red":""});return t&&e.appendChild(l.getDoc().createTextNode(K)),e}function o(t,e){for(;t;){if(3===t.nodeType&&t.nodeValue!==K||t.childNodes.length>1)return!1;e&&1===t.nodeType&&e.push(t),t=t.firstChild}return!0}function s(t){for(;t;){if(t.id===g)return t;t=t.parentNode}}function u(e){var n;if(e)for(e=(n=new t(e,e)).current();e;e=n.next())if(3===e.nodeType)return e}function d(t,e){var n,i;if(t)i=G.getRng(!0),o(t)?(!1!==e&&(i.setStartBefore(t),i.setEndBefore(t)),Y.remove(t)):((n=u(t)).nodeValue.charAt(0)===K&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),Y.remove(t,1)),G.setRng(i);else if(!(t=s(G.getStart())))for(;t=Y.get(g);)d(t,!1)}function h(){var t;(t=s(G.getStart()))&&!Y.isEmpty(t)&&at(t,(function(t){1!=t.nodeType||t.id===g||Y.isEmpty(t)||Y.setAttrib(t,"data-mce-bogus",null)}),"childNodes")}var g="_mce_caret",p=l.settings.caret_debug;l._hasCaretEvents||(W=function(){var t,e=[];if(o(s(G.getStart()),e))for(t=e.length;t--;)Y.setAttrib(e[t],"data-mce-bogus","1")},V=function(t){var e=t.keyCode;d(),8==e&&G.isCollapsed()&&G.getStart().innerHTML==K&&d(s(G.getStart())),37!=e&&39!=e||d(s(G.getStart())),h()},l.on("SetContent",(function(t){t.selection&&h()})),l._hasCaretEvents=!0),"apply"==e?function(){var t,e,r,o,l,c;o=(t=G.getRng(!0)).startOffset,c=t.startContainer.nodeValue,(e=s(G.getStart()))&&(r=u(e));var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&o>0&&o<c.length&&d.test(c.charAt(o))&&d.test(c.charAt(o-1))?(l=G.getBookmark(),t.collapse(!0),t=L(t,f(n)),t=U.split(t),y(n,i,t),G.moveToBookmark(l)):(e&&r.nodeValue===K||(r=(e=a(!0)).firstChild,t.insertNode(e),o=1),y(n,i,e),G.setCursorLocation(r,o))}():function(){var t,e,o,s,l,u,d,h=G.getRng(!0),g=[];for(s=t=h.startContainer,3==t.nodeType&&(h.startOffset!=t.nodeValue.length&&(o=!0),s=s.parentNode);s;){if(b(s,n,i,r)){l=s;break}s.nextSibling&&(o=!0),g.push(s),s=s.parentNode}if(l)if(o)e=G.getBookmark(),h.collapse(!0),h=L(h,f(n),!0),h=U.split(h),x(n,i,h),G.moveToBookmark(e);else{for(s=d=a(),u=g.length-1;u>=0;u--)s.appendChild(Y.clone(g[u],!1)),s=s.firstChild;s.appendChild(Y.doc.createTextNode(K)),s=s.firstChild;var p=Y.getParent(l,c);p&&Y.isEmpty(p)?l.parentNode.replaceChild(d,l):Y.insertAfter(d,l),G.setCursorLocation(s,1),Y.isEmpty(l)&&Y.remove(l)}}()}function B(e){var n,i,r,a,o,s=e.startContainer,l=e.startOffset;if((e.startContainer!=e.endContainer||!function(t){return t&&/^(IMG)$/.test(t.nodeName)}(e.startContainer.childNodes[e.startOffset]))&&(3==s.nodeType&&l>=s.nodeValue.length&&(l=$(s),s=s.parentNode,n=!0),1==s.nodeType))for(s=(a=s.childNodes)[Math.min(l,a.length-1)],i=new t(s,Y.getParent(s,Y.isBlock)),(l>a.length-1||n)&&i.next(),r=i.current();r;r=i.next())if(3==r.nodeType&&!D(r))return o=Y.create("a",{"data-mce-bogus":"all"},K),r.parentNode.insertBefore(o,r),e.setStart(r,0),G.setRng(e),void Y.remove(o)}var F,H,V,W,X={},Y=l.dom,G=l.selection,U=new e(Y),j=l.schema.isValidChild,q=Y.isBlock,Z=l.settings.forced_root_block,$=Y.nodeIndex,K="\ufeff",J=/^(src|href|style)$/,Q=!1,tt=!0,et=Y.getContentEditable,nt=n.isBookmarkNode,it=a.each,rt=a.grep,at=a.walk;(0,a.extend)(this,{get:f,register:g,unregister:function(t){return t&&X[t]&&delete X[t],X},apply:y,remove:x,toggle:function(t,e,n){var i=f(t);!w(t,e,n)||"toggle"in i[0]&&!i[0].toggle?y(t,e,n):x(t,e,n)},match:w,matchAll:function(t,e){var n,i=[],r={};return n=G.getStart(),Y.getParent(n,(function(n){var a,o;for(a=0;a<t.length;a++)!r[o=t[a]]&&b(n,o,e)&&(r[o]=!0,i.push(o))}),Y.getRoot()),i},matchNode:b,canApply:function(t){var e,n,i,r,a=f(t);if(a)for(e=d(G.getStart()),i=a.length-1;i>=0;i--){if(!(r=a[i].selector)||a[i].defaultBlock)return tt;for(n=e.length-1;n>=0;n--)if(Y.is(e[n],r))return tt}return Q},formatChanged:function(t,e,n){var i;return F||(F={},i={},l.on("NodeChange",(function(t){var e=d(t.element),n={};e=a.grep(e,(function(t){return 1==t.nodeType&&!t.getAttribute("data-mce-bogus")})),it(F,(function(t,r){it(e,(function(a){return b(a,r,{},t.similar)?(i[r]||(it(t,(function(t){t(!0,{node:a,format:r,parents:e})})),i[r]=t),n[r]=t,!1):!p(a,r)&&void 0}))})),it(i,(function(r,a){n[a]||(delete i[a],it(r,(function(n){n(!1,{node:t.element,format:a,parents:e})})))}))}))),it(t.split(","),(function(t){F[t]||(F[t]=[],F[t].similar=n),F[t].push(e)})),this},getCssText:function(t){return o.getCssText(l,t)}}),g({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,e,n){it(n,(function(e,n){Y.setAttrib(t,n,e)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),it("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(t){g(t,{block:t,remove:"all"})})),g(l.settings.formats),function(){l.addShortcut("meta+b","bold_desc","Bold"),l.addShortcut("meta+i","italic_desc","Italic"),l.addShortcut("meta+u","underline_desc","Underline");for(var t=1;t<=6;t++)l.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);l.addShortcut("access+7","",["FormatBlock",!1,"p"]),l.addShortcut("access+8","",["FormatBlock",!1,"div"]),l.addShortcut("access+9","",["FormatBlock",!1,"address"])}(),l.on("BeforeGetContent",(function(t){W&&"raw"!=t.format&&W()})),l.on("mouseup keydown",(function(t){V&&V(t)}))}})),n(Z,[],(function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(t,e){var n=t.length+e.length+2,i=new Array(n),r=new Array(n),a=function(n,i,r,o,l){var c=s(n,i,r,o);if(null===c||c.start===i&&c.diag===i-o||c.end===n&&c.diag===n-r)for(var u=n,d=r;u<i||d<o;)u<i&&d<o&&t[u]===e[d]?(l.push([0,t[u]]),++u,++d):i-n>o-r?(l.push([2,t[u]]),++u):(l.push([1,e[d]]),++d);else{a(n,c.start,r,c.start-c.diag,l);for(var h=c.start;h<c.end;++h)l.push([0,t[h]]);a(c.end,i,c.end-c.diag,o,l)}},o=function(n,i,r,a){for(var o=n;o-i<a&&o<r&&t[o]===e[o-i];)++o;return function(t,e,n){return{start:t,end:e,diag:n}}(n,o,i)},s=function(n,a,s,l){var c=a-n,u=l-s;if(0===c||0===u)return null;var d=c-u,h=u+c,f=(h%2==0?h:h+1)/2;i[1+f]=n,r[1+f]=a+1;for(var g=0;g<=f;++g){for(var p=-g;p<=g;p+=2){var m=p+f;i[m]=p===-g||p!=g&&i[m-1]<i[m+1]?i[m+1]:i[m-1]+1;for(var v=i[m],y=v-n+s-p;v<a&&y<l&&t[v]===e[y];)i[m]=++v,++y;if(d%2!=0&&d-g<=p&&p<=d+g&&r[m-d]<=i[m])return o(r[m-d],p+n-s,a,l)}for(p=d-g;p<=d+g;p+=2){for(r[m=p+f-d]=p===d-g||p!=d+g&&r[m+1]<=r[m-1]?r[m+1]-1:r[m-1],y=(v=r[m]-1)-n+s-p;v>=n&&y>=s&&t[v]===e[y];)r[m]=v--,y--;if(d%2==0&&-g<=p&&p<=g&&r[m]<=i[m+d])return o(r[m],p+n-s,a,l)}}},l=[];return a(0,t.length,0,e.length,l),l}}})),n($,[d,v,Z],(function(t,e,n){var i=function(t){return 1===t.nodeType?t.outerHTML:3===t.nodeType?e.encodeRaw(t.data,!1):8===t.nodeType?"\x3c!--"+t.data+"--\x3e":""};return{read:function(e){return t.map(e.childNodes,i)},write:function(e,r){var a=t.map(r.childNodes,i);return function(e,i){var r=0;t.each(e,(function(t){t[0]===n.KEEP?r++:t[0]===n.INSERT?(function(t,e,n){var i=function(t){var e,n,i;for(i=document.createElement("div"),e=document.createDocumentFragment(),t&&(i.innerHTML=t);n=i.firstChild;)e.appendChild(n);return e}(e);if(t.hasChildNodes()&&n<t.childNodes.length){var r=t.childNodes[n];r.parentNode.insertBefore(i,r)}else t.appendChild(i)}(i,t[1],r),r++):t[0]===n.DELETE&&function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}}(i,r)}))}(n.diff(a,e),r),r}}})),n(K,[d,$],(function(t,e){var n=function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}},i=function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}},r=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content};return{createFragmentedLevel:n,createCompleteLevel:i,createFromEditor:function(r){var a,o,s;return a=e.read(r.getBody()),function(t){return-1!==t.indexOf("</iframe>")}(o=(s=t.map(a,(function(t){return r.serializer.trimContent(t)}))).join(""))?n(s):i(o)},applyToEditor:function(t,n,i){"fragmented"===n.type?e.write(n.fragments,t.getBody()):t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},isEq:function(t,e){return r(t)===r(e)}}})),n(J,[R,h,K],(function(t,e,n){return function(t){function i(e){t.setDirty(e)}function r(t){l.typing=!1,l.add({},t)}function a(){l.typing&&(l.typing=!1,l.add())}var o,s,l=this,c=0,u=[],d=0;return t.on("init",(function(){l.add()})),t.on("BeforeExecCommand",(function(t){var e=t.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&(a(),l.beforeChange())})),t.on("ExecCommand",(function(t){var e=t.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&r(t)})),t.on("ObjectResizeStart Cut",(function(){l.beforeChange()})),t.on("SaveContent ObjectResized blur",r),t.on("DragEnd",r),t.on("KeyUp",(function(e){var a=e.keyCode;e.isDefaultPrevented()||((a>=33&&a<=36||a>=37&&a<=40||45===a||e.ctrlKey)&&(r(),t.nodeChanged()),46!==a&&8!==a||t.nodeChanged(),s&&l.typing&&(t.isDirty()||(i(u[0]&&!n.isEq(n.createFromEditor(t),u[0])),t.isDirty()&&t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),s=!1,t.nodeChanged()))})),t.on("KeyDown",(function(t){var e=t.keyCode;if(!t.isDefaultPrevented()){if(e>=33&&e<=36||e>=37&&e<=40||45===e)return void(l.typing&&r(t));!(e<16||e>20)||224===e||91===e||l.typing||t.ctrlKey&&!t.altKey||t.metaKey||(l.beforeChange(),l.typing=!0,l.add({},t),s=!0)}})),t.on("MouseDown",(function(t){l.typing&&r(t)})),t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",(function(e){e.isDefaultPrevented()||t.nodeChanged()})),l={data:u,typing:!1,beforeChange:function(){d||(o=t.selection.getBookmark(2,!0))},add:function(r,a){var s,l,h,f=t.settings;if(h=n.createFromEditor(t),r=e.extend(r=r||{},h),d||t.removed)return null;if(t.fire("BeforeAddUndo",{level:r,lastLevel:l=u[c],originalEvent:a}).isDefaultPrevented())return null;if(l&&n.isEq(l,r))return null;if(u[c]&&(u[c].beforeBookmark=o),f.custom_undo_redo_levels&&u.length>f.custom_undo_redo_levels){for(s=0;s<u.length-1;s++)u[s]=u[s+1];u.length--,c=u.length}r.bookmark=t.selection.getBookmark(2,!0),c<u.length-1&&(u.length=c+1),u.push(r),c=u.length-1;var g={level:r,lastLevel:l,originalEvent:a};return t.fire("AddUndo",g),c>0&&(i(!0),t.fire("change",g)),r},undo:function(){var e;return l.typing&&(l.add(),l.typing=!1),c>0&&(e=u[--c],n.applyToEditor(t,e,!0),i(!0),t.fire("undo",{level:e})),e},redo:function(){var e;return c<u.length-1&&(e=u[++c],n.applyToEditor(t,e,!1),i(!0),t.fire("redo",{level:e})),e},clear:function(){u=[],c=0,l.typing=!1,l.data=u,t.fire("ClearUndos")},hasUndo:function(){return c>0||l.typing&&u[0]&&!n.isEq(n.createFromEditor(t),u[0])},hasRedo:function(){return c<u.length-1&&!l.typing},transact:function(t){a(),l.beforeChange();try{d++,t()}finally{d--}return l.add()},extra:function(e,i){var r;l.transact(e)&&(r=u[c].bookmark,n.applyToEditor(t,u[c-1],!0),l.transact(i)&&(u[c-1].beforeBookmark=r))}}}})),n(Q,[p,k,C,l],(function(t,e,n,i){var r=i.ie&&i.ie<11;return function(a){function o(o){function g(t){return t&&s.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==s.getContentEditable(t)}function p(t){var e;s.isBlock(t)&&(e=l.getRng(),t.appendChild(s.create("span",null,"")),l.select(t),t.lastChild.outerHTML="",l.setRng(e))}function m(e){var n,r,a,o,c=e;if(e){if(i.ie&&i.ie<9&&T&&T.firstChild&&T.firstChild==T.lastChild&&"BR"==T.firstChild.tagName&&s.remove(T.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)){var u=function(t){for(;t;){if(1==t.nodeType||3==t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}}(e.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&e.insertBefore(s.doc.createTextNode(""),e.firstChild)}if(a=s.createRng(),i.ie||e.normalize(),e.hasChildNodes()){for(n=new t(e,e);r=n.current();){if(3==r.nodeType){a.setStart(r,0),a.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){a.setStartBefore(r),a.setEndBefore(r);break}c=r,r=n.next()}r||(a.setStart(c,0),a.setEnd(c,0))}else"BR"==e.nodeName?e.nextSibling&&s.isBlock(e.nextSibling)?((!I||I<9)&&(o=s.create("br"),e.parentNode.insertBefore(o,e)),a.setStartBefore(e),a.setEndBefore(e)):(a.setStartAfter(e),a.setEndAfter(e)):(a.setStart(e,0),a.setEnd(e,0));l.setRng(a),s.remove(o),l.scrollIntoView(e)}}function v(t){var e=c.forced_root_block;e&&e.toLowerCase()===t.tagName.toLowerCase()&&s.setAttribs(t,c.forced_root_block_attrs)}function y(t){t.innerHTML=r?"":'<br data-mce-bogus="1">'}function x(t){var e,n,i,a=A,o=d.getTextInlineElements();if(t||"TABLE"==N?v(e=s.create(t||O)):e=T.cloneNode(!1),i=e,!1!==c.keep_styles)do{if(o[a.nodeName]){if("_mce_caret"==a.id)continue;n=a.cloneNode(!1),s.setAttrib(n,"id",""),e.hasChildNodes()?(n.appendChild(e.firstChild),e.appendChild(n)):(i=n,e.appendChild(n))}}while((a=a.parentNode)&&a!=k);return r||(i.innerHTML='<br data-mce-bogus="1">'),e}function b(e){var n,i,r;if(3==A.nodeType&&(e?M>0:M<A.nodeValue.length))return!1;if(A.parentNode==T&&z&&!e)return!0;if(e&&1==A.nodeType&&A==T.firstChild)return!0;if("TABLE"===A.nodeName||A.previousSibling&&"TABLE"==A.previousSibling.nodeName)return z&&!e||!z&&e;for(n=new t(A,T),3==A.nodeType&&(e&&0===M?n.prev():e||M!=A.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(r=i.nodeName.toLowerCase(),h[r]&&"br"!==r))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;e?n.prev():n.next()}return!0}function w(){a.execCommand("InsertLineBreak",!1,o)}function _(){P=/^(H[1-6]|PRE|FIGURE)$/.test(N)&&"HGROUP"!=R?x(O):x(),c.end_container_on_empty_block&&g(E)&&s.isEmpty(T)?P=s.split(E,T):s.insertAfter(P,T),m(P)}var S,C,k,A,M,T,I,D,P,L,E,N,R,O,z;if(S=l.getRng(!0),!o.isDefaultPrevented()){if(!S.collapsed)return void a.execCommand("Delete");if(new e(s).normalize(S),A=S.startContainer,M=S.startOffset,O=(O=(c.force_p_newlines?"p":"")||c.forced_root_block)?O.toUpperCase():"",I=s.doc.documentMode,D=o.shiftKey,1==A.nodeType&&A.hasChildNodes()&&(z=M>A.childNodes.length-1,A=A.childNodes[Math.min(M,A.childNodes.length-1)]||A,M=z&&3==A.nodeType?A.nodeValue.length:0),k=function(t){var e,n,i=s.getRoot();for(e=t;e!==i&&"false"!==s.getContentEditable(e);)"true"===s.getContentEditable(e)&&(n=e),e=e.parentNode;return e!==i?n:i}(A)){if(u.beforeChange(),!s.isBlock(k)&&k!=s.getRoot())return void(O&&!D||w());if((O&&!D||!O&&D)&&(A=function(t,e){var n,i,r,o,l,c,u=O||"P";if(!(i=s.getParent(t,s.isBlock))||!g(i)){if(c=(i=i||k)==a.getBody()||function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)}(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return v(n=s.create(u)),i.appendChild(n),S.setStart(n,0),S.setEnd(n,0),n;for(o=t;o.parentNode!=i;)o=o.parentNode;for(;o&&!s.isBlock(o);)r=o,o=o.previousSibling;if(r&&d.isValidChild(c,u.toLowerCase())){for(v(n=s.create(u)),r.parentNode.insertBefore(n,r),o=r;o&&!s.isBlock(o);)l=o.nextSibling,n.appendChild(o),o=l;S.setStart(t,e),S.setEnd(t,e)}}return t}(A,M)),T=s.getParent(A,s.isBlock),E=T?s.getParent(T.parentNode,s.isBlock):null,N=T?T.nodeName.toUpperCase():"","LI"!=(R=E?E.nodeName.toUpperCase():"")||o.ctrlKey||(T=E,N=R),a.undoManager.typing&&(a.undoManager.typing=!1,a.undoManager.add()),/^(LI|DT|DD)$/.test(N)){if(!O&&D)return void w();if(s.isEmpty(T))return void function(){function t(t){for(var e=E[t?"firstChild":"lastChild"];e&&1!=e.nodeType;)e=e[t?"nextSibling":"previousSibling"];return e===T}function e(){var t=E.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:E}if(E!=a.getBody()){var n=E.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(O="LI"),P=O?x(O):s.create("BR"),t(!0)&&t()?"LI"==n?s.insertAfter(P,e()):s.replace(P,E):t(!0)?"LI"==n?(s.insertAfter(P,e()),P.appendChild(s.doc.createTextNode(" ")),P.appendChild(E)):E.parentNode.insertBefore(P,E):t()?(s.insertAfter(P,e()),p(P)):(E=e(),(C=S.cloneRange()).setStartAfter(T),C.setEndAfter(E),L=C.extractContents(),"LI"==O&&"LI"==L.firstChild.nodeName?(P=L.firstChild,s.insertAfter(L,E)):(s.insertAfter(L,E),s.insertAfter(P,E))),s.remove(T),m(P),u.add()}}()}if("PRE"==N&&!1!==c.br_in_pre){if(!D)return void w()}else if(!O&&!D&&"LI"!=N||O&&D)return void w();O&&T===a.getBody()||(O=O||"P",n.isCaretContainerBlock(T)?(P=n.showCaretContainerBlock(T),s.isEmpty(T)&&y(T),m(P)):b()?_():b(!0)?(p(P=T.parentNode.insertBefore(x(),T)),m(T)):((C=S.cloneRange()).setEndAfter(T),function(t){do{3===t.nodeType&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)}(L=C.extractContents()),P=L.firstChild,s.insertAfter(L,T),function(t){var e,n=t,i=[];if(n){for(;n=n.firstChild;){if(s.isBlock(n))return;1!=n.nodeType||h[n.nodeName.toLowerCase()]||i.push(n)}for(e=i.length;e--;)(!(n=i[e]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue||"A"==n.nodeName&&" "===(n.innerText||n.textContent))&&s.remove(n)}}(P),function(t){var e;r||(t.normalize(),(e=t.lastChild)&&!/^(left|right)$/gi.test(s.getStyle(e,"float",!0))||s.add(t,"br"))}(T),s.isEmpty(T)&&y(T),P.normalize(),s.isEmpty(P)?(s.remove(P),_()):m(P)),s.setAttrib(P,"id",""),a.fire("NewBlock",{newBlock:P}),u.typing=!1,u.add())}}}var s=a.dom,l=a.selection,c=a.settings,u=a.undoManager,d=a.schema,h=d.getNonEmptyElements(),f=d.getMoveCaretBeforeOnEnterElements();a.on("keydown",(function(t){13==t.keyCode&&!1!==o(t)&&t.preventDefault()}))}})),n(tt,[],(function(){return function(t){var e=t.settings,n=t.dom,i=t.selection,r=t.schema,a=r.getBlockElements();e.forced_root_block&&t.on("NodeChange",(function(){var o,s,l,c,u,d,h,f,g,p,m,v,x=i.getStart(),b=t.getBody(),w=-16777215;if(v=e.forced_root_block,x&&1===x.nodeType&&v){for(;x&&x!=b;){if(a[x.nodeName])return;x=x.parentNode}if((o=i.getRng()).setStart){s=o.startContainer,l=o.startOffset,c=o.endContainer,u=o.endOffset;try{g=t.getDoc().activeElement===b}catch(y){}}else o.item&&(x=o.item(0),(o=t.getDoc().body.createTextRange()).moveToElementText(x)),g=o.parentElement().ownerDocument===t.getDoc(),(p=o.duplicate()).collapse(!0),l=-1*p.move("character",w),p.collapsed||((p=o.duplicate()).collapse(!1),u=-1*p.move("character",w)-l);for(x=b.firstChild,m=b.nodeName.toLowerCase();x;)if((3===x.nodeType||1==x.nodeType&&!a[x.nodeName])&&r.isValidChild(m,v.toLowerCase())){if(3===x.nodeType&&0===x.nodeValue.length){h=x,x=x.nextSibling,n.remove(h);continue}d||(d=n.create(v,t.settings.forced_root_block_attrs),x.parentNode.insertBefore(d,x),f=!0),h=x,x=x.nextSibling,d.appendChild(h)}else d=null,x=x.nextSibling;if(f&&g){if(o.setStart)o.setStart(s,l),o.setEnd(c,u),i.setRng(o);else try{(o=t.getDoc().body.createTextRange()).moveToElementText(b),o.collapse(!0),o.moveStart("character",l),u>0&&o.moveEnd("character",u),o.select()}catch(y){}t.nodeChanged()}}}))}})),n(et,[z,p,_,V,C,B],(function(t,e,n,i,r,a){function o(t){return t>0}function s(t){return t<0}function l(t,e){for(var n;n=t(e);)if(!x(n))return n;return null}function c(t,e){for(t=t.parentNode;t&&t!=e;t=t.parentNode)if(p(t))return t;return e}function u(t,e){for(;t&&t!=e;){if(v(t))return t;t=t.parentNode}return null}function d(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n}function h(t,e,n){return u(e,t)==u(n,t)}function f(t,e,n){var i,r;for(r=t?"previousSibling":"nextSibling";n&&n!=e;){if(y(i=n[r])&&(i=i[r]),m(i)){if(h(e,i,n))return i;break}if(_(i))break;n=n.parentNode}return null}function g(t,e){return m(function(t,e){var n,i;return e?(n=e.container(),i=e.offset(),w(n)?n.childNodes[i+t]:null):null}(t,e))}var p=n.isContentEditableTrue,m=n.isContentEditableFalse,v=n.matchStyleValues("display","block table table-cell table-caption"),y=r.isCaretContainer,x=r.isCaretContainerBlock,b=t.curry,w=n.isElement,_=a.isCaretCandidate,S=b(d,!0),C=b(d,!1);return{isForwards:o,isBackwards:s,findNode:function(t,n,i,r,a){var c=new e(t,r);if(s(n)){if((m(t)||x(t))&&i(t=l(c.prev,!0)))return t;for(;t=l(c.prev,a);)if(i(t))return t}if(o(n)){if((m(t)||x(t))&&i(t=l(c.next,!0)))return t;for(;t=l(c.next,a);)if(i(t))return t}return null},getEditingHost:c,getParentBlock:u,isInSameBlock:function(t,e,n){return u(t.container(),n)==u(e.container(),n)},isInSameEditingHost:function(t,e,n){return c(t.container(),n)==c(e.container(),n)},isBeforeContentEditableFalse:b(g,0),isAfterContentEditableFalse:b(g,-1),normalizeRange:function(t,e,i){var a,o,s,l,c=b(f,!0,e),u=b(f,!1,e);if(s=i.startOffset,r.isCaretContainerBlock(o=i.startContainer)){if(w(o)||(o=o.parentNode),"before"==(l=o.getAttribute("data-mce-caret"))&&m(a=o.nextSibling))return S(a);if("after"==l&&m(a=o.previousSibling))return C(a)}if(!i.collapsed)return i;if(n.isText(o)){if(y(o)){if(1===t){if(a=u(o))return S(a);if(a=c(o))return C(a)}if(-1===t){if(a=c(o))return C(a);if(a=u(o))return S(a)}return i}if(r.endsWithCaretContainer(o)&&s>=o.data.length-1)return 1===t&&(a=u(o))?S(a):i;if(r.startsWithCaretContainer(o)&&s<=1)return-1===t&&(a=c(o))?C(a):i;if(s===o.data.length)return(a=u(o))?S(a):i;if(0===s)return(a=c(o))?C(a):i}return i}}})),n(nt,[_,B,V,et,d,z],(function(t,e,n,i,r,a){function o(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null}function s(t,e){if(g(t)){if(m(e.previousSibling)&&!d(e.previousSibling))return n.before(e);if(d(e))return n(e,0)}if(p(t)){if(m(e.nextSibling)&&!d(e.nextSibling))return n.after(e);if(d(e))return n(e,e.data.length)}return p(t)?f(e)?n.before(e):n.after(e):n.before(e)}function l(e,r){var a;return!!t.isBr(e)&&!!(a=c(1,n.after(e),r))&&!i.isInSameBlock(n.before(e),n.before(a),r)}function c(t,e,f){var x,b,w,_,S,C,k;if(!h(f)||!e)return null;if(x=(k=e).container(),b=k.offset(),d(x)){if(p(t)&&b>0)return n(x,--b);if(g(t)&&b<x.length)return n(x,++b);w=x}else{if(p(t)&&b>0&&(_=o(x,b-1),m(_)))return!v(_)&&(S=i.findNode(_,t,y,_))?d(S)?n(S,S.data.length):n.after(S):d(_)?n(_,_.data.length):n.before(_);if(g(t)&&b<x.childNodes.length&&(_=o(x,b),m(_)))return l(_,f)?c(t,n.after(_),f):!v(_)&&(S=i.findNode(_,t,y,_))?d(S)?n(S,0):n.before(S):d(_)?n(_,0):n.after(_);w=k.getNode()}return(g(t)&&k.isAtEnd()||p(t)&&k.isAtStart())&&(w=i.findNode(w,t,a.constant(!0),f,!0),y(w))?s(t,w):(_=i.findNode(w,t,y,f),!(C=r.last(r.filter(function(t,e){for(var n=[];t&&t!=e;)n.push(t),t=t.parentNode;return n}(x,f),u)))||_&&C.contains(_)?_?s(t,_):null:k=g(t)?n.after(C):n.before(C))}var u=t.isContentEditableFalse,d=t.isText,h=t.isElement,f=t.isBr,g=i.isForwards,p=i.isBackwards,m=e.isCaretCandidate,v=e.isAtomic,y=e.isEditableCaretCandidate;return function(t){return{next:function(e){return c(1,e,t)},prev:function(e){return c(-1,e,t)}}}})),n(it,[h,nt,V],(function(t,e,n){var i=function(e){return t.grep(e.childNodes,(function(t){return"LI"===t.nodeName}))},r=function(t){return t.length>0&&function(t){return!t.firstChild}(t[t.length-1])?t.slice(0,-1):t},a=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},o=function(t,i){var r=n.before(t),a=new e(i).next(r);return a?a.toRange():null},s=function(t,i){var r=n.after(t),a=new e(i).prev(r);return a?a.toRange():null},l=function(e,n,i,r){var a=function(t,e){var n=e.cloneRange(),i=e.cloneRange();return n.setStartBefore(t),i.setEndAfter(t),[n.cloneContents(),i.cloneContents()]}(e,r),o=e.parentNode;return o.insertBefore(a[0],e),t.each(n,(function(t){o.insertBefore(t,e)})),o.insertBefore(a[1],e),o.removeChild(e),s(n[n.length-1],i)},c=function(e,n,i){var r=e.parentNode;return t.each(n,(function(t){r.insertBefore(t,e)})),o(e,i)};return{isListFragment:function(t){var e=t.firstChild,n=t.lastChild;return e&&"meta"===e.name&&(e=e.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!e||e!==n||"ul"!==e.name&&"ol"!==e.name)},insertAtCaret:function(t,o,u,d){var h=function(t,e,n){var i=e.serialize(n);return function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t}(t.createFragment(i))}(o,t,d),f=a(o,u.startContainer),g=r(i(h.firstChild)),p=o.getRoot(),m=function(t){var i=n.fromRangeStart(u),r=new e(o.getRoot()),s=1===t?r.prev(i):r.next(i);return!s||a(o,s.getNode())!==f};return m(1)?c(f,g,p):m(2)?function(t,e,n,i){return i.insertAfter(e.reverse(),t),s(e[0],n)}(f,g,p,o):l(f,g,p,u)},isParentBlockLi:function(t,e){return!!a(t,e)},trimListItems:r,listItems:i}})),n(rt,[l,h,L,nt,V,G,_,it],(function(t,e,n,i,r,a,o,s){var l=o.matchNodeNames("td th"),c=function(o,c,u){var d,h,f,g,p,m,v,y,x,b,w,_,S=o.schema.getTextInlineElements(),C=o.selection,k=o.dom;/^ | $/.test(c)&&(c=function(t){function e(t){return i[t]&&3==i[t].nodeType}var n,i,r;return r=(n=C.getRng(!0)).startOffset,3==(i=n.startContainer).nodeType&&(r>0?t=t.replace(/^&nbsp;/," "):e("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),r<i.length?t=t.replace(/&nbsp;(<br>|)$/," "):e("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(c)),d=o.parser,_=u.merge,h=new n({validate:o.settings.validate},o.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',o.fire("BeforeSetContent",m={content:c,format:"html",selection:!0}),-1==(c=m.content).indexOf("{$caret}")&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,w);var A=(y=C.getRng()).startContainer||(y.parentElement?y.parentElement():null),M=o.getBody();A===M&&C.isCollapsed()&&k.isBlock(M.firstChild)&&function(t){return t&&!o.schema.getShortEndedElements()[t.nodeName]}(M.firstChild)&&k.isEmpty(M.firstChild)&&((y=k.createRng()).setStart(M.firstChild,0),y.setEnd(M.firstChild,0),C.setRng(y)),C.isCollapsed()||(o.selection.setRng(o.selection.getRng()),o.getDoc().execCommand("Delete",!1,null),function(){var t,e,n;n=(t=C.getRng(!0)).startOffset,3==(e=t.startContainer).nodeType&&t.collapsed&&(""===e.data[n]?(e.deleteData(n,1),/[\u00a0| ]$/.test(c)||(c+=" ")):""===e.data[n-1]&&(e.deleteData(n-1,1),/[\u00a0| ]$/.test(c)||(c=" "+c)))}());var T={context:(f=C.getNode()).nodeName.toLowerCase(),data:u.data};if(p=d.parse(c,T),!0===u.paste&&s.isListFragment(p)&&s.isParentBlockLi(k,f))return y=s.insertAtCaret(h,k,o.selection.getRng(!0),p),o.selection.setRng(y),void o.fire("SetContent",m);if(function(t){for(var e=t;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}(p),"mce_marker"==(x=p.lastChild).attr("id"))for(v=x,x=x.prev;x;x=x.walk(!0))if(3==x.type||!k.isBlock(x.name)){o.schema.isValidChild(x.parent.name,"span")&&x.parent.insert(v,x,"br"===x.name);break}if(o._selectionOverrides.showBlockCaretContainer(f),T.invalid){for(C.setContent(w),f=C.getNode(),g=o.getBody(),9==f.nodeType?f=x=g:x=f;x!==g;)f=x,x=x.parentNode;c=f==g?g.innerHTML:k.getOuterHTML(f),c=h.serialize(d.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return h.serialize(p)})))),f==g?k.setHTML(g,c):k.setOuterHTML(f,c)}else c=h.serialize(p),function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var i=n.firstChild;!i||i===n.lastChild&&"BR"===i.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e)}}(o,c,f);(function(){if(_){var t=o.getBody(),n=new a(k);e.each(k.select("*[data-mce-fragment]"),(function(e){for(var i=e.parentNode;i&&i!=t;i=i.parentNode)S[e.nodeName.toLowerCase()]&&n.compare(i,e)&&k.remove(e,!0)}))}})(),function(e){var n,a,s;if(e){if(C.scrollIntoView(e),n=function(t){for(var e=o.getBody();t&&t!==e;t=t.parentNode)if("false"===o.dom.getContentEditable(t))return t;return null}(e))return k.remove(e),void C.select(n);y=k.createRng(),(x=e.previousSibling)&&3==x.nodeType?(y.setStart(x,x.nodeValue.length),t.ie||(b=e.nextSibling)&&3==b.nodeType&&(x.appendData(b.data),b.parentNode.removeChild(b))):(y.setStartBefore(e),y.setEndBefore(e)),a=k.getParent(e,k.isBlock),k.remove(e),a&&k.isEmpty(a)&&(o.$(a).empty(),y.setStart(a,0),y.setEnd(a,0),l(a)||function(t){return!!t.getAttribute("data-mce-fragment")}(a)||!(s=function(t){var e=r.fromRangeStart(t);if(e=new i(o.getBody()).next(e))return e.toRange()}(y))?k.add(a,k.create("br",{"data-mce-bogus":"1"})):(y=s,k.remove(a))),C.setRng(y)}}(k.get("mce_marker")),function(t){e.each(t.getElementsByTagName("*"),(function(t){t.removeAttribute("data-mce-fragment")}))}(o.getBody()),o.fire("SetContent",m),o.addVisual()},u=function(t){var n;return"string"!=typeof t?(n=e.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:n}):{content:t,details:{}}};return{insertAtCaret:function(t,e){var n=u(e);c(t,n.content,n.details)}}})),n(at,[l,h,k,p,rt,_],(function(t,n,i,r,a,o){var s=n.each,l=n.extend,c=n.map,u=n.inArray,d=n.explode,h=t.ie&&t.ie<11,f=!0;return function(n){function g(t){var e;if(!n.quirks.isHidden()){if(t=t.toLowerCase(),e=k.state[t])return e(t);try{return n.getDoc().queryCommandState(t)}catch(i){}return!1}}function p(t,e){e=e||"exec",s(t,(function(t,n){s(n.toLowerCase().split(","),(function(n){k[e][n]=t}))}))}function m(t,i,r){return i===e&&(i=!1),r===e&&(r=null),n.getDoc().execCommand(t,i,r)}function v(t){return S.match(t)}function y(t,i){S.toggle(t,i?{value:i}:e),n.nodeChanged()}function x(t){C=_.getBookmark(t)}function b(){_.moveToBookmark(C)}var w,_,S,C,k={state:{},exec:{},value:{}},A=n.settings;n.on("PreInit",(function(){w=n.dom,_=n.selection,A=n.settings,S=n.formatter})),l(this,{execCommand:function(t,e,i,r){var a,o,l=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||r&&r.skip_focus||n.focus(),(r=n.fire("BeforeExecCommand",{command:t,ui:e,value:i})).isDefaultPrevented())return!1;if(o=t.toLowerCase(),a=k.exec[o])return a(o,e,i),n.fire("ExecCommand",{command:t,ui:e,value:i}),!0;if(s(n.plugins,(function(r){if(r.execCommand&&r.execCommand(t,e,i))return n.fire("ExecCommand",{command:t,ui:e,value:i}),l=!0,!1})),l)return l;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(t,e,i))return n.fire("ExecCommand",{command:t,ui:e,value:i}),!0;try{l=n.getDoc().execCommand(t,e,i)}catch(c){}return!!l&&(n.fire("ExecCommand",{command:t,ui:e,value:i}),!0)},queryCommandState:g,queryCommandValue:function(t){var e;if(!n.quirks.isHidden()){if(t=t.toLowerCase(),e=k.value[t])return e(t);try{return n.getDoc().queryCommandValue(t)}catch(i){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),k.exec[t])return!0;try{return n.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:p,addCommand:function(t,e,i){t=t.toLowerCase(),k.exec[t]=function(t,r,a,o){return e.call(i||n,r,a,o)}},addQueryStateHandler:function(t,e,i){t=t.toLowerCase(),k.state[t]=function(){return e.call(i||n)}},addQueryValueHandler:function(t,e,i){t=t.toLowerCase(),k.value[t]=function(){return e.call(i||n)}},hasCustomCommand:function(t){return t=t.toLowerCase(),!!k.exec[t]}}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var i,r=n.getDoc();try{m(e)}catch(a){i=f}if("paste"!==e||r.queryCommandEnabled(e)||(i=!0),i||!r.queryCommandSupported(e)){var o=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");t.mac&&(o=o.replace(/Ctrl\+/g,"+")),n.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(_.isCollapsed()){var t=n.dom.getParent(n.selection.getStart(),"a");t&&n.dom.remove(t,!0)}else S.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(t){var e=t.substring(7);"full"==e&&(e="justify"),s("left,center,right,justify".split(","),(function(t){e!=t&&S.remove("align"+t)})),"none"!=e&&y("align"+e)},"InsertUnorderedList,InsertOrderedList":function(t){var e,n;m(t),(e=w.getParent(_.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((n=e.parentNode).nodeName)&&(x(),w.split(n,e),b())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){y(t)},"ForeColor,HiliteColor,FontName":function(t,e,n){y(t,n)},FontSize:function(t,e,n){var i,r;n>=1&&n<=7&&(r=d(A.font_size_style_values),n=(i=d(A.font_size_classes))?i[n-1]||n:r[n-1]||n),y(t,n)},RemoveFormat:function(t){S.remove(t)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(t,e,n){return y(n||"p")},mceCleanup:function(){var t=_.getBookmark();n.setContent(n.getContent({cleanup:f}),{cleanup:f}),_.moveToBookmark(t)},mceRemoveNode:function(t,e,i){var r=i||_.getNode();r!=n.getBody()&&(x(),n.dom.remove(r,f),b())},mceSelectNodeDepth:function(t,e,i){var r=0;w.getParent(_.getNode(),(function(t){if(1==t.nodeType&&r++==i)return _.select(t),!1}),n.getBody())},mceSelectNode:function(t,e,n){_.select(n)},mceInsertContent:function(t,e,i){a.insertAtCaret(n,i)},mceInsertRawHTML:function(t,e,i){_.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,(function(){return i})))},mceToggleFormat:function(t,e,n){y(n)},mceSetContent:function(t,e,i){n.setContent(i)},"Indent,Outdent":function(t){var e,i,r;i=/[a-z%]+$/i.exec(e=A.indentation),e=parseInt(e,10),g("InsertUnorderedList")||g("InsertOrderedList")?m(t):(A.forced_root_block||w.getParent(_.getNode(),w.isBlock)||S.apply("div"),s(_.getSelectedBlocks(),(function(a){if("false"!==w.getContentEditable(a)&&"LI"!==a.nodeName){var o=n.getParam("indent_use_margin",!1)?"margin":"padding";o="TABLE"===a.nodeName?"margin":o,o+="rtl"==w.getStyle(a,"direction",!0)?"Right":"Left","outdent"==t?(r=Math.max(0,parseInt(a.style[o]||0,10)-e),w.setStyle(a,o,r?r+i:"")):(r=parseInt(a.style[o]||0,10)+e+i,w.setStyle(a,o,r))}})))},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(t,e,i){n.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,_.getContent({format:"text"})))},mceInsertLink:function(t,e,n){var i;"string"==typeof n&&(n={href:n}),i=w.getParent(_.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||S.remove("link"),n.href&&S.apply("link",n,i)},selectAll:function(){var t,e=w.getRoot();if(_.getRng().setStart){var n=w.getParent(_.getStart(),o.isContentEditableTrue);n&&((t=w.createRng()).selectNodeContents(n),_.setRng(t))}else(t=_.getRng()).item||(t.moveToElementText(e),t.select())},delete:function(){m("Delete");var t=n.getBody();w.isEmpty(t)&&(n.setContent(""),t.firstChild&&w.isBlock(t.firstChild)?n.selection.setCursorLocation(t.firstChild,0):n.selection.setCursorLocation(t,0))},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(t,e,a){var o,s,l,c=a,u=_.getRng(!0);new i(w).normalize(u);var d=u.startOffset,g=u.startContainer;if(1==g.nodeType&&g.hasChildNodes()){var p=d>g.childNodes.length-1;g=g.childNodes[Math.min(d,g.childNodes.length-1)]||g,d=p&&3==g.nodeType?g.nodeValue.length:0}var m=w.getParent(g,w.isBlock),v=m?m.nodeName.toUpperCase():"",y=m?w.getParent(m.parentNode,w.isBlock):null,x=y?y.nodeName.toUpperCase():"";"LI"!=x||c&&c.ctrlKey||(m=y,v=x),g&&3==g.nodeType&&d>=g.nodeValue.length&&(h||function(){for(var t,e=new r(g,m),i=n.schema.getNonEmptyElements();t=e.next();)if(i[t.nodeName.toLowerCase()]||t.length>0)return!0}()||(o=w.create("br"),u.insertNode(o),u.setStartAfter(o),u.setEndAfter(o),s=!0)),o=w.create("br"),u.insertNode(o);var b=w.doc.documentMode;return h&&"PRE"==v&&(!b||b<8)&&o.parentNode.insertBefore(w.doc.createTextNode("\r"),o),l=w.create("span",{},"&nbsp;"),o.parentNode.insertBefore(l,o),_.scrollIntoView(l),w.remove(l),s?(u.setStartBefore(o),u.setEndBefore(o)):(u.setStartAfter(o),u.setEndAfter(o)),_.setRng(u),n.undoManager.add(),f}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var e="align"+t.substring(7),n=_.isCollapsed()?[w.getParent(_.getNode(),w.isBlock)]:_.getSelectedBlocks(),i=c(n,(function(t){return!!S.matchNode(t,e)}));return-1!==u(i,f)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return v(t)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var t;if(A.inline_styles){if((t=w.getParent(_.getStart(),w.isBlock))&&parseInt(t.style.paddingLeft,10)>0)return f;if((t=w.getParent(_.getEnd(),w.isBlock))&&parseInt(t.style.paddingLeft,10)>0)return f}return g("InsertUnorderedList")||g("InsertOrderedList")||!A.inline_styles&&!!w.getParent(_.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(t){var e=w.getParent(_.getNode(),"ul,ol");return e&&("insertunorderedlist"===t&&"UL"===e.tagName||"insertorderedlist"===t&&"OL"===e.tagName)}},"state"),p({"FontSize,FontName":function(t){var e,n=0;return(e=w.getParent(_.getNode(),"span"))&&(n="fontsize"==t?e.style.fontSize:e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),p({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}})),n(ot,[h],(function(t){function e(t,a){var o,s,l=this;if(t=i(t),o=(a=l.settings=a||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))l.source=t;else{var c=0===t.indexOf("//");0!==t.indexOf("/")||c||(t=(o&&o.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(s=a.base_uri?a.base_uri.path:new e(location.href).directory,""===a.base_uri.protocol?t="//mce_host"+l.toAbsPath(s,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(o&&o.protocol||"http")+"://mce_host"+l.toAbsPath(s,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),n(r,(function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),l[e]=i})),o&&(l.protocol||(l.protocol=o.protocol),l.userInfo||(l.userInfo=o.userInfo),l.port||"mce_host"!==l.host||(l.port=o.port),l.host&&"mce_host"!==l.host||(l.host=o.host),l.source=""),c&&(l.protocol="")}}var n=t.each,i=t.trim,r="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),a={ftp:21,http:80,https:443,mailto:25};return e.prototype={setPath:function(t){var e=this;t=/^(.*?)\/?(\w+)?$/.exec(t),e.path=t[0],e.directory=t[1],e.file=t[2],e.source="",e.getURI()},toRelative:function(t){var n,i=this;if("./"===t)return t;if("mce_host"!=(t=new e(t,{base_uri:i})).host&&i.host!=t.host&&t.host||i.port!=t.port||i.protocol!=t.protocol&&""!==t.protocol)return t.getURI();var r=i.getURI(),a=t.getURI();return r==a||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==a?r:(n=i.toRelPath(i.path,t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor),n)},toAbsolute:function(t,n){return(t=new e(t,{base_uri:this})).getURI(n&&this.isSameOrigin(t))},isSameOrigin:function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=a[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},toRelPath:function(t,e){var n,i,r,a=0,o="";if(t=(t=t.substring(0,t.lastIndexOf("/"))).split("/"),n=e.split("/"),t.length>=n.length)for(i=0,r=t.length;i<r;i++)if(i>=n.length||t[i]!=n[i]){a=i+1;break}if(t.length<n.length)for(i=0,r=n.length;i<r;i++)if(i>=t.length||t[i]!=n[i]){a=i+1;break}if(1===a)return e;for(i=0,r=t.length-(a-1);i<r;i++)o+="../";for(i=a-1,r=n.length;i<r;i++)o+=i!=a-1?"/"+n[i]:n[i];return o},toAbsPath:function(t,e){var i,r,a,o=0,s=[];for(r=/\/$/.test(e)?"/":"",t=t.split("/"),e=e.split("/"),n(t,(function(t){t&&s.push(t)})),t=s,i=e.length-1,s=[];i>=0;i--)0!==e[i].length&&"."!==e[i]&&(".."!==e[i]?o>0?o--:s.push(e[i]):o++);return 0!==(a=(i=t.length-o)<=0?s.reverse().join("/"):t.slice(0,i).join("/")+"/"+s.reverse().join("/")).indexOf("/")&&(a="/"+a),r&&a.lastIndexOf("/")!==a.length-1&&(a+=r),a},getURI:function(t){var e,n=this;return n.source&&!t||(e="",t||(e+=n.protocol?n.protocol+"://":"//",n.userInfo&&(e+=n.userInfo+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port)),n.path&&(e+=n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),n.source=e),n.source}},e.parseDataUri=function(t){var e,n;return t=decodeURIComponent(t).split(","),(n=/data:([^;]+)/.exec(t[0]))&&(e=n[1]),{type:e,data:t[1]}},e.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},e})),n(st,[h],(function(t){function e(){}var n,i,r=t.each,a=t.extend;return e.extend=n=function(t){function e(){var t,e,n,r=this;if(!i&&(r.init&&r.init.apply(r,arguments),e=r.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(r,arguments)}function o(){return this}function s(t,e){return function(){var n,i=this,r=i._super;return i._super=d[t],n=e.apply(i,arguments),i._super=r,n}}var l,c,u,d=this.prototype;for(c in i=!0,l=new this,i=!1,t.Mixins&&(r(t.Mixins,(function(e){for(var n in e)"init"!==n&&(t[n]=e[n])})),d.Mixins&&(t.Mixins=d.Mixins.concat(t.Mixins))),t.Methods&&r(t.Methods.split(","),(function(e){t[e]=o})),t.Properties&&r(t.Properties.split(","),(function(e){var n="_"+e;t[e]=function(t){var e=this;return void 0!==t?(e[n]=t,e):e[n]}})),t.Statics&&r(t.Statics,(function(t,n){e[n]=t})),t.Defaults&&d.Defaults&&(t.Defaults=a({},d.Defaults,t.Defaults)),t)l[c]="function"==typeof(u=t[c])&&d[c]?s(c,u):u;return e.prototype=l,e.constructor=e,e.extend=n,e},e})),n(lt,[h],(function(t){function e(e){function n(){return!1}function i(){return!0}function r(e,i,r,a){var o,u,d;if(!1===i&&(i=n),i)for(i={func:i},a&&t.extend(i,a),d=(u=e.toLowerCase().split(" ")).length;d--;)(o=c[e=u[d]])||(o=c[e]=[],s(e,!0)),r?o.unshift(i):o.push(i);return l}function a(t,e){var n,i,r,a,o;if(t)for(n=(a=t.toLowerCase().split(" ")).length;n--;){if(i=c[t=a[n]],!t){for(r in c)s(r,!1),delete c[r];return l}if(i){if(e)for(o=i.length;o--;)i[o].func===e&&(i=i.slice(0,o).concat(i.slice(o+1)),c[t]=i);else i.length=0;i.length||(s(t,!1),delete c[t])}}else{for(t in c)s(t,!1);c={}}return l}var o,s,l=this,c={};o=(e=e||{}).scope||l,s=e.toggleEvent||n,l.fire=function(t,r){var s,l,u,d;if(t=t.toLowerCase(),(r=r||{}).type=t,r.target||(r.target=o),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=i},r.stopPropagation=function(){r.isPropagationStopped=i},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=i},r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),e.beforeFire&&e.beforeFire(r),s=c[t])for(l=0,u=s.length;l<u;l++){if((d=s[l]).once&&a(t,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===d.func.call(o,r))return r.preventDefault(),r}return r},l.on=r,l.off=a,l.once=function(t,e,n){return r(t,e,n,{once:!0})},l.has=function(t){return t=t.toLowerCase(),!(!c[t]||0===c[t].length)}}var n=t.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return e.isNative=function(t){return!!n[t.toLowerCase()]},e})),n(ct,[],(function(){function t(t){this.create=t.create}return t.create=function(e,n){return new t({create:function(t,i){function r(e){t.set(i,e.value)}var a;return t.on("change:"+i,(function(t){e.set(n,t.value)})),e.on("change:"+n,r),(a=t._bindings)||(a=t._bindings=[],t.on("destroy",(function(){for(var t=a.length;t--;)a[t]()}))),a.push((function(){e.off("change:"+n,r)})),e.get(n)}})},t})),n(ut,[lt],(function(t){function e(e){return e._eventDispatcher||(e._eventDispatcher=new t({scope:e,toggleEvent:function(n,i){t.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,i)}})),e._eventDispatcher}return{fire:function(t,n,i){var r=this;if(r.removed&&"remove"!==t)return n;if(n=e(r).fire(t,n,i),!1!==i&&r.parent)for(var a=r.parent();a&&!n.isPropagationStopped();)a.fire(t,n,!1),a=a.parent();return n},on:function(t,n,i){return e(this).on(t,n,i)},off:function(t,n){return e(this).off(t,n)},once:function(t,n){return e(this).once(t,n)},hasEventListeners:function(t){return e(this).has(t)}}})),n(dt,[ct,ut,st,h],(function(t,e,n,i){function r(t){return t.nodeType>0}function a(t,e){var n,o;if(t===e)return!0;if(null===t||null===e)return t===e;if("object"!=typeof t||"object"!=typeof e)return t===e;if(i.isArray(e)){if(t.length!==e.length)return!1;for(n=t.length;n--;)if(!a(t[n],e[n]))return!1}if(r(t)||r(e))return t===e;for(n in o={},e){if(!a(t[n],e[n]))return!1;o[n]=!0}for(n in t)if(!o[n]&&!a(t[n],e[n]))return!1;return!0}return n.extend({Mixins:[e],init:function(e){var n,i;for(n in e=e||{})(i=e[n])instanceof t&&(e[n]=i.create(this,n));this.data=e},set:function(e,n){var i,r,o=this.data[e];if(n instanceof t&&(n=n.create(this,e)),"object"==typeof e){for(i in e)this.set(i,e[i]);return this}return a(o,n)||(this.data[e]=n,this.fire("change:"+e,r={target:this,name:e,value:n,oldValue:o}),this.fire("change",r)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(e){return t.create(this,e)},destroy:function(){this.fire("destroy")}})})),n(ht,[st],(function(t){var e,n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,a=t.extend({init:function(t){function e(t){var e;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(e=o(t[1],[]),function(t){return!s(t,e)}):(t=t[2],function(e,n,i){return"first"===t?0===n:"last"===t?n===i-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}function a(t,i,a){function o(t){t&&i.push(t)}var s;return o(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((s=n.exec(t.replace(r,"")))[1])),o(function(t){if(t)return function(e){return e._name===t}}(s[2])),o(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(s[3])),o(function(t,e,n){if(t)return function(i){var r=i[t]?i[t]():"";return e?"="===e?r===n:"*="===e?r.indexOf(n)>=0:"~="===e?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===e?r!=n:"^="===e?0===r.indexOf(n):"$="===e&&r.substr(r.length-n.length)===n:!!n}}(s[4],s[5],s[6])),o(e(s[7])),i.pseudo=!!s[7],i.direct=a,i}function o(t,e){var n,r,s,l=[];do{if(i.exec(""),(r=i.exec(t))&&(t=r[3],l.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&o(n,e),t=[],s=0;s<l.length;s++)">"!=l[s]&&t.push(a(l[s],[],">"===l[s-1]));return e.push(t),e}var s=this.match;this._selectors=o(t,[])},match:function(t,e){var n,i,r,a,o,s,l,c,u,d,h,f,g;for(n=0,i=(e=e||this._selectors).length;n<i;n++){for(g=t,f=0,r=(a=(o=e[n]).length)-1;r>=0;r--)for(c=o[r];g;){if(c.pseudo)for(u=d=(h=g.parent().items()).length;u--&&h[u]!==g;);for(s=0,l=c.length;s<l;s++)if(!c[s](g,u,d)){s=l+1;break}if(s===l){f++;break}if(r===a-1)break;g=g.parent()}if(f===a)return!0}return!1},find:function(t){function n(t,e,i){var r,a,s,l,c,u=e[i];for(r=0,a=t.length;r<a;r++){for(c=t[r],s=0,l=u.length;s<l;s++)if(!u[s](c,r,a)){s=l+1;break}if(s===l)i==e.length-1?o.push(c):c.items&&n(c.items(),e,i+1);else if(u.direct)return;c.items&&n(c.items(),e,i)}}var i,r,o=[],s=this._selectors;if(t.items){for(i=0,r=s.length;i<r;i++)n(t.items(),s[i],0);r>1&&(o=function(t){for(var e,n=[],i=t.length;i--;)(e=t[i]).__checked||(n.push(e),e.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(o))}return e||(e=a.Collection),new e(o)}});return a})),n(ft,[h,ht,st],(function(t,e,n){var i,r,a=Array.prototype.push,o=Array.prototype.slice;return r={length:0,init:function(t){t&&this.add(t)},add:function(e){var n=this;return t.isArray(e)?a.apply(n,e):e instanceof i?n.add(e.toArray()):a.call(n,e),n},set:function(t){var e,n=this,i=n.length;for(n.length=0,n.add(t),e=n.length;e<i;e++)delete n[e];return n},filter:function(t){var n,r,a,o,s=[];for("string"==typeof t?(t=new e(t),o=function(e){return t.match(e)}):o=t,n=0,r=this.length;n<r;n++)o(a=this[n])&&s.push(a);return new i(s)},slice:function(){return new i(o.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(e){return t.each(this,e),this},toArray:function(){return t.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new i(t.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n,i=this;return void 0!==e?(i.each((function(n){n[t]&&n[t](e)})),i):(n=i[0])&&n[t]?n[t]():void 0},exec:function(e){var n=this,i=t.toArray(arguments).slice(1);return n.each((function(t){t[e]&&t[e].apply(t,i)})),n},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each((function(e){e.classes.add(t)}))},removeClass:function(t){return this.each((function(e){e.classes.remove(t)}))}},t.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){r[e]=function(){var n=t.toArray(arguments);return this.each((function(t){e in t&&t[e].apply(t,n)})),this}})),t.each("text name disabled active selected checked visible parent value data".split(" "),(function(t){r[t]=function(e){return this.prop(t,e)}})),i=n.extend(r),e.Collection=i,i})),n(gt,[l,h,x],(function(t,e,n){var i=0,r={id:function(){return"mceu_"+i++},create:function(t,i,r){var a=document.createElement(t);return n.DOM.setAttribs(a,i),"string"==typeof r?a.innerHTML=r:e.each(r,(function(t){t.nodeType&&a.appendChild(t)})),a},createFragment:function(t){return n.DOM.createFragment(t)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var i=t.getBoundingClientRect();e=Math.max(i.width||i.right-i.left,t.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return n.DOM.getPos(t,e||r.getContainer())},getContainer:function(){return t.container?t.container:document.body},getViewPort:function(t){return n.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return n.DOM.addClass(t,e)},removeClass:function(t,e){return n.DOM.removeClass(t,e)},hasClass:function(t,e){return n.DOM.hasClass(t,e)},toggleClass:function(t,e,i){return n.DOM.toggleClass(t,e,i)},css:function(t,e,i){return n.DOM.setStyle(t,e,i)},getRuntimeStyle:function(t,e){return n.DOM.getStyle(t,e,!0)},on:function(t,e,i,r){return n.DOM.bind(t,e,i,r)},off:function(t,e,i){return n.DOM.unbind(t,e,i)},fire:function(t,e,i){return n.DOM.fire(t,e,i)},innerHtml:function(t,e){n.DOM.setHTML(t,e)}};return r})),n(pt,[],(function(){return{parseBox:function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},measureBox:function(t,e){function n(e){var n=document.defaultView;return n?(e=e.replace(/[A-Z]/g,(function(t){return"-"+t})),n.getComputedStyle(t,null).getPropertyValue(e)):t.currentStyle[e]}function i(t){var e=parseFloat(n(t),10);return isNaN(e)?0:e}return{top:i(e+"TopWidth"),right:i(e+"RightWidth"),bottom:i(e+"BottomWidth"),left:i(e+"LeftWidth")}}}})),n(mt,[h],(function(t){function e(){}function n(t){this.cls=[],this.cls._map={},this.onchange=t||e,this.prefix=""}return t.extend(n.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){for(var e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t},n})),n(vt,[s],(function(t){var e,n={};return{add:function(i){var r=i.parent();if(r){if(!r._layout||r._layout.isNative())return;n[r._id]||(n[r._id]=r),e||(e=!0,t.requestAnimationFrame((function(){var t,i;for(t in e=!1,n)(i=n[t]).state.get("rendered")&&i.reflow();n={}}),document.body))}},remove:function(t){n[t._id]&&delete n[t._id]}}})),n(yt,[st,h,lt,dt,ft,gt,f,pt,mt,vt],(function(t,e,n,i,r,a,o,s,l,c){function u(t){return t._eventDispatcher||(t._eventDispatcher=new n({scope:t,toggleEvent:function(e,i){i&&n.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&d(t))}})),t._eventDispatcher}function d(t){function e(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function n(){var t=c._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each((function(t){t.fire("mouseleave",{target:t.getEl()})})),c._lastHoverCtrl=null)}function i(e){var n,i,r,a=t.getParentCtrl(e.target),o=c._lastHoverCtrl,s=0;if(a!==o){if(c._lastHoverCtrl=a,(i=a.parents().toArray().reverse()).push(a),o){for((r=o.parents().toArray().reverse()).push(o),s=0;s<r.length&&i[s]===r[s];s++);for(n=r.length-1;n>=s;n--)(o=r[n]).fire("mouseleave",{target:o.getEl()})}for(n=s;n<i.length;n++)(a=i[n]).fire("mouseenter",{target:a.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}var a,s,l,c,u,d;if(u=t._nativeEvents){for((l=t.parents().toArray()).unshift(t),a=0,s=l.length;!c&&a<s;a++)c=l[a]._eventsRoot;for(c||(c=l[l.length-1]||t),t._eventsRoot=c,s=a,a=0;a<s;a++)l[a]._eventsRoot=c;var h=c._delegates;for(d in h||(h=c._delegates={}),u){if(!u)return!1;"wheel"!==d||g?("mouseenter"===d||"mouseleave"===d?c._hasMouseEnter||(o(c.getEl()).on("mouseleave",n).on("mouseover",i),c._hasMouseEnter=1):h[d]||(o(c.getEl()).on(d,e),h[d]=!0),u[d]=!1):f?o(t.getEl()).on("mousewheel",r):o(t.getEl()).on("DOMMouseScroll",r)}}}var h,f="onmousewheel"in document,g=!1,p="mce-",m=0,v={Statics:{classPrefix:p},isRtl:function(){return h.rtl},classPrefix:p,init:function(t){function n(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)c.classes.add(t[e])}var r,a,c=this;c.settings=t=e.extend({},c.Defaults,t),c._id=t.id||"mceu_"+m++,c._aria={role:t.role},c._elmCache={},c.$=o,c.state=new i({visible:!0,active:!1,disabled:!1,value:""}),c.data=new i(t.data),c.classes=new l((function(){c.state.get("rendered")&&(c.getEl().className=this.toString())})),c.classes.prefix=c.classPrefix,(r=t.classes)&&(c.Defaults&&(a=c.Defaults.classes)&&r!=a&&n(a),n(r)),e.each("title text name visible disabled active value".split(" "),(function(e){e in t&&c[e](t[e])})),c.on("click",(function(){if(c.disabled())return!1})),c.settings=t,c.borderBox=s.parseBox(t.border),c.paddingBox=s.parseBox(t.padding),c.marginBox=s.parseBox(t.margin),t.hidden&&c.hide()},Properties:"parent,name",getContainerElm:function(){return a.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,i,r,o,l,c,u,d,h=this,f=h.settings,g=h.getEl();t=h.borderBox=h.borderBox||s.measureBox(g,"border"),h.paddingBox=h.paddingBox||s.measureBox(g,"padding"),h.marginBox=h.marginBox||s.measureBox(g,"margin"),d=a.getSize(g),r=(c=f.minWidth)||d.width,o=(u=f.minHeight)||d.height,n=f.width,i=f.height,l=void 0!==(l=f.autoResize)?l:!n&&!i;var p=t.left+t.right,m=t.top+t.bottom,v=f.maxWidth||65535,y=f.maxHeight||65535;return h._layoutRect=e={x:f.x||0,y:f.y||0,w:n=n||r,h:i=i||o,deltaW:p,deltaH:m,contentW:n-p,contentH:i-m,innerW:n-p,innerH:i-m,startMinWidth:c||0,startMinHeight:u||0,minW:Math.min(r,v),minH:Math.min(o,y),maxW:v,maxH:y,autoResize:l,scrollW:0},h._lastLayoutRect={},e},layoutRect:function(t){var e,n,i,r,a,o,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),t?(i=l.deltaW,r=l.deltaH,t.x!==a&&(l.x=t.x),t.y!==a&&(l.y=t.y),t.minW!==a&&(l.minW=t.minW),t.minH!==a&&(l.minH=t.minH),(n=t.w)!==a&&(l.w=n=(n=n<l.minW?l.minW:n)>l.maxW?l.maxW:n,l.innerW=n-i),(n=t.h)!==a&&(l.h=n=(n=n<l.minH?l.minH:n)>l.maxH?l.maxH:n,l.innerH=n-r),(n=t.innerW)!==a&&(l.innerW=n=(n=n<l.minW-i?l.minW-i:n)>l.maxW-i?l.maxW-i:n,l.w=n+i),(n=t.innerH)!==a&&(l.innerH=n=(n=n<l.minH-r?l.minH-r:n)>l.maxH-r?l.maxH-r:n,l.h=n+r),t.contentW!==a&&(l.contentW=t.contentW),t.contentH!==a&&(l.contentH=t.contentH),(e=s._lastLayoutRect).x===l.x&&e.y===l.y&&e.w===l.w&&e.h===l.h||((o=h.repaintControls)&&o.map&&!o.map[s._id]&&(o.push(s),o.map[s._id]=!0),e.x=l.x,e.y=l.y,e.w=l.w,e.h=l.h),s):l},repaint:function(){var t,e,n,i,r,a,o,s,l,c,u=this;l=document.createRange?function(t){return t}:Math.round,t=u.getEl().style,a=(r=u.borderBox).left+r.right,o=r.top+r.bottom,(i=u._layoutRect).x!==(s=u._lastRepaintRect||{}).x&&(t.left=l(i.x)+"px",s.x=i.x),i.y!==s.y&&(t.top=l(i.y)+"px",s.y=i.y),i.w!==s.w&&(c=l(i.w-a),t.width=(c>=0?c:0)+"px",s.w=i.w),i.h!==s.h&&(c=l(i.h-o),t.height=(c>=0?c:0)+"px",s.h=i.h),u._hasBody&&i.innerW!==s.innerW&&(c=l(i.innerW),(n=u.getEl("body"))&&((e=n.style).width=(c>=0?c:0)+"px"),s.innerW=i.innerW),u._hasBody&&i.innerH!==s.innerH&&(c=l(i.innerH),(n=n||u.getEl("body"))&&((e=e||n.style).height=(c>=0?c:0)+"px"),s.innerH=i.innerH),u._lastRepaintRect=s,u.fire("repaint",{},!1)},updateLayoutRect:function(){var t=this;t.parent()._lastRect=null,a.css(t.getEl(),{width:"",height:""}),t._layoutRect=t._lastRepaintRect=t._lastLayoutRect=null,t.initLayoutRect()},on:function(t,e){var n=this;return u(n).on(t,function(t){var e,i;return"string"!=typeof t?t:function(r){return e||n.parentsAndSelf().each((function(n){var r=n.settings.callbacks;if(r&&(e=r[t]))return i=n,!1})),e?e.call(i,r):(r.action=t,void this.fire("execute",r))}}(e)),n},off:function(t,e){return u(this).off(t,e),this},fire:function(t,e,n){var i=this;if((e=e||{}).control||(e.control=i),e=u(i).fire(t,e),!1!==n&&i.parent)for(var r=i.parent();r&&!e.isPropagationStopped();)r.fire(t,e,!1),r=r.parent();return e},hasEventListeners:function(t){return u(this).has(t)},parents:function(t){var e,n=new r;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new r(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=o("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this,i=n.getEl(n.ariaTarget);return void 0===e?n._aria[t]:(n._aria[t]=e,n.state.get("rendered")&&i.setAttribute("role"==t?t:"aria-"+t,e),n)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,(function(t){return"&#"+t.charCodeAt(0)+";"}))},translate:function(t){return h.translate?h.translate(t):t},before:function(t){var e=this,n=e.parent();return n&&n.insert(t,n.items().indexOf(e),!0),e},after:function(t){var e=this,n=e.parent();return n&&n.insert(t,n.items().indexOf(e)),e},remove:function(){var t,e,n=this,i=n.getEl(),r=n.parent();if(n.items){var a=n.items().toArray();for(e=a.length;e--;)a[e].remove()}r&&r.items&&(t=[],r.items().each((function(e){e!==n&&t.push(e)})),r.items().set(t),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&o(i).off();var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return o(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return o(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,i,r,a=this,s=a.settings;for(i in a.$el=o(a.getEl()),a.state.set("rendered",!0),s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)a._nativeEvents[i]=!0}d(a),s.style&&(t=a.getEl())&&(t.setAttribute("style",s.style),t.style.cssText=s.style),a.settings.border&&a.$el.css({"border-top-width":(e=a.borderBox).top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left});var l=a.getRoot();for(var u in l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[a._id]=a,a._aria)a.aria(u,a._aria[u]);!1===a.state.get("visible")&&(a.getEl().style.display="none"),a.bindStates(),a.state.on("change:visible",(function(t){var e,n=t.value;a.state.get("rendered")&&(a.getEl().style.display=!1===n?"none":"",a.getEl().getBoundingClientRect()),(e=a.parent())&&(e._lastRect=null),a.fire(n?"show":"hide"),c.add(a)})),a.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,i,r,a,o,s=this.getEl(),l=s.parentNode,c=function(t,e){var n,i,r=t;for(n=i=0;r&&r!=e&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}(s,l);return e=c.x,n=c.y,i=s.offsetWidth,r=s.offsetHeight,a=l.clientWidth,o=l.clientHeight,"end"==t?(e-=a-i,n-=o-r):"center"==t&&(e-=a/2-i/2,n-=o/2-r/2),l.scrollLeft=e,l.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var i=n.length;i--;)n[i].rootControl=t;return t},reflow:function(){c.remove(this);var t=this.parent();return t._layout&&!t._layout.isNative()&&t.reflow(),this}};return e.each("text title visible disabled active value".split(" "),(function(t){v[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}})),h=t.extend(v)})),n(xt,[],(function(){var t,e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,i){var r,a,o;if(!t){for(a in o=tinymce.ui)e[a.toLowerCase()]=o[a];t=!0}if("string"==typeof n?(i=i||{}).type=n:n=(i=n).type,n=n.toLowerCase(),!(r=e[n]))throw new Error("Could not find control by type: "+n);return(r=new r(i)).type=n,r}}})),n(bt,[],(function(){return function(t){function e(t){return t&&1===t.nodeType}function n(t){return e(t=t||v)?t.getAttribute("role"):null}function i(t){for(var e,i=t||v;i=i.parentNode;)if(e=n(i))return e}function r(t){var n=v;if(e(n))return n.getAttribute("aria-"+t)}function a(t){var e=t.tagName.toUpperCase();return"INPUT"==e||"TEXTAREA"==e||"SELECT"==e}function o(t){return!(!a(t)||t.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(t))}function s(t){var e=[];return function t(n){if(1==n.nodeType&&"none"!=n.style.display&&!n.disabled){o(n)&&e.push(n);for(var i=0;i<n.childNodes.length;i++)t(n.childNodes[i])}}(t||b.getEl()),e}function l(t){var e,n;(n=(t=t||y).parents().toArray()).unshift(t);for(var i=0;i<n.length&&!(e=n[i]).settings.ariaRoot;i++);return e}function c(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function u(t,e){var n=-1,i=l();e=e||s(i.getEl());for(var r=0;r<e.length;r++)e[r]===v&&(n=r);i.lastAriaIndex=c(n+=t,e)}function d(){"tablist"==i()?u(-1,s(v.parentNode)):y.parent().submenu?p():u(-1)}function h(){var t=n(),e=i();"tablist"==e?u(1,s(v.parentNode)):"menuitem"==t&&"menu"==e&&r("haspopup")?m():u(1)}function f(){u(-1)}function g(){var t=n(),e=i();"menuitem"==t&&"menubar"==e?m():"button"==t&&r("haspopup")?m({key:"down"}):u(1)}function p(){y.fire("cancel")}function m(t){y.fire("click",{target:v,aria:t=t||{}})}var v,y,b=t.root;try{v=document.activeElement}catch(x){v=document.body}return y=b.getParentCtrl(v),b.on("keydown",(function(t){function e(t,e){a(v)||"slider"!==n(v)&&!1!==e(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:e(t,d);break;case 39:e(t,h);break;case 38:e(t,f);break;case 40:e(t,g);break;case 27:p();break;case 14:case 13:case 32:e(t,m);break;case 9:!1!==function(t){if("tablist"==i()){var e=s(y.getEl("body"))[0];e&&e.focus()}else u(t.shiftKey?-1:1)}(t)&&t.preventDefault()}})),b.on("focusin",(function(t){v=t.target,y=t.control})),{focusFirst:function(t){var e=l(t),n=s(e.getEl());c(e.settings.ariaRemember&&"lastAriaIndex"in e?e.lastAriaIndex:0,n)}}}})),n(wt,[yt,ft,ht,xt,bt,h,f,mt,vt],(function(t,e,n,i,r,a,o,s,l){var c={};return t.extend({init:function(t){var n=this;n._super(t),(t=n.settings).fixed&&n.state.set("fixed",!0),n._items=new e,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s((function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())})),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),t.containerCls&&n.classes.add(t.containerCls),n._layout=i.create((t.layout||"")+"layout"),n.add(n.settings.items?n.settings.items:n.render()),n._hasBody=!0},items:function(){return this._items},find:function(t){return(t=c[t]=c[t]||new n(t)).find(this)},add:function(t){var e=this;return e.items().add(e.create(t)).parent(e),e},focus:function(t){var e,n,i,r=this;return t&&(n=r.keyboardNav||r.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(r):(i=r.find("*"),r.statusbar&&i.add(r.statusbar.items()),i.each((function(t){return t.settings.autofocus?(e=null,!1):void(t.canFocus&&(e=e||t))})),e&&e.focus(),r)},replace:function(t,e){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===t){i[r]=e;break}r>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(e){var n,r=this,o=[];return a.isArray(e)||(e=[e]),a.each(e,(function(e){e&&(e instanceof t||("string"==typeof e&&(e={type:e}),n=a.extend({},r.settings.defaults,e),e.type=n.type=n.type||e.type||r.settings.defaultType||(n.defaults?n.defaults.type:null),e=i.create(n)),o.push(e))})),o},renderNew:function(){var t=this;return t.items().each((function(e,n){var i;e.parent(t),e.state.get("rendered")||((i=t.getEl("body")).hasChildNodes()&&n<=i.childNodes.length-1?o(i.childNodes[n]).before(e.renderHtml()):o(i).append(e.renderHtml()),e.postRender(),l.add(e))})),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){var e=this;return e.items().set(e.create(t).concat(e.items().toArray())),e.renderNew()},insert:function(t,e,n){var i,r,a,o=this;return t=o.create(t),i=o.items(),!n&&e<i.length-1&&(e+=1),e>=0&&e<i.length&&(r=i.slice(0,e).toArray(),a=i.slice(e).toArray(),i.set(r.concat(t,a))),o.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each((function(e){var n=e.name(),i=e.value();n&&void 0!==i&&(t[n]=i)})),t},renderHtml:function(){var t=this,e=t._layout,n=this.settings.role;return t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"},postRender:function(){var t,e=this;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&e.$el.css({"border-top-width":(t=e.borderBox).top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}),e.parent()||(e.keyboardNav=new r({root:e})),e},initLayoutRect:function(){var t=this,e=t._super();return t._layout.recalc(t),e},recalc:function(){var t=this,e=t._layoutRect,n=t._lastRect;if(!n||n.w!=e.w||n.h!=e.h)return t._layout.recalc(t),e=t.layoutRect(),t._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(l.remove(this),this.visible()){for(t.repaintControls=[],t.repaintControls.map={},this.recalc(),e=t.repaintControls.length;e--;)t.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),t.repaintControls=[]}return this}})})),n(_t,[f],(function(t){function e(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}return function(n,i){function r(){return h.getElementById(i.handle||n)}var a,o,s,l,c,u,d,h=i.document||document;i=i||{},s=function(n){var s,f,g=function(t){var e,n,i,r,a,o,s,l=Math.max;return i=l((e=t.documentElement).scrollWidth,(n=t.body).scrollWidth),r=l(e.clientWidth,n.clientWidth),a=l(e.offsetWidth,n.offsetWidth),o=l(e.scrollHeight,n.scrollHeight),s=l(e.clientHeight,n.clientHeight),{width:i<a?r:i,height:o<l(e.offsetHeight,n.offsetHeight)?s:o}}(h);e(n),n.preventDefault(),o=n.button,s=r(),u=n.screenX,d=n.screenY,f=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,a=t("<div></div>").css({position:"absolute",top:0,left:0,width:g.width,height:g.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(h.body),t(h).on("mousemove touchmove",c).on("mouseup touchend",l),i.start(n)},c=function(t){return e(t),t.button!==o?l(t):(t.deltaX=t.screenX-u,t.deltaY=t.screenY-d,t.preventDefault(),void i.drag(t))},l=function(n){e(n),t(h).off("mousemove touchmove",c).off("mouseup touchend",l),a.remove(),i.stop&&i.stop(n)},this.destroy=function(){t(r()).off()},t(r()).on("mousedown touchstart",s)}})),n(St,[f,_t],(function(t,e){return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function n(){function e(e,o,s,l,c,u){var d,h,f,g,p,m,v,y;if(h=i.getEl("scroll"+e)){if(v=o.toLowerCase(),y=s.toLowerCase(),t(i.getEl("absend")).css(v,i.layoutRect()[l]-1),!c)return void t(h).css("display","none");t(h).css("display","block"),d=i.getEl("body"),f=i.getEl("scroll"+e+"t"),g=d["client"+s]-2*r,p=(g-=n&&a?h["client"+u]:0)/d["scroll"+s],(m={})[v]=d["offset"+o]+r,m[y]=g,t(h).css(m),(m={})[v]=d["scroll"+o]*p,m[y]=g*p,t(f).css(m)}}var n,a,o;o=i.getEl("body"),a=o.scrollHeight>o.clientHeight,e("h","Left","Width","contentW",n=o.scrollWidth>o.clientWidth,"Height"),e("v","Top","Height","contentH",a,"Width")}var i=this,r=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,function(){function n(n,a,o,s,l){var c,u=i._id+"-scroll"+n,d=i.classPrefix;t(i.getEl()).append('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>'),i.draghelper=new e(u+"t",{start:function(){c=i.getEl("body")["scroll"+a],t("#"+u).addClass(d+"active")},drag:function(t){var e,u,d,h,f=i.layoutRect();u=f.contentW>f.innerW,d=f.contentH>f.innerH,h=i.getEl("body")["client"+o]-2*r,e=(h-=u&&d?i.getEl("scroll"+n)["client"+l]:0)/i.getEl("body")["scroll"+o],i.getEl("body")["scroll"+a]=c+t["delta"+s]/e},stop:function(){t("#"+u).removeClass(d+"active")}})}i.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),i.on("wheel",(function(t){var e=i.getEl("body");e.scrollLeft+=10*(t.deltaX||0),e.scrollTop+=10*t.deltaY,n()})),t(i.getEl("body")).on("scroll",n)),n())}}})),n(Ct,[wt,St],(function(t,e){return t.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[e],renderHtml:function(){var t=this,e=t._layout,n=t.settings.html;return t.preRender(),e.preRender(t),void 0===n?n='<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div>":("function"==typeof n&&(n=n.call(t)),t._hasBody=!1),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1" role="group">'+(t._preBodyHtml||"")+n+"</div>"}})})),n(kt,[gt],(function(t){function e(e,n,i){var r,a,o,s,l,c,u,d,h,f;return h=t.getViewPort(),o=(a=t.getPos(n)).x,s=a.y,e.state.get("fixed")&&"static"==t.getRuntimeStyle(document.body,"position")&&(o-=h.x,s-=h.y),r=e.getEl(),l=(f=t.getSize(r)).width,c=f.height,u=(f=t.getSize(n)).width,d=f.height,"b"===(i=(i||"").split(""))[0]&&(s+=d),"r"===i[1]&&(o+=u),"c"===i[0]&&(s+=Math.round(d/2)),"c"===i[1]&&(o+=Math.round(u/2)),"b"===i[3]&&(s-=c),"r"===i[4]&&(o-=l),"c"===i[3]&&(s-=Math.round(c/2)),"c"===i[4]&&(o-=Math.round(l/2)),{x:o,y:s,w:l,h:c}}return{testMoveRel:function(n,i){for(var r=t.getViewPort(),a=0;a<i.length;a++){var o=e(this,n,i[a]);if(this.state.get("fixed")){if(o.x>0&&o.x+o.w<r.w&&o.y>0&&o.y+o.h<r.h)return i[a]}else if(o.x>r.x&&o.x+o.w<r.w+r.x&&o.y>r.y&&o.y+o.h<r.h+r.y)return i[a]}return i[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var i=e(this,t,n);return this.moveTo(i.x,i.y)},moveBy:function(t,e){var n=this,i=n.layoutRect();return n.moveTo(i.x+t,i.y+e),n},moveTo:function(e,n){function i(t,e,n){return t<0||t+n>e&&(t=e-n)<0?0:t}var r=this;if(r.settings.constrainToViewport){var a=t.getViewPort(window),o=r.layoutRect();e=i(e,a.w+a.x,o.w),n=i(n,a.h+a.y,o.h)}return r.state.get("rendered")?r.layoutRect({x:e,y:n}).repaint():(r.settings.x=e,r.settings.y=n),r.fire("move",{x:e,y:n}),r}}})),n(At,[gt],(function(t){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,n){if(e<=1||n<=1){var i=t.getWindowSize();e=e<=1?e*i.w:e,n=n<=1?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:n,w:e,h:n}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}}})),n(Mt,[Ct,kt,At,gt,f,s],(function(t,e,n,i,r,a){function o(t,e){for(;t;){if(t==e)return!0;t=t.parent()}}function s(t){function e(e,n){for(var i,r=0;r<g.length;r++)if(g[r]!=t)for(i=g[r].parent();i&&(i=i.parent());)i==t&&g[r].fixed(e).moveBy(0,n).repaint()}var n=i.getViewPort().y;t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>n&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),e(!1,t._autoFixY-n)):(t._autoFixY=t.layoutRect().y,t._autoFixY<n&&(t.fixed(!0).layoutRect({y:0}).repaint(),e(!0,n-t._autoFixY))))}function l(t,e){var n,i,a=m.zIndex||65535;if(t)p.push(e);else for(n=p.length;n--;)p[n]===e&&p.splice(n,1);if(p.length)for(n=0;n<p.length;n++)p[n].modal&&(a++,i=p[n]),p[n].getEl().style.zIndex=a,p[n].zIndex=a,a++;var o=r("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];i?r(o).css("z-index",i.zIndex-1):o&&(o.parentNode.removeChild(o),f=!1),m.currentZIndex=a}function c(t){var e;for(e=g.length;e--;)g[e]===t&&g.splice(e,1);for(e=p.length;e--;)p[e]===t&&p.splice(e,1)}var u,d,h,f,g=[],p=[],m=t.extend({Mixins:[e,n],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(u||(u=function(t){2!=t.button&&function(t){for(var e=g.length;e--;){var n=g[e],i=n.getParentCtrl(t.target);if(n.settings.autohide){if(i&&(o(i,n)||n.parent()===i))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},r(document).on("click touchstart",u)),function(){if(!h){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;h=function(){document.all&&e==t.clientWidth&&n==t.clientHeight||(e=t.clientWidth,n=t.clientHeight,m.hideAll())},r(window).on("resize",h)}}(),g.push(e)),t.autofix&&(d||(d=function(){var t;for(t=g.length;t--;)s(g[t])},r(window).on("scroll",d)),e.on("move",(function(){s(this)}))),e.on("postrender show",(function(t){if(t.control==e){var n,i=e.classPrefix;e.modal&&!f&&((n=r("#"+i+"modal-block",e.getContainerElm()))[0]||(n=r('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(e.getContainerElm())),a.setTimeout((function(){n.addClass(i+"in"),r(e.getEl()).addClass(i+"in")})),f=!0),l(!0,e)}})),e.on("show",(function(){e.parents().each((function(t){if(t.state.get("fixed"))return e.fixed(!0),!1}))})),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){var e=this;if(e.state.get("fixed")!=t){if(e.state.get("rendered")){var n=i.getViewPort();t?e.layoutRect().y-=n.y:e.layoutRect().y+=n.y}e.classes.toggle("fixed",t),e.state.set("fixed",t)}return e},show:function(){var t,e=this,n=e._super();for(t=g.length;t--&&g[t]!==e;);return-1===t&&g.push(e),n},hide:function(){return c(this),l(!1,this),this._super()},hideAll:function(){m.hideAll()},close:function(){var t=this;return t.fire("close").isDefaultPrevented()||(t.remove(),l(!1,t)),t},remove:function(){c(this),this._super()},postRender:function(){var t=this;return t.settings.bodyRole&&this.getEl("body").setAttribute("role",t.settings.bodyRole),t._super()}});return m.hideAll=function(){for(var t=g.length;t--;){var e=g[t];e&&e.settings.autohide&&(e.hide(),g.splice(t,1))}},m})),n(Tt,[Mt,Ct,gt,f,_t,pt,l,s],(function(t,e,n,i,r,a,o,s){function l(t){var e,n=i("meta[name=viewport]")[0];!1!==o.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==u&&(u=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":u))}var c=[],u="",d=t.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var i=this;i._super(t),i.isRtl()&&i.classes.add("rtl"),i.classes.add("window"),i.bodyClasses.add("window-body"),i.state.set("fixed",!0),t.buttons&&(i.statusbar=new e({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),i.statusbar.classes.add("foot"),i.statusbar.parent(i)),i.on("click",(function(t){var e=i.classPrefix+"close";(n.hasClass(t.target,e)||n.hasClass(t.target.parentNode,e))&&i.close()})),i.on("cancel",(function(){i.close()})),i.aria("describedby",i.describedBy||i._id+"-none"),i.aria("label",t.title),i._fullscreen=!1},recalc:function(){var t,e,i,r,a=this,o=a.statusbar;a._fullscreen&&(a.layoutRect(n.getWindowSize()),a.layoutRect().contentH=a.layoutRect().innerH),a._super(),t=a.layoutRect(),a.settings.title&&!a._fullscreen&&(e=t.headerW)>t.w&&(i=t.x-Math.max(0,e/2),a.layoutRect({w:e,x:i}),r=!0),o&&(o.layoutRect({w:a.layoutRect().innerW}).recalc(),(e=o.layoutRect().minW+t.deltaW)>t.w&&(i=t.x-Math.max(0,e-t.w),a.layoutRect({w:e,x:i}),r=!0)),r&&a.recalc()},initLayoutRect:function(){var t,e=this,i=e._super(),r=0;if(e.settings.title&&!e._fullscreen){t=e.getEl("head");var a=n.getSize(t);i.headerW=a.width,i.headerH=a.height,r+=i.headerH}e.statusbar&&(r+=e.statusbar.layoutRect().h),i.deltaH+=r,i.minH+=r,i.h+=r;var o=n.getWindowSize();return i.x=e.settings.x||Math.max(0,o.w/2-i.w/2),i.y=e.settings.y||Math.max(0,o.h/2-i.h/2),i},renderHtml:function(){var t=this,e=t._layout,n=t._id,i=t.classPrefix,r=t.settings,a="",o="",s=r.html;return t.preRender(),e.preRender(t),r.title&&(a='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+t.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(s='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=e.renderHtml(t)),t.statusbar&&(o=t.statusbar.renderHtml()),'<div id="'+n+'" class="'+t.classes+'" hidefocus="1"><div class="'+t.classPrefix+'reset" role="application">'+a+'<div id="'+n+'-body" class="'+t.bodyClasses+'">'+s+"</div>"+o+"</div></div>"},fullscreen:function(t){var e,r,o=this,l=document.documentElement,c=o.classPrefix;if(t!=o._fullscreen)if(i(window).on("resize",(function(){var t;if(o._fullscreen)if(e)o._timer||(o._timer=s.setTimeout((function(){var t=n.getWindowSize();o.moveTo(0,0).resizeTo(t.w,t.h),o._timer=0}),50));else{t=(new Date).getTime();var i=n.getWindowSize();o.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-t>50&&(e=!0)}})),r=o.layoutRect(),o._fullscreen=t,t){o._initial={x:r.x,y:r.y,w:r.w,h:r.h},o.borderBox=a.parseBox("0"),o.getEl("head").style.display="none",r.deltaH-=r.headerH+2,i([l,document.body]).addClass(c+"fullscreen"),o.classes.add("fullscreen");var u=n.getWindowSize();o.moveTo(0,0).resizeTo(u.w,u.h)}else o.borderBox=a.parseBox(o.settings.border),o.getEl("head").style.display="",r.deltaH+=r.headerH,i([l,document.body]).removeClass(c+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var t,e=this;setTimeout((function(){e.classes.add("in"),e.fire("open")}),0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new r(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",(function(t){t.isDefaultPrevented()||e.close()})),c.push(e),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,e=this;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),function(t,e){(function(){for(var t=0;t<c.length;t++)if(c[t]._fullscreen)return!0;return!1})()&&i([document.documentElement,document.body]).removeClass(t+"fullscreen")}(e.classPrefix),t=c.length;t--;)c[t]===e&&c.splice(t,1);l(c.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});return function(){if(!o.desktop){var t={w:window.innerWidth,h:window.innerHeight};s.setInterval((function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},i(window).trigger("resize"))}),100)}i(window).on("resize",(function(){var t,e,i=n.getWindowSize();for(t=0;t<c.length;t++)e=c[t].layoutRect(),c[t].moveTo(c[t].settings.x||Math.max(0,i.w/2-e.w/2),c[t].settings.y||Math.max(0,i.h/2-e.h/2))}))}(),d})),n(It,[Tt],(function(t){var e=t.extend({init:function(t){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(t,e,n){return{type:"button",text:t,subtype:n?"primary":"",onClick:function(t){t.control.parents()[1].close(),a(e)}}}var r,a=n.callback||function(){};switch(n.buttons){case e.OK_CANCEL:r=[i("Ok",!0,!0),i("Cancel",!1)];break;case e.YES_NO:case e.YES_NO_CANCEL:r=[i("Yes",1,!0),i("No",0)],n.buttons==e.YES_NO_CANCEL&&r.push(i("Cancel",-1));break;default:r=[i("Ok",!0,!0)]}return new t({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){a(!1)}}).renderTo(document.body).reflow()},alert:function(t,n){return"string"==typeof t&&(t={text:t}),t.callback=n,e.msgBox(t)},confirm:function(t,n){return"string"==typeof t&&(t={text:t}),t.callback=n,t.buttons=e.OK_CANCEL,e.msgBox(t)}}});return e})),n(Dt,[Tt,It],(function(t,e){return function(n){function i(){if(s.length)return s[s.length-1]}function r(t){n.fire("OpenWindow",{win:t})}function a(t){n.fire("CloseWindow",{win:t})}var o=this,s=[];o.windows=s,n.on("remove",(function(){for(var t=s.length;t--;)s[t].close()})),o.open=function(e,i){var o;return n.editorManager.setActive(n),e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),o=new t(e),s.push(o),o.on("close",(function(){for(var t=s.length;t--;)s[t]===o&&s.splice(t,1);s.length||n.focus(),a(o)})),e.data&&o.on("postRender",(function(){this.find("*").each((function(t){var n=t.name();n in e.data&&t.value(e.data[n])}))})),o.features=e||{},o.params=i||{},1===s.length&&n.nodeChanged(),r(o=o.renderTo().reflow()),o},o.alert=function(t,i,o){var s;(s=e.alert(t,(function(){i?i.call(o||this):n.focus()}))).on("close",(function(){a(s)})),r(s)},o.confirm=function(t,n,i){var o;(o=e.confirm(t,(function(t){n.call(i||this,t)}))).on("close",(function(){a(o)})),r(o)},o.close=function(){i()&&i().close()},o.getParams=function(){return i()?i().params:null},o.setParams=function(t){i()&&(i().params=t)},o.getWindows=function(){return s}}})),n(Pt,[yt,kt],(function(t,e){return t.extend({Mixins:[e],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+t.encode(t.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)})),t._super()},repaint:function(){var t,e;(t=this.getEl().style).left=(e=this._layoutRect).x+"px",t.top=e.y+"px",t.zIndex=131070}})})),n(Lt,[yt,Pt],(function(t,e){var n,i=t.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==i.tooltips&&(e.on("mouseenter",(function(n){var i=e.tooltip().moveTo(-65535);if(n.control==e){var r=i.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"==r),i.classes.toggle("tooltip-nw","bc-tl"==r),i.classes.toggle("tooltip-ne","bc-tr"==r),i.moveRel(e.getEl(),r)}else i.hide()})),e.on("mouseleave mousedown click",(function(){e.tooltip().hide()}))),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return n||(n=new e({type:"tooltip"})).renderTo(),n},postRender:function(){var t=this,e=t.settings;t._super(),t.parent()||!e.width&&!e.height||(t.initLayoutRect(),t.repaint()),e.autofocus&&t.focus()},bindStates:function(){function t(t){n.aria("disabled",t),n.classes.toggle("disabled",t)}function e(t){n.aria("pressed",t),n.classes.toggle("active",t)}var n=this;return n.state.on("change:disabled",(function(e){t(e.value)})),n.state.on("change:active",(function(t){e(t.value)})),n.state.get("disabled")&&t(!0),n.state.get("active")&&e(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i})),n(Et,[Lt],(function(t){return t.extend({Defaults:{value:0},init:function(t){var e=this;e._super(t),e.classes.add("progress"),e.settings.filter||(e.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){var t=this;return t._super(),t.value(t.settings.value),t},bindStates:function(){function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}var e=this;return e.state.on("change:value",(function(e){t(e.value)})),t(e.state.get("value")),e._super()}})})),n(Nt,[yt,kt,Et,s],(function(t,e,n,i){return t.extend({Mixins:[e],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new n),e.on("click",(function(t){-1!=t.target.className.indexOf(e.classPrefix+"close")&&e.close()}))},renderHtml:function(){var t=this,e=t.classPrefix,n="",i="",r="",a="";return t.icon&&(n='<i class="'+e+"ico "+e+"i-"+t.icon+'"></i>'),t.color&&(a=' style="background-color: '+t.color+'"'),t.closeButton&&(i='<button type="button" class="'+e+'close" aria-hidden="true"></button>'),t.progressBar&&(r=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+a+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+t.state.get("text")+"</div>"+r+i+"</div>"},postRender:function(){var t=this;return i.setTimeout((function(){t.$el.addClass(t.classPrefix+"in")})),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl().childNodes[1].innerHTML=e.value})),t.progressBar&&t.progressBar.bindStates(),t._super()},close:function(){var t=this;return t.fire("close").isDefaultPrevented()||t.remove(),t},repaint:function(){var t,e;(t=this.getEl().style).left=(e=this._layoutRect).x+"px",t.top=e.y+"px",t.zIndex=65534}})})),n(Rt,[Nt,s,h],(function(t,e,n){return function(i){function r(){if(l.length)return l[l.length-1]}function a(){if(l.length>0){var t=l.slice(0,1)[0],e=i.inline?i.getElement():i.getContentAreaContainer();if(t.moveRel(e,"tc-tc"),l.length>1)for(var n=1;n<l.length;n++)l[n].moveRel(l[n-1].getEl(),"bc-tc")}}function o(t,e){if(!function(t){return!t.progressBar&&!t.timeout}(e))return null;var i=n.grep(t,(function(t){return function(t,e){return t.type===e.settings.type&&t.text===e.settings.text}(e,t)}));return 0===i.length?null:i[0]}var s=this,l=[];s.notifications=l,i.on("remove",(function(){for(var t=l.length;t--;)l[t].close()})),i.on("ResizeEditor",a),i.on("ResizeWindow",(function(){e.requestAnimationFrame((function(){(function(){for(var t=0;t<l.length;t++)l[t].moveTo(0,0)})(),a()}))})),s.open=function(e){if(!i.removed){var n;i.editorManager.setActive(i);var r=o(l,e);return null===r?(n=new t(e),l.push(n),e.timeout>0&&(n.timer=setTimeout((function(){n.close()}),e.timeout)),n.on("close",(function(){var t=l.length;for(n.timer&&i.getWin().clearTimeout(n.timer);t--;)l[t]===n&&l.splice(t,1);a()})),n.renderTo(),a()):n=r,n}},s.close=function(){r()&&r().close()},s.getNotifications=function(){return l},i.on("SkinLoaded",(function(){var t=i.settings.service_message;t&&i.notificationManager.open({text:t,type:"warning",timeout:0,icon:""})}))}})),n(Ot,[x],(function(t){return{create:function(e,n,i){for(var r=[];n&&n!=e;n=n.parentNode)r.push(t.nodeIndex(n,i));return r},resolve:function(t,e){var n,i,r;for(i=t,n=e.length-1;n>=0;n--){if(e[n]>(r=i.childNodes).length-1)return null;i=r[e[n]]}return i}}})),n(zt,[R,k,p,Ot,M,v,l,h,s,C,V,nt],(function(t,e,n,i,r,a,o,s,l,c,u,d){return function(h){function f(t,e){try{h.getDoc().execCommand(t,!1,e)}catch(n){}}function g(){return h.getDoc().documentMode||6}function p(t){return t.isDefaultPrevented()}function m(t){var e,n;t.dataTransfer&&(h.selection.isCollapsed()&&"IMG"==t.target.tagName&&I.select(t.target),(e=h.selection.getContent()).length>0&&(n=O+escape(h.id)+","+escape(e),t.dataTransfer.setData(z,n)))}function v(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(z))&&e.indexOf(O)>=0?(e=e.substr(O.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null}function y(t){h.queryCommandSupported("mceInsertClipboardContent")?h.execCommand("mceInsertClipboardContent",!1,{content:t}):h.execCommand("mceInsertContent",!1,t)}function x(){h.shortcuts.add("meta+a",null,"SelectAll")}function b(){h.on("keydown",(function(t){if(!p(t)&&t.keyCode===A){if(!h.getBody().getElementsByTagName("hr").length)return;if(I.isCollapsed()&&0===I.getRng(!0).startOffset){var e=I.getNode(),n=e.previousSibling;if("HR"==e.nodeName)return T.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(T.remove(n),t.preventDefault())}}}))}function w(){h.on("keydown",(function(t){if(!p(t)&&t.keyCode===A&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var e=I.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}}))}function _(){h.inline||(h.contentStyles.push("body {min-height: 150px}"),h.on("click",(function(t){var e;if("HTML"==t.target.nodeName){if(o.ie>11)return void h.getBody().focus();e=h.selection.getRng(),h.getBody().focus(),h.selection.setRng(e),h.selection.normalize(),h.nodeChanged()}})))}function S(){function e(t){var e=new d(t.getBody()),n=t.selection.getRng(),i=u.fromRangeStart(n),r=u.fromRangeEnd(n),a=e.prev(i),o=e.next(r);return!t.selection.isCollapsed()&&(!a||a.isAtStart()&&i.isEqual(a))&&(!o||o.isAtEnd()&&i.isEqual(o))}h.on("keypress",(function(n){!p(n)&&!I.isCollapsed()&&n.charCode>31&&!t.metaKeyPressed(n)&&e(h)&&(n.preventDefault(),h.setContent(String.fromCharCode(n.charCode)),h.selection.select(h.getBody(),!0),h.selection.collapse(!1),h.nodeChanged())})),h.on("keydown",(function(t){var n=t.keyCode;p(t)||n!=M&&n!=A||e(h)&&(t.preventDefault(),h.setContent(""),h.nodeChanged())}))}var C=s.each,k=h.$,A=t.BACKSPACE,M=t.DELETE,T=h.dom,I=h.selection,D=h.settings,P=h.parser,L=h.serializer,E=o.gecko,N=o.ie,R=o.webkit,O="data:text/mce-internal,",z=N?"Text":"URL";return h.on("keydown",(function(e){var n,i,r,a,o;if(!p(e)&&e.keyCode==t.BACKSPACE&&(i=(n=I.getRng()).startContainer,r=n.startOffset,a=T.getRoot(),o=i,n.collapsed&&0===r)){for(;o&&o.parentNode&&o.parentNode.firstChild==o&&o.parentNode!=a;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(h.formatter.toggle("blockquote",null,o),(n=T.createRng()).setStart(i,0),n.setEnd(i,0),I.setRng(n))}})),function(){function t(t){var e=T.create("body"),n=t.cloneContents();return e.appendChild(n),I.serializer.serialize(e,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(h.getBody()),e.compareRanges(n,i)}var r=t(n),a=T.createRng();return a.selectNode(h.getBody()),r===t(a)}h.on("keydown",(function(t){var e,i,r=t.keyCode;if(!p(t)&&(r==M||r==A)){if(e=h.selection.isCollapsed(),i=h.getBody(),e&&!T.isEmpty(i))return;if(!e&&!n(h.selection.getRng()))return;t.preventDefault(),h.setContent(""),i.firstChild&&T.isBlock(i.firstChild)?h.selection.setCursorLocation(i.firstChild,0):h.selection.setCursorLocation(i,0),h.nodeChanged()}}))}(),o.windowsPhone||h.on("keyup focusin mouseup",(function(e){65==e.keyCode&&t.metaKeyPressed(e)||I.normalize()}),!0),R&&(S(),function(){function r(t){var e=_.schema.getBlockElements(),n=h.getBody();if("BR"!=t.nodeName)return!1;for(;t!=n&&!e[t.nodeName];t=t.parentNode)if(t.nextSibling)return!1;return!0}function a(t,e){var n;for(n=t.nextSibling;n&&n!=e;n=n.nextSibling)if((3!=n.nodeType||0!==k.trim(n.data).length)&&n!==e)return!1;return n===e}function o(t,e,i){var a,o,s;if(_.isChildOf(t,h.getBody()))for(s=_.schema.getNonEmptyElements(),a=new n(i||t,t);o=a[e?"next":"prev"]();){if(s[o.nodeName]&&!r(o))return o;if(3==o.nodeType&&o.data.length>0)return o}}function c(t){var n,i,r,a,s;if(!t.collapsed&&(n=_.getParent(e.getNode(t.startContainer,t.startOffset),_.isBlock),i=_.getParent(e.getNode(t.endContainer,t.endOffset),_.isBlock),s=h.schema.getTextBlockElements(),n!=i&&s[n.nodeName]&&s[i.nodeName]&&"false"!==_.getContentEditable(n)&&"false"!==_.getContentEditable(i)))return t.deleteContents(),r=o(n,!1),a=o(i,!0),_.isEmpty(i)||k(n).append(i.childNodes),k(i).remove(),r?1==r.nodeType?"BR"==r.nodeName?(t.setStartBefore(r),t.setEndBefore(r)):(t.setStartAfter(r),t.setEndAfter(r)):(t.setStart(r,r.data.length),t.setEnd(r,r.data.length)):a&&(1==a.nodeType?(t.setStartBefore(a),t.setEndBefore(a)):(t.setStart(a,0),t.setEnd(a,0))),S.setRng(t),!0}function u(t,n){var i,r,s,l,c,u;if(!t.collapsed)return t;if(u=t.startOffset,3==(c=t.startContainer).nodeType)if(n){if(u<c.data.length)return t}else if(u>0)return t;i=e.getNode(c,u),s=_.getParent(i,_.isBlock),r=o(h.getBody(),n,i),l=_.getParent(r,_.isBlock);var d=1===c.nodeType&&u>c.childNodes.length-1;if(!i||!r)return t;if(l&&s!=l)if(n){if(!a(s,l))return t;1==i.nodeType?"BR"==i.nodeName?t.setStartBefore(i):t.setStartAfter(i):t.setStart(i,i.data.length),1==r.nodeType?t.setEnd(r,0):t.setEndBefore(r)}else{if(!a(l,s))return t;1==r.nodeType?"BR"==r.nodeName?t.setStartBefore(r):t.setStartAfter(r):t.setStart(r,r.data.length),1==i.nodeType&&d?t.setEndAfter(i):t.setEndBefore(i)}return t}function d(t,e){function n(t,n){return p=k(n).parents().filter((function(t,e){return!!h.schema.getTextInlineElements()[e.nodeName]})),l=t.cloneNode(!1),(p=s.map(p,(function(t){return t=t.cloneNode(!1),l.hasChildNodes()?(t.appendChild(l.firstChild),l.appendChild(t)):l.appendChild(t),l.appendChild(t),t}))).length?(g=_.create("br"),p[0].appendChild(g),_.replace(l,t),e.setStartBefore(g),e.setEndBefore(g),h.selection.setRng(e),g):null}function r(t){return t&&h.schema.getTextBlockElements()[t.tagName]}var a,o,l,c,u,d,f,g,p;if(e.collapsed&&(f=e.startOffset,r(o=_.getParent(d=e.startContainer,_.isBlock))))if(1==d.nodeType){if((d=d.childNodes[f])&&"BR"!=d.tagName)return;if(u=t?o.nextSibling:o.previousSibling,_.isEmpty(o)&&r(u)&&_.isEmpty(u)&&n(o,d))return _.remove(u),!0}else if(3==d.nodeType){if(a=i.create(o,d),c=o.cloneNode(!0),d=i.resolve(c,a),t){if(f>=d.data.length)return;d.deleteData(f,1)}else{if(f<=0)return;d.deleteData(f-1,1)}if(_.isEmpty(c))return n(o,d)}}function f(t){var e,n,i;(function(t){var e=S.getRng();if(c(e=u(e,t)))return!0})(t)||(s.each(h.getBody().getElementsByTagName("*"),(function(t){"SPAN"==t.tagName&&t.setAttribute("mce-data-marked",1),!t.hasAttribute("data-mce-style")&&t.hasAttribute("style")&&h.dom.setAttrib(t,"style",h.dom.getAttrib(t,"style"))})),(e=new C((function(){}))).observe(h.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),h.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),n=h.selection.getRng(),i=n.startContainer.parentNode,s.each(e.takeRecords(),(function(t){if(_.isChildOf(t.target,h.getBody())){if("style"==t.attributeName){var e=t.target.getAttribute("data-mce-style");e?t.target.setAttribute("style",e):t.target.removeAttribute("style")}s.each(t.addedNodes,(function(t){var e,r;"SPAN"!=t.nodeName||t.getAttribute("mce-data-marked")||(t==i&&(e=n.startOffset,r=t.firstChild),_.remove(t,!0),r&&(n.setStart(r,e),n.setEnd(r,e),h.selection.setRng(n)))}))}})),e.disconnect(),s.each(h.dom.select("span[mce-data-marked]"),(function(t){t.removeAttribute("mce-data-marked")})))}function g(t){h.undoManager.transact((function(){f(t)}))}var x,b,w=h.getDoc(),_=h.dom,S=h.selection,C=window.MutationObserver;C||(x=!0,C=function(){function t(t){var e=t.relatedNode||t.target;i.push({target:e,addedNodes:[e]})}function e(t){i.push({target:t.relatedNode||t.target,attributeName:t.attrName})}var n,i=[];this.observe=function(i){(n=i).addEventListener("DOMSubtreeModified",t,!1),n.addEventListener("DOMNodeInsertedIntoDocument",t,!1),n.addEventListener("DOMNodeInserted",t,!1),n.addEventListener("DOMAttrModified",e,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",t,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",t,!1),n.removeEventListener("DOMNodeInserted",t,!1),n.removeEventListener("DOMAttrModified",e,!1)},this.takeRecords=function(){return i}}),h.on("keydown",(function(t){var e=t.keyCode==M,n=t.ctrlKey||t.metaKey;if(!p(t)&&(e||t.keyCode==A)){var i=h.selection.getRng(),r=i.startContainer,a=i.startOffset;if(e&&t.shiftKey)return;if(d(e,i))return void t.preventDefault();if(!n&&i.collapsed&&3==r.nodeType&&(e?a<r.data.length:a>0))return;t.preventDefault(),n&&h.selection.getSel().modify("extend",e?"forward":"backward",t.metaKey?"lineboundary":"word"),f(e)}})),h.on("keypress",(function(e){var n,i,r,a,o,s;!p(e)&&!S.isCollapsed()&&e.charCode>31&&!t.metaKeyPressed(e)&&(n=h.selection.getRng(),s=String.fromCharCode(e.charCode),e.preventDefault(),i=k(n.startContainer).parents().filter((function(t,e){return!!h.schema.getTextInlineElements()[e.nodeName]})),f(!0),(i=i.filter((function(t,e){return!k.contains(h.getBody(),e)}))).length?(r=_.createFragment(),i.each((function(t,e){e=e.cloneNode(!1),r.hasChildNodes()?(e.appendChild(r.firstChild),r.appendChild(e)):(o=e,r.appendChild(e)),r.appendChild(e)})),o.appendChild(h.getDoc().createTextNode(s)),a=_.getParent(n.startContainer,_.isBlock),_.isEmpty(a)?k(a).empty().append(r):n.insertNode(r),n.setStart(o.firstChild,1),n.setEnd(o.firstChild,1),h.selection.setRng(n)):h.selection.setContent(s))})),h.addCommand("Delete",(function(){f()})),h.addCommand("ForwardDelete",(function(){f(!0)})),x||(h.on("dragstart",(function(t){b=S.getRng(),m(t)})),h.on("drop",(function(t){if(!p(t)){var n=v(t);n&&(t.preventDefault(),l.setEditorTimeout(h,(function(){var i=e.getCaretRangeFromPoint(t.x,t.y,w);b&&(S.setRng(b),b=null,g()),S.setRng(i),y(n.html)})))}})),h.on("cut",(function(t){p(t)||!t.clipboardData||h.selection.isCollapsed()||(t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/html",h.selection.getContent()),t.clipboardData.setData("text/plain",h.selection.getContent({format:"text"})),l.setEditorTimeout(h,(function(){g(!0)})))})))}(),h.settings.content_editable||T.bind(h.getDoc(),"mousedown mouseup",(function(t){var e;if(t.target==h.getDoc().documentElement)if(e=I.getRng(),h.getBody().focus(),"mousedown"==t.type){if(c.isCaretContainer(e.startContainer))return;I.placeCaretAt(t.clientX,t.clientY)}else I.setRng(e)})),h.on("click",(function(t){var e=t.target;/^(IMG|HR)$/.test(e.nodeName)&&"false"!==T.getContentEditableParent(e)&&(t.preventDefault(),I.select(e),h.nodeChanged()),"A"==e.nodeName&&T.hasClass(e,"mce-item-anchor")&&(t.preventDefault(),I.select(e))})),D.forced_root_block&&h.on("init",(function(){f("DefaultParagraphSeparator",D.forced_root_block)})),h.on("init",(function(){h.dom.bind(h.getBody(),"submit",(function(t){t.preventDefault()}))})),w(),P.addNodeFilter("br",(function(t){for(var e=t.length;e--;)"Apple-interchange-newline"==t[e].attr("class")&&t[e].remove()})),o.iOS?(h.inline||h.on("keydown",(function(){document.activeElement==document.body&&h.getWin().focus()})),_(),h.on("click",(function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)})),h.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):x()),N&&o.ie<11&&(b(),document.body.setAttribute("role","application"),g()>7||(f("RespectVisibilityInDesign",!0),h.contentStyles.push(".mceHideBrInPre pre br {display: none}"),T.addClass(h.getBody(),"mceHideBrInPre"),P.addNodeFilter("pre",(function(t){for(var e,n,i,a,o=t.length;o--;)for(n=(e=t[o].getAll("br")).length;n--;)(a=(i=e[n]).prev)&&3===a.type&&"\n"!=a.value.charAt(a.value-1)?a.value+="\n":i.parent.insert(new r("#text",3),i,!0).value="\n"})),L.addNodeFilter("pre",(function(t){for(var e,n,i,r=t.length;r--;)for(n=(e=t[r].getAll("br")).length;n--;)(i=e[n].prev)&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))),T.bind(h.getBody(),"mouseup",(function(){var t,e=I.getNode();"IMG"==e.nodeName&&((t=T.getStyle(e,"width"))&&(T.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),T.setStyle(e,"width","")),(t=T.getStyle(e,"height"))&&(T.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),T.setStyle(e,"height","")))})),h.on("keydown",(function(t){var e;p(t)||t.keyCode!=A||(e=h.getDoc().selection.createRange())&&e.item&&(t.preventDefault(),h.undoManager.beforeChange(),T.remove(e.item(0)),h.undoManager.add())})),function(){var t;g()>=10&&(t="",C("p div h1 h2 h3 h4 h5 h6".split(" "),(function(e,n){t+=(n>0?",":"")+e+":empty"})),h.contentStyles.push(t+"{padding-right: 1px !important}"))}(),g()<9&&(P.addNodeFilter("noscript",(function(t){for(var e,n,i=t.length;i--;)(n=(e=t[i]).firstChild)&&e.attr("data-mce-innertext",n.value)})),L.addNodeFilter("noscript",(function(t){for(var e,n,i,o=t.length;o--;)e=t[o],(n=t[o].firstChild)?n.value=a.decode(n.value):(i=e.attributes.map["data-mce-innertext"])&&(e.attr("data-mce-innertext",null),(n=new r("#text",3)).value=i,n.raw=!0,e.append(n))}))),function(){function t(t,e){var n=s.createTextRange();try{n.moveToPoint(t,e)}catch(o){n=null}return n}function e(e){var i;e.button?(i=t(e.x,e.y))&&(i.compareEndPoints("StartToStart",r)>0?i.setEndPoint("StartToStart",r):i.setEndPoint("EndToEnd",r),i.select()):n()}function n(){var t=o.selection.createRange();r&&!t.item&&0===t.compareEndPoints("StartToEnd",t)&&r.select(),T.unbind(o,"mouseup",n),T.unbind(o,"mousemove",e),r=i=0}var i,r,a,o=T.doc,s=o.body;o.documentElement.unselectable=!0,T.bind(o,"mousedown contextmenu",(function(s){if("HTML"===s.target.nodeName){if(i&&n(),(a=o.documentElement).scrollHeight>a.clientHeight)return;i=1,(r=t(s.x,s.y))&&(T.bind(o,"mouseup",n),T.bind(o,"mousemove",e),T.getRoot().focus(),r.select())}}))}()),o.ie>=11&&(_(),w()),o.ie&&(x(),f("AutoUrlDetect",!1),h.on("dragstart",(function(t){m(t)})),h.on("drop",(function(t){if(!p(t)){var n=v(t);if(n&&n.id!=h.id){t.preventDefault();var i=e.getCaretRangeFromPoint(t.x,t.y,h.getDoc());I.setRng(i),y(n.html)}}}))),E&&(S(),b(),window.Range.prototype.getClientRects||h.on("mousedown",(function(t){if(!p(t)&&"HTML"===t.target.nodeName){var e=h.getBody();e.blur(),l.setEditorTimeout(h,(function(){e.focus()}))}})),function(){function t(){var t=T.getAttribs(I.getStart().cloneNode(!1));return function(){var e=I.getStart();e!==h.getBody()&&(T.setAttrib(e,"style",null),C(t,(function(t){e.setAttributeNode(t.cloneNode(!0))})))}}function e(){return!I.isCollapsed()&&T.getParent(I.getStart(),T.isBlock)!=T.getParent(I.getEnd(),T.isBlock)}h.on("keypress",(function(n){var i;if(!p(n)&&(8==n.keyCode||46==n.keyCode)&&e())return i=t(),h.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1})),T.bind(h.getDoc(),"cut",(function(n){var i;!p(n)&&e()&&(i=t(),l.setEditorTimeout(h,(function(){i()})))}))}(),D.readonly||h.on("BeforeExecCommand MouseDown",(function(){f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),D.object_resizing||f("enableObjectResizing",!1)})),h.on("SetContent ExecCommand",(function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||C(T.select("a"),(function(t){var e=t.parentNode,n=T.getRoot();if(e.lastChild===t){for(;e&&!T.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}T.add(e,"br",{"data-mce-bogus":1})}}))})),h.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),o.mac&&h.on("keydown",(function(e){!t.metaKeyPressed(e)||e.shiftKey||37!=e.keyCode&&39!=e.keyCode||(e.preventDefault(),h.selection.getSel().modify("move",37==e.keyCode?"backward":"forward","lineboundary"))})),w()),{refreshContentEditable:function(){},isHidden:function(){var t;return E?!(t=h.selection.getSel())||!t.rangeCount||0===t.rangeCount:0}}}})),n(Bt,[ut,x,h],(function(t,e,n){function i(t,e){return"selectionchange"==e?t.getDoc():!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e)?t.getDoc().documentElement:t.settings.event_root?(t.eventRoot||(t.eventRoot=o.select(t.settings.event_root)[0]),t.eventRoot):t.getBody()}function r(t,e){function n(t){return!t.hidden&&!t.readonly}var r,s=i(t,e);if(t.delegates||(t.delegates={}),!t.delegates[e])if(t.settings.event_root){if(a||(a={},t.editorManager.on("removeEditor",(function(){var e;if(!t.editorManager.activeEditor&&a){for(e in a)t.dom.unbind(i(t,e));a=null}}))),a[e])return;r=function(i){for(var r=i.target,a=t.editorManager.editors,s=a.length;s--;){var l=a[s].getBody();(l===r||o.isChildOf(r,l))&&n(a[s])&&a[s].fire(e,i)}},a[e]=r,o.bind(s,e,r)}else o.bind(s,e,r=function(i){n(t)&&t.fire(e,i)}),t.delegates[e]=r}var a,o=e.DOM,s={bindPendingEventDelegates:function(){var t=this;n.each(t._pendingNativeEvents,(function(e){r(t,e)}))},toggleNativeEvent:function(t,e){var n=this;"focus"!=t&&"blur"!=t&&(e?n.initialized?r(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(i(n,t),t,n.delegates[t]),delete n.delegates[t]))},unbindAllNativeEvents:function(){var t,e=this;if(e.delegates){for(t in e.delegates)e.dom.unbind(i(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return n.extend({},t,s)})),n(Ft,[],(function(){function t(t,e,i){try{t.getDoc().execCommand(e,!1,i)}catch(n){}}function e(e,n){e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),n?(e._clickBlocker=function(t){var e,n;return e=t.getBody(),n=function(e){t.dom.getParents(e.target,"a").length>0&&e.preventDefault()},t.dom.bind(e,"click",n),{unbind:function(){t.dom.unbind(e,"click",n)}}}(e),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,t(e,"StyleWithCSS",!1),t(e,"enableInlineTableEditing",!1),t(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())}return{setMode:function(t,n){n!=(t.readonly?"readonly":"design")&&(t.initialized?e(t,"readonly"==n):t.on("init",(function(){e(t,"readonly"==n)})),t.fire("SwitchMode",{mode:n}))}}})),n(Ht,[h,l],(function(t,e){var n=t.each,i=t.explode,r={f9:120,f10:121,f11:122},a=t.makeMap("alt,ctrl,shift,meta,access");return function(o){function s(t){var o,s,l={};for(s in n(i(t,"+"),(function(t){t in a?l[t]=!0:/^[0-9]{2,}$/.test(t)?l.keyCode=parseInt(t,10):(l.charCode=t.charCodeAt(0),l.keyCode=r[t]||t.toUpperCase().charCodeAt(0))})),o=[l.keyCode],a)l[s]?o.push(s):l[s]=!1;return l.id=o.join(","),l.access&&(l.alt=!0,e.mac?l.ctrl=!0:l.shift=!0),l.meta&&(e.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(e,n,r,a){var l;return(l=t.map(i(e,">"),s))[l.length-1]=t.extend(l[l.length-1],{func:r,scope:a||o}),t.extend(l[0],{desc:o.translate(n),subpatterns:l.slice(1)})}function c(t,e){return!!e&&e.ctrl==t.ctrlKey&&e.meta==t.metaKey&&e.alt==t.altKey&&e.shift==t.shiftKey&&!!(t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode)&&(t.preventDefault(),!0)}function u(t){return t.func?t.func.call(t.scope):null}var d={},h=[];o.on("keyup keypress keydown",(function(t){!function(t){return t.altKey||t.ctrlKey||t.metaKey}(t)&&!function(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}(t)||t.isDefaultPrevented()||(n(d,(function(e){if(c(t,e))return h=e.subpatterns.slice(0),"keydown"==t.type&&u(e),!0})),c(t,h[0])&&(1===h.length&&"keydown"==t.type&&u(h[0]),h.shift()))})),this.add=function(e,r,a,s){var c;return c=a,"string"==typeof a?a=function(){o.execCommand(c,!1,null)}:t.isArray(c)&&(a=function(){o.execCommand(c[0],c[1],c[2])}),n(i(t.trim(e.toLowerCase())),(function(t){var e=l(t,r,a,s);d[e.id]=e})),!0},this.remove=function(t){var e=l(t);return!!d[e.id]&&(delete d[e.id],!0)}}})),n(Vt,[o,h,z],(function(t,e,n){return function(i,r){function a(t){var e;return e={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[t.blob().type.toLowerCase()]||"dat",t.filename()+"."+e}function o(t){return{id:t.id,blob:t.blob,base64:t.base64,filename:n.constant(a(t))}}function s(t,e,n,i){var a,o;(a=new XMLHttpRequest).open("POST",r.url),a.withCredentials=r.credentials,a.upload.onprogress=function(t){i(t.loaded/t.total*100)},a.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;return 200!=a.status?void n("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?void e(function(t,e){return t?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e}(r.basePath,t.location)):void n("Invalid JSON: "+a.responseText)},(o=new FormData).append("file",t.blob(),t.filename()),a.send(o)}function l(){return new t((function(t){t([])}))}function c(t,e){return{url:e,blobInfo:t,status:!0}}function u(t,e){return{url:"",blobInfo:t,status:!1,error:e}}function d(t,n){e.each(p[t],(function(t){t(n)})),delete p[t]}function h(e,n,r){return i.markPending(e.blobUri()),new t((function(t){var a,s,l=function(){};try{var h=function(){a&&(a.close(),s=l)};s=function(t){t<0||t>100||(a||(a=r()),a.progressBar.value(t))},n(o(e),(function(n){h(),i.markUploaded(e.blobUri(),n),d(e.blobUri(),c(e,n)),t(c(e,n))}),(function(n){h(),i.removeFailed(e.blobUri()),d(e.blobUri(),u(e,n)),t(u(e,n))}),s)}catch(f){t(u(e,f.message))}}))}function f(e){var n=e.blobUri();return new t((function(t){p[n]=p[n]||[],p[n].push(t)}))}function g(n,a){return n=e.grep(n,(function(t){return!i.isUploaded(t.blobUri())})),t.all(e.map(n,(function(t){return i.isPending(t.blobUri())?f(t):h(t,r.handler,a)})))}var p={};return r=e.extend({credentials:!1,handler:s},r),{upload:function(t,e){return!r.url&&function(t){return t===s}(r.handler)?l():g(t,e)}}}})),n(Wt,[o],(function(t){function e(e){return new t((function(t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){200==this.status&&t(this.response)},n.send()}))}function n(t){var e,n;return t=decodeURIComponent(t).split(","),(n=/data:([^;]+)/.exec(t[0]))&&(e=n[1]),{type:e,data:t[1]}}function i(e){return new t((function(t){var i,r,a;e=n(e);try{i=atob(e.data)}catch(o){return void t(new Blob([]))}for(r=new Uint8Array(i.length),a=0;a<r.length;a++)r[a]=i.charCodeAt(a);t(new Blob([r],{type:e.type}))}))}return{uriToBlob:function(t){return 0===t.indexOf("blob:")?e(t):0===t.indexOf("data:")?i(t):null},blobToDataUri:function(e){return new t((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))},parseDataUri:n}})),n(Xt,[o,d,z,Wt,l],(function(t,e,n,i,r){var a=0,o=function(t){return(t||"blobid")+a++};return function(a,s){var l={};return{findAll:function(c,u){var d,h;return u||(u=n.constant(!0)),d=e.filter(c.getElementsByTagName("img"),(function(t){var e=t.src;return!!r.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!e||e==r.transparentSrc)&&(0===e.indexOf("blob:")?!a.isUploaded(e):0===e.indexOf("data:")&&u(t))})),h=e.map(d,(function(e){var n;return l[e.src]?new t((function(t){l[e.src].then((function(n){t({image:e,blobInfo:n.blobInfo})}))})):(n=new t((function(t){!function(t,e){var n,r;0===t.src.indexOf("blob:")?(r=s.getByUri(t.src))?e({image:t,blobInfo:r}):i.uriToBlob(t.src).then((function(a){i.blobToDataUri(a).then((function(l){n=i.parseDataUri(l).data,r=s.create(o(),a,n),s.add(r),e({image:t,blobInfo:r})}))})):(n=i.parseDataUri(t.src).data,(r=s.findFirst((function(t){return t.base64()===n})))?e({image:t,blobInfo:r}):i.uriToBlob(t.src).then((function(i){r=s.create(o(),i,n),s.add(r),e({image:t,blobInfo:r})})))}(e,t)})).then((function(t){return delete l[t.image.src],t})).catch((function(t){return delete l[e.src],t})),l[e.src]=n,n)})),t.all(h)}}}})),n(Yt,[d,z],(function(t,e){return function(){function n(t){return i((function(e){return e.id()===t}))}function i(e){return t.filter(r,e)[0]}var r=[],a=e.constant;return{create:function(t,e,n,i){return{id:a(t),filename:a(i||t),blob:a(e),base64:a(n),blobUri:a(URL.createObjectURL(e))}},add:function(t){n(t.id())||r.push(t)},get:n,getByUri:function(t){return i((function(e){return e.blobUri()==t}))},findFirst:i,removeByUri:function(e){r=t.filter(r,(function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)}))},destroy:function(){t.each(r,(function(t){URL.revokeObjectURL(t.blobUri())})),r=[]}}}})),n(Gt,[],(function(){return function(){function t(t,e){return{status:t,resultUri:e}}function e(t){return t in n}var n={};return{hasBlobUri:e,getResultUri:function(t){var e=n[t];return e?e.resultUri:null},isPending:function(t){return!!e(t)&&1===n[t].status},isUploaded:function(t){return!!e(t)&&2===n[t].status},markPending:function(e){n[e]=t(1,null)},markUploaded:function(e,i){n[e]=t(2,i)},removeFailed:function(t){delete n[t]},destroy:function(){n={}}}}})),n(Ut,[w],(function(t){var e=t.PluginManager,n=function(t,n){for(var i in e.urls)if(e.urls[i]+"/plugin"+n+".js"===t)return i;return null},i=function(t,e){t.notificationManager.open({type:"error",text:e})},r=function(t,e){t._skinLoaded?i(t,e):t.on("SkinLoaded",(function(){i(t,e)}))};return{pluginLoadError:function(t,e){r(t,function(t,e){var i=n(e,t.suffix);return i?"Failed to load plugin: "+i+" from url "+e:"Failed to load plugin url: "+e}(t,e))},uploadError:function(t,e){r(t,"Failed to upload image: "+e)}}})),n(jt,[d,Vt,Xt,Yt,Gt,Ut],(function(t,e,n,i,r,a){return function(o){function s(t){return function(e){return o.selection?t(e):[]}}function l(t,e,n){var i=0;do{-1!==(i=t.indexOf(e,i))&&(t=t.substring(0,i)+n+t.substr(i+e.length),i+=n.length-e.length+1)}while(-1!==i);return t}function c(t,e,n){return t=l(t,'src="'+e+'"','src="'+n+'"'),l(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')}function u(e,n){t.each(o.undoManager.data,(function(i){"fragmented"===i.type?i.fragments=t.map(i.fragments,(function(t){return c(t,e,n)})):i.content=c(i.content,e,n)}))}function d(){return o.notificationManager.open({text:o.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function h(n){return v||(v=new e(w,{url:b.images_upload_url,basePath:b.images_upload_base_path,credentials:b.images_upload_credentials,handler:b.images_upload_handler})),p().then(s((function(e){var i;return i=t.map(e,(function(t){return t.blobInfo})),v.upload(i,d).then(s((function(i){return i=t.map(i,(function(t,n){var i=e[n].image;return t.status&&!1!==o.settings.images_replace_blob_uris?function(t,e){x.removeByUri(t.src),u(t.src,e),o.$(t).attr({src:b.images_reuse_filename?e+"?"+(new Date).getTime():e,"data-mce-src":o.convertURL(e,"src")})}(i,t.url):t.error&&a.uploadError(o,t.error),{element:i,status:t.status}})),n&&n(i),i})))})))}function f(t){if(!1!==b.automatic_uploads)return h(t)}function g(t){return!b.images_dataimg_filter||b.images_dataimg_filter(t)}function p(){return y||(y=new n(w,x)),y.findAll(o.getBody(),g).then(s((function(e){return t.each(e,(function(t){u(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")})),e})))}function m(e){return e.replace(/src="(blob:[^"]+)"/g,(function(e,n){var i=w.getResultUri(n);if(i)return'src="'+i+'"';var r=x.getByUri(n);return r||(r=t.reduce(o.editorManager.editors,(function(t,e){return t||e.editorUpload.blobCache.getByUri(n)}),null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':e}))}var v,y,x=new i,b=o.settings,w=new r;return o.on("setContent",(function(){!1!==o.settings.automatic_uploads?f():p()})),o.on("RawSaveContent",(function(t){t.content=m(t.content)})),o.on("getContent",(function(t){t.source_view||"raw"==t.format||(t.content=m(t.content))})),o.on("PostRender",(function(){o.parser.addNodeFilter("img",(function(e){t.each(e,(function(t){var e=t.attr("src");if(!x.getByUri(e)){var n=w.getResultUri(e);n&&t.attr("src",n)}}))}))})),{blobCache:x,uploadImages:h,uploadImagesAuto:f,scanForImages:p,destroy:function(){x.destroy(),w.destroy(),y=v=null}}}})),n(qt,[C,V,_,k,f,F,s],(function(t,e,n,i,r,a,o){var s=n.isContentEditableFalse;return function(e,n){function i(t,n){var i,r,o,s,l,c=a.collapse(t.getBoundingClientRect(),n);return"BODY"==e.tagName?(i=e.ownerDocument.documentElement,r=e.scrollLeft||i.scrollLeft,o=e.scrollTop||i.scrollTop):(l=e.getBoundingClientRect(),r=e.scrollLeft-l.left,o=e.scrollTop-l.top),c.left+=r,c.right+=r,c.top+=o,c.bottom+=o,c.width=1,(s=t.offsetWidth-t.clientWidth)>0&&(n&&(s*=-1),c.left+=s,c.right+=s),c}function l(){(function(){var n,i,a,o,s;for(n=r("*[contentEditable=false]",e),o=0;o<n.length;o++)t.endsWithCaretContainer(a=(i=n[o]).previousSibling)&&(1==(s=a.data).length?a.parentNode.removeChild(a):a.deleteData(s.length-1,1)),t.startsWithCaretContainer(a=i.nextSibling)&&(1==(s=a.data).length?a.parentNode.removeChild(a):a.deleteData(0,1))})(),h&&(t.remove(h),h=null),d&&(d.remove(),d=null),clearInterval(u)}function c(){u=o.setInterval((function(){r("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden")}),500)}var u,d,h;return{show:function(a,o){var u,f;return l(),n(o)?(h=t.insertBlock("p",o,a),u=i(o,a),r(h).css("top",u.top),d=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(u).appendTo(e),a&&d.addClass("mce-visual-caret-before"),c(),(f=o.ownerDocument.createRange()).setStart(h,0),f.setEnd(h,0),f):(h=t.insertInline(o,a),f=o.ownerDocument.createRange(),s(h.nextSibling)?(f.setStart(h,0),f.setEnd(h,0)):(f.setStart(h,1),f.setEnd(h,1)),f)},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){o.clearInterval(u)}}}})),n(Zt,[d,_,F],(function(t,e,n){return{getClientRects:function i(r){function a(e){return t.map(e,(function(t){return(t=n.clone(t)).node=r,t}))}if(t.isArray(r))return t.reduce(r,(function(t,e){return t.concat(i(e))}),[]);if(e.isElement(r))return a(r.getClientRects());if(e.isText(r)){var o=r.ownerDocument.createRange();return o.setStart(r,0),o.setEnd(r,r.data.length),a(o.getClientRects())}}}})),n($t,[z,d,Zt,B,et,nt,V,F],(function(t,e,n,i,r,a,o,s){function l(t,e,n,a){for(;a=r.findNode(a,t,i.isEditableCaretCandidate,e);)if(n(a))return}function c(t,i,r,a,o,s){function c(a){var s,l,c;for(c=n.getClientRects(a),-1==t&&(c=c.reverse()),s=0;s<c.length;s++)if(!r(l=c[s],d)){if(f.length>0&&i(l,e.last(f))&&h++,l.line=h,o(l))return!0;f.push(l)}}var u,d,h=0,f=[];return(d=e.last(s.getClientRects()))?(c(u=s.getNode()),l(t,a,c,u),f):f}var u=t.curry;return{upUntil:u(c,-1,s.isAbove,s.isBelow),downUntil:u(c,1,s.isBelow,s.isAbove),positionsUntil:function(t,n,i,r){function l(t){return e.last(t.getClientRects())}var c,u,d,h,f,g,p=new a(n),m=[],v=0;1==t?(c=p.next,u=s.isBelow,d=s.isAbove,h=o.after(r)):(c=p.prev,u=s.isAbove,d=s.isBelow,h=o.before(r)),g=l(h);do{if(h.isVisible()&&!d(f=l(h),g)){if(m.length>0&&u(f,e.last(m))&&v++,(f=s.clone(f)).position=h,f.line=v,i(f))return m;m.push(f)}}while(h=c(h));return m},isAboveLine:u((function(t,e){return e.line>t})),isLine:u((function(t,e){return e.line===t}))}})),n(Kt,[z,d,_,Zt,F,et,B],(function(t,e,n,i,r,a,o){function s(t,e){return Math.abs(t.left-e)}function l(t,e){return Math.abs(t.right-e)}function c(t,n){function i(t,e){return t>=e.left&&t<=e.right}return e.reduce(t,(function(t,e){var r,a;return r=Math.min(s(t,n),l(t,n)),a=Math.min(s(e,n),l(e,n)),i(n,e)?e:i(n,t)?t:a==r&&h(e.node)||a<r?e:t}))}function u(t,e,n,i){for(;i=f(i,t,o.isEditableCaretCandidate,e);)if(n(i))return}function d(t,n){function a(t,r){var a;return a=e.filter(i.getClientRects(r),(function(e){return!t(e,n)})),o=o.concat(a),0===a.length}var o=[];return o.push(n),u(-1,t,g(a,r.isAbove),n.node),u(1,t,g(a,r.isBelow),n.node),o}var h=n.isContentEditableFalse,f=a.findNode,g=t.curry;return{findClosestClientRect:c,findLineNodeRects:d,closestCaret:function(t,n,r){var a,o;return a=i.getClientRects(function(t){return e.filter(e.toArray(t.getElementsByTagName("*")),h)}(t)),(o=c(a=e.filter(a,(function(t){return r>=t.top&&r<=t.bottom})),n))&&(o=c(d(t,o),n))&&h(o.node)?function(t,e){return{node:t.node,before:s(t,e)<l(t,e)}}(o,n):null}}})),n(Jt,[],(function(){var t=function(t){var e,n,i,r;return{top:(r=t.getBoundingClientRect()).top+(i=(e=t.ownerDocument).defaultView).pageYOffset-(n=e.documentElement).clientTop,left:r.left+i.pageXOffset-n.clientLeft}},e=function(e){return e.inline?t(e.getBody()):{left:0,top:0}},n=function(e,n){if(n.target.ownerDocument!==e.getDoc()){var i=t(e.getContentAreaContainer()),r=function(t){var e=t.getBody(),n=t.getDoc().documentElement;return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop}}(e);return{left:n.pageX-i.left+r.left,top:n.pageY-i.top+r.top}}return{left:n.pageX,top:n.pageY}};return{calc:function(t,i){return function(t,e,n){return{pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}}(e(t),function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}}(t),n(t,i))}}})),n(Qt,[_,d,z,s,x,Jt],(function(t,e,n,i,r,a){var o=t.isContentEditableFalse,s=t.isContentEditableTrue,l=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},c=function(t,i){return function(r){if(function(t){return 0===t.button}(r)){var a=e.find(i.dom.getParents(r.target),n.or(o,s));if(function(t,e){return o(e)&&e!==t}(i.getBody(),a)){var l=i.dom.getPos(a),c=i.getBody(),u=i.getDoc().documentElement;t.element=a,t.screenX=r.screenX,t.screenY=r.screenY,t.maxX=(i.inline?c.scrollWidth:u.offsetWidth)-2,t.maxY=(i.inline?c.scrollHeight:u.offsetHeight)-2,t.relX=r.pageX-l.x,t.relY=r.pageY-l.y,t.width=a.offsetWidth,t.height=a.offsetHeight,t.ghost=function(t,e,n,i){var r=e.cloneNode(!0);t.dom.setStyles(r,{width:n,height:i}),t.dom.setAttrib(r,"data-mce-selected",null);var a=t.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return t.dom.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),t.dom.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a}(i,a,t.width,t.height)}}}},u=function(t,e){var n=i.throttle((function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)}),0);return function(i){var r=Math.max(Math.abs(i.screenX-t.screenX),Math.abs(i.screenY-t.screenY));if(function(t){return t.element}(t)&&!t.dragging&&r>10){if(e.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){var o=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}}(t,a.calc(e,i));(function(t,e){t.parentNode!==e&&e.appendChild(t)})(t.ghost,e.getBody()),function(t,e,n,i,r,a){var o=0,s=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>r&&(o=e.pageX+n-r),e.pageY+i>a&&(s=e.pageY+i-a),t.style.width=n-o+"px",t.style.height=i-s+"px"}(t.ghost,o,t.width,t.height,t.maxX,t.maxY),n(i.clientX,i.clientY)}}},d=function(t,e){return function(n){if(t.dragging&&function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!o(e)}(e,function(t){var e=t.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e}(e.selection),t.element)){var i=function(t){var e=t.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(t.element),r=e.fire("drop",{targetClone:i,clientX:n.clientX,clientY:n.clientY});r.isDefaultPrevented()||(i=r.targetClone,e.undoManager.transact((function(){l(t.element),e.insertContent(e.dom.getOuterHTML(i)),e._selectionOverrides.hideFakeCaret()})))}h(t)}},h=function(t){t.dragging=!1,t.element=null,l(t.ghost)};return{init:function(t){(function(t){var e,n,i,a,o,s,l={};e=r.DOM,s=document,n=c(l,t),i=u(l,t),a=d(l,t),o=function(t,e){return function(){h(t),t.dragging&&e.fire("dragend")}}(l,t),t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",a),e.bind(s,"mousemove",i),e.bind(s,"mouseup",o),t.on("remove",(function(){e.unbind(s,"mousemove",i),e.unbind(s,"mouseup",o)}))})(t),function(t){t.on("drop",(function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(o(n)||o(t.dom.getContentEditableParent(n)))&&e.preventDefault()}))}(t)}}})),n(te,[l,nt,V,C,et,qt,$t,Kt,_,k,F,R,z,d,s,Qt],(function(t,e,n,i,r,a,o,s,l,c,u,d,h,f,g,p){function m(t,e){for(;e=t(e);)if(e.isVisible())return e;return e}var v=h.curry,y=l.isContentEditableTrue,x=l.isContentEditableFalse,b=l.isElement,w=r.isAfterContentEditableFalse,_=r.isBeforeContentEditableFalse,S=c.getSelectedNode;return function(c){function C(t){return c.dom.isBlock(t)}function k(t){t&&c.selection.setRng(t)}function A(){return c.selection.getRng()}function M(t,e){c.selection.scrollIntoView(t,e)}function T(t,e,n){return c.fire("ShowCaret",{target:e,direction:t,before:n}).isDefaultPrevented()?null:(M(e,-1===t),tt.show(n,e))}function I(t){return c.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e}(t)}function D(t,e){var n=r.isInSameBlock(t,e);return!(n||!l.isBr(t.getNode()))||n}function P(t,e){return e=r.normalizeRange(t,$,e),-1==t?n.fromRangeStart(e):n.fromRangeEnd(e)}function L(t){return i.isCaretContainerBlock(t.startContainer)}function E(e,i){var r,a;if(i.collapsed&&c.settings.forced_root_block){if(!(r=c.dom.getParent(i.startContainer,"PRE")))return;(1==e?J(n.fromRangeStart(i)):Q(n.fromRangeStart(i)))||(a=function(){var e=c.dom.create(c.settings.forced_root_block);return(!t.ie||t.ie>=11)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(),1==e?c.$(r).after(a):c.$(r).before(a),c.selection.select(a,!0),c.selection.collapse())}}function N(t,e,n,i){var r;return(r=function(t,e,n,i){var r,a,o,s;return!i.collapsed&&(r=S(i),x(r))?T(t,r,-1==t):(s=L(i),n(a=P(t,i))?I(a.getNode(-1==t)):(a=e(a))?n(a)?T(t,a.getNode(-1==t),1==t):n(o=e(a))&&D(a,o)?T(t,o.getNode(-1==t),1==t):s?B(a.toRange()):null:s?i:null)}(t,e,n,i))?r:(r=E(t,i))||null}function R(t,e,n){var i;return(i=function(t,e,n){var i,r,a,l,c,u,d,h,g;if(g=S(n),i=P(t,n),r=e($,o.isAboveLine(1),i),a=f.filter(r,o.isLine(1)),c=f.last(i.getClientRects()),_(i)&&(g=i.getNode()),w(i)&&(g=i.getNode(!0)),!c)return null;if((l=s.findClosestClientRect(a,u=c.left))&&x(l.node))return d=Math.abs(u-l.left),h=Math.abs(u-l.right),T(t,l.node,d<h);if(g){var p=o.positionsUntil(t,$,o.isAboveLine(1),g);if(l=s.findClosestClientRect(f.filter(p,o.isLine(1)),u))return B(l.position.toRange());if(l=f.last(f.filter(p,o.isLine(0))))return B(l.position.toRange())}}(t,e,n))?i:(i=E(t,n))||null}function O(t){t.hasAttribute("data-mce-caret")&&(i.showCaretContainerBlock(t),k(A()),M(t[0]))}function z(t){var e,i;return t=r.normalizeRange(1,$,t),e=n.fromRangeStart(t),x(e.getNode())?T(1,e.getNode(),!e.isAtEnd()):x(e.getNode(!0))?T(1,e.getNode(!0),!1):(i=c.dom.getParent(e.getNode(),h.or(x,y)),x(i)?T(1,i,!1):null)}function B(t){return t&&t.collapsed&&z(t)||t}function F(t){var e,r,a,o;return x(t)?(x(t.previousSibling)&&(a=t.previousSibling),(r=Q(n.before(t)))||(e=J(n.after(t))),e&&b(e.getNode())&&(o=e.getNode()),i.remove(t.previousSibling),i.remove(t.nextSibling),c.dom.remove(t),c.dom.isEmpty(c.getBody())?(c.setContent(""),void c.focus()):a?n.after(a).toRange():o?n.before(o).toRange():r?r.toRange():e?e.toRange():null):null}function H(t){var e=c.schema.getTextBlockElements();return t.nodeName in e}function V(t){return c.dom.isEmpty(t)}function W(t,e,i){var r,a,o,s,l=c.dom;if(r=l.getParent(e.getNode(),l.isBlock),a=l.getParent(i.getNode(),l.isBlock),-1===t){if(s=i.getNode(!0),w(i)&&C(s))return H(r)?(V(r)&&l.remove(r),n.after(s).toRange()):F(i.getNode(!0))}else if(s=e.getNode(),_(e)&&C(s))return H(a)?(V(a)&&l.remove(a),n.before(s).toRange()):F(e.getNode());if(r===a||!H(r)||!H(a))return null;for(;o=r.firstChild;)a.appendChild(o);return c.dom.remove(r),i.toRange()}function X(t,e,n,r){var a,o,s,l;return!r.collapsed&&(a=S(r),x(a))?B(F(a)):n(o=P(t,r))&&i.isCaretContainerBlock(r.startContainer)?(l=-1==t?K.prev(o):K.next(o))?B(l.toRange()):r:e(o)?B(F(o.getNode(-1==t))):e(s=-1==t?K.prev(o):K.next(o))?-1===t?W(t,o,s):W(t,s,o):void 0}function Y(t){return i.isCaretContainer(t)||i.startsWithCaretContainer(t)||i.endsWithCaretContainer(t)}function G(t){return Y(t.startContainer)||Y(t.endContainer)}function U(e){var n,i,r,a,o,s,l,u,d,h,f=c.$,g=c.dom;if(!e)return null;if(e.collapsed){if(!G(e)){if(u=P(1,e),x(u.getNode()))return T(1,u.getNode(),!u.isAtEnd());if(x(u.getNode(!0)))return T(1,u.getNode(!0),!1)}return null}return o=e.startOffset,s=e.endOffset,3==(a=e.startContainer).nodeType&&0==o&&x(a.parentNode)&&(o=g.nodeIndex(a=a.parentNode),a=a.parentNode),1!=a.nodeType?null:(s==o+1&&(n=a.childNodes[o]),x(n)?(d=h=n.cloneNode(!0),(l=c.fire("ObjectSelected",{target:n,targetClone:d})).isDefaultPrevented()?null:(d=l.targetClone,0===(i=f("#"+et)).length&&(i=f('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",et)).appendTo(c.getBody()),e=c.dom.createRng(),d===h&&t.ie?(i.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(d),e.setStartAfter(i[0].firstChild.firstChild),e.setEndAfter(d)):(i.empty().append("").append(d).append(""),e.setStart(i[0].firstChild,1),e.setEnd(i[0].lastChild,0)),i.css({top:g.getPos(n,c.getBody()).y}),i[0].focus(),(r=c.selection.getSel()).removeAllRanges(),r.addRange(e),c.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),Z=n,q(),e)):null)}function j(){Z&&(Z.removeAttribute("data-mce-selected"),c.$("#"+et).remove(),Z=null)}function q(){tt.hide()}var Z,$=c.getBody(),K=new e($),J=v(m,K.next),Q=v(m,K.prev),tt=new a(c.getBody(),C),et="sel-"+c.dom.uniqueId(),nt=c.$;return t.ceFalse&&(function(){function r(t,e){if(!1===t.isDefaultPrevented()){var n=e(A());n&&(t.preventDefault(),k(n))}}function a(t){for(var e=c.getBody();t&&t!=e;){if(y(t)||x(t))return t;t=t.parentNode}return null}function l(){var t,e=a(c.selection.getNode());y(e)&&C(e)&&c.dom.isEmpty(e)&&(t=c.dom.create("br",{"data-mce-bogus":"1"}),c.$(e).empty().append(t),c.selection.setRng(n.before(t).toRange()))}var h=v(N,1,J,_),m=v(N,-1,Q,w),b=v(X,1,_,w),S=v(X,-1,w,_),M=v(R,-1,o.upUntil),D=v(R,1,o.downUntil);c.on("mouseup",(function(){var t=A();t.collapsed&&k(z(t))})),c.on("click",(function(t){var e;(e=a(t.target))&&(x(e)&&(t.preventDefault(),c.focus()),y(e)&&c.dom.isChildOf(e,c.selection.getNode())&&j())})),c.on("blur NewBlock",(function(){j(),q()}));var P=function(t){var i=new e(t);if(!t.firstChild)return!1;var r=n.before(t.firstChild),a=i.next(r);return a&&!_(a)&&!w(a)};(function(t){var e=!1;t.on("touchstart",(function(){e=!1})),t.on("touchmove",(function(){e=!0})),t.on("touchend",(function(t){var n=a(t.target);x(n)&&(e||(t.preventDefault(),U(I(n))))}))})(c),c.on("mousedown",(function(t){var e;if(e=a(t.target))x(e)?(t.preventDefault(),U(I(e))):function(t,e,n){return!n.collapsed&&f.reduce(n.getClientRects(),(function(n,i){return n||u.containsXY(i,t,e)}),!1)}(t.clientX,t.clientY,c.selection.getRng())||c.selection.placeCaretAt(t.clientX,t.clientY);else{j(),q();var n=s.closestCaret($,t.clientX,t.clientY);n&&(function(t,e){var n=c.dom.getParent(t,c.dom.isBlock),i=c.dom.getParent(e,c.dom.isBlock);return n&&!function(t,e){return c.dom.getParent(t,c.dom.isBlock)===c.dom.getParent(e,c.dom.isBlock)}(n,i)&&P(n)}(t.target,n.node)||(t.preventDefault(),c.getBody().focus(),k(T(1,n.node,n.before))))}})),c.on("keydown",(function(t){if(!d.modifierPressed(t))switch(t.keyCode){case d.RIGHT:r(t,h);break;case d.DOWN:r(t,D);break;case d.LEFT:r(t,m);break;case d.UP:r(t,M);break;case d.DELETE:r(t,b);break;case d.BACKSPACE:r(t,S);break;default:x(c.selection.getNode())&&function(t){return!(t.keyCode>=112&&t.keyCode<=123)}(t)&&t.preventDefault()}})),c.on("keyup compositionstart",(function(t){(function(t){var e=nt("*[data-mce-caret]")[0];e&&("compositionstart"==t.type?(t.preventDefault(),t.stopPropagation(),O(e)):i.hasContent(e)&&O(e))})(t),function(t){var e;switch(t.keyCode){case d.DELETE:e=l();break;case d.BACKSPACE:e=l()}e&&t.preventDefault()}(t)}),!0),c.on("cut",(function(){var t=c.selection.getNode();x(t)&&g.setEditorTimeout(c,(function(){k(B(F(t)))}))})),c.on("getSelectionRange",(function(t){var e=t.range;if(Z){if(!Z.parentNode)return void(Z=null);(e=e.cloneRange()).selectNode(Z),t.range=e}})),c.on("setSelectionRange",(function(t){var e;(e=U(t.range))&&(t.range=e)})),c.on("AfterSetSelectionRange",(function(t){var e=t.range;G(e)||q(),function(t){return c.dom.hasClass(t,"mce-offscreen-selection")}(e.startContainer.parentNode)||j()})),c.on("focus",(function(){g.setEditorTimeout(c,(function(){c.selection.setRng(B(c.selection.getRng()))}),0)})),c.on("copy",(function(e){var n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!t.ie){var i=function(){var t=c.dom.get(et);return t?t.getElementsByTagName("*")[0]:t}();i&&(e.preventDefault(),n.clearData(),n.setData("text/html",i.outerHTML),n.setData("text/plain",i.outerText))}})),p.init(c)}(),function(){var t=c.contentStyles,e=".mce-content-body";t.push(tt.getCss()),t.push(e+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+e+" *[contentEditable=false] {cursor: default;}"+e+" *[contentEditable=true] {cursor: text;}")}()),{showBlockCaretContainer:O,hideFakeCaret:q,destroy:function(){tt.destroy(),Z=null}}}})),n(ee,[],(function(){var t=0;return{uuid:function(e){return e+t+++function(){var t=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+t()+t()+t()}()}}})),n(ne,[],(function(){return{add:function(t,e,n){var i=t.sidebars?t.sidebars:[];i.push({name:e,settings:n}),t.sidebars=i}}})),n(ie,[x,f,w,A,M,E,L,Y,q,J,Q,tt,at,ot,b,c,Dt,Rt,T,D,zt,l,h,s,Bt,Ft,Ht,jt,te,ee,ne,Ut],(function(t,n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C,k,A,M,T,I,D,P,L){function E(t,e,r){var a,o,s,l=this;a=l.documentBaseUrl=r.documentBaseURL,o=r.baseURI,e=z({id:t,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:l.convertURL,url_converter_scope:l,ie7_compat:!0},s=r.defaultSettings,e),s&&s.external_plugins&&e.external_plugins&&(e.external_plugins=z({},s.external_plugins,e.external_plugins)),l.settings=e,i.language=e.language||"en",i.languageLoad=e.language_load,i.baseURL=r.baseURL,l.id=e.id=t,l.setDirty(!1),l.plugins={},l.documentBaseURI=new g(e.document_base_url||a,{base_uri:o}),l.baseURI=o,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new M(l),l.loadedCSS={},l.editorCommands=new f(l),l.suffix=r.suffix,l.editorManager=r,l.inline=e.inline,l.settings.content_editable=l.inline,e.cache_suffix&&(_.cacheSuffix=e.cache_suffix.replace(/^[\?\&]+/,"")),!1===e.override_viewport&&(_.overrideViewPort=!1),r.fire("SetupEditor",l),l.execCallback("setup",l),l.$=n.overrideDefaults((function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}}))}var N=t.DOM,R=i.ThemeManager,O=i.PluginManager,z=S.extend,B=S.each,F=S.explode,H=S.inArray,V=S.trim,W=S.resolve,X=m.Event,Y=_.gecko,G=_.ie;return E.prototype={render:function(){var t=this,e=t.settings,n=t.id,i=t.suffix;if(X.domLoaded){if(t.getElement()&&_.contentEditable){e.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var r=t.getElement().form||N.getParent(n,"form");r&&(t.formElement=r,e.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(N.insertAfter(N.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},N.bind(r,"submit reset",t.formEventDelegate),t.on("reset",(function(){t.setContent(t.startContent,{format:"raw"})})),!e.submit_patch||r.submit.nodeType||r.submit.length||r._mceOldSubmit||(r._mceOldSubmit=r.submit,r.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),r._mceOldSubmit(r)})),t.windowManager=new v(t),t.notificationManager=new y(t),"xml"==e.encoding&&t.on("GetContent",(function(t){t.save&&(t.content=N.encode(t.content))})),e.add_form_submit_trigger&&t.on("submit",(function(){t.initialized&&t.save()})),e.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(){var n=p.ScriptLoader;if(e.language&&"en"!=e.language&&!e.language_url&&(e.language_url=t.editorManager.baseURL+"/langs/"+e.language+".js"),e.language_url&&n.add(e.language_url),e.theme&&"function"!=typeof e.theme&&"-"!=e.theme.charAt(0)&&!R.urls[e.theme]){var r=e.theme_url;r=r?t.documentBaseURI.toAbsolute(r):"themes/"+e.theme+"/theme"+i+".js",R.load(e.theme,r)}S.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),B(e.external_plugins,(function(t,n){O.load(n,t),e.plugins+=" "+n})),B(e.plugins.split(/[ ,]/),(function(t){if((t=V(t))&&!O.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var e=O.dependencies(t);B(e,(function(t){t=O.createUrl({prefix:"plugins/",resource:t,suffix:"/plugin"+i+".js"},t),O.load(t.resource,t)}))}else O.load(t,{prefix:"plugins/",resource:t,suffix:"/plugin"+i+".js"})})),n.loadQueue((function(){t.removed||t.init()}),t,(function(e){L.pluginLoadError(t,e[0]),t.removed||t.init()}))}()}}else N.bind(window,"ready",(function e(){N.unbind(window,"ready",e),t.render()}))},init:function(){var t,e,n,i,r,a,o,s,l,c,u,d=this,h=d.settings,f=d.getElement(),g=[];if(d.rtl=h.rtl_ui||d.editorManager.i18n.rtl,d.editorManager.i18n.setCode(h.language),h.aria_label=h.aria_label||N.getAttrib(f,"aria-label",d.getLang("aria.rich_text_area")),d.fire("ScriptsLoaded"),h.theme&&("function"!=typeof h.theme?(h.theme=h.theme.replace(/-/,""),a=R.get(h.theme),d.theme=new a(d,R.urls[h.theme]),d.theme.init&&d.theme.init(d,R.urls[h.theme]||d.documentBaseUrl.replace(/\/$/,""),d.$)):d.theme=h.theme),B(h.plugins.replace(/\-/g,"").split(/[ ,]/),(function t(e){var n,i,r=O.get(e);if(n=O.urls[e]||d.documentBaseUrl.replace(/\/$/,""),e=V(e),r&&-1===H(g,e)){if(B(O.dependencies(e),(function(e){t(e)})),d.plugins[e])return;i=new r(d,n,d.$),d.plugins[e]=i,i.init&&(i.init(d,n),g.push(e))}})),h.render_ui&&d.theme&&(d.orgDisplay=f.style.display,"function"!=typeof h.theme?(e=h.height||f.style.height||f.offsetHeight,n=h.min_height||100,(c=/^[0-9\.]+(|px)$/i).test(""+(t=h.width||f.style.width||f.offsetWidth))&&(t=Math.max(parseInt(t,10),100)),c.test(""+e)&&(e=Math.max(parseInt(e,10),n)),r=d.theme.renderUI({targetNode:f,width:t,height:e,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),h.content_editable||(e=(r.iframeHeight||e)+("number"==typeof e?r.deltaHeight||0:""))<n&&(e=n)):((r=h.theme(d,f)).editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||d.id+"_parent"),r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||d.id+"_iframecontainer"),e=r.iframeHeight||f.offsetHeight),d.editorContainer=r.editorContainer),h.content_css&&B(F(h.content_css),(function(t){d.contentCSS.push(d.documentBaseURI.toAbsolute(t))})),h.content_style&&d.contentStyles.push(h.content_style),h.content_editable)return f=i=r=null,d.initContentBody();if(d.iframeHTML=h.doctype+"<html><head>",h.document_base_url!=d.documentBaseUrl&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),!_.caretAfter&&h.ie7_compat&&(d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(u=0;u<d.contentCSS.length;u++){var p=d.contentCSS[u];d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+S._addCacheSuffix(p)+'" />',d.loadedCSS[p]=!0}-1!=(s=h.body_id||"tinymce").indexOf("=")&&(s=(s=d.getParam("body_id","","hash"))[d.id]||s),-1!=(l=h.body_class||"").indexOf("=")&&(l=(l=d.getParam("body_class","","hash"))[d.id]||""),h.content_security_policy&&(d.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+h.content_security_policy+'" />'),d.iframeHTML+='</head><body id="'+s+'" class="mce-content-body '+l+'" data-id="'+d.id+'"><br></body></html>';var m='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&_.ie&&_.ie<12&&(o=m);var v=N.create("iframe",{id:d.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:d.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:e,display:"block"}});if(v.onload=function(){v.onload=null,d.fire("load")},N.setAttrib(v,"src",o||'javascript:""'),d.contentAreaContainer=r.iframeContainer,d.iframeElement=v,i=N.add(r.iframeContainer,v),G)try{d.getDoc()}catch(x){i.src=o=m}r.editorContainer&&(N.get(r.editorContainer).style.display=d.orgDisplay,d.hidden=N.isHidden(r.editorContainer)),d.getElement().style.display="none",N.setAttrib(d.id,"aria-hidden",!0),o||d.initContentBody(),f=i=r=null},initContentBody:function(e){var n,i,s=this,f=s.settings,g=s.getElement(),p=s.getDoc();f.inline||(s.getElement().style.visibility=s.orgVisibility),e||f.content_editable||(p.open(),p.write(s.iframeHTML),p.close()),f.content_editable&&(s.on("remove",(function(){var t=this.getBody();N.removeClass(t,"mce-content-body"),N.removeClass(t,"mce-edit-focus"),N.setAttrib(t,"contentEditable",null)})),N.addClass(g,"mce-content-body"),s.contentDocument=p=f.content_document||document,s.contentWindow=f.content_window||window,s.bodyElement=g,f.content_document=f.content_window=null,f.root_name=g.nodeName.toLowerCase()),(n=s.getBody()).disabled=!0,s.readonly=f.readonly,s.readonly||(s.inline&&"static"==N.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.editorUpload=new T(s),s.schema=new x(f),s.dom=new t(p,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:f.content_editable,schema:s.schema,onSetAttrib:function(t){s.fire("SetAttrib",t)}}),s.parser=new b(f,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",(function(t,e){for(var n,i,r,a=t.length,o=s.dom;a--;)if(i=(n=t[a]).attr(e),!n.attributes.map[r="data-mce-"+e]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===e?((i=o.serializeStyle(o.parseStyle(i),n.name)).length||(i=null),n.attr(r,i),n.attr(e,i)):"tabindex"===e?(n.attr(r,i),n.attr(e,null)):n.attr(r,s.convertURL(i,e,n.name))}})),s.parser.addNodeFilter("script",(function(t){for(var e,n,i=t.length;i--;)0!==(n=(e=t[i]).attr("type")||"no/type").indexOf("mce-")&&e.attr("type","mce-"+n)})),s.parser.addNodeFilter("#cdata",(function(t){for(var e,n=t.length;n--;)(e=t[n]).type=8,e.name="#comment",e.value="[CDATA["+e.value+"]]"})),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var e,n=t.length,i=s.schema.getNonEmptyElements();n--;)(e=t[n]).isEmpty(i)&&0===e.getAll("br").length&&(e.append(new a("br",1)).shortEnded=!0)})),s.serializer=new o(f,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new c(s),s.undoManager=new u(s),s.forceBlocks=new h(s),s.enterKey=new d(s),s._nodeChangeDispatcher=new r(s),s._selectionOverrides=new I(s),s.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(p.body.spellcheck=!1,N.setAttrib(n,"spellcheck","false")),s.quirks=new w(s),s.fire("PostRender"),f.directionality&&(n.dir=f.directionality),f.nowrap&&(n.style.whiteSpace="nowrap"),f.protect&&s.on("BeforeSetContent",(function(t){B(f.protect,(function(e){t.content=t.content.replace(e,(function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"}))}))})),s.on("SetContent",(function(){s.addVisual(s.getBody())})),f.padd_empty_editor&&s.on("PostProcess",(function(t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.on("compositionstart compositionend",(function(t){s.composing="compositionstart"===t.type})),s.contentStyles.length>0&&(i="",B(s.contentStyles,(function(t){i+=t+"\r\n"})),s.dom.addStyle(i)),B(s.contentCSS,(function(t){s.loadedCSS[t]||(s.dom.loadCSS(t),s.loadedCSS[t]=!0)})),f.auto_focus&&C.setEditorTimeout(s,(function(){var t;(t=!0===f.auto_focus?s:s.editorManager.get(f.auto_focus)).destroyed||t.focus()}),100),g=p=n=null},focus:function(t){var e,n,i,r=this,a=r.selection,o=r.settings.content_editable,s=r.getDoc(),l=r.getBody();if(!t){if((e=a.getRng()).item&&(n=e.item(0)),r.quirks.refreshContentEditable(),i=function(t){return r.dom.getParent(t,(function(t){return"true"===r.dom.getContentEditable(t)}))}(a.getNode()),r.$.contains(l,i))return i.focus(),a.normalize(),void r.editorManager.setActive(r);if(o||(_.opera||r.getBody().focus(),r.getWin().focus()),Y||o){if(l.setActive)try{l.setActive()}catch(u){l.focus()}else l.focus();o&&a.normalize()}n&&n.ownerDocument==s&&((e=s.body.createControlRange()).addElement(n),e.select())}r.editorManager.setActive(r)},execCallback:function(t){var e,n=this,i=n.settings[t];if(i)return n.callbackLookup&&(e=n.callbackLookup[t])&&(i=e.func,e=e.scope),"string"==typeof i&&(e=(e=i.replace(/\.\w+$/,""))?W(e):0,i=W(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[t]={func:i,scope:e}),i.apply(e||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var e=this.settings.language||"en",n=this.editorManager.i18n;return t?(t=n.data[e+"."+t]||t.replace(/\{\#([^\}]+)\}/g,(function(t,i){return n.data[e+"."+i]||"{#"+i+"}"})),this.editorManager.translate(t)):""},getLang:function(t,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+t]||(n!==e?n:"{#"+t+"}")},getParam:function(t,e,n){var i,r=t in this.settings?this.settings[t]:e;return"hash"===n?(i={},"string"==typeof r?B(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),(function(t){t=t.split("="),i[V(t[0])]=V(t.length>1?t[1]:t)})):i=r,i):r},nodeChanged:function(t){this._nodeChangeDispatcher.nodeChanged(t)},addButton:function(t,e){var n=this;e.cmd&&(e.onclick=function(){n.execCommand(e.cmd)}),e.text||e.icon||(e.icon=t),n.buttons=n.buttons||{},e.tooltip=e.tooltip||e.title,n.buttons[t]=e},addSidebar:function(t,e){return P.add(this,t,e)},addMenuItem:function(t,e){var n=this;e.cmd&&(e.onclick=function(){n.execCommand(e.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[t]=e},addContextToolbar:function(t,e){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof t&&(n=t,t=function(t){return i.dom.is(t,n)}),i.contextToolbars.push({id:D.uuid("mcet"),predicate:t,items:e})},addCommand:function(t,e,n){this.editorCommands.addCommand(t,e,n)},addQueryStateHandler:function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},addQueryValueHandler:function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},addShortcut:function(t,e,n,i){this.shortcuts.add(t,e,n,i)},execCommand:function(t,e,n,i){return this.editorCommands.execCommand(t,e,n,i)},queryCommandState:function(t){return this.editorCommands.queryCommandState(t)},queryCommandValue:function(t){return this.editorCommands.queryCommandValue(t)},queryCommandSupported:function(t){return this.editorCommands.queryCommandSupported(t)},show:function(){var t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable=!0:(N.show(t.getContainer()),N.hide(t.id)),t.load(),t.fire("show"))},hide:function(){var t=this,e=t.getDoc();t.hidden||(G&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable=!1,t==t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(N.hide(t.getContainer()),N.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(t,e){this.fire("ProgressState",{state:t,time:e})},load:function(t){var n,i=this,r=i.getElement();if(r)return(t=t||{}).load=!0,n=i.setContent(r.value!==e?r.value:r.innerHTML,t),t.element=r,t.no_events||i.fire("LoadContent",t),t.element=r=null,n},save:function(t){var e,n,i=this,r=i.getElement();if(r&&i.initialized)return(t=t||{}).save=!0,t.element=r,t.content=i.getContent(t),t.no_events||i.fire("SaveContent",t),"raw"==t.format&&i.fire("RawSaveContent",t),e=t.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=e:(i.inline||(r.innerHTML=e),(n=N.getParent(i.id,"form"))&&B(n.elements,(function(t){if(t.name==i.id)return t.value=e,!1}))),t.element=r=null,!1!==t.set_dirty&&i.setDirty(!1),e},setContent:function(t,e){var n,i,r=this,a=r.getBody();return(e=e||{}).format=e.format||"html",e.set=!0,e.content=t,e.no_events||r.fire("BeforeSetContent",e),0===(t=e.content).length||/^\s+$/.test(t)?(i=G&&G<11?"":'<br data-mce-bogus="1">',"TABLE"==a.nodeName?t="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(a.nodeName)&&(t="<li>"+i+"</li>"),(n=r.settings.forced_root_block)&&r.schema.isValidChild(a.nodeName.toLowerCase(),n.toLowerCase())?t=r.dom.createHTML(n,r.settings.forced_root_block_attrs,t=i):G||t||(t='<br data-mce-bogus="1">'),r.dom.setHTML(a,t),r.fire("SetContent",e)):("raw"!==e.format&&(t=new s({validate:r.validate},r.schema).serialize(r.parser.parse(t,{isRootContent:!0}))),e.content=V(t),r.dom.setHTML(a,e.content),e.no_events||r.fire("SetContent",e)),e.content},getContent:function(t){var e,n=this,i=n.getBody();return(t=t||{}).format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||n.fire("BeforeGetContent",t),e="raw"==t.format?S.trim(n.serializer.getTrimmedContent()):"text"==t.format?i.innerText||i.textContent:n.serializer.serialize(i,t),t.content="text"!=t.format?V(e):e,t.no_events||n.fire("GetContent",t),t.content},insertContent:function(t,e){e&&(t=z({content:t},e)),this.execCommand("mceInsertContent",!1,t)},isDirty:function(){return!this.isNotDirty},setDirty:function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!=e&&this.fire("dirty")},setMode:function(t){A.setMode(this,t)},getContainer:function(){var t=this;return t.container||(t.container=N.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=N.get(this.id)),this.targetElm},getWin:function(){var t,e=this;return e.contentWindow||(t=e.iframeElement)&&(e.contentWindow=t.contentWindow),e.contentWindow},getDoc:function(){var t,e=this;return e.contentDocument||(t=e.getWin())&&(e.contentDocument=t.document),e.contentDocument},getBody:function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},convertURL:function(t,e,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",t,n,!0,e):!r.convert_urls||n&&"LINK"==n.nodeName||0===t.indexOf("file:")||0===t.length?t:r.relative_urls?i.documentBaseURI.toRelative(t):t=i.documentBaseURI.toAbsolute(t,r.remove_script_host)},addVisual:function(t){var n,i=this,r=i.settings,a=i.dom;t=t||i.getBody(),i.hasVisual===e&&(i.hasVisual=r.visual),B(a.select("table,a",t),(function(t){var e;switch(t.nodeName){case"TABLE":return n=r.visual_table_class||"mce-item-table",void((e=a.getAttrib(t,"border"))&&"0"!=e||!i.hasVisual?a.removeClass(t,n):a.addClass(t,n));case"A":return void(a.getAttrib(t,"href",!1)||(e=a.getAttrib(t,"name")||t.id,n=r.visual_anchor_class||"mce-item-anchor",e&&i.hasVisual?a.addClass(t,n):a.removeClass(t,n)))}})),i.fire("VisualAid",{element:t,hasVisual:i.hasVisual})},remove:function(){var t=this;t.removed||(t.save(),t.removed=1,t.unbindAllNativeEvents(),t.hasHiddenInput&&N.remove(t.getElement().nextSibling),t.inline||(G&&G<10&&t.getDoc().execCommand("SelectAll",!1,null),N.setStyle(t.id,"display",t.orgDisplay),t.getBody().onload=null),t.fire("remove"),t.editorManager.remove(t),N.remove(t.getContainer()),t._selectionOverrides.destroy(),t.editorUpload.destroy(),t.destroy())},destroy:function(t){var e,n=this;if(!n.destroyed){if(!t&&!n.removed)return void n.remove();t||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),(e=n.formElement)&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),N.unbind(e,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(t){return this.editorUpload.uploadImages(t)},_scanForImages:function(){return this.editorUpload.scanForImages()}},z(E.prototype,k),E})),n(re,[h],(function(t){var e={},n="en";return{setCode:function(t){t&&(n=t,this.rtl=!!this.data[t]&&"rtl"===this.data[t]._dir)},getCode:function(){return n},rtl:!1,add:function(t,n){var i=e[t];for(var r in i||(e[t]=i={}),n)i[r]=n[r];this.setCode(t)},translate:function(i){function r(e){return t.is(e,"function")?Object.prototype.toString.call(e):a(e)?"":""+e}function a(e){return""===e||null===e||t.is(e,"undefined")}function o(e){return e=r(e),t.hasOwn(s,e)?r(s[e]):e}var s=e[n]||{};if(a(i))return"";if(t.is(i,"object")&&t.hasOwn(i,"raw"))return r(i.raw);if(t.is(i,"array")){var l=i.slice(1);i=o(i[0]).replace(/\{([0-9]+)\}/g,(function(e,n){return t.hasOwn(l,n)?r(l[n]):e}))}return o(i).replace(/{context:\w+}$/,"")},data:e}})),n(ae,[x,s,l],(function(t,e,n){function i(t){function i(){try{return document.activeElement}catch(t){return document.body}}t.on("AddEditor",(function(c){var u=c.editor;u.on("init",(function(){(u.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?u.dom.bind(u.getBody(),"beforedeactivate",(function(t){if(t.target==u.getBody())try{u.lastRng=u.selection.getRng()}catch(e){}})):u.on("nodechange mouseup keyup",(function(t){var e=i();"nodechange"==t.type&&t.selectionChange||(e&&e.id==u.id+"_ifr"&&(e=u.getBody()),u.dom.isChildOf(e,u.getBody())&&(u.lastRng=u.selection.getRng()))})),n.webkit&&!r&&(r=function(){var e=t.activeEditor;if(e&&e.selection){var n=e.selection.getRng();n&&!n.collapsed&&(u.lastRng=n)}},s.bind(document,"selectionchange",r)))})),u.on("setcontent",(function(){u.lastRng=null})),u.on("mousedown",(function(){u.selection.lastFocusBookmark=null})),u.on("focusin",(function(){var e,n=t.focusedEditor;u.selection.lastFocusBookmark&&(e=function(t,e){var n;return e.startContainer?((n=t.getDoc().createRange()).setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset)):n=e,n}(u,u.selection.lastFocusBookmark),u.selection.lastFocusBookmark=null,u.selection.setRng(e)),n!=u&&(n&&n.fire("blur",{focusedEditor:u}),t.setActive(u),t.focusedEditor=u,u.fire("focus",{blurredEditor:n}),u.focus(!0)),u.lastRng=null})),u.on("focusout",(function(){e.setEditorTimeout(u,(function(){var e=t.focusedEditor;l(u,i())||e!=u||(u.fire("blur",{focusedEditor:null}),t.focusedEditor=null,u.selection&&(u.selection.lastFocusBookmark=null))}))})),a||(a=function(e){var n,i=t.activeEditor;n=e.target,i&&n.ownerDocument==document&&(i.selection&&n!=i.getBody()&&(i.selection.lastFocusBookmark=function(t,e){if(e&&e.startContainer){if(!t.isChildOf(e.startContainer,t.getRoot())||!t.isChildOf(e.endContainer,t.getRoot()))return;return{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}}return e}(i.dom,i.lastRng)),n==document.body||l(i,n)||t.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),t.focusedEditor=null))},s.bind(document,"focusin",a)),u.inline&&!o&&(o=function(e){var n=t.activeEditor,i=n.dom;if(n.inline&&i&&!i.isChildOf(e.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},s.bind(document,"mouseup",o))})),t.on("RemoveEditor",(function(e){t.focusedEditor==e.editor&&(t.focusedEditor=null),t.activeEditor||(s.unbind(document,"selectionchange",r),s.unbind(document,"focusin",a),s.unbind(document,"mouseup",o),r=a=o=null)}))}var r,a,o,s=t.DOM,l=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==s.getParent(e,(function(e){return i.isEditorUIElement(e)||!!n&&t.dom.is(e,n)}))};return i.isEditorUIElement=function(t){return-1!==t.className.toString().indexOf("mce-")},i._isUIElement=l,i})),n(oe,[ie,f,x,ot,l,h,o,ut,re,ae,w],(function(t,e,n,i,r,a,o,s,l,c,u){function d(t){x(m.editors,(function(e){e.fire("scroll"===t.type?"ScrollWindow":"ResizeWindow",t)}))}function h(t,n){n!==_&&(n?e(window).on("resize scroll",d):e(window).off("resize scroll",d),_=n)}function f(t){var e,n=m.editors;delete n[t.id];for(var i=0;i<n.length;i++)if(n[i]==t){n.splice(i,1),e=!0;break}return m.activeEditor==t&&(m.activeEditor=n[0]),m.focusedEditor==t&&(m.focusedEditor=null),e}function g(t){return t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(f(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null),t}var p,m,v=n.DOM,y=a.explode,x=a.each,b=a.extend,w=0,_=!1;return m={$:e,majorVersion:"4",minorVersion:"5.7",releaseDate:"2017-04-25",editors:[],i18n:l,activeEditor:null,setup:function(){var t,e,n,r,a=this,o="";if(e=i.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),n=window.tinymce||window.tinyMCEPreInit)t=n.base||n.baseURL,o=n.suffix;else{for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var u=(r=s[l].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!=u.indexOf(".min")&&(o=".min"),t=r.substring(0,r.lastIndexOf("/"));break}}!t&&document.currentScript&&(-1!=(r=document.currentScript.src).indexOf(".min")&&(o=".min"),t=r.substring(0,r.lastIndexOf("/")))}a.baseURL=new i(e).toAbsolute(t),a.documentBaseURL=e,a.baseURI=new i(a.baseURL),a.suffix=o,a.focusManager=new c(a)},overrideDefaults:function(t){var e;(e=t.base_url)&&(this.baseURL=new i(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new i(this.baseURL)),t.suffix&&(this.suffix=t.suffix),this.defaultSettings=t;var n=t.plugin_base_urls;for(var r in n)u.PluginManager.urls[r]=n[r]},init:function(n){function i(t){var e=t.id;return e||(e=(e=t.name)&&!v.get(e)?t.name:v.uniqueId(),t.setAttribute("id",e)),e}function r(t,e){return e.constructor===RegExp?e.test(t.className):v.hasClass(t,e)}function s(t){var e,n=[];if(t.types)return x(t.types,(function(t){n=n.concat(v.select(t.selector))})),n;if(t.selector)return v.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":(e=t.elements||"").length>0&&x(y(e),(function(t){var e;(e=v.get(t))?n.push(e):x(document.forms,(function(e){x(e.elements,(function(e){e.name===t&&(t="mce_editor_"+w++,v.setAttrib(e,"id",t),n.push(e))}))}))}));break;case"textareas":case"specific_textareas":x(v.select("textarea"),(function(e){t.editor_deselector&&r(e,t.editor_deselector)||t.editor_selector&&!r(e,t.editor_selector)||n.push(e)}))}return n}var l,c,u=this;c=a.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var d=function(t){l=t};return u.settings=n,v.bind(window,"ready",(function r(){function o(e,n,i){var r=new t(e,n,u);f.push(r),r.on("init",(function(){++h===l.length&&d(f)})),r.targetElm=r.targetElm||i,r.render()}var l,h=0,f=[];return v.unbind(window,"ready",r),function(t){var e=n[t];e&&e.apply(u,Array.prototype.slice.call(arguments,2))}("onpageload"),l=e.unique(s(n)),n.types?void x(n.types,(function(t){a.each(l,(function(e){return!v.is(e,t.selector)||(o(i(e),b({},n,t),e),!1)}))})):(a.each(l,(function(t){g(u.get(t.id))})),l=a.grep(l,(function(t){return!u.get(t.id)})),void x(l,(function(t){!function(t,e){return t.inline&&e.tagName.toLowerCase()in c}(n,t)?o(i(t),n,t):function(t,e){window.console&&!window.test&&window.console.log("Could not initialize inline editor on invalid inline target element",e)}(0,t)})))})),new o((function(t){l?t(l):d=function(e){t(e)}}))},get:function(t){return arguments.length?t in this.editors?this.editors[t]:null:this.editors},add:function(t){var e=this,n=e.editors;return n[t.id]=t,n.push(t),h(0,!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),p||(p=function(){e.fire("BeforeUnload")},v.bind(window,"beforeunload",p)),t},createEditor:function(e,n){return this.add(new t(e,n,this))},remove:function(t){var e,n,i=this,r=i.editors;if(t)return"string"==typeof t?void x(v.select(t=t.selector||t),(function(t){(n=r[t.id])&&i.remove(n)})):r[(n=t).id]?(f(n)&&i.fire("RemoveEditor",{editor:n}),r.length||v.unbind(window,"beforeunload",p),n.remove(),h(0,r.length>0),n):null;for(e=r.length-1;e>=0;e--)i.remove(r[e])},execCommand:function(e,n,i){var r=this,a=r.get(i);switch(e){case"mceAddEditor":return r.get(i)||new t(i,r.settings,r).render(),!0;case"mceRemoveEditor":return a&&a.remove(),!0;case"mceToggleEditor":return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",0,i),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,n,i)},triggerSave:function(){x(this.editors,(function(t){t.save()}))},addI18n:function(t,e){l.add(t,e)},translate:function(t){return l.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!=t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t}},b(m,s),m.setup(),window.tinymce=window.tinyMCE=m,m})),n("tinymce/LegacyInput",[oe,h],(function(t,e){var n=e.each,i=e.explode;t.on("AddEditor",(function(t){var e=t.editor;e.on("preInit",(function(){function t(t,e){n(e,(function(e,n){e&&o.setStyle(t,n,e)})),o.rename(t,"span")}var r,a,o,s=e.settings;s.inline_styles&&(a=i(s.font_size_legacy_values),r={font:function(e,n){t(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(n,i){"html4"===e.settings.schema&&t(i,{textDecoration:"underline"})},strike:function(e,n){t(n,{textDecoration:"line-through"})}},e.on("PreProcess SetContent",(function(t){o=e.dom,s.convert_fonts_to_spans&&n(o.select("font,u,strike",t.node),(function(t){r[t.nodeName.toLowerCase()](o,t)}))})))}))}))})),n(se,[ut,h],(function(t,e){var n={send:function(t){function i(){!t.async||4==r.readyState||a++>1e4?(t.success&&a<1e4&&200==r.status?t.success.call(t.success_scope,""+r.responseText,r,t):t.error&&t.error.call(t.error_scope,a>1e4?"TIMED_OUT":"GENERAL",r,t),r=null):setTimeout(i,10)}var r,a=0;if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",n.fire("beforeInitialize",{settings:t}),r=new XMLHttpRequest){if(r.overrideMimeType&&r.overrideMimeType(t.content_type),r.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(r.withCredentials=!0),t.content_type&&r.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&e.each(t.requestheaders,(function(t){r.setRequestHeader(t.key,t.value)})),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),(r=n.fire("beforeSend",{xhr:r,settings:t}).xhr).send(t.data),!t.async)return i();setTimeout(i,10)}}};return e.extend(n,t),n})),n(le,[],(function(){return{serialize:function t(e,n){var i,r,a,o;if(n=n||'"',null===e)return"null";if("string"==(a=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(t,e){return'"'===n&&"'"===t?t:(i=r.indexOf(e))+1?"\\"+r.charAt(i+1):(t=e.charCodeAt().toString(16),"\\u"+"0000".substring(t.length)+t)}))+n;if("object"==a){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(i=0,r="[";i<e.length;i++)r+=(i>0?",":"")+t(e[i],n);return r+"]"}for(o in r="{",e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+n:n)+o+n+":"+t(e[o],n):"");return r+"}"}return""+e},parse:function(t){try{return window[String.fromCharCode(101)+"val"]("("+t+")")}catch(e){}}}})),n(ce,[le,se,h],(function(t,e,n){function i(t){this.settings=r({},t),this.count=0}var r=n.extend;return i.sendRPC=function(t){return(new i).send(t)},i.prototype={send:function(n){var i=n.error,a=n.success;(n=r(this.settings,n)).success=function(e,r){void 0===(e=t.parse(e))&&(e={error:"JSON Parse error."}),e.error?i.call(n.error_scope||n.scope,e.error,r):a.call(n.success_scope||n.scope,e.result)},n.error=function(t,e){i&&i.call(n.error_scope||n.scope,t,e)},n.data=t.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",e.send(n)}},i})),n(ue,[x],(function(t){return{callbacks:{},count:0,send:function(n){var i=this,r=t.DOM,a=n.count!==e?n.count:i.count,o="tinymce_jsonp_"+a;i.callbacks[a]=function(t){r.remove(o),delete i.callbacks[a],n.callback(t)},r.add(r.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),i.count++}}})),n(de,[],(function(){function t(){for(var t in o=[],a)o.push(t);i.length=o.length}function n(){var e,n="";if(c){for(var o in a)e=a[o],n+=(n?",":"")+o.length.toString(32)+","+o+","+e.length.toString(32)+","+e;r.setAttribute(l,n);try{r.save(l)}catch(i){}t()}}var i,r,a,o,l,c;try{if(window.localStorage)return localStorage}catch(s){}return l="tinymce",r=document.documentElement,(c=!!r.addBehavior)&&r.addBehavior("#default#userData"),i={key:function(t){return o[t]},getItem:function(t){return t in a?a[t]:null},setItem:function(t,e){a[t]=""+e,n()},removeItem:function(t){delete a[t],n()},clear:function(){a={},n()}},function(){function n(t){var n,i;return-1===(i=t!==e?u+t:o.indexOf(",",u))||i>o.length?null:(n=o.substring(u,i),u=i+1,n)}var i,o,s,u=0;if(a={},c){r.load(l),o=r.getAttribute(l)||"";do{var d=n();if(null===d)break;if(null!==(i=n(parseInt(d,32)||0))){if(null===(d=n()))break;s=n(parseInt(d,32)||0),i&&(a[i]=s)}}while(null!==i);t()}}(),i})),n(he,[x,c,b,w,h,l],(function(t,e,n,i,r,a){var o=window.tinymce;return o.DOM=t.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=i.PluginManager,o.ThemeManager=i.ThemeManager,o.dom=o.dom||{},o.dom.Event=e.Event,r.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),(function(t){o[t]=r[t]})),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),(function(t){o[t]=a[t.substr(2).toLowerCase()]})),{}})),n(fe,[st,h],(function(t,e){return t.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=e.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,i,r,a=this.settings;e=a.firstControlClass,n=a.lastControlClass,t.each((function(t){t.classes.remove(e).remove(n).add(a.controlClass),t.visible()&&(i||(i=t),r=t)})),i&&i.classes.add(e),r&&r.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each((function(t){e+=t.renderHtml()})),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}})})),n(ge,[fe],(function(t){return t.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each((function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()}))},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}})})),n(pe,[Lt],(function(t){return t.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",(function(t){t.preventDefault()})),n.on("touchstart",(function(t){n.fire("click",t),t.preventDefault()})),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,r=e.state.get("icon"),a=e.state.get("text"),o="";return(t=e.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(e.classes.add("btn-has-text"),o='<span class="'+i+'txt">'+e.encode(a)+"</span>"),'<div id="'+n+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+((r=r?i+"ico "+i+"i-"+r:"")?'<i class="'+r+'"'+t+"></i>":"")+o+"</button></div>"},bindStates:function(){function t(t){var r=n("span."+i,e.getEl());t?(r[0]||(n("button:first",e.getEl()).append('<span class="'+i+'"></span>'),r=n("span."+i,e.getEl())),r.html(e.encode(t))):r.remove(),e.classes.toggle("btn-has-text",!!t)}var e=this,n=e.$,i=e.classPrefix+"txt";return e.state.on("change:text",(function(e){t(e.value)})),e.state.on("change:icon",(function(n){var i=n.value,r=e.classPrefix;e.settings.icon=i,i=i?r+"ico "+r+"i-"+e.settings.icon:"";var a=e.getEl().firstChild,o=a.getElementsByTagName("i")[0];i?(o&&o==a.firstChild||(o=document.createElement("i"),a.insertBefore(o,a.firstChild)),o.className=i):o&&a.removeChild(o),t(e.state.get("text"))})),e._super()}})})),n(me,[wt],(function(t){return t.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this,e=t._layout;return t.classes.add("btn-group"),t.preRender(),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}})})),n(ve,[Lt],(function(t){return t.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",(function(t){t.preventDefault()})),e.on("click",(function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())})),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix;return'<div id="'+e+'" class="'+t.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+e+'-al" class="'+n+'label">'+t.encode(t.state.get("text"))+"</span></div>"},bindStates:function(){function t(t){e.classes.toggle("checked",t),e.aria("checked",t)}var e=this;return e.state.on("change:text",(function(t){e.getEl("al").firstChild.data=e.translate(t.value)})),e.state.on("change:checked change:value",(function(n){e.fire("change"),t(n.value)})),e.state.on("change:icon",(function(t){var n=t.value,i=e.classPrefix;if(void 0===n)return e.settings.icon;e.settings.icon=n,n=n?i+"ico "+i+"i-"+e.settings.icon:"";var r=e.getEl().firstChild,a=r.getElementsByTagName("i")[0];n?(a&&a==r.firstChild||(a=document.createElement("i"),r.insertBefore(a,r.firstChild)),a.className=n):a&&r.removeChild(a)})),e.state.get("checked")&&t(!0),e._super()}})})),n(ye,[Lt,xt,gt,f,R,h],(function(t,e,n,i,r,a){return t.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",(function(n){var r=n.target,a=e.getEl();if(i.contains(a,r)||r==a)for(;r&&r!=a;)r.id&&-1!=r.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),r=r.parentNode})),e.on("keydown",(function(t){var n;13==t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))})),e.on("keyup",(function(t){if("INPUT"==t.target.nodeName){var n=e.state.get("value"),i=t.target.value;i!==n&&(e.state.set("value",i),e.fire("autocomplete",t))}})),e.on("mouseover",(function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var i=e.statusMessage()||"Ok",r=n.text(i).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==r),n.classes.toggle("tooltip-nw","bc-tl"==r),n.classes.toggle("tooltip-ne","bc-tr"==r),n.moveRel(t.target,r)}}))},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,n=this;n.menu||((t=n.settings.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",n.menu=e.create(t).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",(function(t){t.control===n.menu&&n.focus()})),n.menu.on("show hide",(function(t){t.control.items().each((function(t){t.active(t.value()==n.value())}))})).fire("show"),n.menu.on("select",(function(t){n.value(t.control.value())})),n.on("focusin",(function(t){"INPUT"==t.target.tagName.toUpperCase()&&n.menu.hide()})),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,r=this,a=r.getEl(),o=r.getEl("open"),s=r.layoutRect(),l=0,c=a.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(l=parseInt(n.getRuntimeStyle(c,"padding-right"),10)-parseInt(n.getRuntimeStyle(c,"padding-left"),10)),t=o?s.w-n.getSize(o).width-10:s.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(e=r.layoutRect().h-2+"px"),i(c).css({width:t-l,lineHeight:e}),r._super(),r},postRender:function(){var t=this;return i(this.getEl("inp")).on("change",(function(e){t.state.set("value",e.target.value),t.fire("change",e)})),t._super()},renderHtml:function(){var t,e,n,i=this,r=i._id,a=i.settings,o=i.classPrefix,s=i.state.get("value")||"",l="",c="";return"spellcheck"in a&&(c+=' spellcheck="'+a.spellcheck+'"'),a.maxLength&&(c+=' maxlength="'+a.maxLength+'"'),a.size&&(c+=' size="'+a.size+'"'),a.subtype&&(c+=' type="'+a.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',i.disabled()&&(c+=' disabled="disabled"'),(t=a.icon)&&"caret"!=t&&(t=o+"ico "+o+"i-"+a.icon),e=i.state.get("text"),(t||e)&&(l='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=t?'<i class="'+t+'"></i>':'<i class="'+o+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",i.classes.add("has-open")),'<div id="'+r+'" class="'+i.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+i.encode(s,!1)+'" hidefocus="1"'+c+' placeholder="'+i.encode(a.placeholder)+'" />'+n+l+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,n){var i=this;if(0!==t.length){var r=function(t,e){return function(){i.fire("selectitem",{title:e,value:t})}};i.menu?i.menu.items().remove():i.menu=e.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(i).renderTo(),a.each(t,(function(t){i.menu.add({text:t.title,url:t.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:r(t.value,t.title)})})),i.menu.renderNew(),i.hideMenu(),i.menu.on("cancel",(function(t){t.control.parent()===i.menu&&(t.stopPropagation(),i.focus(),i.hideMenu())})),i.menu.on("select",(function(){i.focus()}));var o=i.layoutRect().w;i.menu.layoutRect({w:o,minW:0,maxW:o}),i.menu.reflow(),i.menu.show(),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else i.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",(function(e){t.getEl("inp").value!=e.value&&(t.getEl("inp").value=e.value)})),t.state.on("change:disabled",(function(e){t.getEl("inp").disabled=e.value})),t.state.on("change:statusLevel",(function(e){var i=t.getEl("status"),r=t.classPrefix,a=e.value;n.css(i,"display","none"===a?"none":""),n.toggleClass(i,r+"i-checkmark","ok"===a),n.toggleClass(i,r+"i-warning","warn"===a),n.toggleClass(i,r+"i-error","error"===a),t.classes.toggle("has-status","none"!==a),t.repaint()})),n.on(t.getEl("status"),"mouseleave",(function(){t.tooltip().hide()})),t.on("cancel",(function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())}));var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",(function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===r.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):i===r.UP&&(n.preventDefault(),e(-1,t.menu)))})),t._super()},remove:function(){i(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})})),n(xe,[ye],(function(t){return t.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",(function(){e.repaintColor(e.value())}))},repaintColor:function(t){var e=this.getEl("open"),i=e?e.getElementsByTagName("i")[0]:null;if(i)try{i.style.background=t}catch(n){}},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){t.state.get("rendered")&&t.repaintColor(e.value)})),t._super()}})})),n(be,[pe,Mt],(function(t,e){return t.extend({showPanel:function(){var t=this,n=t.settings;if(t.active(!0),t.panel)t.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,t.panel=new e(i).on("hide",(function(){t.active(!1)})).on("cancel",(function(e){e.stopPropagation(),t.focus(),t.hidePanel()})).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}t.panel.moveRel(t.getEl(),n.popoverAlign||(t.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",(function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))})),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})})),n(we,[be,x],(function(t,e){var n=e.DOM;return t.extend({init:function(t){this._super(t),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this,e=t._id,n=t.classPrefix,i=t.state.get("text"),r=t.settings.icon?n+"ico "+n+"i-"+t.settings.icon:"",a=t.settings.image?" style=\"background-image: url('"+t.settings.image+"')\"":"",o="";return i&&(t.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+t.encode(i)+"</span>"),'<div id="'+e+'" class="'+t.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+'<span id="'+e+'-preview" class="'+n+'preview"></span>'+o+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",(function(i){i.aria&&"down"==i.aria.key||i.control!=t||n.getParent(i.target,"."+t.classPrefix+"open")||(i.stopImmediatePropagation(),e.call(t,i))})),delete t.settings.onclick,t._super()}})})),n(_e,[],(function(){var t=Math.min,e=Math.max,n=Math.round;return function(i){function r(i,r,a){var o,u,d,h;if(i=(parseInt(i,10)||0)%360,r=parseInt(r,10)/100,a=parseInt(a,10)/100,r=e(0,t(r,1)),a=e(0,t(a,1)),0!==r){switch(o=i/60,d=(u=a*r)*(1-Math.abs(o%2-1)),h=a-u,Math.floor(o)){case 0:s=u,l=d,c=0;break;case 1:s=d,l=u,c=0;break;case 2:s=0,l=u,c=d;break;case 3:s=0,l=d,c=u;break;case 4:s=d,l=0,c=u;break;case 5:s=u,l=0,c=d;break;default:s=l=c=0}s=n(255*(s+h)),l=n(255*(l+h)),c=n(255*(c+h))}else s=l=c=n(255*a)}function a(t){var e;return"object"==typeof t?"r"in t?(s=t.r,l=t.g,c=t.b):"v"in t&&r(t.h,t.s,t.v):(e=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(s=parseInt(e[1],10),l=parseInt(e[2],10),c=parseInt(e[3],10)):(e=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(s=parseInt(e[1],16),l=parseInt(e[2],16),c=parseInt(e[3],16)):(e=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(s=parseInt(e[1]+e[1],16),l=parseInt(e[2]+e[2],16),c=parseInt(e[3]+e[3],16)),s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,o}var o=this,s=0,l=0,c=0;i&&a(i),o.toRgb=function(){return{r:s,g:l,b:c}},o.toHsv=function(){return function(i,r,a){var o,s,l,c;return o=0,s=0,(l=t(i/=255,t(r/=255,a/=255)))==(c=e(i,e(r,a)))?{h:0,s:0,v:100*(s=l)}:(o=(c-l)/c,s=c,{h:n(60*((i==l?3:a==l?1:5)-(i==l?r-a:a==l?i-r:a-i)/(c-l))),s:n(100*o),v:n(100*s)})}(s,l,c)},o.toHex=function(){function t(t){return(t=parseInt(t,10).toString(16)).length>1?t:"0"+t}return"#"+t(s)+t(l)+t(c)},o.parse=a}})),n(Se,[Lt,_t,gt,_e],(function(t,e,n,i){return t.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){function t(t,e){var i,r,a=n.getPos(t);return i=e.pageX-a.x,r=e.pageY-a.y,{x:i=Math.max(0,Math.min(i/t.clientWidth,1)),y:r=Math.max(0,Math.min(r/t.clientHeight,1))}}function r(t,e){n.css(c,{top:(360-t.h)/360*100+"%"}),e||n.css(d,{left:t.s+"%",top:100-t.v+"%"}),u.style.background=new i({s:100,v:100,h:t.h}).toHex(),h.color().parse({s:t.s,v:t.v,h:t.h})}function a(e){var n;n=t(u,e),s.s=100*n.x,s.v=100*(1-n.y),r(s),h.fire("change")}function o(e){var n;n=t(l,e),(s=f.toHsv()).h=360*(1-n.y),r(s,!0),h.fire("change")}var s,l,c,u,d,h=this,f=h.color();l=h.getEl("h"),c=h.getEl("hp"),u=h.getEl("sv"),d=h.getEl("svp"),h._repaint=function(){r(s=f.toHsv())},h._super(),h._svdraghelper=new e(h._id+"-sv",{start:a,drag:a}),h._hdraghelper=new e(h._id+"-h",{start:o,drag:o}),h._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){var e=this;return arguments.length?(e.color().parse(t),void(e._rendered&&e._repaint())):e.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+n+'-h" class="'+i+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var t,e,n,a,o="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(a=r.split(",")).length-1;t<e;t++)o+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/e+"%;"+n+a[t]+",endColorstr="+a[t+1]+");-ms-"+n+a[t]+",endColorstr="+a[t+1]+')"></div>';return o}()+'<div id="'+n+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+e.classes+'"><div id="'+n+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})})),n(Ce,[Lt],(function(t){return t.extend({init:function(t){var e=this;t.delimiter||(t.delimiter=""),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",(function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})})),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){var t=this;return'<div id="'+t._id+'" class="'+t.classes+'">'+t._getDataPathHtml(t.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",(function(e){t.innerHtml(t._getDataPathHtml(e.value))})),t._super()},_getDataPathHtml:function(t){var e,n,i=this,r=t||[],a="",o=i.classPrefix;for(e=0,n=r.length;e<n;e++)a+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+i.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e==n-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+i._id+"-"+e+'" aria-level="'+(e+1)+'">'+r[e].name+"</div>";return a||(a='<div class="'+o+'path-item"></div>'),a}})})),n(ke,[Ce],(function(t){return t.extend({postRender:function(){function t(t){if(1===t.nodeType){if("BR"==t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}var e=this,n=e.settings.editor;return!1!==n.settings.elementpath&&(e.on("select",(function(t){n.focus(),n.selection.select(this.row()[t.index].element),n.nodeChanged()})),n.on("nodeChange",(function(i){for(var r=[],a=i.parents,o=a.length;o--;)if(1==a[o].nodeType&&!t(a[o])){var s=n.fire("ResolveName",{name:a[o].nodeName.toLowerCase(),target:a[o]});if(s.isDefaultPrevented()||r.push({name:s.name,element:a[o]}),s.isPropagationStopped())break}e.row(r)}))),e._super()}})})),n(Ae,[wt],(function(t){return t.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.classes.add("formitem"),e.preRender(t),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<div id="'+t._id+'-title" class="'+n+'title">'+t.settings.title+"</div>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></div>"}})})),n(Me,[wt,Ae,h],(function(t,e,n){return t.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,i=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each((function(i){var r,a=i.settings.label;a&&((r=new e(n.extend({items:{type:"label",id:i._id+"-l",text:a,flex:0,forId:i._id,disabled:i.disabled()}},t.settings.formItemDefaults))).type="formitem",i.aria("labelledby",i._id+"-l"),void 0===i.settings.flex&&(i.settings.flex=1),t.replace(i,r),r.add(i))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var t=this;t._super(),t.fromJSON(t.settings.data)},bindStates:function(){function t(){var t,n,i=0,r=[];if(!1!==e.settings.labelGapCalc)for(("children"==e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each((function(t){var e=t.items()[0],n=e.getEl().clientWidth;i=n>i?n:i,r.push(e)})),n=e.settings.labelGap||0,t=r.length;t--;)r[t].settings.minWidth=i+n}var e=this;e._super(),e.on("show",t),t()}})})),n(Te,[Me],(function(t){return t.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this,e=t._layout,n=t.classPrefix;return t.preRender(),e.preRender(t),'<fieldset id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1">'+(t.settings.title?'<legend id="'+t._id+'-title" class="'+n+'fieldset-title">'+t.settings.title+"</legend>":"")+'<div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+(t.settings.html||"")+e.renderHtml(t)+"</div></fieldset>"}})})),n(Ie,[x,z,d,ee,h,_],(function(t,e,n,i,r,a){var o=r.trim,s=function(t,e,n,i,r){return{type:t,title:e,url:n,level:i,attach:r}},l=function(e,n){return t.DOM.select(e,n)},c=function(t){return t.innerText||t.textContent},u=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&h(t)},d=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},h=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return a.isContentEditableTrue(t)}return!1}(t)&&!a.isContentEditableFalse(t)},f=function(t){return d(t)&&h(t)},g=function(t){var e=function(t){return t.id?t.id:i.uuid("h")}(t);return s("header",c(t),"#"+e,function(t){return d(t)?parseInt(t.nodeName.substr(1),10):0}(t),(function(){t.id=e}))},p=function(t){var n=t.id||t.name,i=c(t);return s("anchor",i||"#"+n,"#"+n,0,e.noop)},m=function(t){return o(t.title).length>0};return{find:function(t){var e=function(t){return l("h1,h2,h3,h4,h5,h6,a:not([href])",t)}(t);return n.filter(function(t){return n.map(n.filter(t,f),g)}(e).concat(function(t){return n.map(n.filter(t,u),p)}(e)),m)}}})),n(De,[ye,h,d,z,R,Ie],(function(t,e,n,i,r,a){var o={},s=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},l=function(t){return e.map(t,s)},c=function(t,e){return{title:t,value:{title:t,url:e,attach:i.noop}}},u=function(t,e,n){var i=e in t?t[e]:n;return!1===i?null:i},d=function(t,r,a,s){var d={title:"-"},h=function(t){var o=n.filter(t[a],(function(t){return function(t,e){return!n.find(e,(function(e){return e.url===t}))}(t,r)}));return e.map(o,(function(t){return{title:t,value:{title:t,url:t,attach:i.noop}}}))},g=function(t){var e=n.filter(r,(function(e){return e.type==t}));return l(e)};return!1===s.typeahead_urls?[]:"file"===a?function(t){return n.reduce(t,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(d,e)}),[])}([f(t,h(o)),f(t,g("header")),f(t,function(){var t=g("anchor"),e=u(s,"anchor_top","#top"),n=u(s,"anchor_bottom","#bottom");return null!==e&&t.unshift(c("<top>",e)),null!==n&&t.push(c("<bottom>",n)),t}())]):f(t,h(o))},h=function(t,e){var i=o[e];/^https?/.test(t)&&(i?-1===n.indexOf(i,t)&&(o[e]=i.slice(0,5).concat(t)):o[e]=[t])},f=function(t,n){var i=t.toLowerCase(),r=e.grep(n,(function(t){return-1!==t.title.toLowerCase().indexOf(i)}));return 1===r.length&&r[0].title===t?[]:r},g=function(t,e,n,i){var r=function(r){var o=a.find(n),s=d(r,o,i,e);t.showAutoComplete(s,r)};t.on("autocomplete",(function(){r(t.value())})),t.on("selectitem",(function(e){var n=e.value;t.value(n.url);var r=function(t){var e=t.title;return e.raw?e.raw:e}(n);t.fire("change","image"===i?{meta:{alt:r,attach:n.attach}}:{meta:{text:r,attach:n.attach}}),t.focus()})),t.on("click",(function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&r("")})),t.on("PostRender",(function(){t.getRoot().on("submit",(function(e){e.isDefaultPrevented()||h(t.value(),i)}))}))};return t.extend({init:function(t){var n,i,r,a=this,o=tinymce.activeEditor,s=o.settings,l=t.filetype;t.spellcheck=!1,(r=s.file_picker_types||s.file_browser_callback_types)&&(r=e.makeMap(r,/[, ]/)),r&&!r[l]||(!(i=s.file_picker_callback)||r&&!r[l]?!(i=s.file_browser_callback)||r&&!r[l]||(n=function(){i(a.getEl("inp").id,a.value(),l,window)}):n=function(){var t=a.fire("beforecall").meta;t=e.extend({filetype:l},t),i.call(o,(function(t,e){a.value(t).fire("change",{meta:e})}),a.value(),t)}),n&&(t.icon="browse",t.onaction=n),a._super(t),g(a,s,o.getBody(),l),function(t,e,n){var i=e.filepicker_validator_handler;if(i){var r=function(e){return 0===e.length?void t.statusLevel("none"):void i({url:e,type:n},(function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e||"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)}))};t.state.on("change:value",(function(t){r(t.value)}))}}(a,s,l)}})})),n(Pe,[ge],(function(t){return t.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each((function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()}))}})})),n(Le,[ge],(function(t){return t.extend({recalc:function(t){var e,n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C,k,A,M,T,I,D,P,L,E,N,R,O,z,B=[],F=Math.max,H=Math.min;for(i=t.items().filter(":visible"),r=t.layoutRect(),a=t.paddingBox,o=t.settings,h=t.isRtl()?o.direction||"row-reversed":o.direction,s=o.align,l=t.isRtl()?o.pack||"end":o.pack,c=o.spacing||0,"row-reversed"!=h&&"column-reverse"!=h||(i=i.set(i.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",_="h",S="minH",k="maxH",M="innerH",A="top",T="deltaH",I="contentH",N="left",L="w",D="x",P="innerW",E="minW",R="right",O="deltaW",z="contentW"):(C="x",_="w",S="minW",k="maxW",M="innerW",A="left",T="deltaW",I="contentW",N="top",L="h",D="y",P="innerH",E="minH",R="bottom",O="deltaH",z="contentH"),d=r[M]-a[A]-a[A],w=u=0,e=0,n=i.length;e<n;e++)g=(f=i[e]).layoutRect(),d-=e<n-1?c:0,(p=f.settings.flex)>0&&(u+=p,g[k]&&B.push(f),g.flex=p),d-=g[S],(m=a[N]+g[E]+a[R])>w&&(w=m);if((x={})[S]=d<0?r[S]-d+r[T]:r[M]-d+r[T],x[E]=w+r[O],x[I]=r[M]-d,x[z]=w,x.minW=H(x.minW,r.maxW),x.minH=H(x.minH,r.maxH),x.minW=F(x.minW,r.startMinWidth),x.minH=F(x.minH,r.startMinHeight),!r.autoResize||x.minW==r.minW&&x.minH==r.minH){for(y=d/u,e=0,n=B.length;e<n;e++)(m=(g=(f=B[e]).layoutRect())[S]+g.flex*y)>(v=g[k])?(d-=g[k]-g[S],u-=g.flex,g.flex=0,g.maxFlexSize=v):g.maxFlexSize=0;for(y=d/u,b=a[A],x={},0===u&&("end"==l?b=d+a[A]:"center"==l?(b=Math.round(r[M]/2-(r[M]-d)/2)+a[A])<0&&(b=a[A]):"justify"==l&&(b=a[A],c=Math.floor(d/(i.length-1)))),x[D]=a[N],e=0,n=i.length;e<n;e++)m=(g=(f=i[e]).layoutRect()).maxFlexSize||g[S],"center"===s?x[D]=Math.round(r[P]/2-g[L]/2):"stretch"===s?(x[L]=F(g[E]||0,r[P]-a[N]-a[R]),x[D]=a[N]):"end"===s&&(x[D]=r[P]-g[L]-a.top),g.flex>0&&(m+=g.flex*y),x[_]=m,x[C]=b,f.layoutRect(x),f.recalc&&f.recalc(),b+=m+c}else if(x.w=x.minW,x.h=x.minH,t.layoutRect(x),this.recalc(t),null===t._lastRect){var V=t.parent();V&&(V._lastRect=null,V.recalc())}}})})),n(Ee,[fe],(function(t){return t.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each((function(t){t.recalc&&t.recalc()}))},isNative:function(){return!0}})})),n(Ne,[x],(function(t){var n=function(t,e,n){for(;n!==e;){if(n.style[t])return n.style[t];n=n.parentNode}return""},i=function(e,n){return t.DOM.getStyle(n,e,!0)};return{getFontSize:function(t,e){var r=n("fontSize",t,e);return""!==r?r:i("fontSize",e)},getFontFamily:function(t,r){var a=n("fontFamily",t,r),o=""!==a?a:i("fontFamily",r);return o!==e?function(t){return t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}(o):""},toPt:function(t){return/[0-9.]+px$/.test(t)?Math.round(72*parseInt(t,10)/96)+"pt":t}}})),n(Re,[yt,Lt,Mt,h,d,x,oe,l,Ne],(function(t,e,n,i,r,a,o,s,l){function c(e){e.on("ScriptsLoaded",(function(){e.rtl&&(t.rtl=!0)}))}var u=i.each,d=function(t){return r.reduce(t,(function(t,e){return t.concat(e)}),[])};o.on("AddEditor",(function(t){var e=t.editor;c(e),function(t){function e(e,n){return function(){var i=this;t.on("nodeChange",(function(r){var a=t.formatter,o=null;u(r.parents,(function(t){if(u(e,(function(e){if(n?a.matchNode(t,n,{value:e.value})&&(o=e.value):a.matchNode(t,e.value)&&(o=e.value),o)return!1})),o)return!1})),i.value(o)}))}}function r(e){return function(){var n=this,i=function(t){return t?t.split(",")[0]:""};t.on("nodeChange",(function(r){var a,o=null;a=l.getFontFamily(t.getBody(),r.element),u(e,(function(t){t.value.toLowerCase()===a.toLowerCase()&&(o=t.value)})),u(e,(function(t){o||i(t.value).toLowerCase()!==i(a).toLowerCase()||(o=t.value)})),n.value(o),!o&&a&&n.text(i(a))}))}}function a(e){return function(){var n=this;t.on("nodeChange",(function(i){var r,a,o=null;r=l.getFontSize(t.getBody(),i.element),a=l.toPt(r),u(e,(function(t){t.value===r?o=r:t.value===a&&(o=a)})),n.value(o),o||n.text(a)}))}}function o(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}function s(e){return function(){var n=this;t.formatter?t.formatter.formatChanged(e,(function(t){n.active(t)})):t.on("init",(function(){t.formatter.formatChanged(e,(function(t){n.active(t)}))}))}}function c(e){return function(){function n(){return!!t.undoManager&&t.undoManager["redo"==e?"hasRedo":"hasUndo"]()}var i=this;i.disabled(!n()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){i.disabled(t.readonly||!n())}))}}function h(e){e.control&&(e=e.control.value()),e&&t.execCommand("mceToggleFormat",!1,e)}function f(e){var n=e.length;return i.each(e,(function(e){e.menu&&(e.hidden=0===f(e.menu));var i=e.format;i&&(e.hidden=!t.formatter.canApply(i)),e.hidden&&n--})),n}var g;g=function(){var e=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return t.on("init",(function(){u(n,(function(e){t.formatter.register(e.name,e)}))})),{type:"menu",items:function t(i){var r=[];if(i)return u(i,(function(i){var a={text:i.title,icon:i.icon};if(i.items)a.menu=t(i.items);else{var o=i.format||"custom"+e++;i.format||(i.name=o,n.push(i)),a.format=o,a.cmd=i.cmd}r.push(a)})),r}(t.settings.style_formats_merge?t.settings.style_formats?i.concat(t.settings.style_formats):i:t.settings.style_formats||i),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",(function(){var n,i;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(i=e.settings.cmd)&&e.active(t.queryCommandState(i))}))},onclick:function(){this.settings.format&&h(this.settings.format),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(),u({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(e,n){t.addButton(n,{tooltip:e,onPostRender:s(n),onclick:function(){h(n)}})})),u({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},(function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})})),u({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1],onPostRender:s(n)})}));var p=function(e){var n,r;if("string"==typeof e)r=e.split(" ");else if(i.isArray(e))return d(i.map(e,p));return n=i.grep(r,(function(e){return"|"===e||e in t.menuItems})),i.map(n,(function(e){return"|"===e?{text:"-"}:t.menuItems[e]}))},m=function(e){var n=[{text:"-"}],r=i.grep(t.menuItems,(function(t){return t.context===e}));return i.each(r,(function(t){"before"==t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"==t.separator&&n.push({text:"|"})})),n};t.addButton("undo",{tooltip:"Undo",onPostRender:c("undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:c("redo"),cmd:"redo"}),t.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:c("undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:c("redo"),cmd:"redo"}),t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(){var e=this;t.on("VisualAid",(function(t){e.active(t.hasVisual)})),e.active(t.hasVisual)},cmd:"mceToggleVisualAid"}),t.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(function(t){return function(t){var e=t;return e.length>0&&"-"===e[0].text&&(e=e.slice(1)),e.length>0&&"-"===e[e.length-1].text&&(e=e.slice(0,e.length-1)),e}(t.insert_button_items?p(t.insert_button_items):m("insert"))}(t.settings)),this.menu.renderNew()}}),u({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},(function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})})),t.on("mousedown",(function(){n.hideAll()})),t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:g,onShowMenu:function(){t.settings.style_formats_autohide&&function e(n){var i=n.items().length;return n.items().each((function(n){n.menu&&n.visible(e(n.menu)>0),!n.menu&&n.settings.menu&&n.visible(f(n.settings.menu)>0);var r=n.settings.format;r&&n.visible(t.formatter.canApply(r)),n.visible()||i--})),i}(this.menu)}}),t.addButton("formatselect",(function(){var n=[],i=o(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return u(i,(function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})})),{type:"listbox",text:i[0][0],values:n,fixedWidth:!0,onselect:h,onPostRender:e(n)}})),t.addButton("fontselect",(function(){var e=[],n=o(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return u(n,(function(t){e.push({text:{raw:t[0]},value:t[1],textStyle:-1==t[1].indexOf("dings")?"font-family:"+t[1]:""})})),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:r(e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})),t.addButton("fontsizeselect",(function(){var e=[];return u((t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),(function(t){var n=t,i=t,r=t.split("=");r.length>1&&(n=r[0],i=r[1]),e.push({text:n,value:i})})),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:a(e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})),t.addMenuItem("formats",{text:"Formats",menu:g})}(e),function(t){t.settings.ui_container&&(s.container=a.DOM.select(t.settings.ui_container)[0])}(e)})),t.translate=function(t){return o.translate(t)},e.tooltips=!s.iOS})),n(Oe,[ge],(function(t){return t.extend({recalc:function(t){var e,n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C,k,A,M,T,I=[],D=[];e=t.settings,r=t.items().filter(":visible"),a=t.layoutRect(),i=e.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),y=e.spacingH||e.spacing||0,x=e.spacingV||e.spacing||0,b=e.alignH||e.align,w=e.alignV||e.align,m=t.paddingBox,T="reverseRows"in e?e.reverseRows:t.isRtl(),b&&"string"==typeof b&&(b=[b]),w&&"string"==typeof w&&(w=[w]);for(d=0;d<i;d++)I.push(0);for(h=0;h<n;h++)D.push(0);for(h=0;h<n;h++)for(d=0;d<i&&(u=r[h*i+d]);d++)k=(c=u.layoutRect()).minH,I[d]=(C=c.minW)>I[d]?C:I[d],D[h]=k>D[h]?k:D[h];for(A=a.innerW-m.left-m.right,_=0,d=0;d<i;d++)_+=I[d]+(d>0?y:0),A-=(d>0?y:0)+I[d];for(M=a.innerH-m.top-m.bottom,S=0,h=0;h<n;h++)S+=D[h]+(h>0?x:0),M-=(h>0?x:0)+D[h];if(S+=m.top+m.bottom,(l={}).minW=(_+=m.left+m.right)+(a.w-a.innerW),l.minH=S+(a.h-a.innerH),l.contentW=l.minW-a.deltaW,l.contentH=l.minH-a.deltaH,l.minW=Math.min(l.minW,a.maxW),l.minH=Math.min(l.minH,a.maxH),l.minW=Math.max(l.minW,a.startMinWidth),l.minH=Math.max(l.minH,a.startMinHeight),!a.autoResize||l.minW==a.minW&&l.minH==a.minH){var P;a.autoResize&&((l=t.layoutRect(l)).contentW=l.minW-a.deltaW,l.contentH=l.minH-a.deltaH),P="start"==e.packV?0:M>0?Math.floor(M/n):0;var L=0,E=e.flexWidths;if(E)for(d=0;d<E.length;d++)L+=E[d];else L=i;var N=A/L;for(d=0;d<i;d++)I[d]+=E?E[d]*N:N;for(g=m.top,h=0;h<n;h++){for(f=m.left,s=D[h]+P,d=0;d<i&&(u=r[T?h*i+i-1-d:h*i+d]);d++)p=u.settings,c=u.layoutRect(),o=Math.max(I[d],c.startMinWidth),c.x=f,c.y=g,"center"==(v=p.alignH||(b?b[d]||b[0]:null))?c.x=f+o/2-c.w/2:"right"==v?c.x=f+o-c.w:"stretch"==v&&(c.w=o),"center"==(v=p.alignV||(w?w[d]||w[0]:null))?c.y=g+s/2-c.h/2:"bottom"==v?c.y=g+s-c.h:"stretch"==v&&(c.h=s),u.layoutRect(c),f+=o+y,u.recalc&&u.recalc();g+=s+x}}else if(l.w=l.minW,l.h=l.minH,t.layoutRect(l),this.recalc(t),null===t._lastRect){var R=t.parent();R&&(R._lastRect=null,R.recalc())}}})})),n(ze,[Lt,s],(function(t,e){return t.extend({renderHtml:function(){var t=this;return t.classes.add("iframe"),t.canFocus=!1,'<iframe id="'+t._id+'" class="'+t.classes+'" tabindex="-1" src="'+(t.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,n){var i=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=t,n&&n()):e.setTimeout((function(){i.html(t)})),this}})})),n(Be,[Lt],(function(t){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("widget").add("infobox"),e.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this,e=t.classPrefix;return'<div id="'+t._id+'" class="'+t.classes+'"><div id="'+t._id+'-body">'+t.encode(t.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()})),t.state.on("change:help",(function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()})),t._super()}})})),n(Fe,[Lt,gt],(function(t,e){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("widget").add("label"),e.canFocus=!1,t.multiline&&e.classes.add("autoscroll"),t.strong&&e.classes.add("strong")},initLayoutRect:function(){var t=this,n=t._super();return t.settings.multiline&&(e.getSize(t.getEl()).width>n.maxW&&(n.minW=n.maxW,t.classes.add("multiline")),t.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,e.getSize(t.getEl()).height)),n},repaint:function(){var t=this;return t.settings.multiline||(t.getEl().style.lineHeight=t.layoutRect().h+"px"),t._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this,i=n.settings.forId;return!i&&(e=n.settings.forName)&&(t=n.getRoot().find("#"+e)[0])&&(i=t._id),i?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+n.encode(n.state.get("text"))+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+n.encode(n.state.get("text"))+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()})),t._super()}})})),n(He,[wt],(function(t){return t.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(t){t.classes.add("toolbar-item")})),this._super()}})})),n(Ve,[He],(function(t){return t.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})})),n(We,[pe,xt,Ve],(function(t,e,n){var i=t.extend({init:function(t){var e=this;e._renderOpen=!0,e._super(t),t=e.settings,e.classes.add("menubtn"),t.fixedWidth&&e.classes.add("fixed-width"),e.aria("haspopup",!0),e.state.set("menu",t.menu||e.render())},showMenu:function(t){var n,i=this;return i.menu&&i.menu.visible()&&!1!==t?i.hideMenu():(i.menu||((n=i.state.get("menu")||[]).length?n={type:"menu",items:n}:n.type=n.type||"menu",i.menu=n.renderTo?n.parent(i).show().renderTo():e.create(n).parent(i).renderTo(),i.fire("createmenu"),i.menu.reflow(),i.menu.on("cancel",(function(t){t.control.parent()===i.menu&&(t.stopPropagation(),i.focus(),i.hideMenu())})),i.menu.on("select",(function(){i.focus()})),i.menu.on("show hide",(function(t){t.control==i.menu&&i.activeMenu("show"==t.type),i.aria("expanded","show"==t.type)})).fire("show")),i.menu.show(),i.menu.layoutRect({w:i.layoutRect().w}),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void i.fire("showmenu"))},hideMenu:function(){var t=this;t.menu&&(t.menu.items().each((function(t){t.hideMenu&&t.hideMenu()})),t.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this,i=e._id,r=e.classPrefix,a=e.settings.icon,o=e.state.get("text"),s="";return(t=e.settings.image)?(a="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o&&(e.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+e.encode(o)+"</span>"),a=e.settings.icon?r+"ico "+r+"i-"+a:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+i+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+s+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",(function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())})),t.on("mouseenter",(function(e){var n,r=e.control,a=t.parent();r&&a&&r instanceof i&&r.parent()==a&&(a.items().filter("MenuButton").each((function(t){t.hideMenu&&t!=r&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())})),n&&(r.focus(),r.showMenu()))})),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",(function(){t.menu&&t.menu.remove(),t.menu=null})),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i})),n(Xe,[Lt,xt,l,s],(function(t,e,n,i){return t.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e,n=this;n._super(t),t=n.settings,n.classes.add("menu-item"),t.menu&&n.classes.add("menu-item-expand"),t.preview&&n.classes.add("menu-item-preview"),"-"!==(e=n.state.get("text"))&&"|"!==e||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),t.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",(function(t){t.preventDefault()})),t.menu&&!t.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,i=n.settings,r=n.parent();if(r.items().each((function(t){t!==n&&t.hideMenu()})),i.menu){(t=n.menu)?t.show():((t=i.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=n.menu=e.create(t).parent(n).renderTo()).reflow(),t.on("cancel",(function(e){e.stopPropagation(),n.focus(),t.hide()})),t.on("show hide",(function(t){t.control.items&&t.control.items().each((function(t){t.active(t.settings.selected)}))})).fire("show"),t.on("hide",(function(e){e.control===t&&n.classes.remove("selected")})),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub");var a=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(n.getEl(),a),t.rel=a,a="menu-sub-"+a,t.classes.remove(t._lastRel).add(a),t._lastRel=a,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){var t=this;return t.menu&&(t.menu.items().each((function(t){t.hideMenu&&t.hideMenu()})),t.menu.hide(),t.aria("expanded",!1)),t},renderHtml:function(){function t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(e){var n=s.match||"";return n?e.replace(new RegExp(t(n),"gi"),(function(t){return"!mce~match["+t+"]mce~match!"})):e}function i(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var r,a=this,o=a._id,s=a.settings,l=a.classPrefix,c=a.state.get("text"),u=a.settings.icon,d="",h=s.shortcut,f=a.encode(s.url);return u&&a.parent().classes.add("menu-has-icons"),s.image&&(d=" style=\"background-image: url('"+s.image+"')\""),h&&(h=function(t){var e,i,r;for(r=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(i=r[t[e].toLowerCase()])&&(t[e]=i);return t.join("+")}(h)),u=l+"ico "+l+"i-"+(a.settings.icon||"none"),r="-"!==c?'<i class="'+u+'"'+d+"></i>":"",c=i(a.encode(e(c))),f=i(a.encode(e(f))),'<div id="'+o+'" class="'+a.classes+'" tabindex="-1">'+r+("-"!==c?'<span id="'+o+'-text" class="'+l+'text">'+c+"</span>":"")+(h?'<div id="'+o+'-shortcut" class="'+l+'menu-shortcut">'+h+"</div>":"")+(s.menu?'<div class="'+l+'caret"></div>':"")+(f?'<div class="'+l+'menu-item-link">'+f+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=t.getEl("text");r&&r.setAttribute("style",n)}return t.on("mouseenter click",(function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),i.requestAnimationFrame((function(){t.parent().hideAll()}))))})),t._super(),t},hover:function(){var t=this;return t.parent().items().each((function(t){t.classes.remove("selected")})),t.classes.toggle("selected",!0),t},active:function(t){return void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}})})),n(Ye,[f,yt,s],(function(t,e,n){return function(i,r){var a,o,s=this,l=e.classPrefix;s.show=function(e,c){function u(){a&&(t(i).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),c&&c())}return s.hide(),a=!0,e?o=n.setTimeout(u,e):u(),s},s.hide=function(){var t=i.lastChild;return n.clearTimeout(o),t&&-1!=t.className.indexOf("throbber")&&t.parentNode.removeChild(t),a=!1,s}}})),n(Ge,[Mt,Xe,Ye,h],(function(t,e,n,i){return t.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=i.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){function t(){i.throbber&&(i.throbber.hide(),i.throbber=null)}var e,i=this;i.settings.itemsFactory&&(i.throbber||(i.throbber=new n(i.getEl("body"),!0),0===i.items().length?(i.throbber.show(),i.fire("loading")):i.throbber.show(100,(function(){i.items().remove(),i.fire("loading")})),i.on("hide close",t)),i.requestTime=e=(new Date).getTime(),i.settings.itemsFactory((function(n){return 0===n.length?void i.hide():void(i.requestTime===e&&(i.getEl().style.width="",i.getEl("body").style.width="",t(),i.items().remove(),i.getEl("body").innerHTML="",i.add(n),i.renderNew(),i.fire("loaded")))})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each((function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1})),t.settings.itemsFactory&&t.on("postrender",(function(){t.settings.itemsFactory&&t.load()})),t._super()}})})),n(Ue,[We,Ge],(function(t,e){return t.extend({init:function(t){var e,n,i,r,a=this;a._super(t),a._values=e=(t=a.settings).values,e&&(void 0!==t.value&&function e(r){for(var o=0;o<r.length;o++){if(n=r[o].selected||t.value===r[o].value)return i=i||r[o].text,a.state.set("value",r[o].value),!0;if(r[o].menu&&e(r[o].menu))return!0}}(e),!n&&e.length>0&&(i=e[0].text,a.state.set("value",e[0].value)),a.state.set("menu",e)),a.state.set("text",t.text||i),a.classes.add("listbox"),a.on("select",(function(e){var n=e.control;r&&(e.lastControl=r),t.multiple?n.active(!n.active()):a.value(e.control.value()),r=n}))},bindStates:function(){function t(t,n){t instanceof e&&t.items().each((function(t){t.hasMenus()||t.active(t.value()===n)}))}var n=this;return n.on("show",(function(e){t(e.control,n.value())})),n.state.on("change:value",(function(t){var e=function t(e,n){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===n)return e[r];if(e[r].menu&&(i=t(e[r].menu,n)))return i}}(n.state.get("menu"),t.value);n.text(e?e.text:n.settings.text)})),n._super()}})})),n(je,[ve],(function(t){return t.extend({Defaults:{classes:"radio",role:"radio"}})})),n(qe,[Lt,_t],(function(t,e){return t.extend({renderHtml:function(){var t=this,e=t.classPrefix;return t.classes.add("resizehandle"),"both"==t.settings.direction&&t.classes.add("resizehandle-both"),t.canFocus=!1,'<div id="'+t._id+'" class="'+t.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new e(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!=t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})})),n(Ze,[Lt],(function(t){function e(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}return t.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",(function(t){var n;13==t.keyCode&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))}))},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,n=this,i="";return t=e(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",(function(n){t.getEl().innerHTML=e(n.value)})),t._super()}})})),n($e,[Lt,_t,gt],(function(t,e,n){function i(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function r(t,e,n){t.setAttribute("aria-"+e,n)}function a(t,e){var i,a,o,s,l;"v"==t.settings.orientation?(s="top",o="height",a="h"):(s="left",o="width",a="w"),l=t.getEl("handle"),i=(t.layoutRect()[a]||100)-n.getSize(l)[o],l.style[s]=i*((e-t._minValue)/(t._maxValue-t._minValue))+"px",l.style.height=t.layoutRect().h+"px",r(l,"valuenow",e),r(l,"valuetext",""+t.settings.previewFilter(e)),r(l,"valuemin",t._minValue),r(l,"valuemax",t._maxValue)}return t.extend({init:function(t){var e=this;t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),e._super(t),e.classes.add("slider"),"v"==t.orientation&&e.classes.add("vertical"),e._minValue=t.minValue||0,e._maxValue=t.maxValue||100,e._initValue=e.state.get("value")},renderHtml:function(){var t=this,e=t._id;return'<div id="'+e+'" class="'+t.classes+'"><div id="'+e+'-handle" class="'+t.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,r,a,o,s,l,c=this;t=c._minValue,r=c._maxValue,"v"==c.settings.orientation?(a="screenY",o="top",s="height",l="h"):(a="screenX",o="left",s="width",l="w"),c._super(),function(t,e){function n(n){var r;r=c.value(),r=i(r=function(t,e,n){return n*(e-t)-t}(t,e,function(t,e,n){return(n+t)/(e-t)}(t,e,r)+.05*n),t,e),c.value(r),c.fire("dragstart",{value:r}),c.fire("drag",{value:r}),c.fire("dragend",{value:r})}c.on("keydown",(function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(t,r,c.getEl("handle")),function(t,r,u){var d,h,f,g,p;c._dragHelper=new e(c._id,{handle:c._id+"-handle",start:function(t){d=t[a],h=parseInt(c.getEl("handle").style[o],10),f=(c.layoutRect()[l]||100)-n.getSize(u)[s],c.fire("dragstart",{value:p})},drag:function(e){g=i(h+(e[a]-d),0,f),u.style[o]=g+"px",c.value(p=t+g/f*(r-t)),c.tooltip().text(""+c.settings.previewFilter(p)).show().moveRel(u,"bc tc"),c.fire("drag",{value:p})},stop:function(){c.tooltip().hide(),c.fire("dragend",{value:p})}})}(t,r,c.getEl("handle"))},repaint:function(){this._super(),a(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){a(t,e.value)})),t._super()}})})),n(Ke,[Lt],(function(t){return t.extend({renderHtml:function(){var t=this;return t.classes.add("spacer"),t.canFocus=!1,'<div id="'+t._id+'" class="'+t.classes+'"></div>'}})})),n(Je,[We,gt,f],(function(t,e,n){return t.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,i=this,r=i.getEl(),a=i.layoutRect();return i._super(),t=r.lastChild,n(r.firstChild).css({width:a.w-e.getSize(t).width,height:a.h-2}),n(t).css({height:a.h-2}),i},activeMenu:function(t){n(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e=this,n=e._id,i=e.classPrefix,r=e.state.get("icon"),a=e.state.get("text"),o="";return(t=e.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r=e.settings.icon?i+"ico "+i+"i-"+r:"",a&&(e.classes.add("btn-has-text"),o='<span class="'+i+'txt">'+e.encode(a)+"</span>"),'<div id="'+n+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+o+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?"":"")+e._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",(function(t){var n=t.target;if(t.control==this)for(;n;){if(t.aria&&"down"!=t.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}})),delete t.settings.onclick,t._super()}})})),n(Qe,[Ee],(function(t){return t.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})})),n(tn,[Ct,f,gt],(function(t,e,n){return t.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),e(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(n=this.getEl("t"+t)).setAttribute("aria-selected","true"),e(n).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each((function(e,n){t!=n&&e.hide()}))},renderHtml:function(){var t=this,e=t._layout,n="",i=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each((function(e,r){var a=t._id+"-t"+r;e.aria("role","tabpanel"),e.aria("labelledby",a),n+='<div id="'+a+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"})),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",(function(e){var n=e.target.parentNode;if(n&&n.id==t._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==e.target&&t.activateTab(i)}))},initLayoutRect:function(){var t,e,i,r=this;e=(e=n.getSize(r.getEl("head")).width)<0?0:e,i=0,r.items().each((function(t){e=Math.max(e,t.layoutRect().minW),i=Math.max(i,t.layoutRect().minH)})),r.items().each((function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=i,t.layoutRect({x:0,y:0,w:e,h:i})}));var a=n.getSize(r.getEl("head")).height;return r.settings.minWidth=e,r.settings.minHeight=i+a,(t=r._super()).deltaH+=a,t.innerH=t.h-t.deltaH,t}})})),n(en,[Lt,h,gt],(function(t,e,n){return t.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",(function(t){var n;13==t.keyCode&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))})),e.on("keyup",(function(t){e.state.set("value",t.target.value)})))},repaint:function(){var t,e,n,i,r,a=this,o=0;t=a.getEl().style,e=a._layoutRect,r=a._lastRepaintRect||{};var s=document;return!a.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=e.h-o+"px"),i=(n=a.borderBox).left+n.right+8,o=n.top+n.bottom+(a.settings.multiline?8:0),e.x!==r.x&&(t.left=e.x+"px",r.x=e.x),e.y!==r.y&&(t.top=e.y+"px",r.y=e.y),e.w!==r.w&&(t.width=e.w-i+"px",r.w=e.w),e.h!==r.h&&(t.height=e.h-o+"px",r.h=e.h),a._lastRepaintRect=r,a.fire("repaint",{},!1),a},renderHtml:function(){var t,i,r=this,a=r.settings;return t={id:r._id,hidefocus:"1"},e.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(e){t[e]=a[e]})),r.disabled()&&(t.disabled="disabled"),a.subtype&&(t.type=a.subtype),(i=n.create(a.multiline?"textarea":"input",t)).value=r.state.get("value"),i.className=r.classes,i.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",(function(e){t.state.set("value",e.target.value),t.fire("change",e)}))},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){t.getEl().value!=e.value&&(t.getEl().value=e.value)})),t.state.on("change:disabled",(function(e){t.getEl().disabled=e.value})),t._super()},remove:function(){this.$el.off(),this._super()}})})),n("tinymce/Register",[],(function(){var t=this||window;return"function"==typeof t.define&&(t.define.amd||t.define("ephox/tinymce",[],(function(){return t.tinymce}))),"object"==typeof module&&(module.exports=window.tinymce),{}})),function(n){var i,a,o,s,l;for(i=0;i<n.length;i++){a=t,s=(o=n[i]).split(/[.\/]/);for(var c=0;c<s.length-1;++c)a[s[c]]===e&&(a[s[c]]={}),a=a[s[c]];a[s[s.length-1]]=r[o]}if(t.AMDLC_TESTS){for(o in l=t.privateModules||{},r)l[o]=r[o];for(i=0;i<n.length;i++)delete l[n[i]];t.privateModules=l}}([a,o,s,l,c,u,h,f,g,p,v,x,b,w,k,M,T,I,D,P,L,E,R,O,X,Y,q,J,at,ot,st,lt,ut,ht,ft,vt,yt,xt,bt,wt,_t,St,Ct,kt,At,Mt,Tt,It,Dt,Pt,Lt,Et,Nt,Rt,Bt,Ht,ie,re,ae,oe,se,le,ce,ue,de,he,fe,ge,pe,me,ve,ye,xe,be,we,_e,Se,Ce,ke,Ae,Me,Te,De,Pe,Le,Ee,Re,Oe,ze,Be,Fe,He,Ve,We,Xe,Ye,Ge,Ue,je,qe,Ze,$e,Ke,Je,Qe,tn,en])}(window),function(){var t={},e=function(e){for(var i=t[e],r=i.deps,a=i.defn,o=r.length,s=new Array(o),l=0;l<o;++l)s[l]=n(r[l]);var c=a.apply(null,s);if(void 0===c)throw"module ["+e+"] returned undefined";i.instance=c},n=function(n){var i=t[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&e(n),i.instance},i=function(e,n,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;t[e]={deps:n,defn:i,instance:void 0}},r=function(t,e){i(t,[],(function(){return e}))};r("1",tinymce.Env),r("2",tinymce.EditorManager),r("3",tinymce.ThemeManager),r("8",tinymce.util.Tools),r("9",tinymce.ui.Factory),r("a",tinymce.DOM),i("b",["8","9"],(function(t,e){var n=function(n,i,r){var a,o=[];if(i)return t.each(i.split(/[ ,]/),(function(t){var i=function(){var e=n.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,(function(e){t.active(e)}),!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,(function(e){t.disabled(e)}))};"|"==t?a=null:e.has(t)?(o.push(t={type:t,size:r}),a=null):(a||o.push(a={type:"buttongroup",items:[]}),n.buttons[t]&&("function"==typeof(t=n.buttons[t])&&(t=t()),t.type=t.type||"button",t.size=r,t=e.create(t),a.items.push(t),n.initialized?i():n.on("init",i)))})),{type:"toolbar",layout:"flow",items:o}};return{createToolbar:n,createToolbars:function(e,i){var r=[],a=e.settings,o=function(t){if(t)return r.push(n(e,t,i)),!0};if(t.isArray(a.toolbar)){if(0===a.toolbar.length)return;t.each(a.toolbar,(function(t,e){a["toolbar"+(e+1)]=t})),delete a.toolbar}for(var s=1;s<10&&o(a["toolbar"+s]);s++);if(r.length||!1===a.toolbar||o(a.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:r}}}})),i("c",["8"],(function(t){var e={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(t,e){return"|"==e?{text:"|"}:t[e]},i=function(i,r,a){var o,s,l,c,u;if(u=t.makeMap((r.removed_menuitems||"").split(/[ ,]/)),r.menu?(s=r.menu[a],c=!0):s=e[a],s){o={text:s.title},l=[],t.each((s.items||"").split(/[ ,]/),(function(t){n(i,t)&&!u[t]&&l.push(n(i,t))})),c||t.each(i,(function(t){t.context==a&&("before"==t.separator&&l.push({text:"|"}),t.prependToContext?l.unshift(t):l.push(t),"after"==t.separator&&l.push({text:"|"}))}));for(var d=0;d<l.length;d++)"|"==l[d].text&&(0!==d&&d!=l.length-1||l.splice(d,1));if(o.menu=l,!o.menu.length)return null}return o};return{createMenuButtons:function(t){var n,r=[],a=t.settings,o=[];if(a.menu)for(n in a.menu)o.push(n);else for(n in e)o.push(n);for(var s="string"==typeof a.menubar?a.menubar.split(/[ ,]/):o,l=0;l<s.length;l++){var c=s[l];(c=i(t.menuItems,t.settings,c))&&r.push(c)}return r}}})),r("j",tinymce.util.Delay),r("k",tinymce.geom.Rect),i("d",["a","8","j","b","9","k"],(function(t,e,n,i,r,a){var o=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},s=function(t){e.each(t.contextToolbars,(function(t){t.panel&&t.panel.hide()}))},l=function(t,e){t.moveTo(e.left,e.top)},c=function(t,n,i){n=n?n.substr(0,2):"",e.each({t:"down",b:"up"},(function(e,r){t.classes.toggle("arrow-"+e,i(r,n.substr(0,1)))})),e.each({l:"left",r:"right"},(function(e,r){t.classes.toggle("arrow-"+e,i(r,n.substr(1,1)))}))},u=function(t,e,n,i,r,a){return a=o({x:e,y:n,w:a.w,h:a.h}),t&&(a=t({elementRect:o(i),contentAreaRect:o(r),panelRect:a})),a};return{addContextualToolbars:function(o){var d,h=o.settings,f=function(){return o.contextToolbars||[]},g=function(e,n){var i,r,d,f,g,p,m,v=h.inline_toolbar_position_handler;if(!o.removed){if(!e||!e.toolbar.panel)return void s(o);m=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],g=e.toolbar.panel,n&&g.show(),d=function(e){var n,i,r;return n=t.getPos(o.getContentAreaContainer()),i=o.dom.getRect(e),"BODY"===(r=o.dom.getRoot()).nodeName&&(i.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,i.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),i.x+=n.x,i.y+=n.y,i}(e.element),r=t.getRect(g.getEl()),f=t.getRect(o.getContentAreaContainer()||o.getBody()),"inline"!==t.getStyle(e.element,"display",!0)&&(d.w=e.element.clientWidth,d.h=e.element.clientHeight),o.inline||(f.w=o.getDoc().documentElement.offsetWidth),o.selection.controlSelection.isResizable(e.element)&&d.w<25&&(d=a.inflate(d,0,8)),i=a.findBestRelativePosition(r,d,f,m),d=a.clamp(d,f),i?(p=a.relativePosition(r,d,i),l(g,u(v,p.x,p.y,d,f,r))):(f.h+=r.h,(d=a.intersect(f,d))?(i=a.findBestRelativePosition(r,d,f,["bc-tc","bl-tl","br-tr"]))?(p=a.relativePosition(r,d,i),l(g,u(v,p.x,p.y,d,f,r))):l(g,u(v,d.x,d.y,d,f,r)):g.hide()),c(g,i,(function(t,e){return t===e}))}},p=function(t){return function(){n.requestAnimationFrame((function(){o.selection&&g(y(o.selection.getNode()),t)}))}},m=function(){d||(d=o.selection.getScrollContainer()||o.getWin(),t.bind(d,"scroll",p(!0)),o.on("remove",(function(){t.unbind(d,"scroll")})))},v=function(){e.each(f(),(function(t){t.panel&&t.panel.hide()}))},y=function(t){var e,n,i,r=f();for(e=(i=o.$(t).parents().add(t)).length-1;e>=0;e--)for(n=r.length-1;n>=0;n--)if(r[n].predicate(i[e]))return{toolbar:r[n],element:i[e]};return null};o.on("click keyup setContent ObjectResized",(function(t){("setcontent"!==t.type||t.selection)&&n.setEditorTimeout(o,(function(){var t;(t=y(o.selection.getNode()))?(v(),function(t){var e;t.toolbar.panel?(t.toolbar.panel.show(),g(t)):(m(),e=r.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:i.createToolbar(o,t.toolbar.items),oncancel:function(){o.focus()}}),t.toolbar.panel=e,e.renderTo(document.body).reflow(),g(t))}(t)):v()}))})),o.on("blur hide contextmenu",v),o.on("ObjectResizeStart",(function(){var t=y(o.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()})),o.on("ResizeEditor ResizeWindow",p(!0)),o.on("nodeChange",p(!1)),o.on("remove",(function(){e.each(f(),(function(t){t.panel&&t.panel.remove()})),o.contextToolbars={}})),o.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",(function(){var t=y(o.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()}))}}})),i("e",[],(function(){var t=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}};return{addKeys:function(e,n){e.shortcuts.add("Alt+F9","",t(n,"menubar")),e.shortcuts.add("Alt+F10,F10","",t(n,"toolbar")),e.shortcuts.add("Alt+F11","",t(n,"elementpath")),n.on("cancel",(function(){e.focus()}))}}})),i("f",["8","9","1"],(function(t,e,n){var i=function(t,e,n){var i=t.settings[n];i&&i(function(t){return{element:function(){return t}}}(e.getEl("body")))},r=function(e,n,r){t.each(r,(function(t){var r=n.items().filter("#"+t.name)[0];r&&r.visible()&&t.name!==e&&(i(t,r,"onhide"),r.visible(!1))}))},a=function(e,n){return t.grep(e,(function(t){return t.name===n}))[0]},o=function(t,n,o){return function(s){var l=s.control,c=l.parents().filter("panel")[0],u=c.find("#"+n)[0],d=a(o,n);r(n,c,o),function(t){t.items().each((function(t){t.active(!1)}))}(l.parent()),u&&u.visible()?(i(d,u,"onhide"),u.hide(),l.active(!1)):(u?(u.show(),i(d,u,"onshow")):(u=e.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),c.prepend(u),i(d,u,"onrender"),i(d,u,"onshow")),l.active(!0)),t.fire("ResizeEditor")}};return{hasSidebar:function(t){return!(n.ie&&!(n.ie>=11)||!t.sidebars)&&t.sidebars.length>0},createSidebar:function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:t.map(e.sidebars,(function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:o(e,t.name,e.sidebars)}}))}]}}}})),i("g",[],(function(){return{fireSkinLoaded:function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}}}})),i("6",["a"],(function(t){var e=function(t){return{width:t.clientWidth,height:t.clientHeight}},n=function(n,i,r){var a,o,s,l,c=n.settings;a=n.getContainer(),o=n.getContentAreaContainer().firstChild,s=e(a),l=e(o),null!==i&&(i=Math.max(c.min_width||100,i),i=Math.min(c.max_width||65535,i),t.setStyle(a,"width",i+(s.width-l.width)),t.setStyle(o,"width",i)),r=Math.max(c.min_height||100,r),r=Math.min(c.max_height||65535,r),t.setStyle(o,"height",r),n.fire("ResizeEditor")};return{resizeTo:n,resizeBy:function(t,e,i){var r=t.getContentAreaContainer();n(t,r.clientWidth+e,r.clientHeight+i)}}})),i("4",["8","9","a","b","c","d","e","f","g","6"],(function(t,e,n,i,r,a,o,s,l,c){var u=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},d=function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[u("0"),s.createSidebar(t)]}};return{render:function(t,h,f){var g,p,m,v=t.settings;return f.skinUiCss&&n.styleSheetLoader.load(f.skinUiCss,l.fireSkinLoaded(t)),g=h.panel=e.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===v.menubar?null:{type:"menubar",border:"0 0 1 0",items:r.createMenuButtons(t)},i.createToolbars(t,v.toolbar_items_size),s.hasSidebar(t)?d(t):u("1 0 0 0")]}),!1!==v.resize&&(p={type:"resizehandle",direction:v.resize,onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;m={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){c.resizeTo(t,"both"===v.resize?m.width+e.deltaX:null,m.height+e.deltaY)}}),!1!==v.statusbar&&g.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},p]}),t.fire("BeforeRenderUI"),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(g)),g.renderBefore(f.targetNode).reflow(),v.readonly&&t.setMode("readonly"),v.width&&n.setStyle(g.getEl(),"width",v.width),t.on("remove",(function(){g.remove(),g=null})),o.addKeys(t,g),a.addContextualToolbars(t),{iframeContainer:g.find("#iframe")[0].getEl(),editorContainer:g.getEl()}}}})),r("h",tinymce.ui.FloatPanel),i("5",["8","9","a","h","b","c","d","e","g"],(function(t,e,n,i,r,a,o,s,l){return{render:function(t,c,u){var d,h,f=t.settings;f.fixed_toolbar_container&&(h=n.select(f.fixed_toolbar_container)[0]);var g=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var e=t.selection.getScrollContainer(),i=t.getBody(),r=0,a=0;if(e){var o=n.getPos(i),s=n.getPos(e);r=Math.max(0,s.x-o.x),a=Math.max(0,s.y-o.y)}d.fixed(!1).moveRel(i,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,a)}},p=function(){d&&(d.show(),g(),n.addClass(t.getBody(),"mce-edit-focus"))},m=function(){d&&(d.hide(),i.hideAll(),n.removeClass(t.getBody(),"mce-edit-focus"))},v=function(){return d?void(d.visible()||p()):(d=c.panel=e.create({type:h?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!h,border:1,items:[!1===f.menubar?null:{type:"menubar",border:"0 0 1 0",items:a.createMenuButtons(t)},r.createToolbars(t,f.toolbar_items_size)]}),t.fire("BeforeRenderUI"),d.renderTo(h||document.body).reflow(),s.addKeys(t,d),p(),o.addContextualToolbars(t),t.on("nodeChange",g),t.on("activate",p),t.on("deactivate",m),void t.nodeChanged())};return f.content_editable=!0,t.on("focus",(function(){u.skinUiCss?n.styleSheetLoader.load(u.skinUiCss,v,v):v()})),t.on("blur hide",m),t.on("remove",(function(){d&&(d.remove(),d=null)})),u.skinUiCss&&n.styleSheetLoader.load(u.skinUiCss,l.fireSkinLoaded(t)),{}}}})),r("i",tinymce.ui.Throbber),i("7",["i"],(function(t){return{setup:function(e,n){var i;e.on("ProgressState",(function(e){i=i||new t(n.panel.getEl("body")),e.state?i.show(e.time):i.hide()}))}}})),i("0",["1","2","3","4","5","6","7"],(function(t,e,n,i,r,a,o){var s=function(n,a,s){var l=n.settings,c=!1!==l.skin&&(l.skin||"lightgray");if(c){var u=l.skin_url;u=u?n.documentBaseURI.toAbsolute(u):e.baseURL+"/skins/"+c,s.skinUiCss=t.documentMode<=7?u+"/skin.ie7.min.css":u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")}return o.setup(n,a),l.inline?r.render(n,a,s):i.render(n,a,s)};return n.add("modern",(function(t){return{renderUI:function(e){return s(t,this,e)},resizeTo:function(e,n){return a.resizeTo(t,e,n)},resizeBy:function(e,n){return a.resizeBy(t,e,n)}}})),function(){}})),n("0")()}(),tinymce.PluginManager.add("link",(function(t){function e(t){return t&&"A"===t.nodeName&&t.href}function n(t){return tinymce.util.Tools.grep(t,e).length>0}function i(e){return t.dom.getParent(e,"a[href]")}function r(){return i(t.selection.getStart())}function a(e){if(e){var n=function(t){return t.getAttribute("data-mce-href")||t.getAttribute("href")}(e);if(/^#/.test(n)){var i=t.$(n);i.length&&t.selection.scrollIntoView(i[0],!0)}else!function(t){if(!tinymce.Env.ie||tinymce.Env.ie>10){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)}else{var i=window.open("","_blank");if(i){i.opener=null;var r=i.document;r.open(),r.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(t)+'">'),r.close()}}}(e.href)}}function o(){a(r())}function s(e){return function(){var n=t.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(t){e(tinymce.util.JSON.parse(t))}}):"function"==typeof n?n(e):e(n)}}function l(t,e,n){return function t(n,i){return i=i||[],tinymce.each(n,(function(n){var r={text:n.text||n.title};n.menu?r.menu=t(n.menu):(r.value=n.value,e&&e(r)),i.push(r)})),i}(t,n||[])}function c(e){function n(t){var e=s.find("#text");(!e.value()||t.lastControl&&e.value()==t.lastControl.text())&&e.value(t.control.text()),s.find("#href").value(t.control.value())}function i(){!o&&0===y.text.length&&c&&this.parent().parent().find("#text")[0].value(this.value())}var r,a,o,s,c,d,h,f,g,p,m,v,y={},x=t.selection,b=t.dom;r=x.getNode(),a=b.getParent(r,"a[href]"),c=function(t){var e=x.getContent();return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1==e.indexOf("href=")))}(),y.text=o=a?a.innerText||a.textContent:x.getContent({format:"text"}),y.href=a?b.getAttrib(a,"href"):"",a?y.target=b.getAttrib(a,"target"):t.settings.default_link_target&&(y.target=t.settings.default_link_target),(v=b.getAttrib(a,"rel"))&&(y.rel=v),(v=b.getAttrib(a,"class"))&&(y.class=v),(v=b.getAttrib(a,"title"))&&(y.title=v),c&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){y.text=this.value()}}),e&&(h={type:"listbox",label:"Link list",values:l(e,(function(e){e.value=t.convertURL(e.value||e.url,"href")}),[{text:"None",value:""}]),onselect:n,value:t.convertURL(y.href,"href"),onPostRender:function(){h=this}}),!1!==t.settings.target_list&&(t.settings.target_list||(t.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),g={name:"target",type:"listbox",label:"Target",values:l(t.settings.target_list)}),t.settings.rel_list&&(f={name:"rel",type:"listbox",label:"Rel",values:l(t.settings.rel_list)}),t.settings.link_class_list&&(p={name:"class",type:"listbox",label:"Class",values:l(t.settings.link_class_list,(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})}))}),!1!==t.settings.link_title&&(m={name:"title",type:"textbox",label:"Title",value:y.title}),s=t.windowManager.open({title:"Insert link",data:y,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};h&&h.value(t.convertURL(this.value(),"href")),tinymce.each(e.meta,(function(t,e){var n=s.find("#"+e);"text"===e?0===o.length&&(n.value(t),y.text=t):n.value(t)})),n.attach&&(u={href:this.value(),attach:n.attach}),n.text||i.call(this)},onkeyup:i,onbeforecall:function(t){t.meta=s.toJSON()}},d,m,function(e){var i=[];if(tinymce.each(t.dom.select("a:not([href])"),(function(t){var n=t.name||t.id;n&&i.push({text:n,value:"#"+n,selected:-1!=e.indexOf("#"+n)})})),i.length)return i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:n}}(y.href),h,f,g,p],onSubmit:function(e){function n(e,n){var i=t.selection.getRng();tinymce.util.Delay.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(i),n(e)}))}))}function i(){var e={href:s,target:y.target?y.target:null,rel:y.rel?y.rel:null,class:y.class?y.class:null,title:y.title?y.title:null};t.settings.allow_unsafe_link_target||(e.rel=function(t,e){function n(t){var e=new RegExp("("+i.replace(" ","|")+")","g");return t&&(t=tinymce.trim(t.replace(e,""))),t||null}var i="noopener noreferrer";return e?function(t){return(t=n(t))?[t,i].join(" "):i}(t):n(t)}(e.rel,"_blank"==e.target)),s===u.href&&(u.attach(),u={}),a?(t.focus(),c&&y.text!=o&&("innerText"in a?a.innerText=y.text:a.textContent=y.text),b.setAttribs(a,e),x.select(a),t.undoManager.add()):c?t.insertContent(b.createHTML("a",e,b.encode(y.text))):t.execCommand("mceInsertLink",!1,e)}function r(){t.undoManager.transact(i)}var s;return y=tinymce.extend(y,e.data),(s=y.href)?s.indexOf("@")>0&&-1==s.indexOf("//")&&-1==s.indexOf("mailto:")?void n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(t){t&&(s="mailto:"+s),r()})):t.settings.link_assume_external_targets&&!/^\w+:/i.test(s)||!t.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(s)?void n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(t){t&&(s="http://"+s),r()})):void r():void t.execCommand("unlink")}})}var u={};t.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:s(c),stateSelector:"a[href]"}),t.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),t.addContextToolbar&&(t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:o}),t.addContextToolbar((function(n){var i,r,a;return!!(t.settings.link_context_toolbar&&!function(){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}()&&e(n)&&(i=t.selection,r=i.getRng(),a=r.startContainer,3==a.nodeType&&i.isCollapsed()&&r.startOffset>0&&r.startOffset<a.data.length))}),"openlink | link unlink")),t.addShortcut("Meta+K","",s(c)),t.addCommand("mceLink",s(c)),t.on("click",(function(t){var e=i(t.target);e&&tinymce.util.VK.metaKeyPressed(t)&&(t.preventDefault(),a(e))})),t.on("keydown",(function(t){var e=r();e&&13===t.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(t)&&(t.preventDefault(),a(e))})),this.showDialog=c,t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:o,onPostRender:function(){var e=this,i=function(t){n(t.parents)?e.show():e.hide()};n(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",i),e.on("remove",(function(){t.off("nodechange",i)}))},prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:s(c),stateSelector:"a[href]",context:"insert",prependToContext:!0})})),function(t,e){"use strict";function n(t,e){for(var n,i=[],o=0;o<t.length;++o){if(!(n=a[t[o]]||r(t[o])))throw"module definition dependecy not found: "+t[o];i.push(n)}e.apply(null,i)}function i(t,i,r){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(r===e)throw"invalid module definition, definition function must be specified";n(i,(function(){a[t]=r.apply(null,arguments)}))}function r(e){for(var n=t,i=e.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}var a={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],(function(t,e,n){function i(e,n){return t.each(n,(function(t){e=t.constructor==RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e}return{filter:i,innerText:function(r){var a=new n,o=new e({},a),s="",l=a.getShortEndedElements(),c=t.makeMap("script noscript style textarea video audio iframe object"," "),u=a.getBlockElements();return r=i(r,[/<!\[[^\]]+\]>/g]),function t(e){var n=e.name,i=e;if("br"!==n)if(l[n]&&(s+=" "),c[n])s+=" ";else{if(3==e.type&&(s+=e.value),!e.shortEnded&&(e=e.firstChild))do{t(e)}while(e=e.next);u[n]&&i.next&&(s+="\n","p"==n&&(s+="\n"))}else s+="\n"}(o.parse(r)),s},trimHtml:function(t){return i(function(t){var e="\x3c!--StartFragment--\x3e",n="\x3c!--EndFragment--\x3e",i=t.indexOf(e);if(-1!==i){var r=t.substr(i+e.length),a=r.indexOf(n);if(-1!==a&&/^<\/(p|h[1-6]|li)>/i.test(r.substr(a+n.length,5)))return r.substr(0,a)}return t}(t),[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(t,e,n){return e||n?"":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(t){var e=0;return function(){return t+e++}}}})),i("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],(function(t){var e=function(t){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t)},n=function(t){return e(t)&&/.(gif|jpe?g|png)$/.test(t)},i=function(t,n,i){return!(!1!==t.selection.isCollapsed()||!e(n))&&function(t,e,n){return t.undoManager.extra((function(){n(t,e)}),(function(){t.execCommand("mceInsertLink",!1,e)})),!0}(t,n,i)},r=function(t,e,i){return!!n(e)&&function(t,e,n){return t.undoManager.extra((function(){n(t,e)}),(function(){t.insertContent('<img src="'+e+'">')})),!0}(t,e,i)},a=function(t,e){return t.insertContent(e,{merge:!1!==t.settings.paste_merge_formats,paste:!0}),!0},o=function(e,n){t.each([i,r,a],(function(t){return!0!==t(e,n,a)}))};return{isImageUrl:n,isAbsoluteUrl:e,insertContent:function(t,e){!1===t.settings.smart_paste?a(t,e):o(t,e)}}})),i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],(function(t,e,n,i,r,a){return function(o){function s(t){var e,n=o.dom;if(e=o.fire("BeforePastePreProcess",{content:t}),t=(e=o.fire("PastePreProcess",e)).content,!e.isDefaultPrevented()){if(o.hasEventListeners("PastePostProcess")&&!e.isDefaultPrevented()){var i=n.add(o.getBody(),"div",{style:"display:none"},t);e=o.fire("PastePostProcess",{node:i}),n.remove(i),t=e.node.innerHTML}e.isDefaultPrevented()||r.insertContent(o,t)}}function l(t){t=o.dom.encode(t).replace(/\r\n/g,"\n");var e,n=o.dom.getParent(o.selection.getStart(),o.dom.isBlock),r=o.settings.forced_root_block;r&&(e=(e=o.dom.createHTML(r,o.settings.forced_root_block_attrs)).substr(0,e.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!r?t=i.filter(t,[[/\n/g,"<br>"]]):-1!=(t=i.filter(t,[[/\n\n/g,"</p>"+e],[/^(.*<\/p>)(<p>)$/,e+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(t=e+t),s(t)}function c(){var e,n=o.dom,i=o.getBody(),r=o.dom.getViewPort(o.getWin()).y,a=20;if(w=o.selection.getRng(),o.inline&&(e=o.selection.getScrollContainer())&&e.scrollTop>0&&(r=e.scrollTop),w.getClientRects){var s=function(t){var e,i,r,a=t.startContainer;if((e=t.getClientRects()).length)return e[0];if(t.collapsed&&1==a.nodeType){for(r=a.childNodes[w.startOffset];r&&3==r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"==r.tagName&&(i=n.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(i,r),(t=n.createRng()).setStartBefore(i),t.setEndAfter(i),e=t.getClientRects(),n.remove(i)),e.length?e[0]:void 0}}(w);if(s)a=r+(s.top-n.getPos(i).y);else{a=r;var l=w.startContainer;l&&(3==l.nodeType&&l.parentNode!=i&&(l=l.parentNode),1==l.nodeType&&(a=n.getPos(l,e||i).y))}}b=n.add(o.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+a+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},A),(t.ie||t.gecko)&&n.setStyle(b,"left","rtl"==n.getStyle(i,"direction",!0)?65535:-65535),n.bind(b,"beforedeactivate focusin focusout",(function(t){t.stopPropagation()})),b.focus(),o.selection.select(b,!0)}function u(){if(b){for(var t;t=o.dom.get("mcepastebin");)o.dom.remove(t),o.dom.unbind(t);w&&o.selection.setRng(w)}b=w=null}function d(){var t,e,n,i="";for(t=o.dom.select("div[id=mcepastebin]"),e=0;e<t.length;e++)(n=t[e]).firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),i!=A&&(i+=n.innerHTML);return i}function h(t){var e={};if(t){if(t.getData){var n=t.getData("Text");n&&n.length>0&&-1==n.indexOf(M)&&(e["text/plain"]=n)}if(t.types)for(var i=0;i<t.types.length;i++){var r=t.types[i];e[r]=t.getData(r)}}return e}function f(t){return h(t.clipboardData||o.getDoc().dataTransfer)}function g(t){return y(t,"text/html")||y(t,"text/plain")}function p(t,e,n){t&&(o.selection.setRng(t),t=null);var i=e.result,r=function(t){var e;return-1!==(e=t.indexOf(","))?t.substr(e+1):null}(i),a=new Image;if(a.src=i,function(t,e){return!t.images_dataimg_filter||t.images_dataimg_filter(e)}(o.settings,a)){var l,c,u=o.editorUpload.blobCache;(c=u.findFirst((function(t){return t.base64()===r})))?l=c:(l=u.create(T(),n,r),u.add(l)),s('<img src="'+l.blobUri()+'">')}else s('<img src="'+i+'">')}function m(t,e){function n(n){var i,r,a,o=!1;if(n)for(i=0;i<n.length;i++)if(/^image\/(jpeg|png|gif|bmp)$/.test((r=n[i]).type)){var s=r.getAsFile?r.getAsFile():r;(a=new FileReader).onload=p.bind(null,e,a,s),a.readAsDataURL(s),t.preventDefault(),o=!0}return o}var i=t.clipboardData||t.dataTransfer;if(o.settings.paste_data_images&&i)return n(i.items)||n(i.files)}function v(t){return e.getCaretRangeFromPoint(t.clientX,t.clientY,o.getDoc())}function y(t,e){return e in t&&t[e].length>0}function x(t){return n.metaKeyPressed(t)&&86==t.keyCode||t.shiftKey&&45==t.keyCode}var b,w,_,S=this,C=0,k=!1,A="%MCEPASTEBIN%",M="data:text/mce-internal,",T=i.createIdGenerator("mceclip");S.pasteHtml=s,S.pasteText=l,S.pasteImageData=m,o.on("preInit",(function(){(function(){function e(t,e,n){var r;return y(t,"text/html")?r=t["text/html"]:(r=d())==A&&(n=!0),r=i.trimHtml(r),b&&b.firstChild&&"mcepastebin"===b.firstChild.id&&(n=!0),u(),r.length||(n=!0),n&&(r=y(t,"text/plain")&&-1==r.indexOf("</p>")?t["text/plain"]:i.innerText(r)),r==A?void(e||o.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?l(r):s(r))}o.on("keydown",(function(e){function n(t){x(t)&&!t.isDefaultPrevented()&&u()}if(x(e)&&!e.isDefaultPrevented()){if((_=e.shiftKey&&86==e.keyCode)&&t.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),C=(new Date).getTime(),t.ie&&_)return e.preventDefault(),void o.fire("paste",{ieFake:!0});u(),c(),o.once("keyup",n),o.once("paste",(function(){o.off("keyup",n)}))}})),o.on("paste",(function(n){var i=(new Date).getTime(),r=f(n),s=(new Date).getTime()-i,l=(new Date).getTime()-C-s<1e3,h="text"==S.pasteFormat||_;return _=!1,n.isDefaultPrevented()||function(t){var e=t.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length}(n)||!g(r)&&m(n,w||o.selection.getRng())?void u():(l||n.preventDefault(),!t.ie||l&&!n.ieFake||(c(),o.dom.bind(b,"paste",(function(t){t.stopPropagation()})),o.getDoc().execCommand("Paste",!1,null),r["text/html"]=d()),void(y(r,"text/html")?(n.preventDefault(),e(r,l,h)):a.setEditorTimeout(o,(function(){e(r,l,h)}),0)))})),o.on("dragstart dragend",(function(t){k="dragstart"==t.type})),o.on("drop",(function(t){var e,n;if(n=v(t),!t.isDefaultPrevented()&&!k&&(g(e=h(t.dataTransfer))&&!function(t){var e=t["text/plain"];return!!e&&0===e.indexOf("file://")}(e)||!m(t,n))&&n&&!1!==o.settings.paste_filter_drop){var r=e["mce-internal"]||e["text/html"]||e["text/plain"];r&&(t.preventDefault(),a.setEditorTimeout(o,(function(){o.undoManager.transact((function(){e["mce-internal"]&&o.execCommand("Delete"),o.selection.setRng(n),r=i.trimHtml(r),e["text/html"]?s(r):l(r)}))})))}})),o.on("dragover dragend",(function(t){o.settings.paste_data_images&&t.preventDefault()}))})(),o.parser.addNodeFilter("img",(function(e,n,i){function r(e){e.attr("data-mce-object")||c===t.transparentSrc||e.remove()}function a(t){return 0===t.indexOf("webkit-fake-url")}function s(t){return 0===t.indexOf("data:")}if(!o.settings.paste_data_images&&function(t){return t.data&&!0===t.data.paste}(i))for(var l=e.length;l--;){var c=e[l].attributes.map.src;c&&(a(c)||!o.settings.allow_html_data_urls&&s(c))&&r(e[l])}}))}))}})),i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],(function(t,e,n,i,r,a){function o(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)}function s(e){var n,i;return i=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),t.each(i,(function(t){if(t.test(e))return n=!0,!1})),n}function l(t){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(t)}function c(c){var u=c.settings;c.on("BeforePastePreProcess",(function(d){function h(e,n){var i,a={},o=c.dom.parseStyle(n);return t.each(o,(function(t,r){switch(r){case"mso-list":(i=/\w+ \w+([0-9]+)/i.exec(n))&&(e._listLevel=parseInt(i[1],10)),/Ignore/i.test(t)&&e.firstChild&&(e._listIgnore=!0,e.firstChild._listIgnore=!0);break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":return void("normal"!=t&&(a[r]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void e.remove()}return 0===r.indexOf("mso-comment")?void e.remove():void(0!==r.indexOf("mso-")&&("all"==f||g&&g[r])&&(a[r]=t))})),/(bold)/i.test(a["font-weight"])&&(delete a["font-weight"],e.wrap(new r("b",1))),/(italic)/i.test(a["font-style"])&&(delete a["font-style"],e.wrap(new r("i",1))),(a=c.dom.serializeStyle(a,e.name))||null}var f,g,p=d.content;if(p=(p=p.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(f=u.paste_retain_style_properties)&&(g=t.makeMap(f.split(/[, ]/))),!1!==u.paste_enable_default_filters&&o(d.content)){d.wordContent=!0,p=a.filter(p,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(""):""}]]);var m=u.paste_word_valid_elements;m||(m="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var v=new n({valid_elements:m,valid_children:"-li[p]"});t.each(v.elements,(function(t){t.attributes.class||(t.attributes.class={},t.attributesOrder.push("class")),t.attributes.style||(t.attributes.style={},t.attributesOrder.push("style"))}));var y=new e({},v);y.addAttributeFilter("style",(function(t){for(var e,n=t.length;n--;)(e=t[n]).attr("style",h(e,e.attr("style"))),"span"==e.name&&e.parent&&!e.attributes.length&&e.unwrap()})),y.addAttributeFilter("class",(function(t){for(var e,n,i=t.length;i--;)n=(e=t[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&e.remove(),e.attr("class",null)})),y.addNodeFilter("del",(function(t){for(var e=t.length;e--;)t[e].remove()})),y.addNodeFilter("a",(function(t){for(var e,n,i,r=t.length;r--;)if(n=(e=t[r]).attr("href"),i=e.attr("name"),n&&-1!=n.indexOf("#_msocom_"))e.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||i){if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){e.unwrap();continue}e.attr({href:n,name:i})}else e.unwrap()}));var x=y.parse(p);!1!==u.paste_convert_word_fake_lists&&function(t){function e(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)do{n+=e(t)}while(t=t.next);return n}function n(t,e){if(3===t.type&&e.test(t.value))return t.value=t.value.replace(e,""),!1;if(t=t.firstChild)do{if(!n(t,e))return!1}while(t=t.next);return!0}function i(t,e,i){var s=t._listLevel||c;s!=c&&(s<c?a&&(a=a.parent.parent):(o=a,a=null)),a&&a.name==e?a.append(t):(o=o||a,a=new r(e,1),i>1&&a.attr("start",""+i),t.wrap(a)),t.name="li",s>c&&o&&o.lastChild.append(a),c=s,function t(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{t(e)}while(e=e.next)}(t),n(t,/^\u00a0+/),n(t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(t,/^\u00a0+/)}for(var a,o,c=1,u=[],d=t.firstChild;null!=d;)if(u.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==t;)d=d.walk();for(var h=0;h<u.length;h++)if("p"==(t=u[h]).name&&t.firstChild){var f=e(t);if(l(f)){i(t,"ul");continue}if(s(f)){var g=/([0-9]+)\./.exec(f),p=1;g&&(p=parseInt(g[1],10)),i(t,"ol",p);continue}if(t._listLevel){i(t,"ul",1);continue}a=null}else o=a,a=null}(x),d.content=new i({validate:u.validate},v).serialize(x)}}))}return c.isWordContent=o,c})),i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],(function(t,e,n,i){return function(r){function a(t){r.on("BeforePastePreProcess",(function(e){e.content=t(e.content)}))}t.webkit&&a((function(t){if(n.isWordContent(t))return t;var e=r.settings.paste_webkit_styles;if(!1===r.settings.paste_remove_styles_if_webkit||"all"==e)return t;if(e&&(e=e.split(/[, ]/)),e){var i=r.dom,a=r.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(t,n,r,o){var s=i.parseStyle(r,"span"),l={};if("none"===e)return n+o;for(var c=0;c<e.length;c++){var u=s[e[c]],d=i.getStyle(a,e[c],!0);/color/.test(e[c])&&(u=i.toHex(u),d=i.toHex(d)),d!=u&&(l[e[c]]=u)}return(l=i.serializeStyle(l,"span"))?n+' style="'+l+'"'+o:n+o}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(t,e,n,i){return e+' style="'+n+'"'+i}))})),t.ie&&(a((function(t){if(!n.isWordContent(t))return t;var a=[];e.each(r.schema.getBlockElements(),(function(t,e){a.push(e)}));var o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+a.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=i.filter(t,[[o,"$1"]]),i.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])})),r.on("PastePostProcess",(function(t){!function(t){r.$("a",t).find("font,u").each((function(t,e){r.dom.remove(e,!0)}))}(t.node)})))}})),i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],(function(t,e,n,i){var r;t.add("paste",(function(a){function o(){if("text"==l.pasteFormat)l.pasteFormat="html",a.fire("PastePlainTextToggle",{state:!1});else if(l.pasteFormat="text",a.fire("PastePlainTextToggle",{state:!0}),!r&&!1!==a.settings.paste_plaintext_inform){var t=a.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");a.notificationManager.open({text:t,type:"info"}),r=!0}a.focus()}function s(){var t=this;t.active("text"===l.pasteFormat),a.on("PastePlainTextToggle",(function(e){t.active(e.state)}))}var l,c=this,u=a.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(u.plugins)&&t.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(c.clipboard=l=new e(a),c.quirks=new i(a),c.wordFilter=new n(a),a.settings.paste_as_text&&(c.clipboard.pasteFormat="text"),u.paste_preprocess&&a.on("PastePreProcess",(function(t){u.paste_preprocess.call(c,c,t)})),u.paste_postprocess&&a.on("PastePostProcess",(function(t){u.paste_postprocess.call(c,c,t)})),a.addCommand("mceInsertClipboardContent",(function(t,e){e.content&&c.clipboard.pasteHtml(e.content),e.text&&c.clipboard.pasteText(e.text)})),a.settings.paste_block_drop&&a.on("dragend dragover draggesture dragdrop drop drag",(function(t){t.preventDefault(),t.stopPropagation()})),a.settings.paste_data_images||a.on("drop",(function(t){var e=t.dataTransfer;e&&e.files&&e.files.length>0&&t.preventDefault()})),a.addCommand("mceTogglePlainTextPaste",o),a.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:o,onPostRender:s}),void a.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:l.pasteFormat,onclick:o,onPostRender:s}))}))})),function(n){var i,r,o,s,l;for(i=0;i<n.length;i++){r=t,s=(o=n[i]).split(/[.\/]/);for(var c=0;c<s.length-1;++c)r[s[c]]===e&&(r[s[c]]={}),r=r[s[c]];r[s[s.length-1]]=a[o]}if(t.AMDLC_TESTS){for(o in l=t.privateModules||{},a)l[o]=a[o];for(i=0;i<n.length;i++)delete l[n[i]];t.privateModules=l}}(["tinymce/pasteplugin/Utils"])}(window),function(t,e){"use strict";function n(t,e){for(var n,i=[],o=0;o<t.length;++o){if(!(n=a[t[o]]||r(t[o])))throw"module definition dependecy not found: "+t[o];i.push(n)}e.apply(null,i)}function i(t,i,r){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(r===e)throw"invalid module definition, definition function must be specified";n(i,(function(){a[t]=r.apply(null,arguments)}))}function r(e){for(var n=t,i=e.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}var a={};i("tinymce/tableplugin/Utils",["tinymce/Env"],(function(t){var e=function(t){return function(e,n){e&&(1===(n=parseInt(n,10))||0===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}},n=function(t){return function(e){return parseInt(e.getAttribute(t)||1,10)}};return{setColSpan:e("colSpan"),setRowSpan:e("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(t,n,i){e(n)(t,i)},getSpanVal:function(t,e){return n(e)(t)},paddCell:function(e){(!t.ie||t.ie>9)&&(e.hasChildNodes()||(e.innerHTML='<br data-mce-bogus="1" />'))}}})),i("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],(function(t,e){var n=function(t,e,n){return t[n]?t[n][e]:null},i=function(t,e,i){var r=n(t,e,i);return r?r.elm:null},r=function(t,e,r,a){var o,s=0,l=i(t,e,r);for(o=r;(a>0?o<t.length:o>=0)&&l===n(t,e,o).elm;o+=a)s++;return s},a=function(t,e,n){for(var i,r=t[n],a=e;a<r.length;a++)if((i=r[a]).real)return i.elm;return null},o=function(t,n){for(var i,a=[],o=t[n],s=0;s<o.length;s++)a.push({elm:(i=o[s]).elm,above:r(t,s,n,-1)-1,below:r(t,s,n,1)-1}),s+=e.getColSpan(i.elm)-1;return a},s=function(t,n){var i=t.elm.ownerDocument.createElement("td");return e.setColSpan(i,e.getColSpan(t.elm)),e.setRowSpan(i,n),e.paddCell(i),i},l=function(t,e,n,i){var r=a(t,n+1,i);r?r.parentNode.insertBefore(e,r):(r=a(t,0,i)).parentNode.appendChild(e)},c=function(t,n,i,r){if(0!==n.above){e.setRowSpan(n.elm,n.above);var a=s(n,n.below+1);return l(t,a,i,r),a}return null},u=function(t,n,i,r){if(0!==n.below){e.setRowSpan(n.elm,n.above+1);var a=s(n,n.below);return l(t,a,i,r+1),a}return null};return{splitAt:function(e,n,r,a){var s=o(e,r),l=i(e,n,r).parentNode,d=[];return t.each(s,(function(t,n){null!==(a?c(e,t,n,r):u(e,t,n,r))&&d.push(d)})),{cells:d,row:l}}}})),i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],(function(t,n,i,r){var a=t.each,o=i.getSpanVal,s=i.setSpanVal;return function(l,c,u){function d(){l.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function h(t){return t===l.getBody()}function f(e,n){return e?(n=t.map(n.split(","),(function(t){return t.toLowerCase()})),t.grep(e.childNodes,(function(e){return-1!==t.inArray(n,e.nodeName.toLowerCase())}))):[]}function g(){var t=0;O=[],z=0,a(["thead","tbody","tfoot"],(function(e){var n=f(c,e)[0],i=f(n,"tr");a(i,(function(n,i){i+=t,a(f(n,"td,th"),(function(t,n){var r,a,s,l;if(O[i])for(;O[i][n];)n++;for(s=o(t,"rowspan"),l=o(t,"colspan"),a=i;a<i+s;a++)for(O[a]||(O[a]=[]),r=n;r<n+l;r++)O[a][r]={part:e,real:a==i&&r==n,elm:t,rowspan:s,colspan:l};z=Math.max(z,n+1)}))})),t+=i.length}))}function p(t){return l.fire("newrow",{node:t}),t}function m(t){return l.fire("newcell",{node:t}),t}function v(t,e){return(t=t.cloneNode(e)).removeAttribute("id"),t}function y(t,e){var n;if(n=O[e])return n[t]}function x(t,e){return t[e]?t[e]:null}function b(t,e){for(var n=[],i=0;i<t.length;i++)n.push(y(e,i));return n}function w(t){return t&&(!!V.getAttrib(t.elm,"data-mce-selected")||t==u)}function _(){var t=[];return a(c.rows,(function(e){a(e.cells,(function(n){if(V.getAttrib(n,"data-mce-selected")||u&&n==u.elm)return t.push(e),!1}))})),t}function S(e){var r,o={};return!1!==l.settings.table_clone_elements&&(o=t.makeMap((l.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),t.walk(e,(function(t){var i;if(3==t.nodeType)return a(V.getParents(t.parentNode,null,e).reverse(),(function(t){o[t.nodeName]&&(t=v(t,!1),r?i&&i.appendChild(t):r=i=t,i=t)})),i&&(i.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1}),"childNodes"),m(e=v(e,!1)),s(e,"rowSpan",1),s(e,"colSpan",1),r?e.appendChild(r):i.paddCell(e),e}function C(){var t,e=V.createRng();return a(V.select("tr",c),(function(t){0===t.cells.length&&V.remove(t)})),0===V.select("tr",c).length?(e.setStartBefore(c),e.setEndBefore(c),H.setRng(e),void V.remove(c)):(a(V.select("thead,tbody,tfoot",c),(function(t){0===t.rows.length&&V.remove(t)})),g(),void(B&&(t=O[Math.min(O.length-1,B.y)],t&&(H.select(t[Math.min(t.length-1,B.x)].elm,!0),H.collapse(!0)))))}function k(t,e,n,i){var r,a,o,s,l;for(r=O[e][t].elm.parentNode,o=1;o<=n;o++)if(r=V.getNext(r,"tr")){for(a=t;a>=0;a--)if((l=O[e+o][a].elm).parentNode==r){for(s=1;s<=i;s++)V.insertAfter(S(l),l);break}if(-1==a)for(s=1;s<=i;s++)r.insertBefore(S(r.cells[0]),r.cells[0])}}function A(){a(O,(function(t,e){a(t,(function(t,n){var i,r,a;if(w(t)&&(i=o(t=t.elm,"colspan"),r=o(t,"rowspan"),i>1||r>1)){for(s(t,"rowSpan",1),s(t,"colSpan",1),a=0;a<i-1;a++)V.insertAfter(S(t),t);k(n,e,r-1,i)}}))}))}function M(t,e,n){for(var i=[],r=0;r<t.length;r++)(r<e||r>n)&&i.push(t[r]);return i}function T(e){return t.grep(e,(function(t){return!1===t.real}))}function I(t){for(var e=[],n=0;n<t.length;n++){var i=t[n].elm;e[e.length-1]!==i&&e.push(i)}return e}function D(e,n,r,a,o){var s=0;if(o-r<1)return 0;for(var l=r+1;l<=o;l++){var c=M(x(e,l),n,a),u=T(c);c.length===u.length&&(t.each(I(u),(function(t){i.setRowSpan(t,i.getRowSpan(t)-1)})),s++)}return s}function P(e,n,r,a,o){var s=0;if(a-n<1)return 0;for(var l=n+1;l<=a;l++){var c=M(b(e,l),r,o),u=T(c);c.length===u.length&&(t.each(I(u),(function(t){i.setColSpan(t,i.getColSpan(t)-1)})),s++)}return s}function L(t){var n,i,r,l,c,u,d,h,f,g;if(a(O,(function(i,r){if(a(i,(function(e){if(w(e)&&(u=p(v(c=(e=e.elm).parentNode,!1)),n=r,t))return!1})),t)return n===e})),n!==e){for(l=0,g=0;l<O[0].length;l+=g)if(O[n][l]&&(g=o(i=O[n][l].elm,"colspan"),i!=r)){if(t){if(n>0&&O[n-1][l]&&(f=o(h=O[n-1][l].elm,"rowSpan"))>1){s(h,"rowSpan",f+1);continue}}else if((f=o(i,"rowspan"))>1){s(i,"rowSpan",f+1);continue}d=S(i),s(d,"colSpan",i.colSpan),u.appendChild(d),r=i}u.hasChildNodes()&&(t?c.parentNode.insertBefore(u,c):V.insertAfter(u,c))}}function E(t){var n,i;a(O,(function(i){if(a(i,(function(e,i){if(w(e)&&(n=i,t))return!1})),t)return n===e})),a(O,(function(e,r){var a,l,c;e[n]&&(a=e[n].elm)!=i&&(c=o(a,"colspan"),l=o(a,"rowspan"),1==c?t?(a.parentNode.insertBefore(S(a),a),k(n,r,l-1,c)):(V.insertAfter(S(a),a),k(n,r,l-1,c)):s(a,"colSpan",a.colSpan+1),i=a)}))}function N(t){var e=[];return a(t,(function(t){a(t,(function(t){e.push(t)}))})),e}function R(t){var e;return a(O,(function(n,i){return a(n,(function(n,r){if(n.elm==t)return e={x:r,y:i},!1})),!e})),e}var O,z,B,F,H=l.selection,V=H.dom;c=c||V.getParent(H.getStart(!0),"table"),g(),(u=u||V.getParent(H.getStart(!0),"th,td"))&&(B=R(u),F=function(){var t,e;return t=e=0,a(O,(function(n,i){a(n,(function(n,r){var a,o;w(n)&&(r>t&&(t=r),i>e&&(e=i),(n=O[i][r]).real&&((a=n.colspan-1)&&r+a>t&&(t=r+a),(o=n.rowspan-1)&&i+o>e&&(e=i+o)))}))})),{x:t,y:e}}(),u=y(B.x,B.y)),t.extend(this,{deleteTable:function(){var t=V.createRng();h(c)||(t.setStartAfter(c),t.setEndAfter(c),H.setRng(t),V.remove(c))},split:A,merge:function(e,n,i){var r,o,l,c,u,d,h,f,p,m,v,x,b;if(e?(c=(o=(r=R(e)).x)+(n-1),u=(l=r.y)+(i-1)):(B=F=null,a(O,(function(t,e){a(t,(function(t,n){w(t)&&(B||(B={x:n,y:e}),F={x:n,y:e})}))})),B&&(o=B.x,l=B.y,c=F.x,u=F.y)),f=y(o,l),p=y(c,u),f&&p&&f.part==p.part){A(),g(),x=D(O,o,l,c,u),b=P(O,o,l,c,u),f=y(o,l).elm;var _=c-o-b+1,S=u-l-x+1;for(_===z&&S===O.length&&(_=1,S=1),_===z&&S>1&&(S=1),s(f,"colSpan",_),s(f,"rowSpan",S),h=l;h<=u;h++)for(d=o;d<=c;d++)O[h]&&O[h][d]&&(e=O[h][d].elm)!=f&&(m=t.grep(e.childNodes),a(m,(function(t){f.appendChild(t)})),m.length&&(m=t.grep(f.childNodes),v=0,a(m,(function(t){"BR"==t.nodeName&&v++<m.length-1&&f.removeChild(t)}))),V.remove(e));C()}},insertRow:L,insertRows:function(t,e){e=e||_().length||1;for(var n=0;n<e;n++)L(t)},insertCol:E,insertCols:function(t,e){e=e||function(){var t=0;return a(O,(function(e){if(a(e,(function(e){w(e)&&t++})),t)return!1})),t}()||1;for(var n=0;n<e;n++)E(t)},splitCols:function(e){if(B){var n=r.splitAt(O,B.x,B.y,e);t.each(n.cells,m)}},deleteCols:function(){var e=[];if(h(c)){if(1==O[0].length)return;if(function(e){return t.grep(N(e),w)}(O).length==N(O).length)return}a(O,(function(n){a(n,(function(n,i){w(n)&&-1===t.inArray(e,i)&&(a(O,(function(t){var e,n=t[i].elm;(e=o(n,"colSpan"))>1?s(n,"colSpan",e-1):V.remove(n)})),e.push(i))}))})),C()},deleteRows:function(){var t;t=_(),h(c)&&t.length==c.rows.length||(a(t.reverse(),(function(t){!function(t){var e,n;a(t.cells,(function(t){var n=o(t,"rowSpan");n>1&&(s(t,"rowSpan",n-1),k((e=R(t)).x,e.y,1,1))})),e=R(t.cells[0]),a(O[e.y],(function(t){var e;(t=t.elm)!=n&&((e=o(t,"rowSpan"))<=1?V.remove(t):s(t,"rowSpan",e-1),n=t)}))}(t)})),C())},cutRows:function(){var t=_();if(!h(c)||t.length!=c.rows.length)return V.remove(t),C(),t},copyRows:function(){var t=_();return a(t,(function(e,n){t[n]=v(e,!0)})),t},pasteRows:function(e,n){var i,o,l;e&&(i=r.splitAt(O,B.x,B.y,n),o=i.row,t.each(i.cells,m),l=t.map(e,(function(t){return t.cloneNode(!0)})),n||l.reverse(),a(l,(function(t){var e,i,r=t.cells.length;for(p(t),e=0;e<r;e++)m(i=t.cells[e]),s(i,"colSpan",1),s(i,"rowSpan",1);for(e=r;e<z;e++)t.appendChild(m(S(t.cells[r-1])));for(e=z;e<r;e++)V.remove(t.cells[e]);n?o.parentNode.insertBefore(t,o):V.insertAfter(t,o)})),d())},getPos:R,setStartCell:function(t){B=R(t)},setEndCell:function(t){var e,n,i,r,a,o,s,l,c,u;if(F=R(t),B&&F){for(e=Math.min(B.x,F.x),n=Math.min(B.y,F.y),a=i=Math.max(B.x,F.x),o=r=Math.max(B.y,F.y),u=n;u<=r;u++)for(c=e;c<=i;c++)(t=O[u][c]).real&&((s=t.colspan-1)&&c+s>a&&(a=c+s),(l=t.rowspan-1)&&u+l>o&&(o=u+l));for(d(),u=n;u<=o;u++)for(c=e;c<=a;c++)O[u][c]&&V.setAttrib(O[u][c].elm,"data-mce-selected","1")}},moveRelIdx:function(t,e){var n,i,r;i=(n=R(t)).y*z+n.x;do{if(!(r=y((i+=e)%z,Math.floor(i/z))))break;if(r.elm!=t)return H.select(r.elm,!0),V.isEmpty(r.elm)&&H.collapse(!0),!0}while(r.elm==t);return!1},refresh:g})}})),i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],(function(t,e,n,i,r){var a=i.each,o=r.getSpanVal;return function(s){function l(){s.on("KeyDown",(function(t){var e,n,i=s.dom;37!=t.keyCode&&38!=t.keyCode||(e=s.selection.getRng(),(n=i.getParent(e.startContainer,"table"))&&s.getBody().firstChild==n&&function(t,e){var n,i=e.ownerDocument,r=i.createRange();return r.setStartBefore(e),r.setEnd(t.endContainer,t.endOffset),(n=i.createElement("body")).appendChild(r.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(e,n)&&((e=i.createRng()).setStartBefore(n),e.setEndBefore(n),s.selection.setRng(e),t.preventDefault()))}))}function c(){s.on("KeyDown SetContent VisualAid",(function(){var t;for(t=s.getBody().lastChild;t;t=t.previousSibling)if(3==t.nodeType){if(t.nodeValue.length>0)break}else if(1==t.nodeType&&("BR"==t.tagName||!t.getAttribute("data-mce-bogus")))break;t&&"TABLE"==t.nodeName&&(s.settings.forced_root_block?s.dom.add(s.getBody(),s.settings.forced_root_block,s.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):s.dom.add(s.getBody(),"br",{"data-mce-bogus":"1"}))})),s.on("PreProcess",(function(t){var e=t.node.lastChild;e&&("BR"==e.nodeName||1==e.childNodes.length&&("BR"==e.firstChild.nodeName||""==e.firstChild.nodeValue))&&e.previousSibling&&"TABLE"==e.previousSibling.nodeName&&s.dom.remove(e)}))}(function(){function e(t){s.selection.select(t,!0),s.selection.collapse(!0)}function n(t){s.$(t).empty(),r.paddCell(t)}s.on("keydown",(function(r){var a,o,l,c;if((r.keyCode==t.DELETE||r.keyCode==t.BACKSPACE)&&!r.isDefaultPrevented()&&(a=s.dom.getParent(s.selection.getStart(),"table"))){if(o=s.dom.select("td,th",a),0===(l=i.grep(o,(function(t){return!!s.dom.getAttrib(t,"data-mce-selected")}))).length)return c=s.dom.getParent(s.selection.getStart(),"td,th"),void(s.selection.isCollapsed()&&c&&s.dom.isEmpty(c)&&(r.preventDefault(),n(c),e(c)));r.preventDefault(),s.undoManager.transact((function(){o.length==l.length?s.execCommand("mceTableDelete"):(i.each(l,n),e(l[0]))}))}}))})(),function(){var e=function(t,e){var n=s.selection.getRng(),i=t.ownerDocument.createTextNode("");n.startOffset?t.insertBefore(i,t.firstChild):t.appendChild(i),e&&(s.selection.select(i,!0),s.selection.collapse(!0))},i=function(e){return(e.keyCode==t.DELETE||e.keyCode==t.BACKSPACE)&&!e.isDefaultPrevented()},r=function(t){return t.firstChild===t.lastChild&&t.firstChild},a=function(t){return t&&3===t.nodeType},o=function(t){var e=r(t);return a(e)&&1===e.data.length?e.data:null},l=function(t){var e=r(t),n=o(t);return e&&!a(e)||n&&!u(n)},c=function(t){return s.dom.isEmpty(t)||u(o(t))},u=function(t){return""===t};s.on("keydown",(function(t){if(i(t)){var r=s.dom.getParent(s.selection.getStart(),"caption");(function(t){return t&&"CAPTION"==t.nodeName&&"TABLE"==t.parentNode.nodeName})(r)&&(n.ie&&(s.selection.isCollapsed()?l(r)&&e(r):(s.undoManager.transact((function(){s.execCommand("Delete"),c(r)&&e(r,!0)})),t.preventDefault())),c(r)&&t.preventDefault())}}))}(),n.webkit&&(function(){function n(n){function i(t,e){var i=t?"previousSibling":"nextSibling",a=s.dom.getParent(e,"tr"),o=a[i];if(o)return f(0,e,o,t),n.preventDefault(),!0;var c=s.dom.getParent(a,"table"),u=a.parentNode,d=u.nodeName.toLowerCase();if("tbody"===d||d===(t?"tfoot":"thead")){var h=function(t,e,n,i){var r=s.dom.select(">tbody",e),a=r.indexOf(n);return t&&0===a||!t&&a===r.length-1?function(t,e){var n=s.dom.select(">"+(t?"thead":"tfoot"),e);return 0!==n.length?n[0]:null}(t,e):-1===a?r["thead"===n.tagName.toLowerCase()?0:r.length-1]:r[a+(t?-1:1)]}(t,c,u);if(null!==h)return r(t,h,e)}return l(t,a,i,c)}function r(t,e,i){var r=c(e,t);return r&&f(0,i,r,t),n.preventDefault(),!0}function l(t,e,r,a){var o=a[r];if(o)return u(o),!0;var l=s.dom.getParent(a,"td,th");return l?i(t,l):(u(c(e,!t)),n.preventDefault(),!1)}function c(t,e){var n=t&&t[e?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?s.dom.getParent(n,"td,th"):n}function u(t){s.selection.setCursorLocation(t,0)}function d(t){for(var e=0,n=t;n.previousSibling;)e+=o(n=n.previousSibling,"colspan");return e}function h(t,e){var n=0,i=0;return a(t.children,(function(t,r){if(n+=o(t,"colspan"),i=r,n>e)return!1})),i}function f(t,e,n,i){var r=h(n,d(s.dom.getParent(e,"td,th"))),a=n.childNodes[r];u(c(a,i)||a)}var g=n.keyCode;if((g==t.UP||g==t.DOWN)&&function(t){var e=t.selection.getNode();return null!==t.dom.getParent(e,"tr")}(s)){var p=s.selection.getNode();e.setEditorTimeout(s,(function(){(function(t){var e=s.selection.getNode(),n=s.dom.getParent(e,"td,th"),i=s.dom.getParent(t,"td,th");return n&&n!==i&&function(t,e){return s.dom.getParent(t,"TABLE")===s.dom.getParent(e,"TABLE")}(n,i)})(p)&&i(!n.shiftKey&&g===t.UP,p)}),0)}}s.on("KeyDown",(function(t){n(t)}))}(),function(){function t(){var t=s.selection.getRng(),e=s.selection.getNode(),n=s.dom.getParent(t.startContainer,"TD,TH");if(function(t,e,n,i){var r,a=t.dom.getParent(e.startContainer,"TABLE");return a&&(r=a.parentNode),3==e.startContainer.nodeType&&0===e.startOffset&&0===e.endOffset&&i&&("TR"==n.nodeName||n==r)||("TD"==n.nodeName||"TH"==n.nodeName)&&!i}(s,t,e,n)){n||(n=e);for(var i=n.lastChild;i.lastChild;)i=i.lastChild;3==i.nodeType&&(t.setEnd(i,i.data.length),s.selection.setRng(t))}}s.on("KeyDown",(function(){t()})),s.on("MouseDown",(function(e){2!=e.button&&t()}))}()),n.gecko&&(l(),c()),n.ie>9&&(l(),c())}})),i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],(function(t,e,n){return function(i,r){function a(t){i.getBody().style.webkitUserSelect="",(t||p)&&(i.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),p=!1)}function o(t,e){return!(!t||!e)&&t===g.getParent(e,"table")}function s(e){var n,a,s=e.target;if(!h&&!f&&s!==d&&(d=s,u&&c)){if(a=g.getParent(s,"td,th"),o(u,a)||(a=g.getParent(u,"td,th")),c===a&&!p)return;if(r(!0),o(u,a)){e.preventDefault(),l||(l=new t(i,u,c),i.getBody().style.webkitUserSelect="none"),l.setEndCell(a),p=!0,n=i.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(t){}}}}var l,c,u,d,h,f,g=i.dom,p=!0,m=function(){c=l=u=d=null,r(!1)};return i.on("SelectionChange",(function(t){p&&t.stopImmediatePropagation()}),!0),i.on("MouseDown",(function(t){2==t.button||h||f||(a(),c=g.getParent(t.target,"td,th"),u=g.getParent(c,"table"))})),i.on("mouseover",s),i.on("remove",(function(){g.unbind(i.getDoc(),"mouseover",s),a()})),i.on("MouseUp",(function(){function t(t,i){var a=new e(t,t);do{if(3==t.nodeType&&0!==n.trim(t.nodeValue).length)return void(i?r.setStart(t,0):r.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(i?r.setStartBefore(t):r.setEndBefore(t))}while(t=i?a.next():a.prev())}var r,a,o,s,u,d=i.selection;if(c){if(l&&(i.getBody().style.webkitUserSelect=""),(a=g.select("td[data-mce-selected],th[data-mce-selected]")).length>0){(r=g.createRng()).setStartBefore(s=a[0]),r.setEndAfter(s),t(s,1),o=new e(s,g.getParent(a[0],"table"));do{if("TD"==s.nodeName||"TH"==s.nodeName){if(!g.getAttrib(s,"data-mce-selected"))break;u=s}}while(s=o.next());t(u),d.setRng(r)}i.nodeChanged(),m()}})),i.on("KeyUp Drop SetContent",(function(t){a("setcontent"==t.type),m(),h=!1})),i.on("ObjectResizeStart ObjectResized",(function(t){h="objectresized"!=t.type})),i.on("dragstart",(function(){f=!0})),i.on("drop dragend",(function(){f=!1})),{clear:a}}})),i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],(function(t,e){var n=t.each;return function(i){function r(){var t=i.settings.color_picker_callback;if(t)return function(){var e=this;t.call(i,(function(t){e.value(t).fire("change")}),e.value())}}function a(t){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(t,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:r()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:r()}]}]}}function o(t){return t?t.replace(/px$/,""):""}function s(t){return/^[0-9]+$/.test(t)&&(t+="px"),t}function l(t){n("left center right".split(" "),(function(e){i.formatter.remove("align"+e,{},t)}))}function c(e,n,i){return function e(i,r){return r=r||[],t.each(i,(function(t){var i={text:t.text||t.title};t.menu?i.menu=e(t.menu):(i.value=t.value,n&&n(i)),r.push(i)})),r}(e,i||[])}function u(t,e,n){var i=e.toJSON(),r=t.parseStyle(i.style);n?(e.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),e.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=i.borderColor,r["background-color"]=i.backgroundColor),e.find("#style").value(t.serializeStyle(t.parseStyle(t.serializeStyle(r))))}function d(t,e,n){var i=t.parseStyle(t.getAttrib(n,"style"));i["border-color"]&&(e.borderColor=i["border-color"]),i["background-color"]&&(e.backgroundColor=i["background-color"]),e.style=t.serializeStyle(i)}function h(t,e,i){var r=t.parseStyle(t.getAttrib(e,"style"));n(i,(function(t){r[t.name]=t.value})),t.setAttrib(e,"style",t.serializeStyle(t.parseStyle(t.serializeStyle(r))))}var f=this;f.tableProps=function(){f.table(!0)},f.table=function(r){function f(){function n(t,e,i){if("TD"===t.tagName||"TH"===t.tagName)w.setStyle(t,e,i);else if(t.children)for(var r=0;r<t.children.length;r++)n(t.children[r],e,i)}var r;u(w,this),!1===(_=t.extend(_,this.toJSON())).class&&delete _.class,i.undoManager.transact((function(){if(p||(p=i.plugins.table.insertTable(_.cols||1,_.rows||1)),i.dom.setAttribs(p,{style:_.style,class:_.class}),i.settings.table_style_by_css){if((b=[]).push({name:"border",value:_.border}),b.push({name:"border-spacing",value:s(_.cellspacing)}),h(w,p,b),w.setAttribs(p,{"data-mce-border-color":_.borderColor,"data-mce-cell-padding":_.cellpadding,"data-mce-border":_.border}),p.children)for(var t=0;t<p.children.length;t++)n(p.children[t],"border",_.border),n(p.children[t],"padding",s(_.cellpadding))}else i.dom.setAttribs(p,{border:_.border,cellpadding:_.cellpadding,cellspacing:_.cellspacing});w.getAttrib(p,"width")&&!i.settings.table_style_by_css?w.setAttrib(p,"width",o(_.width)):w.setStyle(p,"width",s(_.width)),w.setStyle(p,"height",s(_.height)),(r=w.select("caption",p)[0])&&!_.caption&&w.remove(r),!r&&_.caption&&((r=w.create("caption")).innerHTML=e.ie?"":'<br data-mce-bogus="1"/>',p.insertBefore(r,p.firstChild)),l(p),_.align&&i.formatter.apply("align"+_.align,{},p),i.focus(),i.addVisual()}))}function g(t,e){return function(t,n){for(var i=0;i<n.length;i++){var r=w.getStyle(n[i],e);if(void 0===t&&(t=r),t!=r)return""}return t}(void 0,i.dom.select("td,th",t))}var p,m,v,y,x,b,w=i.dom,_={};!0===r?(p=w.getParent(i.selection.getStart(),"table"))&&(_={width:o(w.getStyle(p,"width")||w.getAttrib(p,"width")),height:o(w.getStyle(p,"height")||w.getAttrib(p,"height")),cellspacing:o(w.getStyle(p,"border-spacing")||w.getAttrib(p,"cellspacing")),cellpadding:w.getAttrib(p,"data-mce-cell-padding")||w.getAttrib(p,"cellpadding")||g(p,"padding"),border:w.getAttrib(p,"data-mce-border")||w.getAttrib(p,"border")||g(p,"border"),borderColor:w.getAttrib(p,"data-mce-border-color"),caption:!!w.select("caption",p)[0],class:w.getAttrib(p,"class")},n("left center right".split(" "),(function(t){i.formatter.matchNode(p,"align"+t)&&(_.align=t)}))):(m={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),i.settings.table_class_list&&(_.class&&(_.class=_.class.replace(/\s*mce\-item\-table\s*/g,"")),y={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_class_list,(function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"table",classes:[t.value]})})}))}),x={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==i.settings.table_appearance_options?[m,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[m,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},y]},!1!==i.settings.table_advtab?(d(w,_,p),i.windowManager.open({title:"Table properties",data:_,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},a(w)],onsubmit:f})):i.windowManager.open({title:"Table properties",data:_,body:x,onsubmit:f})},f.merge=function(t,e){i.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();i.undoManager.transact((function(){t.merge(e,n.cols,n.rows)}))}})},f.cell=function(){function e(t,e,n){(1===v.length||n)&&m.setAttrib(t,e,n)}function r(t,e,n){(1===v.length||n)&&m.setStyle(t,e,n)}function h(){u(m,this),g=t.extend(g,this.toJSON()),i.undoManager.transact((function(){n(v,(function(t){e(t,"scope",g.scope),e(t,"style",g.style),e(t,"class",g.class),r(t,"width",s(g.width)),r(t,"height",s(g.height)),g.type&&t.nodeName.toLowerCase()!==g.type&&(t=m.rename(t,g.type)),1===v.length&&(l(t),function(t){n("top middle bottom".split(" "),(function(e){i.formatter.remove("valign"+e,{},t)}))}(t)),g.align&&i.formatter.apply("align"+g.align,{},t),g.valign&&i.formatter.apply("valign"+g.valign,{},t)})),i.focus()}))}var f,g,p,m=i.dom,v=[];if(v=i.dom.select("td[data-mce-selected],th[data-mce-selected]"),f=i.dom.getParent(i.selection.getStart(),"td,th"),!v.length&&f&&v.push(f),f=f||v[0]){v.length>1?g={width:"",height:"",scope:"",class:"",align:"",style:"",type:f.nodeName.toLowerCase()}:((g={width:o(m.getStyle(f,"width")||m.getAttrib(f,"width")),height:o(m.getStyle(f,"height")||m.getAttrib(f,"height")),scope:m.getAttrib(f,"scope"),class:m.getAttrib(f,"class")}).type=f.nodeName.toLowerCase(),n("left center right".split(" "),(function(t){i.formatter.matchNode(f,"align"+t)&&(g.align=t)})),n("top middle bottom".split(" "),(function(t){i.formatter.matchNode(f,"valign"+t)&&(g.valign=t)})),d(m,g,f)),i.settings.table_cell_class_list&&(p={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_cell_class_list,(function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"td",classes:[t.value]})})}))});var y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},p]};i.windowManager.open(!1!==i.settings.table_cell_advtab?{title:"Cell properties",bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:y},a(m)],onsubmit:h}:{title:"Cell properties",data:g,body:y,onsubmit:h})}},f.row=function(){function e(t,e,n){(1===x.length||n)&&y.setAttrib(t,e,n)}function r(){var r,a,o;u(y,this),m=t.extend(m,this.toJSON()),i.undoManager.transact((function(){var t=m.type;n(x,(function(n){e(n,"scope",m.scope),e(n,"style",m.style),e(n,"class",m.class),function(t,e,n){(1===x.length||n)&&y.setStyle(t,"height",n)}(n,0,s(m.height)),t!==n.parentNode.nodeName.toLowerCase()&&(r=y.getParent(n,"table"),a=n.parentNode,(o=y.select(t,r)[0])||(o=y.create(t),r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(n),a.hasChildNodes()||y.remove(a)),1===x.length&&l(n),m.align&&i.formatter.apply("align"+m.align,{},n)})),i.focus()}))}var h,f,g,p,m,v,y=i.dom,x=[];h=i.dom.getParent(i.selection.getStart(),"table"),f=i.dom.getParent(i.selection.getStart(),"td,th"),n(h.rows,(function(t){n(t.cells,(function(e){if(y.getAttrib(e,"data-mce-selected")||e==f)return x.push(t),!1}))})),(g=x[0])&&(x.length>1?m={height:"",scope:"",class:"",align:"",type:g.parentNode.nodeName.toLowerCase()}:((m={height:o(y.getStyle(g,"height")||y.getAttrib(g,"height")),scope:y.getAttrib(g,"scope"),class:y.getAttrib(g,"class")}).type=g.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),(function(t){i.formatter.matchNode(g,"align"+t)&&(m.align=t)})),d(y,m,g)),i.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:c(i.settings.table_row_class_list,(function(t){t.value&&(t.textStyle=function(){return i.formatter.getCssText({block:"tr",classes:[t.value]})})}))}),v={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},i.windowManager.open(!1!==i.settings.table_row_advtab?{title:"Row properties",data:m,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},a(y)],onsubmit:r}:{title:"Row properties",data:m,body:v,onsubmit:r}))}}})),i("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],(function(t,n){var i;return function(r){function a(t,e){return{index:t,y:r.dom.getPos(e).y}}function o(t,e){return{index:t,y:r.dom.getPos(e).y+e.offsetHeight}}function s(t,e){return{index:t,x:r.dom.getPos(e).x}}function l(t,e){return{index:t,x:r.dom.getPos(e).x+e.offsetWidth}}function c(){return"rtl"===r.getBody().dir}function u(){return r.inline}function d(){return u?r.getBody().ownerDocument.body:r.getBody()}function h(t,e){return c()?l(t,e):s(t,e)}function f(t,e){return c()?s(t,e):l(t,e)}function g(t,e){var n=r.dom.getStyle(t,e,!0);return parseInt(n,10)}function p(t){return g(t,"width")/g(t.parentElement,"width")*100}function m(t,e,n){for(var i=[],r=1;r<n.length;r++)i.push(t(r-1,n[r].element));return i.push(e(n.length-1,n[n.length-1].element)),i}function v(){var e=r.dom.select("."+at,d());t.each(e,(function(t){r.dom.remove(t)}))}function y(t){v(),T(t)}function x(t,e,n,i,r,a,o,s){var l={"data-mce-bogus":"all",class:at+" "+t,unselectable:"on","data-mce-resize":!1,style:"cursor: "+e+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+i+"px; height: "+r+"px; width: "+a+"px; "};return l[o]=s,l}function b(e,n,i){t.each(e,(function(t){var e=i.x,a=t.y-gt/2,o=gt,s=n;r.dom.add(d(),"div",x(ot,st,e,a,o,s,lt,t.index))}))}function w(e,n,i){t.each(e,(function(t){var e=t.x-gt/2,a=i.y,o=n,s=gt;r.dom.add(d(),"div",x(ut,dt,e,a,o,s,ht,t.index))}))}function _(e){return t.map(e.rows,(function(e){return{element:e,cells:t.map(e.cells,(function(t){var e=t.hasAttribute("rowspan")?parseInt(t.getAttribute("rowspan"),10):1,n=t.hasAttribute("colspan")?parseInt(t.getAttribute("colspan"),10):1;return{element:t,rowspan:e,colspan:n}}))}}))}function S(n){function i(t,e){return t+","+e}var r={},a=[],o=0,s=0;return t.each(n,(function(n,l){var c=[];t.each(n.cells,(function(t){for(var n=0;r[i(l,n)]!==e;)n++;for(var a={element:t.element,colspan:t.colspan,rowspan:t.rowspan,rowIndex:l,colIndex:n},u=0;u<t.colspan;u++)for(var d=0;d<t.rowspan;d++){var h=l+d,f=n+u;r[i(h,f)]=a,o=Math.max(o,h+1),s=Math.max(s,f+1)}c.push(a)})),a.push({element:n.element,cells:c})})),{grid:{maxRows:o,maxCols:s},getAt:function(t,e){return r[i(t,e)]},getAllCells:function(){var e=[];return t.each(a,(function(t){e=e.concat(t.cells)})),e},getAllRows:function(){return a}}}function C(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n}function k(t,e,n){for(var i,r=t(),a=0;a<r.length;a++)e(r[a])&&(i=r[a]);return i||n()}function A(e){var n=C(0,e.grid.maxCols),i=C(0,e.grid.maxRows);return t.map(n,(function(t){return k((function(){for(var n=[],r=0;r<i.length;r++){var a=e.getAt(r,t);a&&a.colIndex===t&&n.push(a)}return n}),(function(t){return 1===t.colspan}),(function(){for(var n,r=0;r<i.length;r++)if(n=e.getAt(r,t))return n;return null}))}))}function M(e){var n=C(0,e.grid.maxCols),i=C(0,e.grid.maxRows);return t.map(i,(function(t){return k((function(){for(var i=[],r=0;r<n.length;r++){var a=e.getAt(t,r);a&&a.rowIndex===t&&i.push(a)}return i}),(function(t){return 1===t.rowspan}),(function(){return e.getAt(t,0)}))}))}function T(t){var e=S(_(t)),n=M(e),i=A(e),s=r.dom.getPos(t),l=n.length>0?m(a,o,n):[],c=i.length>0?m(h,f,i):[];b(l,t.offsetWidth,s),w(c,t.offsetHeight,s)}function I(t,e,n,i){if(e<0||e>=t.length-1)return"";var r=t[e];if(r)r={value:r,delta:0};else for(var a=t.slice(0,e).reverse(),o=0;o<a.length;o++)a[o]&&(r={value:a[o],delta:o+1});var s=t[e+1];if(s)s={value:s,delta:1};else for(var l=t.slice(e+1),c=0;c<l.length;c++)l[c]&&(s={value:l[c],delta:c+1});var u=s.delta-r.delta,d=Math.abs(s.value-r.value)/u;return n?d/g(i,"width")*100:d}function D(t,e){var n=r.dom.getStyle(t,e);return n||(n=r.dom.getAttrib(t,e)),n||(n=r.dom.getStyle(t,e,!0)),n}function P(t,e,n){var i=D(t,"width"),r=parseInt(i,10),a=e?function(t,e){return g(t,"width")/g(e,"width")*100}(t,n):g(t,"width");return(e&&!H(i)||!e&&!V(i))&&(r=0),!isNaN(r)&&r>0?r:a}function L(e,n,i){for(var r=A(e),a=t.map(r,(function(t){return h(t.colIndex,t.element).x})),o=[],s=0;s<r.length;s++){var l=(r[s].element.hasAttribute("colspan")?parseInt(r[s].element.getAttribute("colspan"),10):1)>1?I(a,s):P(r[s].element,n,i);o.push(l=l||pt)}return o}function E(t){var e=D(t,"height"),n=parseInt(e,10);return H(e)&&(n=0),!isNaN(n)&&n>0?n:g(t,"height")}function N(e){for(var n=M(e),i=t.map(n,(function(t){return a(t.rowIndex,t.element).y})),r=[],o=0;o<n.length;o++){var s=(n[o].element.hasAttribute("rowspan")?parseInt(n[o].element.getAttribute("rowspan"),10):1)>1?I(i,o):E(n[o].element);r.push(s=s||mt)}return r}function R(e,n,i,r,a){function o(e){return t.map(e,(function(){return 0}))}function s(t,e){var n,a=o(l.slice(0,t)),s=o(l.slice(e+1));if(i>=0){var c=Math.max(r,l[e]-i);n=a.concat([i,c-l[e]]).concat(s)}else{var u=Math.max(r,l[t]+i);n=a.concat([u-l[t],l[t]-u]).concat(s)}return n}var l=e.slice(0);return 0===e.length?[]:1===e.length?a?[100-l[0]]:[Math.max(r,l[0]+i)-l[0]]:0===n?s(0,1):n>0&&n<e.length-1?s(n,n+1):n===e.length-1?function(t,e){var n,a=o(l.slice(0,e));if(i>=0)n=a.concat([i]);else{var s=Math.max(r,l[e]+i);n=a.concat([s-l[e]])}return n}(0,n):[]}function O(t,e,n){for(var i=0,r=t;r<e;r++)i+=n[r];return i}function z(e,n){var i=e.getAllCells();return t.map(i,(function(t){var e=O(t.colIndex,t.colIndex+t.colspan,n);return{element:t.element,width:e,colspan:t.colspan}}))}function B(e,n){var i=e.getAllCells();return t.map(i,(function(t){var e=O(t.rowIndex,t.rowIndex+t.rowspan,n);return{element:t.element,height:e,rowspan:t.rowspan}}))}function F(e,n){var i=e.getAllRows();return t.map(i,(function(t,e){return{element:t.element,height:n[e]}}))}function H(t){return yt.test(t)}function V(t){return xt.test(t)}function W(e,n,i){for(var a=S(_(e)),o=H(e.width)||H(e.style.width),s=L(a,o,e),l=o?function(t,e){return e/g(t,"width")*100}(e,n):n,c=R(s,i,l,pt,o),u=[],d=0;d<c.length;d++)u.push(c[d]+s[d]);var h=z(a,u),f=o?"%":"px",m=o?i<a.grid.maxCols-1?p(e):p(e)+function(t,e){return e/g(t.parentElement,"width")*100}(e,n):i<a.grid.maxCols-1?g(e,"width"):g(e,"width")+n;r.undoManager.transact((function(){(function(e,n){t.each(e,(function(t){r.dom.setStyle(t.element,"width",t.width+n),r.dom.setAttrib(t.element,"width",null)}))})(h,f),function(t,n,o){i!=a.grid.maxCols-1&&o||(r.dom.setStyle(e,"width",t+n),r.dom.setAttrib(e,"width",null))}(m,f,o)}))}function X(e,n,i){for(var a=S(_(e)),o=N(a),s=[],l=0,c=0;c<o.length;c++)s.push(c===i?n+o[c]:o[c]),l+=l[c];var u=B(a,s),d=F(a,s);r.undoManager.transact((function(){t.each(d,(function(t){r.dom.setStyle(t.element,"height",t.height+"px"),r.dom.setAttrib(t.element,"height",null)})),t.each(u,(function(t){r.dom.setStyle(t.element,"height",t.height+"px"),r.dom.setAttrib(t.element,"height",null)})),r.dom.setStyle(e,"height",l+"px"),r.dom.setAttrib(e,"height",null)}))}function Y(){if(r.dom.remove(et),tt){var t,e;if(r.dom.removeClass(nt,vt),tt=!1,U(nt)){var n=parseInt(r.dom.getAttrib(nt,ft),10),a=r.dom.getPos(nt).x;t=parseInt(r.dom.getAttrib(nt,ht),10),e=c()?n-a:a-n,Math.abs(e)>=1&&W(i,e,t)}else if(j(nt)){var o=parseInt(r.dom.getAttrib(nt,ct),10),s=r.dom.getPos(nt).y;t=parseInt(r.dom.getAttrib(nt,lt),10),e=s-o,Math.abs(e)>=1&&X(i,e,t)}y(i),r.nodeChanged()}}function G(t,e){et=et||function(){var t=document.createElement("div");return t.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),t.setAttribute("data-mce-bogus","all"),t}(),tt=!0,r.dom.addClass(t,vt),nt=t,function(t,e){r.dom.bind(t,"mouseup",(function(){Y()})),r.dom.bind(t,"mousemove",(function(t){clearTimeout(Q),tt&&e(t)})),r.dom.bind(t,"mouseout",(function(){Q=setTimeout((function(){Y()}),200)}))}(et,e),r.dom.add(d(),et)}function U(t){return r.dom.hasClass(t,ut)}function j(t){return r.dom.hasClass(t,ot)}function q(t){var n=t.clientX-(it=it!==e?it:t.clientX);it=t.clientX;var i=r.dom.getPos(nt).x;r.dom.setStyle(nt,"left",i+n+"px")}function Z(t){var n=t.clientY-(rt=rt!==e?rt:t.clientY);rt=t.clientY;var i=r.dom.getPos(nt).y;r.dom.setStyle(nt,"top",i+n+"px")}function $(t){it=e,G(t,q)}function K(t){rt=e,G(t,Z)}function J(t){var e=t.target,n=r.getBody();if(r.$.contains(n,i)||i===n)if(U(e)){t.preventDefault();var a=r.dom.getPos(e).x;r.dom.setAttrib(e,ft,a),$(e)}else if(j(e)){t.preventDefault();var o=r.dom.getPos(e).y;r.dom.setAttrib(e,ct,o),K(e)}else v()}var Q,tt,et,nt,it,rt,at="mce-resize-bar",ot="mce-resize-bar-row",st="row-resize",lt="data-row",ct="data-initial-top",ut="mce-resize-bar-col",dt="col-resize",ht="data-col",ft="data-initial-left",gt=4,pt=10,mt=10,vt="mce-resize-bar-dragging",yt=new RegExp(/(\d+(\.\d+)?%)/),xt=new RegExp(/px|em/);return r.on("init",(function(){r.dom.bind(d(),"mousedown",J)})),r.on("ObjectResized",(function(e){var n=e.target;if("TABLE"===n.nodeName){var i=[];t.each(n.rows,(function(e){t.each(e.cells,(function(t){var e=r.dom.getStyle(t,"width",!0);i.push({cell:t,width:e})}))})),t.each(i,(function(t){r.dom.setStyle(t.cell,"width",t.width),r.dom.setAttrib(t.cell,"width",null)}))}})),r.on("mouseover",(function(t){if(!tt){var e=r.dom.getParent(t.target,"table");("TABLE"===t.target.nodeName||e)&&(i=e,y(e))}})),r.on("keydown",(function(t){switch(t.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:v()}})),r.on("remove",(function(){v(),r.dom.unbind(d(),"mousedown",J)})),{adjustWidth:W,adjustHeight:X,clearBars:v,drawBars:T,determineDeltas:R,getTableGrid:S,getTableDetails:_,getWidths:L,getPixelHeights:N,isPercentageBasedSize:H,isPixelBasedSize:V,recalculateWidths:z,recalculateCellHeights:B,recalculateRowHeights:F}}})),i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],(function(t,e,n,i,r,a,o,s,l){var c=a.each;l.add("table",(function(a){function o(t){return function(){a.execCommand(t)}}function l(t,e){var n,i,r,o;for(r='<table id="__mce"><tbody>',n=0;n<e;n++){for(r+="<tr>",i=0;i<t;i++)r+="<td>"+(s.ie&&s.ie<10?"&nbsp;":"<br>")+"</td>";r+="</tr>"}return r+="</tbody></table>",a.undoManager.transact((function(){a.insertContent(r),o=a.dom.get("__mce"),a.dom.setAttrib(o,"id",null),a.$("tr",o).each((function(t,e){a.fire("newrow",{node:e}),a.$("th,td",e).each((function(t,e){a.fire("newcell",{node:e})}))})),a.dom.setAttribs(o,a.settings.table_default_attributes||{}),a.dom.setStyles(o,a.settings.table_default_styles||{})})),o}function u(t,e,n){function i(){var i,r,o,s={},l=0;(i=(r=a.dom.select("td[data-mce-selected],th[data-mce-selected]"))[0])||(i=a.selection.getStart()),n&&r.length>0?(c(r,(function(t){return s[t.parentNode.parentNode.nodeName]=1})),c(s,(function(t){l+=t})),o=1!==l):o=!a.dom.getParent(i,e),t.disabled(o),a.selection.selectorChanged(e,(function(e){t.disabled(!e)}))}a.initialized?i():a.on("init",i)}function d(){u(this,"table")}function h(){u(this,"td,th")}function f(t,e,n){var i,r,o,s,l,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(e+1),u&&(t=9-t),r=0;r<10;r++)for(i=0;i<10;i++)a.dom.toggleClass(s=c.rows[r].childNodes[i].firstChild,"mce-active",l=(u?i>=t:i<=t)&&r<=e),l&&(o=s);return o.parentNode}function g(t){return a.dom.is(t,"table")&&a.getBody().contains(t)}var p,m,v=this,y=new i(a);!a.settings.object_resizing||!1===a.settings.table_resize_bars||!0!==a.settings.object_resizing&&"table"!==a.settings.object_resizing||(m=r(a)),a.addMenuItem("inserttable",!1===a.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:y.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),y.table())},onshow:function(){f(0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(t,"mce-active"),a.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return(t+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var e,n,i=t.target;"A"==i.tagName.toUpperCase()&&(e=parseInt(i.getAttribute("data-mce-x"),10),n=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(e=9-e),e===this.lastX&&n===this.lastY||(f(e,n,t.control),this.lastX=e,this.lastY=n))},onclick:function(t){var e=this;"A"==t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),e.parent().cancel(),a.undoManager.transact((function(){l(e.lastX+1,e.lastY+1)})),a.addVisual())}}]}),a.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:y.tableProps}),a.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),a.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:o("mceTableCellProps"),onPostRender:h},{text:"Merge cells",onclick:o("mceTableMergeCells"),onPostRender:function(){u(this,"td,th",!0)}},{text:"Split cell",onclick:o("mceTableSplitCells"),onPostRender:h}]}),a.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:o("mceTableInsertRowBefore"),onPostRender:h},{text:"Insert row after",onclick:o("mceTableInsertRowAfter"),onPostRender:h},{text:"Delete row",onclick:o("mceTableDeleteRow"),onPostRender:h},{text:"Row properties",onclick:o("mceTableRowProps"),onPostRender:h},{text:"-"},{text:"Cut row",onclick:o("mceTableCutRow"),onPostRender:h},{text:"Copy row",onclick:o("mceTableCopyRow"),onPostRender:h},{text:"Paste row before",onclick:o("mceTablePasteRowBefore"),onPostRender:h},{text:"Paste row after",onclick:o("mceTablePasteRowAfter"),onPostRender:h}]}),a.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:o("mceTableInsertColBefore"),onPostRender:h},{text:"Insert column after",onclick:o("mceTableInsertColAfter"),onPostRender:h},{text:"Delete column",onclick:o("mceTableDeleteCol"),onPostRender:h}]});var x=[];c("inserttable tableprops deletetable | cell row column".split(" "),(function(t){x.push("|"==t?{text:"-"}:a.menuItems[t])})),a.addButton("table",{type:"menubutton",title:"Table",menu:x}),s.isIE||a.on("click",(function(t){"TABLE"===(t=t.target).nodeName&&(a.selection.select(t),a.nodeChanged())})),v.quirks=new e(a),a.on("Init",(function(){v.cellSelection=new n(a,(function(t){t&&m&&m.clearBars()})),v.resizeBars=m})),a.on("PreInit",(function(){a.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",(function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}))})),c({mceTableSplitCells:function(t){t.split()},mceTableMergeCells:function(t){var e;e=a.dom.getParent(a.selection.getStart(),"th,td"),a.dom.select("td[data-mce-selected],th[data-mce-selected]").length?t.merge():y.merge(t,e)},mceTableInsertRowBefore:function(t){t.insertRows(!0)},mceTableInsertRowAfter:function(t){t.insertRows()},mceTableInsertColBefore:function(t){t.insertCols(!0)},mceTableInsertColAfter:function(t){t.insertCols()},mceTableDeleteCol:function(t){t.deleteCols()},mceTableDeleteRow:function(t){t.deleteRows()},mceTableCutRow:function(t){p=t.cutRows()},mceTableCopyRow:function(t){p=t.copyRows()},mceTablePasteRowBefore:function(t){t.pasteRows(p,!0)},mceTablePasteRowAfter:function(t){t.pasteRows(p)},mceSplitColsBefore:function(t){t.splitCols(!0)},mceSplitColsAfter:function(t){t.splitCols(!1)},mceTableDelete:function(t){m&&m.clearBars(),t.deleteTable()}},(function(e,n){a.addCommand(n,(function(){var n=new t(a);n&&(e(n),a.execCommand("mceRepaint"),v.cellSelection.clear())}))})),c({mceInsertTable:y.table,mceTableProps:function(){y.table(!0)},mceTableRowProps:y.row,mceTableCellProps:y.cell},(function(t,e){a.addCommand(e,(function(e,n){t(n)}))})),a.addButton("tableprops",{title:"Table properties",onclick:y.tableProps,icon:"table"}),a.addButton("tabledelete",{title:"Delete table",onclick:o("mceTableDelete")}),a.addButton("tablecellprops",{title:"Cell properties",onclick:o("mceTableCellProps")}),a.addButton("tablemergecells",{title:"Merge cells",onclick:o("mceTableMergeCells")}),a.addButton("tablesplitcells",{title:"Split cell",onclick:o("mceTableSplitCells")}),a.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:o("mceTableInsertRowBefore")}),a.addButton("tableinsertrowafter",{title:"Insert row after",onclick:o("mceTableInsertRowAfter")}),a.addButton("tabledeleterow",{title:"Delete row",onclick:o("mceTableDeleteRow")}),a.addButton("tablerowprops",{title:"Row properties",onclick:o("mceTableRowProps")}),a.addButton("tablecutrow",{title:"Cut row",onclick:o("mceTableCutRow")}),a.addButton("tablecopyrow",{title:"Copy row",onclick:o("mceTableCopyRow")}),a.addButton("tablepasterowbefore",{title:"Paste row before",onclick:o("mceTablePasteRowBefore")}),a.addButton("tablepasterowafter",{title:"Paste row after",onclick:o("mceTablePasteRowAfter")}),a.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:o("mceTableInsertColBefore")}),a.addButton("tableinsertcolafter",{title:"Insert column after",onclick:o("mceTableInsertColAfter")}),a.addButton("tabledeletecol",{title:"Delete column",onclick:o("mceTableDeleteCol")}),function(){var t=a.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),a.addContextToolbar(g,t))}(),!1!==a.settings.table_tab_navigation&&a.on("keydown",(function(e){var n,i,r;9==e.keyCode&&(n=a.dom.getParent(a.selection.getStart(),"th,td"))&&(e.preventDefault(),i=new t(a),r=e.shiftKey?-1:1,a.undoManager.transact((function(){!i.moveRelIdx(n,r)&&r>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(n,r))})))})),v.insertTable=l,v.setClipboardRows=function(t){p=t},v.getClipboardRows=function(){return p}}))}))}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.echarts={})}(this,(function(t){"use strict";var e,n=2311,i=function(){return n++},r="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);return n&&(e.firefox=!0,e.version=n[1]),i&&(e.ie=!0,e.version=i[1]),r&&(e.edge=!0,e.version=r[1]),a&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent),a={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},o={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},s=Object.prototype.toString,l=Array.prototype,c=l.forEach,u=l.filter,d=l.slice,h=l.map,f=l.reduce,g={};function p(t,n){"createCanvas"===t&&(e=null),g[t]=n}function m(t){if(null==t||"object"!=typeof t)return t;var e=t,n=s.call(t);if("[object Array]"===n){if(!K(t)){e=[];for(var i=0,r=t.length;i<r;i++)e[i]=m(t[i])}}else if(o[n]){if(!K(t)){var l=t.constructor;if(t.constructor.from)e=l.from(t);else for(e=new l(t.length),i=0,r=t.length;i<r;i++)e[i]=m(t[i])}}else if(!a[n]&&!K(t)&&!H(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=m(t[c]));return e}function v(t,e,n){if(!z(e)||!z(t))return n?m(e):t;for(var i in e)if(e.hasOwnProperty(i)){var r=t[i],a=e[i];!z(a)||!z(r)||N(a)||N(r)||H(a)||H(r)||B(a)||B(r)||K(a)||K(r)?!n&&i in t||(t[i]=m(e[i])):v(r,a,n)}return t}function y(t,e){for(var n=t[0],i=1,r=t.length;i<r;i++)n=v(n,t[i],e);return n}function x(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function b(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function w(){return g.createCanvas()}function _(){return e=e||w().getContext("2d")}function S(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function C(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);(t.prototype.constructor=t).superClass=e}function k(t,e,n){b(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function A(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function M(t,e,n){if(t&&e)if(t.forEach&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function T(t,e,n){if(t&&e){if(t.map&&t.map===h)return t.map(e,n);for(var i=[],r=0,a=t.length;r<a;r++)i.push(e.call(n,t[r],r,t));return i}}function I(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,n,i);for(var r=0,a=t.length;r<a;r++)n=e.call(i,n,t[r],r,t);return n}}function D(t,e,n){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,n);for(var i=[],r=0,a=t.length;r<a;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}}function P(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]}function L(t,e){var n=d.call(arguments,2);return function(){return t.apply(e,n.concat(d.call(arguments)))}}function E(t){var e=d.call(arguments,1);return function(){return t.apply(this,e.concat(d.call(arguments)))}}function N(t){return"[object Array]"===s.call(t)}function R(t){return"function"==typeof t}function O(t){return"[object String]"===s.call(t)}function z(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function B(t){return!!a[s.call(t)]}function F(t){return!!o[s.call(t)]}function H(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function V(t){return t!=t}function W(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function X(t,e){return null!=t?t:e}function Y(t,e,n){return null!=t?t:null!=e?e:n}function G(){return Function.call.apply(d,arguments)}function U(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function j(t,e){if(!t)throw new Error(e)}function q(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}g.createCanvas=function(){return document.createElement("canvas")};var Z="__ec_primitive__";function $(t){t[Z]=!0}function K(t){return t[Z]}function J(t){var e=N(t);this.data={};var n=this;function i(t,i){e?n.set(t,i):n.set(i,t)}t instanceof J?t.each(i):t&&M(t,i)}function Q(t){return new J(t)}function tt(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n}function et(){}J.prototype={constructor:J,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=L(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var nt=(Object.freeze||Object)({$override:p,clone:m,merge:v,mergeAll:y,extend:x,defaults:b,createCanvas:w,getContext:_,indexOf:S,inherits:C,mixin:k,isArrayLike:A,each:M,map:T,reduce:I,filter:D,find:P,bind:L,curry:E,isArray:N,isFunction:R,isString:O,isObject:z,isBuiltInObject:B,isTypedArray:F,isDom:H,eqNaN:V,retrieve:W,retrieve2:X,retrieve3:Y,slice:G,normalizeCssArray:U,assert:j,trim:q,setAsPrimitive:$,isPrimitive:K,createHashMap:Q,concatArray:tt,noop:et}),it="undefined"==typeof Float32Array?Array:Float32Array;function rt(t,e){var n=new it(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function at(t,e){return t[0]=e[0],t[1]=e[1],t}function ot(t){var e=new it(2);return e[0]=t[0],e[1]=t[1],e}function st(t,e,n){return t[0]=e,t[1]=n,t}function lt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ct(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function dt(t){return Math.sqrt(ht(t))}function ht(t){return t[0]*t[0]+t[1]*t[1]}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function gt(t,e){var n=dt(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function pt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var mt=pt;function vt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var yt=vt;function xt(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function bt(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function wt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function _t(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var St=(Object.freeze||Object)({create:rt,copy:at,clone:ot,set:st,add:lt,scaleAndAdd:ct,sub:ut,len:dt,length:dt,lenSquare:ht,lengthSquare:ht,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:ft,normalize:gt,distance:pt,dist:mt,distanceSquare:vt,distSquare:yt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:xt,applyTransform:bt,min:wt,max:_t});function Ct(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function kt(t,e){return{target:t,topTarget:e&&e.topTarget}}Ct.prototype={constructor:Ct,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(kt(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,a=i-this._y;this._x=n,this._y=i,e.drift(r,a,t),this.dispatchToElement(kt(e,t),"drag",t.event);var o=this.findHover(n,i,e).target,s=this._dropTarget;e!==(this._dropTarget=o)&&(s&&o!==s&&this.dispatchToElement(kt(s,t),"dragleave",t.event),o&&o!==s&&this.dispatchToElement(kt(o,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(kt(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(kt(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var At=Array.prototype.slice,Mt=function(t){this._$handlers={},this._$eventProcessor=t};function Tt(t,e,n,i,r,a){var o=t._$handlers;if("function"==typeof n&&(r=i,i=n,n=null),!i||!e)return t;n=function(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}(t,n),o[e]||(o[e]=[]);for(var s=0;s<o[e].length;s++)if(o[e][s].h===i)return t;var l={h:i,one:a,query:n,ctx:r||t,callAtLast:i.zrEventfulCallAtLast},c=o[e].length-1,u=o[e][c];return u&&u.callAtLast?o[e].splice(c,0,l):o[e].push(l),t}Mt.prototype={constructor:Mt,one:function(t,e,n,i){return Tt(this,t,e,n,i,!0)},on:function(t,e,n,i){return Tt(this,t,e,n,i,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,a=n[t].length;r<a;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,r=i.length;3<r&&(i=At.call(i,1));for(var a=e.length,o=0;o<a;){var s=e[o];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))o++;else{switch(r){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(e.splice(o,1),a--):o++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,r=i.length;4<r&&(i=At.call(i,1,i.length-1));for(var a=i[i.length-1],o=e.length,s=0;s<o;){var l=e[s];if(n&&n.filter&&null!=l.query&&!n.filter(t,l.query))s++;else{switch(r){case 1:l.h.call(a);break;case 2:l.h.call(a,i[1]);break;case 3:l.h.call(a,i[1],i[2]);break;default:l.h.apply(a,i)}l.one?(e.splice(s,1),o--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var It=Math.log(2);function Dt(t,e,n,i,r,a){var o=i+"-"+r,s=t.length;if(a.hasOwnProperty(o))return a[o];if(1===e){var l=Math.round(Math.log((1<<s)-1&~r)/It);return t[n][l]}for(var c=i|1<<n,u=n+1;i&1<<u;)u++;for(var d=0,h=0,f=0;h<s;h++){var g=1<<h;g&r||(d+=(f%2?-1:1)*t[n][h]*Dt(t,e-1,u,c,r|g,a),f++)}return a[o]=d}function Pt(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},r=Dt(n,8,0,0,0,i);if(0!==r){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)null==a[s]&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*Dt(n,7,0===o?1:0,1<<o,1<<s,i)/r*e[o];return function(t,e,n){var i=e*a[6]+n*a[7]+1;t[0]=(e*a[0]+n*a[1]+a[2])/i,t[1]=(e*a[3]+n*a[4]+a[5])/i}}}var Lt="___zrEVENTSAVED",Et=[];function Nt(t,e,n,i,a){if(e.getBoundingClientRect&&r.domSupported&&!Rt(e)){var o=e[Lt]||(e[Lt]={}),s=function(t,e,n){for(var i=n?"invTrans":"trans",r=e[i],a=e.srcCoords,o=!0,s=[],l=[],c=0;c<4;c++){var u=t[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;s.push(h,f),o=o&&a&&h===a[d]&&f===a[1+d],l.push(t[c].offsetLeft,t[c].offsetTop)}return o&&r?r:(e.srcCoords=s,e[i]=n?Pt(l,s):Pt(s,l))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],r=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=a%2,l=(a>>1)%2;o.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[s]+":0",r[l]+":0",i[1-s]+":auto",r[1-l]+":auto",""].join("!important;"),t.appendChild(o),n.push(o)}return n}(e,o),o,a);if(s)return s(t,n,i),!0}return!1}function Rt(t){return"CANVAS"===t.nodeName.toUpperCase()}var Ot="undefined"!=typeof window&&!!window.addEventListener,zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Bt=[];function Ft(t,e,n,i){return n=n||{},i||!r.canvasSupported?Ht(t,e,n):r.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Ht(t,e,n),n}function Ht(t,e,n){if(r.domSupported&&t.getBoundingClientRect){var i=e.clientX,a=e.clientY;if(Rt(t)){var o=t.getBoundingClientRect();return n.zrX=i-o.left,void(n.zrY=a-o.top)}if(Nt(Bt,t,i,a))return n.zrX=Bt[0],void(n.zrY=Bt[1])}n.zrX=n.zrY=0}function Vt(t){return t||window.event}function Wt(t,e,n){if(null!=(e=Vt(e)).zrX)return e;var i=e.type;if(i&&0<=i.indexOf("touch")){var r="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];r&&Ft(t,r,e,n)}else Ft(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return null==e.which&&void 0!==a&&zt.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function Xt(t,e,n,i){Ot?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}var Yt=Ot?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function Gt(t){return 2===t.which||3===t.which}function Ut(){this._track=[]}function jt(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}Ut.prototype={constructor:Ut,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},a=0,o=i.length;a<o;a++){var s=i[a],l=Ft(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(t){for(var e in qt)if(qt.hasOwnProperty(e)){var n=qt[e](this._track,t);if(n)return n}}};var qt={pinch:function(t,e){var n=t.length;if(n){var i=(t[n-1]||{}).points,r=(t[n-2]||{}).points||i;if(r&&1<r.length&&i&&1<i.length){var a=jt(i)/jt(r);isFinite(a)||(a=1),e.pinchScale=a;var o=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(i);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}};function Zt(){Yt(this.event)}function $t(){}function Kt(t,e,n,i){Mt.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new $t,this.proxy=null,this._hovered={},Ct.call(this),this.setHandlerProxy(n)}$t.prototype.dispose=function(){};var Jt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function Qt(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||"silent"}return!1}function te(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}Kt.prototype={constructor:Kt,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(M(Jt,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,i=te(this,e,n),r=this._hovered,a=r.target;a&&!a.__zr&&(a=(r=this.findHover(r.x,r.y)).target);var o=this._hovered=i?{x:e,y:n}:this.findHover(e,n),s=o.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),a&&s!==a&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(o,"mousemove",t),s&&s!==a&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&(n||this.trigger("globalout",{type:"globalout",event:t}))},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,a=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Zt}}(e,t,n);i&&(i[r]&&(a.cancelBubble=i[r].call(i,a)),i.trigger(e,a),i=i.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer((function(t){"function"==typeof t[r]&&t[r].call(t,a),t.trigger&&t.trigger(e,a)})))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),r={x:t,y:e},a=i.length-1;0<=a;a--){var o;if(i[a]!==n&&!i[a].ignore&&(o=Qt(i[a],t,e))&&(r.topTarget||(r.topTarget=i[a]),"silent"!==o)){r.target=i[a];break}}return r},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new Ut);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var r=i.type;t.gestureEvent=r,this.dispatchToElement({target:i.target},r,i.event)}}},M(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){Kt.prototype[t]=function(e){var n,i,r=e.zrX,a=e.zrY,o=te(this,r,a);if("mouseup"===t&&o||(i=(n=this.findHover(r,a)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||4<mt(this._downPoint,[e.zrX,e.zrY]))return;this._downPoint=null}this.dispatchToElement(n,t,e)}})),k(Kt,Mt),k(Kt,Ct);var ee="undefined"==typeof Float32Array?Array:Float32Array;function ne(){var t=new ee(6);return ie(t),t}function ie(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function re(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ae(t,e,n){var i=e[1]*n[0]+e[3]*n[1],r=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],o=e[0]*n[4]+e[2]*n[5]+e[4],s=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=i,t[2]=r,t[3]=a,t[4]=o,t[5]=s,t}function oe(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function se(t,e,n){var i=e[0],r=e[2],a=e[4],o=e[1],s=e[3],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*c,t[1]=-i*c+o*u,t[2]=r*u+s*c,t[3]=-r*c+u*s,t[4]=u*a+c*l,t[5]=u*l-c*a,t}function le(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}function ce(t,e){var n=e[0],i=e[2],r=e[4],a=e[1],o=e[3],s=e[5],l=n*o-a*i;return l?(t[0]=o*(l=1/l),t[1]=-a*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-o*r)*l,t[5]=(a*r-n*s)*l,t):null}function ue(t){var e=ne();return re(e,t),e}var de=(Object.freeze||Object)({create:ne,identity:ie,copy:re,mul:ae,translate:oe,rotate:se,scale:le,invert:ce,clone:ue}),he=ie;function fe(t){return 5e-5<t||t<-5e-5}var ge=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},pe=ge.prototype;pe.transform=null,pe.needLocalTransform=function(){return fe(this.rotation)||fe(this.position[0])||fe(this.position[1])||fe(this.scale[0]-1)||fe(this.scale[1]-1)};var me=[];pe.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;if(n||e){i=i||ne(),n?this.getLocalTransform(i):he(i),e&&(n?ae(i,t.transform,i):re(i,t.transform)),this.transform=i;var r=this.globalScaleRatio;if(null!=r&&1!==r){this.getGlobalScale(me);var a=me[0]<0?-1:1,o=me[1]<0?-1:1,s=((me[0]-a)*r+a)/me[0]||0,l=((me[1]-o)*r+o)/me[1]||0;i[0]*=s,i[1]*=s,i[2]*=l,i[3]*=l}this.invTransform=this.invTransform||ne(),ce(this.invTransform,i)}else i&&he(i)},pe.getLocalTransform=function(t){return ge.getLocalTransform(this,t)},pe.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},pe.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var ve=[],ye=ne();pe.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=this.position,r=this.scale;fe(e-1)&&(e=Math.sqrt(e)),fe(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),i[0]=t[4],i[1]=t[5],r[0]=e,r[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},pe.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(ae(ve,t.invTransform,e),e=ve);var n=this.origin;n&&(n[0]||n[1])&&(ye[4]=n[0],ye[5]=n[1],ae(ve,e,ye),ve[4]-=n[0],ve[5]-=n[1],e=ve),this.setLocalTransform(e)}},pe.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},pe.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&bt(n,n,i),n},pe.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&bt(n,n,i),n},ge.getLocalTransform=function(t,e){he(e=e||[]);var n=t.origin,i=t.scale||[1,1],r=t.rotation||0,a=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),le(e,e,i),r&&se(e,e,r),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=a[0],e[5]+=a[1],e};var xe={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-xe.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*xe.bounceIn(2*t):.5*xe.bounceOut(2*t-1)+.5}};function be(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function we(){this.head=null,this.tail=null,this._len=0}be.prototype={constructor:be,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,r="string"==typeof i?xe[i]:i,a="function"==typeof r?r(n):n;return this.fire("frame",a),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){this._startTime=t-(t-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var _e=we.prototype;function Se(t){this._list=new we,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null}_e.insert=function(t){var e=new Ce(t);return this.insertEntry(e),e},_e.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},_e.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},_e.len=function(){return this._len},_e.clear=function(){this.head=this.tail=null,this._len=0};var Ce=function(t){this.value=t},ke=Se.prototype;ke.put=function(t,e){var n=this._list,i=this._map,r=null;if(null==i[t]){var a=n.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&0<a){var s=n.head;n.remove(s),delete i[s.key],r=s.value,this._lastRemovedEntry=s}o?o.value=e:o=new Ce(e),o.key=t,n.insertEntry(o),i[t]=o}return r},ke.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},ke.clear=function(){this._list.clear(),this._map={}};var Ae={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Me(t){return(t=Math.round(t))<0?0:255<t?255:t}function Te(t){return t<0?0:1<t?1:t}function Ie(t){return t.length&&"%"===t.charAt(t.length-1)?Me(parseFloat(t)/100*255):Me(parseInt(t,10))}function De(t){return t.length&&"%"===t.charAt(t.length-1)?Te(parseFloat(t)/100):Te(parseFloat(t))}function Pe(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function Le(t,e,n){return t+(e-t)*n}function Ee(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function Ne(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Re=new Se(20),Oe=null;function ze(t,e){Oe&&Ne(Oe,e),Oe=Re.put(t,Oe||e.slice())}function Be(t,e){if(t){e=e||[];var n=Re.get(t);if(n)return Ne(e,n);var i,r=(t+="").replace(/ /g,"").toLowerCase();if(r in Ae)return Ne(e,Ae[r]),ze(t,e),e;if("#"===r.charAt(0))return 4===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=4095?(Ee(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),ze(t,e),e):void Ee(e,0,0,0,1):7===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=16777215?(Ee(e,(16711680&i)>>16,(65280&i)>>8,255&i,1),ze(t,e),e):void Ee(e,0,0,0,1):void 0;var a=r.indexOf("("),o=r.indexOf(")");if(-1!==a&&o+1===r.length){var s=r.substr(0,a),l=r.substr(a+1,o-(a+1)).split(","),c=1;switch(s){case"rgba":if(4!==l.length)return void Ee(e,0,0,0,1);c=De(l.pop());case"rgb":return 3!==l.length?void Ee(e,0,0,0,1):(Ee(e,Ie(l[0]),Ie(l[1]),Ie(l[2]),c),ze(t,e),e);case"hsla":return 4!==l.length?void Ee(e,0,0,0,1):(l[3]=De(l[3]),Fe(l,e),ze(t,e),e);case"hsl":return 3!==l.length?void Ee(e,0,0,0,1):(Fe(l,e),ze(t,e),e);default:return}}Ee(e,0,0,0,1)}}function Fe(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=De(t[1]),r=De(t[2]),a=r<=.5?r*(i+1):r+i-r*i,o=2*r-a;return Ee(e=e||[],Me(255*Pe(o,a,n+1/3)),Me(255*Pe(o,a,n)),Me(255*Pe(o,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function He(t,e){var n=Be(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,255<n[i]?n[i]=255:t[i]<0&&(n[i]=0);return Ue(n,4===n.length?"rgba":"rgb")}}function Ve(t){var e=Be(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function We(t,e,n){if(e&&e.length&&0<=t&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),o=e[r],s=e[a],l=i-r;return n[0]=Me(Le(o[0],s[0],l)),n[1]=Me(Le(o[1],s[1],l)),n[2]=Me(Le(o[2],s[2],l)),n[3]=Te(Le(o[3],s[3],l)),n}}function Xe(t,e,n){if(e&&e.length&&0<=t&&t<=1){var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),o=Be(e[r]),s=Be(e[a]),l=i-r,c=Ue([Me(Le(o[0],s[0],l)),Me(Le(o[1],s[1],l)),Me(Le(o[2],s[2],l)),Te(Le(o[3],s[3],l))],"rgba");return n?{color:c,leftIndex:r,rightIndex:a,value:i}:c}}function Ye(t,e,n,i){if(t=Be(t))return t=function(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,a=t[2]/255,o=Math.min(i,r,a),s=Math.max(i,r,a),l=s-o,c=(s+o)/2;if(0==l)n=e=0;else{n=c<.5?l/(s+o):l/(2-s-o);var u=((s-i)/6+l/2)/l,d=((s-r)/6+l/2)/l,h=((s-a)/6+l/2)/l;i===s?e=h-d:r===s?e=1/3+u-h:a===s&&(e=2/3+d-u),e<0&&(e+=1),1<e&&(e-=1)}var f=[360*e,n,c];return null!=t[3]&&f.push(t[3]),f}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:360<t?360:t}(e)),null!=n&&(t[1]=De(n)),null!=i&&(t[2]=De(i)),Ue(Fe(t),"rgba")}function Ge(t,e){if((t=Be(t))&&null!=e)return t[3]=Te(e),Ue(t,"rgba")}function Ue(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var je=(Object.freeze||Object)({parse:Be,lift:He,toHex:Ve,fastLerp:We,fastMapToColor:We,lerp:Xe,mapToColor:Xe,modifyHSL:Ye,modifyAlpha:Ge,stringify:Ue}),qe=Array.prototype.slice;function Ze(t,e){return t[e]}function $e(t,e,n){t[e]=n}function Ke(t,e,n){return(e-t)*n+t}function Je(t,e,n){return.5<n?e:t}function Qe(t,e,n,i,r){var a=t.length;if(1===r)for(var o=0;o<a;o++)i[o]=Ke(t[o],e[o],n);else{var s=a&&t[0].length;for(o=0;o<a;o++)for(var l=0;l<s;l++)i[o][l]=Ke(t[o][l],e[o][l],n)}}function tn(t,e,n){var i=t.length,r=e.length;if(i!==r)if(r<i)t.length=r;else for(var a=i;a<r;a++)t.push(1===n?e[a]:qe.call(e[a]));var o=t[0]&&t[0].length;for(a=0;a<t.length;a++)if(1===n)isNaN(t[a])&&(t[a]=e[a]);else for(var s=0;s<o;s++)isNaN(t[a][s])&&(t[a][s]=e[a][s])}function en(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var r=0;r<i;r++)if(t[r]!==e[r])return!1}else{var a=t[0].length;for(r=0;r<i;r++)for(var o=0;o<a;o++)if(t[r][o]!==e[r][o])return!1}return!0}function nn(t,e,n,i,r,a,o,s,l){var c=t.length;if(1===l)for(var u=0;u<c;u++)s[u]=rn(t[u],e[u],n[u],i[u],r,a,o);else{var d=t[0].length;for(u=0;u<c;u++)for(var h=0;h<d;h++)s[u][h]=rn(t[u][h],e[u][h],n[u][h],i[u][h],r,a,o)}}function rn(t,e,n,i,r,a,o){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*o+(-3*(e-n)-2*s-l)*a+s*r+e}function an(t){if(A(t)){var e=t.length;if(A(t[0])){for(var n=[],i=0;i<e;i++)n.push(qe.call(t[i]));return n}return qe.call(t)}return t}function on(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function sn(t,e,n,i,r,a){var o=t._getter,s=t._setter,l="spline"===e,c=i.length;if(c){var u,d=A(i[0].value),h=!1,f=!1,g=d?function(t){var e=t[t.length-1].value;return A(e&&e[0])?2:1}(i):0;i.sort((function(t,e){return t.time-e.time})),u=i[c-1].time;for(var p=[],m=[],v=i[0].value,y=!0,x=0;x<c;x++){p.push(i[x].time/u);var b=i[x].value;if(d&&en(b,v,g)||!d&&b===v||(y=!1),"string"==typeof(v=b)){var w=Be(b);w?(b=w,h=!0):f=!0}m.push(b)}if(a||!y){var _=m[c-1];for(x=0;x<c-1;x++)d?tn(m[x],_,g):!isNaN(m[x])||isNaN(_)||f||h||(m[x]=_);d&&tn(o(t._target,r),_,g);var S,C,k,M,T,I=0,D=0;if(h)var P=[0,0,0,0];var L=new be({target:t._target,life:u,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<D){for(n=Math.min(I+1,c-1);0<=n&&!(p[n]<=e);n--);n=Math.min(n,c-2)}else{for(n=I;n<c&&!(p[n]>e);n++);n=Math.min(n-1,c-2)}D=e;var i=p[(I=n)+1]-p[n];if(0!=i)if(S=(e-p[n])/i,l)if(k=m[n],C=m[0===n?n:n-1],M=m[c-2<n?c-1:n+1],T=m[c-3<n?c-1:n+2],d)nn(C,k,M,T,S,S*S,S*S*S,o(t,r),g);else{if(h)a=nn(C,k,M,T,S,S*S,S*S*S,P,1),a=on(P);else{if(f)return Je(k,M,S);a=rn(C,k,M,T,S,S*S,S*S*S)}s(t,r,a)}else if(d)Qe(m[n],m[n+1],S,o(t,r),g);else{var a;if(h)Qe(m[n],m[n+1],S,P,1),a=on(P);else{if(f)return Je(m[n],m[n+1],S);a=Ke(m[n],m[n+1],S)}s(t,r,a)}},ondestroy:n});return e&&"spline"!==e&&(L.easing=e),L}}}function ln(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||Ze,this._setter=i||$e,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}ln.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&n[i].push({time:0,value:an(r)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){function n(){--a||r._doneCallback()}var i,r=this,a=0;for(var o in this._tracks)if(this._tracks.hasOwnProperty(o)){var s=sn(this,t,n,this._tracks[o],o,e);s&&(this._clipList.push(s),a++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(t,e){l(t,e);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](t,e)}}return a||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var cn=1;"undefined"!=typeof window&&(cn=Math.max(window.devicePixelRatio||1,1));var un=cn;function dn(){this.animators=[]}function hn(t,e,n,i,r,a,o,s){O(i)?(a=r,r=i,i=0):R(r)?(a=r,r="linear",i=0):R(i)?(a=i,i=0):n=R(n)?(a=n,500):n||500,t.stopAnimation(),function t(e,n,i,r,a,o,s){var l={},c=0;for(var u in r)r.hasOwnProperty(u)&&(null!=i[u]?z(r[u])&&!A(r[u])?t(e,n?n+"."+u:u,i[u],r[u],a,o,s):(s?(l[u]=i[u],fn(e,n,u,r[u])):l[u]=r[u],c++):null==r[u]||s||fn(e,n,u,r[u]));0<c&&e.animate(n,!1).when(null==a?500:a,l).delay(o||0)}(t,"",t,e,n,i,s);var l=t.animators.slice(),c=l.length;function u(){--c||a&&a()}c||a&&a();for(var d=0;d<l.length;d++)l[d].done(u).start(r,o)}function fn(t,e,n,i){if(e){var r={};r[e]={},r[e][n]=i,t.attr(r)}else t.attr(n,i)}dn.prototype={constructor:dn,animate:function(t,e){var n,i=!1,r=this,a=this.__zr;if(t){var o=t.split("."),s=r;i="shape"===o[0];for(var l=0,c=o.length;l<c;l++)s=s&&s[o[l]];s&&(n=s)}else n=r;if(n){var u=r.animators,d=new ln(n,e);return d.during((function(t){r.dirty(i)})).done((function(){u.splice(S(u,d),1)})),u.push(d),a&&a.animation.addAnimator(d),d}},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,r,a){hn(this,t,e,n,i,r,a)},animateFrom:function(t,e,n,i,r,a){hn(this,t,e,n,i,r,a,!0)}};var gn=function(t){ge.call(this,t),Mt.call(this,t),dn.call(this,t),this.id=t.id||i()};gn.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];(n=n||(this[t]=[]))[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(z(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},k(gn,dn),k(gn,ge),k(gn,Mt);var pn,mn,vn,yn,xn=bt,bn=Math.min,wn=Math.max;function _n(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}_n.prototype={constructor:_n,union:function(t){var e=bn(t.x,this.x),n=bn(t.y,this.y);this.width=wn(t.x+t.width,this.x+this.width)-e,this.height=wn(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(pn=[],mn=[],vn=[],yn=[],function(t){if(t){pn[0]=vn[0]=this.x,pn[1]=yn[1]=this.y,mn[0]=yn[0]=this.x+this.width,mn[1]=vn[1]=this.y+this.height,xn(pn,pn,t),xn(mn,mn,t),xn(vn,vn,t),xn(yn,yn,t),this.x=bn(pn[0],mn[0],vn[0],yn[0]),this.y=bn(pn[1],mn[1],vn[1],yn[1]);var e=wn(pn[0],mn[0],vn[0],yn[0]),n=wn(pn[1],mn[1],vn[1],yn[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,i=ne();return oe(i,i,[-this.x,-this.y]),le(i,i,[e,n]),oe(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof _n||(t=_n.create(t));var e=this;return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new _n(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},_n.create=function(t){return new _n(t.x,t.y,t.width,t.height)};var Sn=function(t){for(var e in gn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};function Cn(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&0<=i(t[r],t[r-1]);)r++;return r-e}function kn(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var a,o=t[i],s=e,l=i;s<l;)r(o,t[a=s+l>>>1])<0?l=a:s=1+a;var c=i-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<c;)t[s+c]=t[s+c-1],c--}t[s]=o}}function An(t,e,n,i,r,a){var o=0,s=0,l=1;if(0<a(t,e[n+r])){for(s=i-r;l<s&&0<a(t,e[n+r+l]);)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s),o+=r,l+=r}else{for(s=r+1;l<s&&a(t,e[n+r-l])<=0;)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=o;o=r-l,l=r-c}for(o++;o<l;){var u=o+(l-o>>>1);0<a(t,e[n+u])?o=u+1:l=u}return l}function Mn(t,e,n,i,r,a){var o=0,s=0,l=1;if(a(t,e[n+r])<0){for(s=r+1;l<s&&a(t,e[n+r-l])<0;)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=o;o=r-l,l=r-c}else{for(s=i-r;l<s&&0<=a(t,e[n+r+l]);)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s),o+=r,l+=r}for(o++;o<l;){var u=o+(l-o>>>1);a(t,e[n+u])<0?l=u:o=u+1}return l}function Tn(t,e){var n,i,r=7,a=0,o=[];function s(s){var l=n[s],c=i[s],u=n[s+1],d=i[s+1];i[s]=c+d,s===a-3&&(n[s+1]=n[s+2],i[s+1]=i[s+2]),a--;var h=Mn(t[u],t,l,c,0,e);l+=h,0!=(c-=h)&&0!==(d=An(t[l+c-1],t,u,d,d-1,e))&&(c<=d?function(n,i,a,s){var l=0;for(l=0;l<i;l++)o[l]=t[n+l];var c=0,u=a,d=n;if(t[d++]=t[u++],0!=--s){if(1===i){for(l=0;l<s;l++)t[d+l]=t[u+l];return t[d+s]=o[c]}for(var h,f,g,p=r;;){f=h=0,g=!1;do{if(e(t[u],o[c])<0){if(t[d++]=t[u++],f++,(h=0)==--s){g=!0;break}}else if(t[d++]=o[c++],h++,f=0,1==--i){g=!0;break}}while((h|f)<p);if(g)break;do{if(0!==(h=Mn(t[u],o,c,i,0,e))){for(l=0;l<h;l++)t[d+l]=o[c+l];if(d+=h,c+=h,(i-=h)<=1){g=!0;break}}if(t[d++]=t[u++],0==--s){g=!0;break}if(0!==(f=An(o[c],t,u,s,0,e))){for(l=0;l<f;l++)t[d+l]=t[u+l];if(d+=f,u+=f,0==(s-=f)){g=!0;break}}if(t[d++]=o[c++],1==--i){g=!0;break}p--}while(7<=h||7<=f);if(g)break;p<0&&(p=0),p+=2}if((r=p)<1&&(r=1),1===i){for(l=0;l<s;l++)t[d+l]=t[u+l];t[d+s]=o[c]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[d+l]=o[c+l]}}else for(l=0;l<i;l++)t[d+l]=o[c+l]}(l,c,u,d):function(n,i,a,s){var l=0;for(l=0;l<s;l++)o[l]=t[a+l];var c=n+i-1,u=s-1,d=a+s-1,h=0,f=0;if(t[d--]=t[c--],0!=--i){if(1===s){for(f=1+(d-=i),h=1+(c-=i),l=i-1;0<=l;l--)t[f+l]=t[h+l];return t[d]=o[u]}for(var g=r;;){var p=0,m=0,v=!1;do{if(e(o[u],t[c])<0){if(t[d--]=t[c--],p++,(m=0)==--i){v=!0;break}}else if(t[d--]=o[u--],m++,p=0,1==--s){v=!0;break}}while((p|m)<g);if(v)break;do{if(0!=(p=i-Mn(o[u],t,n,i,i-1,e))){for(i-=p,f=1+(d-=p),h=1+(c-=p),l=p-1;0<=l;l--)t[f+l]=t[h+l];if(0===i){v=!0;break}}if(t[d--]=o[u--],1==--s){v=!0;break}if(0!=(m=s-An(t[c],o,0,s,s-1,e))){for(s-=m,f=1+(d-=m),h=1+(u-=m),l=0;l<m;l++)t[f+l]=o[h+l];if(s<=1){v=!0;break}}if(t[d--]=t[c--],0==--i){v=!0;break}g--}while(7<=p||7<=m);if(v)break;g<0&&(g=0),g+=2}if((r=g)<1&&(r=1),1===s){for(f=1+(d-=i),h=1+(c-=i),l=i-1;0<=l;l--)t[f+l]=t[h+l];t[d]=o[u]}else{if(0===s)throw new Error;for(h=d-(s-1),l=0;l<s;l++)t[h+l]=o[l]}}else for(h=d-(s-1),l=0;l<s;l++)t[h+l]=o[l]}(l,c,u,d))}n=[],i=[],this.mergeRuns=function(){for(;1<a;){var t=a-2;if(1<=t&&i[t-1]<=i[t]+i[t+1]||2<=t&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;s(t)}},this.forceMergeRuns=function(){for(;1<a;){var t=a-2;0<t&&i[t-1]<i[t+1]&&t--,s(t)}},this.pushRun=function(t,e){n[a]=t,i[a]=e,a+=1}}function In(t,e,n,i){var r=(i=i||t.length)-(n=n||0);if(!(r<2)){var a=0;if(r<32)kn(t,n,i,n+(a=Cn(t,n,i,e)),e);else{var o=new Tn(t,e),s=function(t){for(var e=0;32<=t;)e|=1&t,t>>=1;return t+e}(r);do{if((a=Cn(t,n,i,e))<s){var l=r;s<l&&(l=s),kn(t,n,n+l,n+a,e),a=l}o.pushRun(n,a),o.mergeRuns(),r-=a,n+=a}while(0!==r);o.forceMergeRuns()}}}function Dn(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function Pn(){this._roots=[],this._displayList=[],this._displayListLen=0}Sn.prototype={constructor:Sn,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);0<=i&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Sn&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,r=S(i,t);return r<0||(i.splice(r,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof Sn&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof Sn&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++)t.call(e,n[i],i);return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof Sn&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof Sn&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new _n(0,0,0,0),i=t||this._children,r=[],a=0;a<i.length;a++){var o=i[a];if(!o.ignore&&!o.invisible){var s=o.getBoundingRect(),l=o.getLocalTransform(r);l?(n.copy(s),n.applyTransform(l),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},C(Sn,gn),Pn.prototype={constructor:Pn,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,a=e.length;i<a;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,r.canvasSupported&&In(n,Dn)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,a=t;r;)r.parent=a,r.updateTransform(),e.push(r),r=(a=r).clipPath}if(t.isGroup){for(var o=t._children,s=0;s<o.length;s++){var l=o[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof Sn&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof Sn&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var i=t.length;e<i;e++)this.delRoot(t[e])}else{var r=S(this._roots,t);0<=r&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof Sn&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Dn};var Ln={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},En=function(t,e,n){return Ln.hasOwnProperty(e)?n*t.dpr:n},Nn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Rn=function(t){this.extendFrom(t,!1)};function On(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,a=null==e.y?0:e.y,o=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,r=r*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,a=isNaN(a)?0:a,o=isNaN(o)?0:o,t.createLinearGradient(i,a,r,o)}function zn(t,e,n){var i=n.width,r=n.height,a=Math.min(i,r),o=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(o=o*i+n.x,s=s*r+n.y,l*=a),t.createRadialGradient(o,s,0,o,s,l)}for(var Bn=Rn.prototype={constructor:Rn,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,r=n&&n.style,a=!r||1!==t.__attrCachedBy;t.__attrCachedBy=1;for(var o=0;o<Nn.length;o++){var s=Nn[o],l=s[0];!a&&i[l]===r[l]||(t[l]=En(t,l,i[l]||s[1]))}!a&&i.fill===r.fill||(t.fillStyle=i.fill),!a&&i.stroke===r.stroke||(t.strokeStyle=i.stroke),!a&&i.opacity===r.opacity||(t.globalAlpha=null==i.opacity?1:i.opacity),!a&&i.blend===r.blend||(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(t.lineWidth=i.lineWidth/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1))},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?zn:On)(t,e,n),r=e.colorStops,a=0;a<r.length;a++)i.addColorStop(r[a].offset,r[a].color);return i}},Fn=0;Fn<Nn.length;Fn++){var Hn=Nn[Fn];Hn[0]in Bn||(Bn[Hn[0]]=Hn[1])}function Vn(t,e){this.image=t,this.repeat=e,this.type="pattern"}function Wn(){return!1}function Xn(t,e,n){var i=w(),r=e.getWidth(),a=e.getHeight(),o=i.style;return o&&(o.position="absolute",o.left=0,o.top=0,o.width=r+"px",o.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=a*n,i}function Yn(t,e,n){var i;n=n||un,"string"==typeof t?i=Xn(t,e,n):z(t)&&(t=(i=t).id),this.id=t;var r=(this.dom=i).style;r&&(i.onselectstart=Wn,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}Rn.getGradient=Bn.getGradient,Yn.prototype={constructor:Yn,__dirty:!0,__used:!(Vn.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=Xn("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,a=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,a&&(a.width=t*n,a.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,i=this.dom,r=this.ctx,a=i.width,o=i.height,s=(e=e||this.clearColor,this.motionBlur&&!t),l=this.lastFrameAlpha,c=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/c,o/c)),r.clearRect(0,0,a,o),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||Rn.getGradient(r,e,{x:0,y:0,width:a,height:o}),e.__canvasGradient=n):e.image&&(n=Vn.prototype.getCanvasPattern.call(e,r)),r.save(),r.fillStyle=n||e,r.fillRect(0,0,a,o),r.restore()),s){var u=this.domBack;r.save(),r.globalAlpha=l,r.drawImage(u,0,0,a,o),r.restore()}}};var Gn="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},Un=new Se(50);function jn(t){if("string"!=typeof t)return t;var e=Un.get(t);return e&&e.image}function qn(t,e,n,i,r){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!n)return e;var a=Un.get(t),o={hostEl:n,cb:i,cbPayload:r};return a?$n(e=a.image)||a.pending.push(o):((e=new Image).onload=e.onerror=Zn,Un.put(t,e.__cachedImgObj={image:e,pending:[o]}),e.src=e.__zrImageSrc=t),e}return e}function Zn(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function $n(t){return t&&t.width&&t.height}var Kn={},Jn=0,Qn=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,ti="12px sans-serif",ei={};function ni(t,e){var n=t+":"+(e=e||ti);if(Kn[n])return Kn[n];for(var i,r,a=(t+"").split("\n"),o=0,s=0,l=a.length;s<l;s++)o=Math.max((i=a[s],r=e,ei.measureText(i,r)).width,o);return 5e3<Jn&&(Jn=0,Kn={}),Jn++,Kn[n]=o}function ii(t,e,n,i,r,a,o,s){return o?function(t,e,n,i,r,a,o,s){var l=fi(t,{rich:o,truncate:s,font:e,textAlign:n,textPadding:r,textLineHeight:a}),c=l.outerWidth,u=l.outerHeight;return new _n(ri(0,c,n),ai(0,u,i),c,u)}(t,e,n,i,r,a,o,s):function(t,e,n,i,r,a,o){var s=hi(t,e,r,a,o),l=ni(t,e);r&&(l+=r[1]+r[3]);var c=s.outerHeight,u=new _n(ri(0,l,n),ai(0,c,i),l,c);return u.lineHeight=s.lineHeight,u}(t,e,n,i,r,a,s)}function ri(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function ai(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function oi(t,e,n){var i=e.textDistance,r=n.x,a=n.y;i=i||0;var o=n.height,s=n.width,l=o/2,c="left",u="top";switch(e.textPosition){case"left":r-=i,a+=l,c="right",u="middle";break;case"right":r+=i+s,a+=l,u="middle";break;case"top":r+=s/2,a-=i,c="center",u="bottom";break;case"bottom":r+=s/2,a+=o+i,c="center";break;case"inside":r+=s/2,a+=l,c="center",u="middle";break;case"insideLeft":r+=i,a+=l,u="middle";break;case"insideRight":r+=s-i,a+=l,c="right",u="middle";break;case"insideTop":r+=s/2,a+=i,c="center";break;case"insideBottom":r+=s/2,a+=o-i,c="center",u="bottom";break;case"insideTopLeft":r+=i,a+=i;break;case"insideTopRight":r+=s-i,a+=i,c="right";break;case"insideBottomLeft":r+=i,a+=o-i,u="bottom";break;case"insideBottomRight":r+=s-i,a+=o-i,c="right",u="bottom"}return(t=t||{}).x=r,t.y=a,t.textAlign=c,t.textVerticalAlign=u,t}function si(t,e,n,i,r){if(!e)return"";var a=(t+"").split("\n");r=li(e,n,i,r);for(var o=0,s=a.length;o<s;o++)a[o]=ci(a[o],r);return a.join("\n")}function li(t,e,n,i){(i=x({},i)).font=e,n=X(n,"..."),i.maxIterations=X(i.maxIterations,2);var r=i.minChar=X(i.minChar,0);i.cnCharWidth=ni("",e);var a=i.ascCharWidth=ni("a",e);i.placeholder=X(i.placeholder,"");for(var o=t=Math.max(0,t-1),s=0;s<r&&a<=o;s++)o-=a;var l=ni(n,e);return o<l&&(n="",l=0),o=t-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=o,i.containerWidth=t,i}function ci(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var a=ni(t,i);if(a<=n)return t;for(var o=0;;o++){if(a<=r||o>=e.maxIterations){t+=e.ellipsis;break}var s=0===o?ui(t,r,e.ascCharWidth,e.cnCharWidth):0<a?Math.floor(t.length*r/a):0;a=ni(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function ui(t,e,n,i){for(var r=0,a=0,o=t.length;a<o&&r<e;a++){var s=t.charCodeAt(a);r+=0<=s&&s<=127?n:i}return a}function di(t){return ni("",t)}function hi(t,e,n,i,r){null!=t&&(t+="");var a=X(i,di(e)),o=t?t.split("\n"):[],s=o.length*a,l=s,c=!0;if(n&&(l+=n[0]+n[2]),t&&r){c=!1;var u=r.outerHeight,d=r.outerWidth;if(null!=u&&u<l)t="",o=[];else if(null!=d)for(var h=li(d-(n?n[1]+n[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),f=0,g=o.length;f<g;f++)o[f]=ci(o[f],h)}return{lines:o,height:s,outerHeight:l,lineHeight:a,canCacheByTextString:c}}function fi(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,r=Qn.lastIndex=0;null!=(i=Qn.exec(t));){var a=i.index;r<a&&gi(n,t.substring(r,a)),gi(n,i[2],i[1]),r=Qn.lastIndex}r<t.length&&gi(n,t.substring(r,t.length));var o=n.lines,s=0,l=0,c=[],u=e.textPadding,d=e.truncate,h=d&&d.outerWidth,f=d&&d.outerHeight;u&&(null!=h&&(h-=u[1]+u[3]),null!=f&&(f-=u[0]+u[2]));for(var g=0;g<o.length;g++){for(var p=o[g],m=0,v=0,y=0;y<p.tokens.length;y++){var x=(I=p.tokens[y]).styleName&&e.rich[I.styleName]||{},b=I.textPadding=x.textPadding,w=I.font=x.font||e.font,_=I.textHeight=X(x.textHeight,di(w));if(b&&(_+=b[0]+b[2]),I.height=_,I.lineHeight=Y(x.textLineHeight,e.textLineHeight,_),I.textAlign=x&&x.textAlign||e.textAlign,I.textVerticalAlign=x&&x.textVerticalAlign||"middle",null!=f&&s+I.lineHeight>f)return{lines:[],width:0,height:0};I.textWidth=ni(I.text,w);var S=x.textWidth,C=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))I.percentWidth=S,c.push(I),S=0;else{if(C){S=I.textWidth;var k=x.textBackgroundColor,A=k&&k.image;A&&$n(A=jn(A))&&(S=Math.max(S,A.width*_/A.height))}var M=b?b[1]+b[3]:0;S+=M;var T=null!=h?h-v:null;null!=T&&T<S&&(!C||T<M?(I.text="",I.textWidth=S=0):(I.text=si(I.text,T-M,w,d.ellipsis,{minChar:d.minChar}),I.textWidth=ni(I.text,w),S=I.textWidth+M))}v+=I.width=S,x&&(m=Math.max(m,I.lineHeight))}p.width=v,s+=p.lineHeight=m,l=Math.max(l,v)}for(n.outerWidth=n.width=X(e.textWidth,l),n.outerHeight=n.height=X(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]),g=0;g<c.length;g++){var I,D=(I=c[g]).percentWidth;I.width=parseInt(D,10)/100*l}return n}function gi(t,e,n){for(var i=""===e,r=e.split("\n"),a=t.lines,o=0;o<r.length;o++){var s=r[o],l={styleName:n,text:s,isLineHolder:!s&&!i};if(o)a.push({tokens:[l]});else{var c=(a[a.length-1]||(a[0]={tokens:[]})).tokens,u=c.length;1===u&&c[0].isLineHolder?c[0]=l:!s&&u&&!i||c.push(l)}}}function pi(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&q(e)||t.textFont||t.font}function mi(t,e){var n,i,r,a,o,s=e.x,l=e.y,c=e.width,u=e.height,d=e.r;c<0&&(s+=c,c=-c),u<0&&(l+=u,u=-u),"number"==typeof d?n=i=r=a=d:d instanceof Array?1===d.length?n=i=r=a=d[0]:2===d.length?(n=r=d[0],i=a=d[1]):3===d.length?(n=d[0],i=a=d[1],r=d[2]):(n=d[0],i=d[1],r=d[2],a=d[3]):n=i=r=a=0,c<n+i&&(n*=c/(o=n+i),i*=c/o),c<r+a&&(r*=c/(o=r+a),a*=c/o),u<i+r&&(i*=u/(o=i+r),r*=u/o),u<n+a&&(n*=u/(o=n+a),a*=u/o),t.moveTo(s+n,l),t.lineTo(s+c-i,l),0!==i&&t.arc(s+c-i,l+i,i,-Math.PI/2,0),t.lineTo(s+c,l+u-r),0!==r&&t.arc(s+c-r,l+u-r,r,0,Math.PI/2),t.lineTo(s+a,l+u),0!==a&&t.arc(s+a,l+u-a,a,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}ei.measureText=function(t,e){var n=_();return n.font=e||ti,n.measureText(t)};var vi=ti,yi={left:1,right:1,center:1},xi={top:1,bottom:1,middle:1},bi=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],wi={},_i={};function Si(t){return Ci(t),M(t.rich,Ci),t}function Ci(t){if(t){t.font=pi(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||yi[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||xi[n]?n:"top",t.textPadding&&(t.textPadding=U(t.textPadding))}}function ki(t,e,n,i,r,a){i.rich?function(t,e,n,i,r,a){9!==a&&(e.__attrCachedBy=0);var o=t.__textCotentBlock;o&&!t.__dirtyText||(o=t.__textCotentBlock=fi(n,i)),function(t,e,n,i,r){var a=n.width,o=n.outerWidth,s=n.outerHeight,l=i.textPadding,c=Pi(_i,t,i,r),u=c.baseX,d=c.baseY,h=c.textAlign,f=c.textVerticalAlign;Ai(e,i,r,u,d);var g=ri(u,o,h),p=ai(d,s,f),m=g,v=p;l&&(m+=l[3],v+=l[0]);var y=m+a;Ti(i)&&Ii(t,e,i,g,p,o,s);for(var x=0;x<n.lines.length;x++){for(var b,w=n.lines[x],_=w.tokens,S=_.length,C=w.lineHeight,k=w.width,A=0,M=m,T=y,I=S-1;A<S&&(!(b=_[A]).textAlign||"left"===b.textAlign);)Mi(t,e,b,i,C,v,M,"left"),k-=b.width,M+=b.width,A++;for(;0<=I&&"right"===(b=_[I]).textAlign;)Mi(t,e,b,i,C,v,T,"right"),k-=b.width,T-=b.width,I--;for(M+=(a-(M-m)-(y-T)-k)/2;A<=I;)Mi(t,e,b=_[A],i,C,v,M+b.width/2,"center"),M+=b.width,A++;v+=C}}(t,e,o,i,r)}(t,e,n,i,r,a):function(t,e,n,i,r,a){var o,s=Ti(i),l=!1,c=2===e.__attrCachedBy;9!==a?(a&&(o=a.style,l=!s&&c&&o),e.__attrCachedBy=s?0:2):c&&(e.__attrCachedBy=0);var u=i.font||vi;l&&u===(o.font||vi)||(e.font=u);var d=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,d=t.__computedFont=e.font);var h=i.textPadding,f=t.__textCotentBlock;f&&!t.__dirtyText||(f=t.__textCotentBlock=hi(n,d,h,i.textLineHeight,i.truncate));var g=f.outerHeight,p=f.lines,m=f.lineHeight,v=Pi(_i,t,i,r),y=v.baseX,x=v.baseY,b=v.textAlign||"left",w=v.textVerticalAlign;Ai(e,i,r,y,x);var _=ai(x,g,w),S=y,C=_;if(s||h){var k=ni(n,d);h&&(k+=h[1]+h[3]);var A=ri(y,k,b);s&&Ii(t,e,i,A,_,k,g),h&&(S=Oi(y,b,h),C+=h[0])}e.textAlign=b,e.textBaseline="middle",e.globalAlpha=i.opacity||1;for(var M=0;M<bi.length;M++){var T=bi[M],I=T[0],D=T[1],P=i[I];l&&P===o[I]||(e[D]=En(e,D,P||T[2]))}C+=m/2;var L=i.textStrokeWidth,E=!l||L!==(l?o.textStrokeWidth:null),N=!l||E||i.textStroke!==o.textStroke,R=Ei(i.textStroke,L),O=Ni(i.textFill);if(R&&(E&&(e.lineWidth=L),N&&(e.strokeStyle=R)),O&&(l&&i.textFill===o.textFill||(e.fillStyle=O)),1===p.length)R&&e.strokeText(p[0],S,C),O&&e.fillText(p[0],S,C);else for(M=0;M<p.length;M++)R&&e.strokeText(p[M],S,C),O&&e.fillText(p[M],S,C),C+=m}(t,e,n,i,r,a)}function Ai(t,e,n,i,r){if(n&&e.textRotation){var a=e.textOrigin;"center"===a?(i=n.width/2+n.x,r=n.height/2+n.y):a&&(i=a[0]+n.x,r=a[1]+n.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r)}}function Mi(t,e,n,i,r,a,o,s){var l=i.rich[n.styleName]||{};l.text=n.text;var c=n.textVerticalAlign,u=a+r/2;"top"===c?u=a+n.height/2:"bottom"===c&&(u=a+r-n.height/2),!n.isLineHolder&&Ti(l)&&Ii(t,e,l,"right"===s?o-n.width:"center"===s?o-n.width/2:o,u-n.height/2,n.width,n.height);var d=n.textPadding;d&&(o=Oi(o,s,d),u-=n.height/2-d[2]-n.textHeight/2),Li(e,"shadowBlur",Y(l.textShadowBlur,i.textShadowBlur,0)),Li(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),Li(e,"shadowOffsetX",Y(l.textShadowOffsetX,i.textShadowOffsetX,0)),Li(e,"shadowOffsetY",Y(l.textShadowOffsetY,i.textShadowOffsetY,0)),Li(e,"textAlign",s),Li(e,"textBaseline","middle"),Li(e,"font",n.font||vi);var h=Ei(l.textStroke||i.textStroke,g),f=Ni(l.textFill||i.textFill),g=X(l.textStrokeWidth,i.textStrokeWidth);h&&(Li(e,"lineWidth",g),Li(e,"strokeStyle",h),e.strokeText(n.text,o,u)),f&&(Li(e,"fillStyle",f),e.fillText(n.text,o,u))}function Ti(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Ii(t,e,n,i,r,a,o){var s=n.textBackgroundColor,l=n.textBorderWidth,c=n.textBorderColor,u=O(s);if(Li(e,"shadowBlur",n.textBoxShadowBlur||0),Li(e,"shadowColor",n.textBoxShadowColor||"transparent"),Li(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),Li(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),u||l&&c){e.beginPath();var d=n.textBorderRadius;d?mi(e,{x:i,y:r,width:a,height:o,r:d}):e.rect(i,r,a,o),e.closePath()}if(u)if(Li(e,"fillStyle",s),null!=n.fillOpacity){var h=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=h}else e.fill();else if(z(s)){var f=s.image;(f=qn(f,null,t,Di,s))&&$n(f)&&e.drawImage(f,i,r,a,o)}l&&c&&(Li(e,"lineWidth",l),Li(e,"strokeStyle",c),null!=n.strokeOpacity?(h=e.globalAlpha,e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=h):e.stroke())}function Di(t,e){e.image=t}function Pi(t,e,n,i){var r=n.x||0,a=n.y||0,o=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)r=i.x+Ri(l[0],i.width),a=i.y+Ri(l[1],i.height);else{var c=e&&e.calculateTextPosition?e.calculateTextPosition(wi,n,i):oi(wi,n,i);r=c.x,a=c.y,o=o||c.textAlign,s=s||c.textVerticalAlign}var u=n.textOffset;u&&(r+=u[0],a+=u[1])}return(t=t||{}).baseX=r,t.baseY=a,t.textAlign=o,t.textVerticalAlign=s,t}function Li(t,e,n){return t[e]=En(t,e,n),t[e]}function Ei(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ni(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ri(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function Oi(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function zi(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function Bi(){}var Fi=new _n;function Hi(t){for(var e in gn.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Rn(t.style,this),this._rect=null,this.__clipPaths=null}function Vi(t){Hi.call(this,t)}Hi.prototype={constructor:Hi,type:"displayable",__dirty:!0,invisible:!(Bi.prototype={constructor:Bi,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Si(n);var i=n.text;if(null!=i&&(i+=""),zi(i,n)){t.save();var r=this.transform;n.transformText?this.setTransform(t):r&&(Fi.copy(e),Fi.applyTransform(r),e=Fi),ki(this,t,i,n,e,9),t.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?gn.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Rn(t,this),this.dirty(!1),this},calculateTextPosition:null},C(Hi,gn),k(Hi,Bi),Vi.prototype={constructor:Vi,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var r=this._image=qn(i,this._image,this,this.onload);if(r&&$n(r)){var a=n.x||0,o=n.y||0,s=n.width,l=n.height,c=r.width/r.height;if(null==s&&null!=l?s=l*c:null==l&&null!=s?l=s/c:null==s&&null==l&&(s=r.width,l=r.height),this.setTransform(t),n.sWidth&&n.sHeight){var u=n.sx||0,d=n.sy||0;t.drawImage(r,u,d,n.sWidth,n.sHeight,a,o,s,l)}else if(n.sx&&n.sy){var h=s-(u=n.sx),f=l-(d=n.sy);t.drawImage(r,u,d,h,f,a,o,s,l)}else t.drawImage(r,a,o,s,l);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new _n(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},C(Vi,Hi);var Wi=314159;function Xi(t){return parseInt(t,10)}var Yi=new _n(0,0,0,0),Gi=new _n(0,0,0,0);function Ui(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=x({},n||{}),this.dpr=n.devicePixelRatio||un,this._singleCanvas=i;var r=(this.root=t).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var a=this._zlevelList=[],o=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=t.width,l=t.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=l*this.dpr,this._width=s,this._height=l;var c=new Yn(t,this,this.dpr);c.__builtin__=!0,c.initContext(),(o[Wi]=c).zlevel=Wi,a.push(Wi),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var u=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(u)}this._hoverlayer=null,this._hoverElements=[]}function ji(t){this.stage=(t=t||{}).stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,Mt.call(this)}Ui.prototype={constructor:Ui,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var r=this._layers[n[i]];!r.__builtin__&&r.refresh&&r.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return(n.__from=t).__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=this._hoverElements,n=S(e,t.__hoverMir);0<=n&&e.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){In(t,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var r=0;r<e;){var a=t[r],o=a.__from;o&&o.__zr?(r++,o.invisible||(a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,n,!0,i))):(t.splice(r,1),o.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var r=this;Gn((function(){r._paintList(t,e,n)}))}}},_compositeManually:function(){var t=this.getLayer(Wi).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)}))},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++)(s=this._layers[this._zlevelList[i]]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s);for(var a=!0,o=0;o<n.length;o++){var s,l=(s=n[o]).ctx,c={};l.save();var u=e?s.__startIndex:s.__drawIndex,d=!e&&s.incremental&&Date.now,h=d&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(u===s.__startIndex){var g=t[u];g.incremental&&g.notClear&&!e||s.clear(!1,f)}-1===u&&(console.error("For some unknown reason. drawIndex is -1"),u=s.__startIndex);for(var p=u;p<s.__endIndex;p++){var m=t[p];if(this._doPaintEl(m,s,e,c),m.__dirty=m.__dirtyText=!1,d&&15<Date.now()-h)break}s.__drawIndex=p,s.__drawIndex<s.__endIndex&&(a=!1),c.prevElClipPaths&&l.restore(),l.restore()}return r.wxa&&M(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),a},_doPaintEl:function(t,e,n,i){var r=e.ctx,a=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!a||a[0]||a[3])&&(!t.culling||!function(t,e,n){return Yi.copy(t.getBoundingRect()),t.transform&&Yi.applyTransform(t.transform),Gi.width=e,Gi.height=n,!Yi.intersect(Gi)}(t,this._width,this._height))){var o=t.__clipPaths,s=i.prevElClipPaths;s&&!function(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(o,s)||(s&&(r.restore(),i.prevElClipPaths=null,i.prevEl=null),o&&(r.save(),function(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(o,r),i.prevElClipPaths=o)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,i.prevEl||null),(i.prevEl=t).afterBrush&&t.afterBrush(r)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Wi);var n=this._layers[t];return n||((n=new Yn("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&v(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,r=i.length,a=null,o=-1,s=this._domRoot;if(n[t]);else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(0<r&&t>i[0]){for(o=0;o<r-1&&!(i[o]<t&&i[o+1]>t);o++);a=n[i[o]]}if(i.splice(o+1,0,t),!(n[t]=e).virtual)if(a){var l=a.dom;l.nextSibling?s.insertBefore(e.dom,l.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}},eachLayer:function(t,e){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)t.call(e,this._layers[n=r[i]],n)},eachBuiltinLayer:function(t,e){var n,i,r,a=this._zlevelList;for(r=0;r<a.length;r++)(n=this._layers[i=a[r]]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,r,a=this._zlevelList;for(r=0;r<a.length;r++)(n=this._layers[i=a[r]]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){i&&(i.__endIndex!==t&&(i.__dirty=!0),i.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++)if((a=t[n]).zlevel!==t[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var i=null,r=0;for(n=0;n<t.length;n++){var a,o,s=(a=t[n]).zlevel;a.incremental?((o=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,r=1):o=this.getLayer(s+(0<r?.01:0),this._needsManuallyCompositing),o!==i&&(o.__used=!0,o.__startIndex!==n&&(o.__dirty=!0),o.__startIndex=n,o.__drawIndex=o.incremental?-1:n,e(n),i=o),a.__dirty&&(o.__dirty=!0,o.incremental&&o.__drawIndex<0&&(o.__drawIndex=n))}e(n),this.eachBuiltinLayer((function(t,e){!t.__used&&0<t.getElementCount()&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?v(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];r!==t&&r!==t+.01||v(this._layers[r],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(S(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var r in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);M(this._progressiveLayers,(function(n){n.resize(t,e)})),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Wi).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[Wi].dom;var e=new Yn("image",this,(t=t||{}).pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,r=e.ctx;this.eachLayer((function(t){t.__builtin__?r.drawImage(t.dom,0,0,n,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())}))}else for(var a={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++)this._doPaintEl(o[s],e,!0,a);return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[i]||Xi(s[n])||Xi(o.style[n]))-(Xi(s[r])||0)-(Xi(s[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),a=t.style,o=a.shadowBlur*e,s=a.shadowOffsetX*e,l=a.shadowOffsetY*e,c=a.hasStroke()?a.lineWidth:0,u=Math.max(c/2,o-s),d=Math.max(c/2,s+o),h=Math.max(c/2,o-l),f=Math.max(c/2,l+o),g=r.width+u+d,p=r.height+h+f;n.width=g*e,n.height=p*e,i.scale(e,e),i.clearRect(0,0,g,p),i.dpr=e;var m={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-r.x,h-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var v=new Vi({style:{x:0,y:0,image:n}});return null!=m.position&&(v.position=t.position=m.position),null!=m.rotation&&(v.rotation=t.rotation=m.rotation),null!=m.scale&&(v.scale=t.scale=m.scale),v}},ji.prototype={constructor:ji,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=S(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,r=[],a=[],o=0;o<i;o++){var s=n[o],l=s.step(t,e);l&&(r.push(l),a.push(s))}for(o=0;o<i;)n[o]._needsRemove?(n[o]=n[i-1],n.pop(),i--):o++;for(i=r.length,o=0;o<i;o++)a[o].fire(r[o]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,Gn((function e(){t._running&&(Gn(e),t._paused||t._update())}))},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new ln(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},k(ji,Mt);var qi,Zi,$i=r.domSupported,Ki=(Zi={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:qi=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:T(qi,(function(t){var e=t.replace("mouse","pointer");return Zi.hasOwnProperty(e)?e:t}))}),Ji=["mousemove","mouseup"],Qi=["pointermove","pointerup"];function tr(t){return"mousewheel"===t&&r.browser.firefox?"DOMMouseScroll":t}function er(t){var e=t.pointerType;return"pen"===e||"touch"===e}function nr(t){t&&(t.zrByTouch=!0)}function ir(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}function rr(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var ar=rr.prototype;ar.stopPropagation=ar.stopImmediatePropagation=ar.preventDefault=et;var or={mousedown:function(t){t=Wt(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Wt(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||ur(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=Wt(this.dom,t),ur(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=Wt(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout"),t.zrIsToLocalDOM=ir(this,t.toElement||t.relatedTarget),this.trigger("mouseout",t)},touchstart:function(t){nr(t=Wt(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),or.mousemove.call(this,t),or.mousedown.call(this,t)},touchmove:function(t){nr(t=Wt(this.dom,t)),this.handler.processGesture(t,"change"),or.mousemove.call(this,t)},touchend:function(t){nr(t=Wt(this.dom,t)),this.handler.processGesture(t,"end"),or.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&or.click.call(this,t)},pointerdown:function(t){or.mousedown.call(this,t)},pointermove:function(t){er(t)||or.mousemove.call(this,t)},pointerup:function(t){or.mouseup.call(this,t)},pointerout:function(t){er(t)||or.mouseout.call(this,t)}};M(["click","mousewheel","dblclick","contextmenu"],(function(t){or[t]=function(e){e=Wt(this.dom,e),this.trigger(t,e)}}));var sr={pointermove:function(t){er(t)||sr.mousemove.call(this,t)},pointerup:function(t){sr.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;ur(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function lr(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,Xt(t.domTarget,tr(e),n,i)}function cr(t){var e,n,i,r=t.mounted;for(var a in r)r.hasOwnProperty(a)&&(e=t.domTarget,n=tr(a),i=r[a],Ot?e.removeEventListener(n,i,t.listenerOpts[a]):e.detachEvent("on"+n,i));t.mounted={}}function ur(t,e){if(t._mayPointerCapture=null,$i&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?function(t,e){function n(n){lr(e,n,(function(i){i=Vt(i),ir(t,i.target)||(i=function(t,e){return Wt(t.dom,new rr(t,e),!0)}(t,i),e.domHandlers[n].call(t,i))}),{capture:!0})}r.pointerEventsSupported?M(Qi,n):r.touchEventsSupported||M(Ji,n)}(t,n):cr(n)}}function dr(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function hr(t,e){Mt.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new dr(t,or),$i&&(this._globalHandlerScope=new dr(document,sr)),this._pointerCapturing=!1,this._mayPointerCapture=null,function(t,e){var n=e.domHandlers;r.pointerEventsSupported?M(Ki.pointer,(function(i){lr(e,i,(function(e){n[i].call(t,e)}))})):(r.touchEventsSupported&&M(Ki.touch,(function(i){lr(e,i,(function(r){n[i].call(t,r),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),M(Ki.mouse,(function(i){lr(e,i,(function(r){r=Vt(r),e.touching||n[i].call(t,r)}))})))}(this,this._localHandlerScope)}var fr=hr.prototype;fr.dispose=function(){cr(this._localHandlerScope),$i&&cr(this._globalHandlerScope)},fr.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},k(hr,Mt);var gr=!r.canvasSupported,pr={canvas:Ui},mr={};function vr(t,e){var n=new xr(i(),t,e);return mr[n.id]=n}function yr(t,e){pr[t]=e}var xr=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,a=new Pn,o=n.renderer;if(gr){if(!pr.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&pr[o]||(o="canvas");var s=new pr[o](e,a,n,t);this.storage=a,this.painter=s;var l=r.node||r.worker?null:new hr(s.getViewportRoot(),s.root);this.handler=new Kt(a,s,l,s.root),this.animation=new ji({stage:{update:L(this.flush,this)}}),this.animation.start();var c=a.delFromStorage,u=a.addToStorage;a.delFromStorage=function(t){c.call(a,t),t&&t.removeSelfFromZr(i)},a.addToStorage=function(t){u.call(a,t),t.addSelfToZr(i)}};xr.prototype={constructor:xr,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete mr[t]}(this.id)}};var br=(Object.freeze||Object)({version:"4.3.0",init:vr,dispose:function(t){if(t)t.dispose();else{for(var e in mr)mr.hasOwnProperty(e)&&mr[e].dispose();mr={}}return this},getInstance:function(t){return mr[t]},registerPainter:yr}),wr=M,_r=z,Sr=N,Cr="series\0";function kr(t){return t instanceof Array?t:null==t?[]:[t]}function Ar(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var a=n[i];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var Mr=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Tr(t){return!_r(t)||Sr(t)||t instanceof Date?t:t.value}function Ir(t,e){e=(e||[]).slice();var n=T(t||[],(function(t,e){return{exist:t}}));return wr(e,(function(t,i){if(_r(t)){for(var r=0;r<n.length;r++)if(!n[r].option&&null!=t.id&&n[r].exist.id===t.id+"")return n[r].option=t,void(e[i]=null);for(r=0;r<n.length;r++){var a=n[r].exist;if(!(n[r].option||null!=a.id&&null!=t.id||null==t.name||Lr(t)||Lr(a)||a.name!==t.name+""))return n[r].option=t,void(e[i]=null)}}})),wr(e,(function(t,e){if(_r(t)){for(var i=0;i<n.length;i++)if(!n[i].option&&!Lr(n[i].exist)&&null==t.id){n[i].option=t;break}i>=n.length&&n.push({option:t})}})),n}function Dr(t){var e=Q();wr(t,(function(t,n){var i=t.exist;i&&e.set(i.id,t)})),wr(t,(function(t,n){var i=t.option;j(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),t.keyInfo||(t.keyInfo={})})),wr(t,(function(t,n){var i=t.exist,r=t.option,a=t.keyInfo;if(_r(r)){if(a.name=null!=r.name?r.name+"":i?i.name:Cr+n,i)a.id=i.id;else if(null!=r.id)a.id=r.id+"";else for(var o=0;a.id="\0"+a.name+"\0"+o++,e.get(a.id););e.set(a.id,t)}}))}function Pr(t){var e=t.name;return!(!e||!e.indexOf(Cr))}function Lr(t){return _r(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function Er(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?N(e.dataIndex)?T(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?N(e.name)?T(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}function Nr(){var t="__\0ec_inner_"+Rr+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var Rr=0;function Or(t,e,n){if(O(e)){var i={};i[e+"Index"]=0,e=i}var r=n&&n.defaultMainType;!r||zr(e,r+"Index")||zr(e,r+"Id")||zr(e,r+"Name")||(e[r+"Index"]=0);var a={};return wr(e,(function(i,r){if(i=e[r],"dataIndex"!==r&&"dataIndexInside"!==r){var o=r.match(/^(\w+)(Index|Id|Name)$/)||[],s=o[1],l=(o[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&S(n.includeMainTypes,s)<0)){var c={mainType:s};"index"===l&&"all"===i||(c[l]=i);var u=t.queryComponents(c);a[s+"Models"]=u,a[s+"Model"]=u[0]}}else a[r]=i})),a}function zr(t,e){return t&&t.hasOwnProperty(e)}function Br(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function Fr(t){return"auto"===t?r.domSupported?"html":"richText":t||"html"}function Hr(t,e){var n=Q(),i=[];return M(t,(function(t){var r=e(t);(n.get(r)||(i.push(r),n.set(r,[]))).push(t)})),{keys:i,buckets:n}}var Vr="___EC__COMPONENT__CONTAINER___";function Wr(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e}function Xr(t){(t.$constructor=t).extend=function(t){function e(){t.$constructor?t.$constructor.apply(this,arguments):n.apply(this,arguments)}var n=this;return x(e.prototype,t),e.extend=this.extend,e.superCall=Ur,e.superApply=jr,C(e,this),e.superClass=n,e}}var Yr=0;function Gr(t){var e=["__\0is_clz",Yr++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function Ur(t,e){var n=G(arguments,2);return this.superClass.prototype[e].apply(t,n)}function jr(t,e,n){return this.superClass.prototype[e].apply(t,n)}function qr(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){return e&&(function(t){j(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=Wr(e)).sub?e.sub!==Vr&&((function(t){var e=n[t.main];return e&&e[Vr]||((e=n[t.main]={})[Vr]=!0),e}(e))[e.sub]=t):n[e.main]=t),t},t.getClass=function(t,e,i){var r=n[t];if(r&&r[Vr]&&(r=e?r[e]:null),i&&!r)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){t=Wr(t);var e=[],i=n[t.main];return i&&i[Vr]?M(i,(function(t,n){n!==Vr&&e.push(t)})):e.push(i),e},t.hasClass=function(t){return t=Wr(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return M(n,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){t=Wr(t);var e=n[t.main];return e&&e[Vr]},t.parseClassType=Wr,e.registerWhenExtend){var i=t.extend;i&&(t.extend=function(e){var n=i.call(this,e);return t.registerClass(n,e.type)})}return t}function Zr(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,i){for(var r={},a=0;a<t.length;a++){var o=t[a][1];if(!(n&&0<=S(n,o)||i&&S(i,o)<0)){var s=e.getShallow(o);null!=s&&(r[t[a][0]]=s)}}return r}}var $r=Zr([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Kr={getLineStyle:function(t){var e=$r(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[i,i]:[n,n])}},Jr=Zr([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Qr={getAreaStyle:function(t,e){return Jr(this,t,e)}},ta=Math.pow,ea=Math.sqrt,na=ea(3),ia=rt(),ra=rt(),aa=rt();function oa(t){return-1e-8<t&&t<1e-8}function sa(t){return 1e-8<t||t<-1e-8}function la(t,e,n,i,r){var a=1-r;return a*a*(a*t+3*r*e)+r*r*(r*i+3*a*n)}function ca(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)}function ua(t,e,n,i,r){var a=6*n-12*e+6*t,o=9*e+3*i-3*t-9*n,s=3*e-3*t,l=0;if(oa(o))sa(a)&&0<=(u=-s/a)&&u<=1&&(r[l++]=u);else{var c=a*a-4*o*s;if(oa(c))r[0]=-a/(2*o);else if(0<c){var u,d=ea(c),h=(-a-d)/(2*o);0<=(u=(-a+d)/(2*o))&&u<=1&&(r[l++]=u),0<=h&&h<=1&&(r[l++]=h)}}return l}function da(t,e,n,i,r,a){var o=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,c=(s-o)*r+o,u=(l-s)*r+s,d=(u-c)*r+c;a[0]=t,a[1]=o,a[2]=c,a[3]=d,a[4]=d,a[5]=u,a[6]=l,a[7]=i}function ha(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function fa(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function ga(t,e,n){var i=t+n-2*e;return 0==i?.5:(t-e)/i}function pa(t,e,n,i,r){var a=(e-t)*i+t,o=(n-e)*i+e,s=(o-a)*i+a;r[0]=t,r[1]=a,r[2]=s,r[3]=s,r[4]=o,r[5]=n}var ma=Math.min,va=Math.max,ya=Math.sin,xa=Math.cos,ba=2*Math.PI,wa=rt(),_a=rt(),Sa=rt();function Ca(t,e,n){if(0!==t.length){var i,r=t[0],a=r[0],o=r[0],s=r[1],l=r[1];for(i=1;i<t.length;i++)a=ma(a,(r=t[i])[0]),o=va(o,r[0]),s=ma(s,r[1]),l=va(l,r[1]);e[0]=a,e[1]=s,n[0]=o,n[1]=l}}function ka(t,e,n,i,r,a){r[0]=ma(t,n),r[1]=ma(e,i),a[0]=va(t,n),a[1]=va(e,i)}var Aa=[],Ma=[];function Ta(t,e,n,i,r,a,o,s,l,c){var u,d=ua,h=la,f=d(t,n,r,o,Aa);for(l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0,u=0;u<f;u++){var g=h(t,n,r,o,Aa[u]);l[0]=ma(g,l[0]),c[0]=va(g,c[0])}for(f=d(e,i,a,s,Ma),u=0;u<f;u++){var p=h(e,i,a,s,Ma[u]);l[1]=ma(p,l[1]),c[1]=va(p,c[1])}l[0]=ma(t,l[0]),c[0]=va(t,c[0]),l[0]=ma(o,l[0]),c[0]=va(o,c[0]),l[1]=ma(e,l[1]),c[1]=va(e,c[1]),l[1]=ma(s,l[1]),c[1]=va(s,c[1])}function Ia(t,e,n,i,r,a,o,s,l){var c=wt,u=_t,d=Math.abs(r-a);if(d%ba<1e-4&&1e-4<d)return s[0]=t-n,s[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(wa[0]=xa(r)*n+t,wa[1]=ya(r)*i+e,_a[0]=xa(a)*n+t,_a[1]=ya(a)*i+e,c(s,wa,_a),u(l,wa,_a),(r%=ba)<0&&(r+=ba),(a%=ba)<0&&(a+=ba),a<r&&!o?a+=ba:r<a&&o&&(r+=ba),o){var h=a;a=r,r=h}for(var f=0;f<a;f+=Math.PI/2)r<f&&(Sa[0]=xa(f)*n+t,Sa[1]=ya(f)*i+e,c(s,Sa,s),u(l,Sa,l))}var Da={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Pa=[],La=[],Ea=[],Na=[],Ra=Math.min,Oa=Math.max,za=Math.cos,Ba=Math.sin,Fa=Math.sqrt,Ha=Math.abs,Va="undefined"!=typeof Float32Array,Wa=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};function Xa(t,e,n,i,r,a,o){if(0===r)return!1;var s,l=r;if(e+l<o&&i+l<o||o<e-l&&o<i-l||t+l<a&&n+l<a||a<t-l&&a<n-l)return!1;if(t===n)return Math.abs(a-t)<=l/2;var c=(s=(e-i)/(t-n))*a-o+(t*i-n*e)/(t-n);return c*c/(s*s+1)<=l/2*l/2}function Ya(t,e,n,i,r,a,o,s,l,c,u){if(0===l)return!1;var d=l;return!(e+d<u&&i+d<u&&a+d<u&&s+d<u||u<e-d&&u<i-d&&u<a-d&&u<s-d||t+d<c&&n+d<c&&r+d<c&&o+d<c||c<t-d&&c<n-d&&c<r-d&&c<o-d)&&function(t,e,n,i,r,a,o,s,l,c,u){var d,h,f,g,p,m=.005,v=1/0;ia[0]=l,ia[1]=c;for(var y=0;y<1;y+=.05)ra[0]=la(t,n,r,o,y),ra[1]=la(e,i,a,s,y),(g=yt(ia,ra))<v&&(d=y,v=g);v=1/0;for(var x=0;x<32&&!(m<1e-4);x++)f=d+m,ra[0]=la(t,n,r,o,h=d-m),ra[1]=la(e,i,a,s,h),g=yt(ra,ia),0<=h&&g<v?(d=h,v=g):(aa[0]=la(t,n,r,o,f),aa[1]=la(e,i,a,s,f),p=yt(aa,ia),f<=1&&p<v?(d=f,v=p):m*=.5);return ea(v)}(t,e,n,i,r,a,o,s,c,u)<=d/2}function Ga(t,e,n,i,r,a,o,s,l){if(0===o)return!1;var c=o;return!(e+c<l&&i+c<l&&a+c<l||l<e-c&&l<i-c&&l<a-c||t+c<s&&n+c<s&&r+c<s||s<t-c&&s<n-c&&s<r-c)&&function(t,e,n,i,r,a,o,s,l){var c,u=.005,d=1/0;ia[0]=o,ia[1]=s;for(var h=0;h<1;h+=.05)ra[0]=ha(t,n,r,h),ra[1]=ha(e,i,a,h),(m=yt(ia,ra))<d&&(c=h,d=m);d=1/0;for(var f=0;f<32&&!(u<1e-4);f++){var g=c-u,p=c+u;ra[0]=ha(t,n,r,g),ra[1]=ha(e,i,a,g);var m=yt(ra,ia);if(0<=g&&m<d)c=g,d=m;else{aa[0]=ha(t,n,r,p),aa[1]=ha(e,i,a,p);var v=yt(aa,ia);p<=1&&v<d?(c=p,d=v):u*=.5}}return ea(d)}(t,e,n,i,r,a,s,l)<=c/2}Wa.prototype={constructor:Wa,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){this._ux=Ha((n=n||0)/un/t)||0,this._uy=Ha(n/un/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(Da.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=Ha(t-this._xi)>this._ux||Ha(e-this._yi)>this._uy||this._len<5;return this.addData(Da.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,r,a){return this.addData(Da.C,t,e,n,i,r,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,a):this._ctx.bezierCurveTo(t,e,n,i,r,a)),this._xi=r,this._yi=a,this},quadraticCurveTo:function(t,e,n,i){return this.addData(Da.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,a){return this.addData(Da.A,t,e,n,n,i,r-i,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,a),this._xi=za(r)*n+t,this._yi=Ba(r)*n+e,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(Da.R,t,e,n,i),this},closePath:function(){this.addData(Da.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!Va||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();for(Va&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),r=0;r<e;r++)for(var a=t[r].data,o=0;o<a.length;o++)this.data[i++]=a[o];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,l=this._xi,c=this._yi,u=t-l,d=e-c,h=Fa(u*u+d*d),f=l,g=c,p=o.length;for(a<0&&(a=r+a),f-=(a%=r)*(u/=h),g-=a*(d/=h);0<u&&f<=t||u<0&&t<=f||0===u&&(0<d&&g<=e||d<0&&e<=g);)f+=u*(n=o[i=this._dashIdx]),g+=d*n,this._dashIdx=(i+1)%p,0<u&&f<l||u<0&&l<f||0<d&&g<c||d<0&&c<g||s[i%2?"moveTo":"lineTo"](0<=u?Ra(f,t):Oa(f,t),0<=d?Ra(g,e):Oa(g,e));this._dashOffset=-Fa((u=f-t)*u+(d=g-e)*d)},_dashedBezierTo:function(t,e,n,i,r,a){var o,s,l,c,u,d=this._dashSum,h=this._dashOffset,f=this._lineDash,g=this._ctx,p=this._xi,m=this._yi,v=la,y=0,x=this._dashIdx,b=f.length,w=0;for(h<0&&(h=d+h),h%=d,o=0;o<1;o+=.1)s=v(p,t,n,r,o+.1)-v(p,t,n,r,o),l=v(m,e,i,a,o+.1)-v(m,e,i,a,o),y+=Fa(s*s+l*l);for(;x<b&&!(h<(w+=f[x]));x++);for(o=(w-h)/y;o<=1;)c=v(p,t,n,r,o),u=v(m,e,i,a,o),x%2?g.moveTo(c,u):g.lineTo(c,u),o+=f[x]/y,x=(x+1)%b;x%2!=0&&g.lineTo(r,a),this._dashOffset=-Fa((s=r-c)*s+(l=a-u)*l)},_dashedQuadraticTo:function(t,e,n,i){var r=n,a=i;n=(n+2*t)/3,i=(i+2*e)/3,this._dashedBezierTo(t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,n,i,r,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,Va&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Pa[0]=Pa[1]=Ea[0]=Ea[1]=Number.MAX_VALUE,La[0]=La[1]=Na[0]=Na[1]=-Number.MAX_VALUE;for(var t,e,n,i,r,a,o,s,l,c,u,d,h,f,g=this.data,p=0,m=0,v=0,y=0,x=0;x<g.length;){var b=g[x++];switch(1===x&&(v=p=g[x],y=m=g[x+1]),b){case Da.M:p=v=g[x++],m=y=g[x++],Ea[0]=v,Ea[1]=y,Na[0]=v,Na[1]=y;break;case Da.L:ka(p,m,g[x],g[x+1],Ea,Na),p=g[x++],m=g[x++];break;case Da.C:Ta(p,m,g[x++],g[x++],g[x++],g[x++],g[x],g[x+1],Ea,Na),p=g[x++],m=g[x++];break;case Da.Q:e=m,n=g[x++],i=g[x++],a=g[x+1],o=Ea,s=Na,c=l=void 0,c=ha,u=va(ma((l=ga)(t=p,n,r=g[x]),1),0),d=va(ma(l(e,i,a),1),0),h=c(t,n,r,u),f=c(e,i,a,d),o[0]=ma(t,r,h),o[1]=ma(e,a,f),s[0]=va(t,r,h),s[1]=va(e,a,f),p=g[x++],m=g[x++];break;case Da.A:var w=g[x++],_=g[x++],S=g[x++],C=g[x++],k=g[x++],A=g[x++]+k;x+=1;var M=1-g[x++];1===x&&(v=za(k)*S+w,y=Ba(k)*C+_),Ia(w,_,S,C,k,A,M,Ea,Na),p=za(A)*S+w,m=Ba(A)*C+_;break;case Da.R:ka(v=p=g[x++],y=m=g[x++],v+g[x++],y+g[x++],Ea,Na);break;case Da.Z:p=v,m=y}wt(Pa,Pa,Ea),_t(La,La,Na)}return 0===x&&(Pa[0]=Pa[1]=La[0]=La[1]=0),new _n(Pa[0],Pa[1],La[0]-Pa[0],La[1]-Pa[1])},rebuildPath:function(t){for(var e,n,i,r,a,o,s=this.data,l=this._ux,c=this._uy,u=this._len,d=0;d<u;){var h=s[d++];switch(1===d&&(e=i=s[d],n=r=s[d+1]),h){case Da.M:e=i=s[d++],n=r=s[d++],t.moveTo(i,r);break;case Da.L:a=s[d++],o=s[d++],(Ha(a-i)>l||Ha(o-r)>c||d===u-1)&&(t.lineTo(a,o),i=a,r=o);break;case Da.C:t.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),i=s[d-2],r=s[d-1];break;case Da.Q:t.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),i=s[d-2],r=s[d-1];break;case Da.A:var f=s[d++],g=s[d++],p=s[d++],m=s[d++],v=s[d++],y=s[d++],x=s[d++],b=s[d++],w=m<p?p:m,_=m<p?1:p/m,S=m<p?m/p:1,C=v+y;.001<Math.abs(p-m)?(t.translate(f,g),t.rotate(x),t.scale(_,S),t.arc(0,0,w,v,C,1-b),t.scale(1/_,1/S),t.rotate(-x),t.translate(-f,-g)):t.arc(f,g,w,v,C,1-b),1===d&&(e=za(v)*p+f,n=Ba(v)*m+g),i=za(C)*p+f,r=Ba(C)*m+g;break;case Da.R:e=i=s[d],n=r=s[d+1],t.rect(s[d++],s[d++],s[d++],s[d++]);break;case Da.Z:t.closePath(),i=e,r=n}}}},Wa.CMD=Da;var Ua=2*Math.PI;function ja(t){return(t%=Ua)<0&&(t+=Ua),t}var qa=2*Math.PI;function Za(t,e,n,i,r,a,o,s,l){if(0===o)return!1;var c=o;s-=t,l-=e;var u=Math.sqrt(s*s+l*l);if(n<u-c||u+c<n)return!1;if(Math.abs(i-r)%qa<1e-4)return!0;if(a){var d=i;i=ja(r),r=ja(d)}else i=ja(i),r=ja(r);r<i&&(r+=qa);var h=Math.atan2(l,s);return h<0&&(h+=qa),i<=h&&h<=r||i<=h+qa&&h+qa<=r}function $a(t,e,n,i,r,a){if(e<a&&i<a||a<e&&a<i)return 0;if(i===e)return 0;var o=i<e?1:-1,s=(a-e)/(i-e);1!=s&&0!=s||(o=i<e?.5:-.5);var l=s*(n-t)+t;return l===r?1/0:r<l?o:0}var Ka=Wa.CMD,Ja=2*Math.PI,Qa=[-1,-1,-1],to=[-1,-1];function eo(t,e,n,i,r,a,o,s,l,c){if(e<c&&i<c&&a<c&&s<c||c<e&&c<i&&c<a&&c<s)return 0;var u,d=function(t,e,n,i,r,a){var o=i+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),c=t-r,u=s*s-3*o*l,d=s*l-9*o*c,h=l*l-3*s*c,f=0;if(oa(u)&&oa(d))oa(s)?a[0]=0:0<=(C=-l/s)&&C<=1&&(a[f++]=C);else{var g=d*d-4*u*h;if(oa(g)){var p=d/u,m=-p/2;0<=(C=-s/o+p)&&C<=1&&(a[f++]=C),0<=m&&m<=1&&(a[f++]=m)}else if(0<g){var v=ea(g),y=u*s+1.5*o*(-d+v),x=u*s+1.5*o*(-d-v);0<=(C=(-s-((y=y<0?-ta(-y,1/3):ta(y,1/3))+(x=x<0?-ta(-x,1/3):ta(x,1/3))))/(3*o))&&C<=1&&(a[f++]=C)}else{var b=(2*u*s-3*o*d)/(2*ea(u*u*u)),w=Math.acos(b)/3,_=ea(u),S=Math.cos(w),C=(-s-2*_*S)/(3*o),k=(m=(-s+_*(S+na*Math.sin(w)))/(3*o),(-s+_*(S-na*Math.sin(w)))/(3*o));0<=C&&C<=1&&(a[f++]=C),0<=m&&m<=1&&(a[f++]=m),0<=k&&k<=1&&(a[f++]=k)}}return f}(e,i,a,s,c,Qa);if(0===d)return 0;for(var h,f,g=0,p=-1,m=0;m<d;m++){var v=Qa[m],y=0===v||1===v?.5:1;la(t,n,r,o,v)<l||(p<0&&(p=ua(e,i,a,s,to),to[1]<to[0]&&1<p&&(u=to[0],to[0]=to[1],to[1]=u),h=la(e,i,a,s,to[0]),1<p&&(f=la(e,i,a,s,to[1]))),g+=2===p?v<to[0]?h<e?y:-y:v<to[1]?f<h?y:-y:s<f?y:-y:v<to[0]?h<e?y:-y:s<h?y:-y)}return g}function no(t,e,n,i,r,a,o,s){if(e<s&&i<s&&a<s||s<e&&s<i&&s<a)return 0;var l=function(t,e,n,i,r){var a=t-2*e+n,o=2*(e-t),s=t-i,l=0;if(oa(a))sa(o)&&0<=(u=-s/o)&&u<=1&&(r[l++]=u);else{var c=o*o-4*a*s;if(oa(c))0<=(u=-o/(2*a))&&u<=1&&(r[l++]=u);else if(0<c){var u,d=ea(c),h=(-o-d)/(2*a);0<=(u=(-o+d)/(2*a))&&u<=1&&(r[l++]=u),0<=h&&h<=1&&(r[l++]=h)}}return l}(e,i,a,s,Qa);if(0===l)return 0;var c=ga(e,i,a);if(0<=c&&c<=1){for(var u=0,d=ha(e,i,a,c),h=0;h<l;h++){var f=0===Qa[h]||1===Qa[h]?.5:1;ha(t,n,r,Qa[h])<o||(u+=Qa[h]<c?d<e?f:-f:a<d?f:-f)}return u}return f=0===Qa[0]||1===Qa[0]?.5:1,ha(t,n,r,Qa[0])<o?0:a<e?f:-f}function io(t,e,n,i,r,a,o,s){if(n<(s-=e)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Qa[0]=-l,Qa[1]=l;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c%Ja<1e-4){r=Ja;var u=a?1:-1;return o>=Qa[i=0]+t&&o<=Qa[1]+t?u:0}a?(l=i,i=ja(r),r=ja(l)):(i=ja(i),r=ja(r)),r<i&&(r+=Ja);for(var d=0,h=0;h<2;h++){var f=Qa[h];if(o<f+t){var g=Math.atan2(s,f);u=a?1:-1,g<0&&(g=Ja+g),(i<=g&&g<=r||i<=g+Ja&&g+Ja<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(u=-u),d+=u)}}return d}function ro(t,e,n,i,r){for(var a=0,o=0,s=0,l=0,c=0,u=0;u<t.length;){var d=t[u++];switch(d===Ka.M&&1<u&&(n||(a+=$a(o,s,l,c,i,r))),1===u&&(l=o=t[u],c=s=t[u+1]),d){case Ka.M:o=l=t[u++],s=c=t[u++];break;case Ka.L:if(n){if(Xa(o,s,t[u],t[u+1],e,i,r))return!0}else a+=$a(o,s,t[u],t[u+1],i,r)||0;o=t[u++],s=t[u++];break;case Ka.C:if(n){if(Ya(o,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],e,i,r))return!0}else a+=eo(o,s,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],i,r)||0;o=t[u++],s=t[u++];break;case Ka.Q:if(n){if(Ga(o,s,t[u++],t[u++],t[u],t[u+1],e,i,r))return!0}else a+=no(o,s,t[u++],t[u++],t[u],t[u+1],i,r)||0;o=t[u++],s=t[u++];break;case Ka.A:var h=t[u++],f=t[u++],g=t[u++],p=t[u++],m=t[u++],v=t[u++];u+=1;var y=1-t[u++],x=Math.cos(m)*g+h,b=Math.sin(m)*p+f;1<u?a+=$a(o,s,x,b,i,r):(l=x,c=b);var w=(i-h)*p/g+h;if(n){if(Za(h,f,p,m,m+v,y,e,w,r))return!0}else a+=io(h,f,p,m,m+v,y,w,r);o=Math.cos(m+v)*g+h,s=Math.sin(m+v)*p+f;break;case Ka.R:if(l=o=t[u++],c=s=t[u++],x=l+t[u++],b=c+t[u++],n){if(Xa(l,c,x,c,e,i,r)||Xa(x,c,x,b,e,i,r)||Xa(x,b,l,b,e,i,r)||Xa(l,b,l,c,e,i,r))return!0}else a+=$a(x,c,x,b,i,r),a+=$a(l,b,l,c,i,r);break;case Ka.Z:if(n){if(Xa(o,s,l,c,e,i,r))return!0}else a+=$a(o,s,l,c,i,r);o=l,s=c}}return n||function(t,e){return Math.abs(t-e)<1e-4}(s,c)||(a+=$a(o,s,l,c,i,r)||0),0!==a}var ao=Vn.prototype.getCanvasPattern,oo=Math.abs,so=new Wa(!0);function lo(t){Hi.call(this,t),this.path=null}function co(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}lo.prototype={constructor:lo,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,i=this.style,r=this.path||so,a=i.hasStroke(),o=i.hasFill(),s=i.fill,l=i.stroke,c=o&&!!s.colorStops,u=a&&!!l.colorStops,d=o&&!!s.image,h=a&&!!l.image;i.bind(t,this,e),this.setTransform(t),this.__dirty&&(c&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,l,n))),c?t.fillStyle=this._fillGradient:d&&(t.fillStyle=ao.call(s,t)),u?t.strokeStyle=this._strokeGradient:h&&(t.strokeStyle=ao.call(l,t));var f=i.lineDash,g=i.lineDashOffset,p=!!t.setLineDash,m=this.getGlobalScale();if(r.setScale(m[0],m[1],this.segmentIgnoreThreshold),this.__dirtyPath||f&&!p&&a?(r.beginPath(t),f&&!p&&(r.setLineDash(f),r.setLineDashOffset(g)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o)if(null!=i.fillOpacity){var v=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,r.fill(t),t.globalAlpha=v}else r.fill(t);f&&p&&(t.setLineDash(f),t.lineDashOffset=g),a&&(null!=i.strokeOpacity?(v=t.globalAlpha,t.globalAlpha=i.strokeOpacity*i.opacity,r.stroke(t),t.globalAlpha=v):r.stroke(t)),f&&p&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new Wa},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i=i||(this.path=new Wa),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){r.copy(t);var a=e.lineWidth,o=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),1e-10<o&&(r.width+=a/o,r.height+=a/o,r.x-=a/o/2,r.y-=a/o/2)}return r}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(i.contain(t=n[0],e=n[1])){var a=this.path.data;if(r.hasStroke()){var o=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(r.hasFill()||(o=Math.max(o,this.strokeContainThreshold)),function(t,e,n,i){return ro(t,e,!0,n,i)}(a,o/s,t,e)))return!0}if(r.hasFill())return function(t,e,n){return ro(t,0,!1,e,n)}(a,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):Hi.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(z(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<oo(t[0]-1)&&1e-10<oo(t[3]-1)?Math.sqrt(oo(t[0]*t[3]-t[2]*t[1])):1}},lo.extend=function(t){function e(e){lo.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var i=this.shape;for(var r in n)!i.hasOwnProperty(r)&&n.hasOwnProperty(r)&&(i[r]=n[r])}t.init&&t.init.call(this,e)}for(var n in C(e,lo),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},C(lo,Hi);var uo=Wa.CMD,ho=[[],[],[]],fo=Math.sqrt,go=Math.atan2,po=Math.sqrt,mo=Math.sin,vo=Math.cos,yo=Math.PI,xo=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(co(t)*co(e))},bo=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(xo(t,e))};function wo(t,e,n,i,r,a,o,s,l,c,u){var d=l*(yo/180),h=vo(d)*(t-n)/2+mo(d)*(e-i)/2,f=-1*mo(d)*(t-n)/2+vo(d)*(e-i)/2,g=h*h/(o*o)+f*f/(s*s);1<g&&(o*=po(g),s*=po(g));var p=(r===a?-1:1)*po((o*o*(s*s)-o*o*(f*f)-s*s*(h*h))/(o*o*(f*f)+s*s*(h*h)))||0,m=p*o*f/s,v=p*-s*h/o,y=(t+n)/2+vo(d)*m-mo(d)*v,x=(e+i)/2+mo(d)*m+vo(d)*v,b=bo([1,0],[(h-m)/o,(f-v)/s]),w=[(h-m)/o,(f-v)/s],_=[(-1*h-m)/o,(-1*f-v)/s],S=bo(w,_);xo(w,_)<=-1&&(S=yo),1<=xo(w,_)&&(S=0),0===a&&0<S&&(S-=2*yo),1===a&&S<0&&(S+=2*yo),u.addData(c,y,x,o,s,b,S,d,a)}var _o=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,So=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Co(t,e){var n=function(t){if(!t)return new Wa;for(var e,n=0,i=0,r=n,a=i,o=new Wa,s=Wa.CMD,l=t.match(_o),c=0;c<l.length;c++){for(var u,d=l[c],h=d.charAt(0),f=d.match(So)||[],g=f.length,p=0;p<g;p++)f[p]=parseFloat(f[p]);for(var m=0;m<g;){var v,y,x,b,w,_,S,C=n,k=i;switch(h){case"l":n+=f[m++],i+=f[m++],o.addData(u=s.L,n,i);break;case"L":n=f[m++],i=f[m++],o.addData(u=s.L,n,i);break;case"m":n+=f[m++],i+=f[m++],o.addData(u=s.M,n,i),r=n,a=i,h="l";break;case"M":n=f[m++],i=f[m++],o.addData(u=s.M,n,i),r=n,a=i,h="L";break;case"h":n+=f[m++],o.addData(u=s.L,n,i);break;case"H":n=f[m++],o.addData(u=s.L,n,i);break;case"v":i+=f[m++],o.addData(u=s.L,n,i);break;case"V":i=f[m++],o.addData(u=s.L,n,i);break;case"C":o.addData(u=s.C,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),n=f[m-2],i=f[m-1];break;case"c":o.addData(u=s.C,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i),n+=f[m-2],i+=f[m-1];break;case"S":v=n,y=i;var A=o.len(),M=o.data;e===s.C&&(v+=n-M[A-4],y+=i-M[A-3]),C=f[m++],k=f[m++],n=f[m++],i=f[m++],o.addData(u=s.C,v,y,C,k,n,i);break;case"s":v=n,y=i,A=o.len(),M=o.data,e===s.C&&(v+=n-M[A-4],y+=i-M[A-3]),C=n+f[m++],k=i+f[m++],n+=f[m++],i+=f[m++],o.addData(u=s.C,v,y,C,k,n,i);break;case"Q":C=f[m++],k=f[m++],n=f[m++],i=f[m++],o.addData(u=s.Q,C,k,n,i);break;case"q":C=f[m++]+n,k=f[m++]+i,n+=f[m++],i+=f[m++],o.addData(u=s.Q,C,k,n,i);break;case"T":v=n,y=i,A=o.len(),M=o.data,e===s.Q&&(v+=n-M[A-4],y+=i-M[A-3]),n=f[m++],i=f[m++],o.addData(u=s.Q,v,y,n,i);break;case"t":v=n,y=i,A=o.len(),M=o.data,e===s.Q&&(v+=n-M[A-4],y+=i-M[A-3]),n+=f[m++],i+=f[m++],o.addData(u=s.Q,v,y,n,i);break;case"A":x=f[m++],b=f[m++],w=f[m++],_=f[m++],S=f[m++],wo(C=n,k=i,n=f[m++],i=f[m++],_,S,x,b,w,u=s.A,o);break;case"a":x=f[m++],b=f[m++],w=f[m++],_=f[m++],S=f[m++],wo(C=n,k=i,n+=f[m++],i+=f[m++],_,S,x,b,w,u=s.A,o)}}"z"!==h&&"Z"!==h||(o.addData(u=s.Z),n=r,i=a),e=u}return o.toStatic(),o}(t);return(e=e||{}).buildPath=function(t){if(t.setData)t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){(function(t,e){var n,i,r,a,o,s=t.data,l=uo.M,c=uo.C,u=uo.L,d=uo.R,h=uo.A,f=uo.Q;for(a=r=0;r<s.length;){switch(n=s[r++],a=r,i=0,n){case l:case u:i=1;break;case c:i=3;break;case f:i=2;break;case h:var g=e[4],p=e[5],m=fo(e[0]*e[0]+e[1]*e[1]),v=fo(e[2]*e[2]+e[3]*e[3]),y=go(-e[1]/v,e[0]/m);s[r]*=m,s[r++]+=g,s[r]*=v,s[r++]+=p,s[r++]*=m,s[r++]*=v,s[r++]+=y,s[r++]+=y,a=r+=2;break;case d:x[0]=s[r++],x[1]=s[r++],bt(x,x,e),s[a++]=x[0],s[a++]=x[1],x[0]+=s[r++],x[1]+=s[r++],bt(x,x,e),s[a++]=x[0],s[a++]=x[1]}for(o=0;o<i;o++){var x;(x=ho[o])[0]=s[r++],x[1]=s[r++],bt(x,x,e),s[a++]=x[0],s[a++]=x[1]}}})(n,t),this.dirty(!0)},e}function ko(t,e){return new lo(Co(t,e))}var Ao=function(t){Hi.call(this,t)};function Mo(t){return r.browser.ie&&11<=r.browser.version?function(){var e,n=this.__clipPaths,i=this.style;if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a&&a.shape,s=a&&a.type;if(o&&("sector"===s&&o.startAngle===o.endAngle||"rect"===s&&(!o.width||!o.height))){for(var l=0;l<Io.length;l++)Io[l][2]=i[Io[l][0]],i[Io[l][0]]=Io[l][1];e=!0;break}}if(t.apply(this,arguments),e)for(l=0;l<Io.length;l++)i[Io[l][0]]=Io[l][2]}:t}Ao.prototype={constructor:Ao,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Si(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),zi(i,n)?(this.setTransform(t),ki(this,t,i,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=0},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Si(t),!this._rect){var e=t.text;null!=e?e+="":e="";var n=ii(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,Ei(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},C(Ao,Hi);var To=lo.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Io=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Do=lo.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Mo(lo.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),a=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,l=e.clockwise,c=Math.cos(o),u=Math.sin(o);t.moveTo(c*r+n,u*r+i),t.lineTo(c*a+n,u*a+i),t.arc(n,i,a,o,s,!l),t.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&t.arc(n,i,r,s,o,l),t.closePath()}}),Po=lo.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}});function Lo(t,e,n,i,r,a,o){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*o+(-3*(e-n)-2*s-l)*a+s*r+e}function Eo(t,e,n){var i=e.points,r=e.smooth;if(i&&2<=i.length){if(r&&"spline"!==r){var a=function(t,e,n,i){var r,a,o,s,l=[],c=[],u=[],d=[];if(i){o=[1/0,1/0],s=[-1/0,-1/0];for(var h=0,f=t.length;h<f;h++)wt(o,o,t[h]),_t(s,s,t[h]);wt(o,o,i[0]),_t(s,s,i[1])}for(h=0,f=t.length;h<f;h++){var g=t[h];if(n)r=t[h?h-1:f-1],a=t[(h+1)%f];else{if(0===h||h===f-1){l.push(ot(t[h]));continue}r=t[h-1],a=t[h+1]}ut(c,a,r),ft(c,c,e);var p=pt(g,r),m=pt(g,a),v=p+m;0!==v&&(p/=v,m/=v),ft(u,c,-p),ft(d,c,m);var y=lt([],g,u),x=lt([],g,d);i&&(_t(y,y,o),wt(y,y,s),_t(x,x,o),wt(x,x,s)),l.push(y),l.push(x)}return n&&l.push(l.shift()),l}(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[2*s],c=a[2*s+1],u=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{"spline"===r&&(i=function(t,e){for(var n=t.length,i=[],r=0,a=1;a<n;a++)r+=pt(t[a-1],t[a]);var o=r/2;for(o=o<n?n:o,a=0;a<o;a++){var s,l,c,u=a/(o-1)*(e?n:n-1),d=Math.floor(u),h=u-d,f=t[d%n];c=e?(s=t[(d-1+n)%n],l=t[(d+1)%n],t[(d+2)%n]):(s=t[0===d?d:d-1],l=t[n-2<d?n-1:d+1],t[n-3<d?n-1:d+2]);var g=h*h,p=h*g;i.push([Lo(s[0],f[0],l[0],c[0],h,g,p),Lo(s[1],f[1],l[1],c[1],h,g,p)])}return i}(i,n)),t.moveTo(i[0][0],i[0][1]),s=1;for(var d=i.length;s<d;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var No=lo.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){Eo(t,e,!0)}}),Ro=lo.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Eo(t,e,!1)}}),Oo=Math.round;function zo(t,e,n){if(e){var i=e.x1,r=e.x2,a=e.y1,o=e.y2;t.x1=i,t.x2=r,t.y1=a,t.y2=o;var s=n&&n.lineWidth;s&&(Oo(2*i)===Oo(2*r)&&(t.x1=t.x2=Fo(i,s,!0)),Oo(2*a)===Oo(2*o)&&(t.y1=t.y2=Fo(a,s,!0)))}}function Bo(t,e,n){if(e){var i=e.x,r=e.y,a=e.width,o=e.height;t.x=i,t.y=r,t.width=a,t.height=o;var s=n&&n.lineWidth;s&&(t.x=Fo(i,s,!0),t.y=Fo(r,s,!0),t.width=Math.max(Fo(i+a,s,!1)-t.x,0===a?0:1),t.height=Math.max(Fo(r+o,s,!1)-t.y,0===o?0:1))}}function Fo(t,e,n){if(!e)return t;var i=Oo(2*t);return(i+Oo(e))%2==0?i/2:(i+(n?1:-1))/2}var Ho={},Vo=lo.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,i,r,a;this.subPixelOptimize?(Bo(Ho,e,this.style),n=Ho.x,i=Ho.y,r=Ho.width,a=Ho.height,Ho.r=e.r,e=Ho):(n=e.x,i=e.y,r=e.width,a=e.height),e.r?mi(t,e):t.rect(n,i,r,a),t.closePath()}}),Wo={},Xo=lo.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,i,r,a;a=this.subPixelOptimize?(zo(Wo,e,this.style),n=Wo.x1,i=Wo.y1,r=Wo.x2,Wo.y2):(n=e.x1,i=e.y1,r=e.x2,e.y2);var o=e.percent;0!==o&&(t.moveTo(n,i),o<1&&(r=n*(1-o)+r*o,a=i*(1-o)+a*o),t.lineTo(r,a))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Yo=[];function Go(t,e,n){return null===t.cpx2||null===t.cpy2?[(n?ca:la)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?ca:la)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?fa:ha)(t.x1,t.cpx1,t.x2,e),(n?fa:ha)(t.y1,t.cpy1,t.y2,e)]}function Uo(t){this.colorStops=t||[]}var jo=lo.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,a=e.y2,o=e.cpx1,s=e.cpy1,l=e.cpx2,c=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,i),null==l||null==c?(u<1&&(pa(n,o,r,u,Yo),o=Yo[1],r=Yo[2],pa(i,s,a,u,Yo),s=Yo[1],a=Yo[2]),t.quadraticCurveTo(o,s,r,a)):(u<1&&(da(n,o,l,r,u,Yo),o=Yo[1],l=Yo[2],r=Yo[3],da(i,s,c,a,u,Yo),s=Yo[1],c=Yo[2],a=Yo[3]),t.bezierCurveTo(o,s,l,c,r,a)))},pointAt:function(t){return Go(this.shape,t,!1)},tangentAt:function(t){var e=Go(this.shape,t,!0);return gt(e,e)}}),qo=lo.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),a=e.startAngle,o=e.endAngle,s=e.clockwise,l=Math.cos(a),c=Math.sin(a);t.moveTo(l*r+n,c*r+i),t.arc(n,i,r,a,o,!s)}}),Zo=lo.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),lo.prototype.getBoundingRect.call(this)}});function $o(t,e,n,i,r,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=a||!1,Uo.call(this,r)}function Ko(t,e,n,i,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=r||!1,Uo.call(this,i)}function Jo(t){Hi.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Uo.prototype={constructor:Uo,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},$o.prototype={constructor:$o},C($o,Uo),Ko.prototype={constructor:Ko},C(Ko,Uo),Jo.prototype.incremental=!0,Jo.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Jo.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},Jo.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},Jo.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},Jo.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},Jo.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var Qo=[];Jo.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new _n(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(Qo)),t.union(i)}this._rect=t}return this._rect},Jo.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},C(Jo,Hi);var ts=Math.max,es=Math.min,ns={},is={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},rs="emphasis",as=1,os={},ss={};function ls(t){return lo.extend(t)}function cs(t,e){ss[t]=e}function us(t){if(ss.hasOwnProperty(t))return ss[t]}function ds(t,e,n,i){var r=ko(t,e);return n&&("center"===i&&(n=fs(n,r.getBoundingRect())),ps(r,n)),r}function hs(t,e,n){var i=new Vi({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){"center"===n&&i.setStyle(fs(e,{width:t.width,height:t.height}))}});return i}function fs(t,e){var n,i=e.width/e.height,r=t.height*i;return n=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-n/2,width:r,height:n}}var gs=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var a=t[r];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}var o=new lo(e);return o.createPathProxy(),o.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},o};function ps(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}var ms=Fo;function vs(t){return null!=t&&"none"!==t}var ys=Q(),xs=0;function bs(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,i=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=i?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var r=t,a=t.style;i&&(a=(r=n.addHover(t)).style),Vs(a),i||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i=t.style;for(var r in e)null!=e[r]&&(n[r]=i[r]);n.fill=i.fill,n.stroke=i.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}(r),a.extendFrom(e),ws(a,e,"fill"),ws(a,e,"stroke"),Hs(a),i||(t.dirty(!1),t.z2+=1)}}}function ws(t,e,n){!vs(e[n])&&vs(t[n])&&(t[n]=function(t){if("string"!=typeof t)return t;var e=ys.get(t);return e||(e=He(t,-.1),xs<1e4&&(ys.set(t,e),xs++)),e}(t[n]))}function _s(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,i=t.__cachedNormalStl;i&&(Vs(n),t.setStyle(i),Hs(n));var r=t.__cachedNormalZ2;null!=r&&t.z2-r==1&&(t.z2=r)}}function Ss(t,e,n){var i,r="normal",a="normal";t.__highlighted&&(r=rs,i=!0),e(t,n),t.__highlighted&&(a=rs,i=!0),t.isGroup&&t.traverse((function(t){t.isGroup||e(t,n)})),i&&t.__highDownOnUpdate&&t.__highDownOnUpdate(r,a)}function Cs(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,_s(t),bs(t))}function ks(t){Is(this,t)||this.__highByOuter||Ss(this,bs)}function As(t){Is(this,t)||this.__highByOuter||Ss(this,_s)}function Ms(t){this.__highByOuter|=1<<(t||0),Ss(this,bs)}function Ts(t){(this.__highByOuter&=~(1<<(t||0)))||Ss(this,_s)}function Is(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Ds(t,e){Ps(t,!0),Ss(t,Cs,e)}function Ps(t,e){var n=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var i=n?"off":"on";t[i]("mouseover",ks)[i]("mouseout",As),t[i]("emphasis",Ms)[i]("normal",Ts),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function Ls(t){return!(!t||!t.__highDownDispatcher)}function Es(t){var e=os[t];return null==e&&as<=32&&(e=os[t]=as++),e}function Ns(t,e,n,i,r,a,o){var s,l=(r=r||ns).labelFetcher,c=r.labelDataIndex,u=r.labelDimIndex,d=n.getShallow("show"),h=i.getShallow("show");(d||h)&&(l&&(s=l.getFormattedLabel(c,"normal",null,u)),null==s&&(s=R(r.defaultText)?r.defaultText(c,r):r.defaultText));var f=d?s:null,g=h?X(l?l.getFormattedLabel(c,"emphasis",null,u):null,s):null;null==f&&null==g||(Os(t,n,a,r),Os(e,i,o,r,!0)),t.text=f,e.text=g}function Rs(t,e,n){var i=t.style;e&&(Vs(i),t.setStyle(e),Hs(i)),i=t.__hoverStl,n&&i&&(Vs(i),x(i,n),Hs(i))}function Os(t,e,n,i,r){return zs(t,e,i,r),n&&x(t,n),t}function zs(t,e,n,i){if((n=n||ns).isRectText){var r;n.getTextPosition?r=n.getTextPosition(e,i):"outside"===(r=e.getShallow("position")||(i?null:"inside"))&&(r="top"),t.textPosition=r,t.textOffset=e.getShallow("offset");var a=e.getShallow("rotate");null!=a&&(a*=Math.PI/180),t.textRotation=a,t.textDistance=X(e.getShallow("distance"),i?null:5)}var o,s=e.ecModel,l=s&&s.option.textStyle,c=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||ns).rich;if(n)for(var i in e=e||{},n)n.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(c)for(var u in o={},c)if(c.hasOwnProperty(u)){var d=e.getModel(["rich",u]);Bs(o[u]={},d,l,n,i)}return t.rich=o,Bs(t,e,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function Bs(t,e,n,i,r,a){n=!r&&n||ns,t.textFill=Fs(e.getShallow("color"),i)||n.color,t.textStroke=Fs(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=X(e.getShallow("textBorderWidth"),n.textBorderWidth),r||(a&&(t.insideRollbackOpt=i,Hs(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&i.disableBox||(t.textBackgroundColor=Fs(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=Fs(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Fs(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Hs(t){var e,n=t.textPosition,i=t.insideRollbackOpt;if(i&&null==t.textFill){var r=i.autoColor,a=i.useInsideStyle,o=!1!==a&&(!0===a||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),s=!o&&null!=r;(o||s)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),o&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=r,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),s&&(t.textFill=r)}t.insideRollback=e}function Vs(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function Ws(t,e){var n=e&&e.getModel("textStyle");return q([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Xs(t,e,n,i,r,a){if("function"==typeof r&&(a=r,r=null),i&&i.isAnimationEnabled()){var o=t?"Update":"",s=i.getShallow("animationDuration"+o),l=i.getShallow("animationEasing"+o),c=i.getShallow("animationDelay"+o);"function"==typeof c&&(c=c(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),"function"==typeof s&&(s=s(r)),0<s?e.animateTo(n,s,c||0,l,a,!!a):(e.stopAnimation(),e.attr(n),a&&a())}else e.stopAnimation(),e.attr(n),a&&a()}function Ys(t,e,n,i,r){Xs(!0,t,e,n,i,r)}function Gs(t,e,n,i,r){Xs(!1,t,e,n,i,r)}function Us(t,e){for(var n=ie([]);t&&t!==e;)ae(n,t.getLocalTransform(),n),t=t.parent;return n}function js(t,e,n){return e&&!A(e)&&(e=ge.getLocalTransform(e)),n&&(e=ce([],e)),bt([],t,e)}function qs(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),a=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return a=js(a,e,n),Math.abs(a[0])>Math.abs(a[1])?0<a[0]?"right":"left":0<a[1]?"bottom":"top"}function Zs(t,e,n,i){if(t&&e){var r,a=(r={},t.traverse((function(t){!t.isGroup&&t.anid&&(r[t.anid]=t)})),r);e.traverse((function(t){if(!t.isGroup&&t.anid){var e=a[t.anid];if(e){var i=o(t);t.attr(o(e)),Ys(t,i,n,t.dataIndex)}}}))}function o(t){var e={position:ot(t.position),rotation:t.rotation};return t.shape&&(e.shape=x({},t.shape)),e}}function $s(t,e){return T(t,(function(t){var n=t[0];n=ts(n,e.x),n=es(n,e.x+e.width);var i=t[1];return i=ts(i,e.y),[n,i=es(i,e.y+e.height)]}))}function Ks(t,e,n){var i=(e=x({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),b(i,n),new Vi(e)):ds(t.replace("path://",""),e,n,"center")}function Js(t,e,n,i,r){for(var a=0,o=r[r.length-1];a<r.length;a++){var s=r[a];if(Qs(t,e,n,i,s[0],s[1],o[0],o[1]))return!0;o=s}}function Qs(t,e,n,i,r,a,o,s){var l=n-t,c=i-e,u=o-r,d=s-a,h=tl(u,d,l,c);if(function(t){return t<=1e-6&&-1e-6<=t}(h))return!1;var f=t-r,g=e-a,p=tl(f,g,l,c)/h;if(p<0||1<p)return!1;var m=tl(f,g,u,d)/h;return!(m<0||1<m)}function tl(t,e,n,i){return t*i-n*e}cs("circle",To),cs("sector",Do),cs("ring",Po),cs("polygon",No),cs("polyline",Ro),cs("rect",Vo),cs("line",Xo),cs("bezierCurve",jo),cs("arc",qo);var el=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:is,extendShape:ls,extendPath:function(t,e){return function(t,e){return lo.extend(Co(t,e))}(t,e)},registerShape:cs,getShapeClass:us,makePath:ds,makeImage:hs,mergePath:gs,resizePath:ps,subPixelOptimizeLine:function(t){return zo(t.shape,t.shape,t.style),t},subPixelOptimizeRect:function(t){return Bo(t.shape,t.shape,t.style),t},subPixelOptimize:ms,setElementHoverStyle:Cs,setHoverStyle:Ds,setAsHighDownDispatcher:Ps,isHighDownDispatcher:Ls,getHighlightDigit:Es,setLabelStyle:Ns,modifyLabelStyle:Rs,setTextStyle:Os,setText:function(t,e,n){var i,r={isRectText:!0};!1===n?i=!0:r.autoColor=n,zs(t,e,r,i)},getFont:Ws,updateProps:Ys,initProps:Gs,getTransform:Us,applyTransform:js,transformDirection:qs,groupTransition:Zs,clipPointsByRect:$s,clipRectByRect:function(t,e){var n=ts(t.x,e.x),i=es(t.x+t.width,e.x+e.width),r=ts(t.y,e.y),a=es(t.y+t.height,e.y+e.height);if(n<=i&&r<=a)return{x:n,y:r,width:i-n,height:a-r}},createIcon:Ks,linePolygonIntersect:Js,lineLineIntersect:Qs,Group:Sn,Image:Vi,Text:Ao,Circle:To,Sector:Do,Ring:Po,Polygon:No,Polyline:Ro,Rect:Vo,Line:Xo,BezierCurve:jo,Arc:qo,IncrementalDisplayable:Jo,CompoundPath:Zo,LinearGradient:$o,RadialGradient:Ko,BoundingRect:_n}),nl=["textStyle","color"],il={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(nl):null)},getFont:function(){return Ws({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return ii(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},rl=Zr([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),al={getItemStyle:function(t,e){var n=rl(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},ol=k,sl=Nr();function ll(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function cl(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&n&&(t=n.get(e)),t}function ul(t,e){var n=sl(t).getParent;return n?n.call(t,e):t.parentModel}ll.prototype={constructor:ll,init:null,mergeOption:function(t){v(this.option,t,!0)},get:function(t,e){return null==t?this.option:cl(this.option,this.parsePath(t),!e&&ul(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],r=!e&&ul(this,t);return null==i&&r&&(i=r.getShallow(t)),i},getModel:function(t,e){var n;return new ll(null==t?this.option:cl(this.option,t=this.parsePath(t)),e=e||(n=ul(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(m(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){sl(this).getParent=t},isAnimationEnabled:function(){if(!r.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Xr(ll),Gr(ll),ol(ll,Kr),ol(ll,Qr),ol(ll,il),ol(ll,al);var dl=0;function hl(t){return[t||"",dl++,Math.random().toFixed(5)].join("_")}function fl(t,e,n,i){var r=e[1]-e[0],a=n[1]-n[0];if(0==r)return 0==a?n[0]:(n[0]+n[1])/2;if(i)if(0<r){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/r*a+n[0]}function gl(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(t){return t.replace(/^\s+|\s+$/g,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function pl(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function ml(t){return t.sort((function(t,e){return t-e})),t}function vl(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yl(t){var e=t.toString(),n=e.indexOf("e");if(0<n){var i=+e.slice(n+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r}function xl(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),a=Math.round(n(Math.abs(e[1]-e[0]))/i),o=Math.min(Math.max(-r+a,0),20);return isFinite(o)?o:20}function bl(t,e,n){if(!t[e])return 0;var i=I(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===i)return 0;for(var r=Math.pow(10,n),a=T(t,(function(t){return(isNaN(t)?0:t)/i*r*100})),o=100*r,s=T(a,(function(t){return Math.floor(t)})),l=I(s,(function(t,e){return t+e}),0),c=T(a,(function(t,e){return t-s[e]}));l<o;){for(var u=Number.NEGATIVE_INFINITY,d=null,h=0,f=c.length;h<f;++h)c[h]>u&&(u=c[h],d=h);++s[d],c[d]=0,++l}return s[e]/r}var wl=9007199254740991;function _l(t){var e=2*Math.PI;return(t%e+e)%e}function Sl(t){return-1e-4<t&&t<1e-4}var Cl=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function kl(t){if(t instanceof Date)return t;if("string"!=typeof t)return null==t?new Date(NaN):new Date(Math.round(t));var e=Cl.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}function Al(t){return Math.pow(10,Ml(t))}function Ml(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return 10<=t/Math.pow(10,e)&&e++,e}function Tl(t,e){var n=Ml(t),i=Math.pow(10,n),r=t/i;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*i,-20<=n?+t.toFixed(n<0?-n:0):t}function Il(t){t.sort((function(t,e){return function t(e,n,i){return e.interval[i]<n.interval[i]||e.interval[i]===n.interval[i]&&(e.close[i]-n.close[i]==(i?-1:1)||!i&&t(e,n,1))}(t,e,0)?-1:1}));for(var e=-1/0,n=1,i=0;i<t.length;){for(var r=t[i].interval,a=t[i].close,o=0;o<2;o++)r[o]<=e&&(r[o]=e,a[o]=o?1:1-n),e=r[o],n=a[o];r[0]===r[1]&&a[0]*a[1]!=1?t.splice(i,1):i++}return t}function Dl(t){return 0<=t-parseFloat(t)}var Pl=(Object.freeze||Object)({linearMap:fl,parsePercent:gl,round:pl,asc:ml,getPrecision:vl,getPrecisionSafe:yl,getPixelPrecision:xl,getPercentWithPrecision:bl,MAX_SAFE_INTEGER:wl,remRadian:_l,isRadianAroundZero:Sl,parseDate:kl,quantity:Al,quantityExponent:Ml,nice:Tl,quantile:function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},reformIntervals:Il,isNumeric:Dl});function Ll(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")}function El(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Nl=U,Rl=/([&<>"'])/g,Ol={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function zl(t){return null==t?"":(t+"").replace(Rl,(function(t,e){return Ol[e]}))}function Bl(t,e){return"{"+t+(null==e?"":e)+"}"}var Fl=["a","b","c","d","e","f","g"];function Hl(t,e,n){N(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],a=0;a<r.length;a++){var o=Fl[a];t=t.replace(Bl(o),Bl(o,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var c=e[s][r[l]];t=t.replace(Bl(Fl[l],s),n?zl(c):c)}return t}function Vl(t,e,n){return M(e,(function(e,i){t=t.replace("{"+i+"}",n?zl(e):e)})),t}function Wl(t,e){var n=(t=O(t)?{color:t,extraCssText:e}:t||{}).color,i=(e=t.extraCssText,t.renderMode||"html"),r=t.markerId||"X";return n?"html"===i?"subItem"===t.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+zl(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+zl(n)+";"+(e||"")+'"></span>':{renderMode:i,content:"{marker"+r+"|}  ",style:{color:n}}:""}function Xl(t,e){return"0000".substr(0,e-(t+="").length)+t}function Yl(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=kl(e),r=n?"UTC":"",a=i["get"+r+"FullYear"](),o=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),c=i["get"+r+"Minutes"](),u=i["get"+r+"Seconds"](),d=i["get"+r+"Milliseconds"]();return t.replace("MM",Xl(o,2)).replace("M",o).replace("yyyy",a).replace("yy",a%100).replace("dd",Xl(s,2)).replace("d",s).replace("hh",Xl(l,2)).replace("h",l).replace("mm",Xl(c,2)).replace("m",c).replace("ss",Xl(u,2)).replace("s",u).replace("SSS",Xl(d,3))}function Gl(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var Ul=si,jl=(Object.freeze||Object)({addCommas:Ll,toCamelCase:El,normalizeCssArray:Nl,encodeHTML:zl,formatTpl:Hl,formatTplSimple:Vl,getTooltipMarker:Wl,formatTime:Yl,capitalFirst:Gl,truncateText:Ul,getTextBoundingRect:function(t){return ii(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},getTextRect:function(t,e,n,i,r,a,o,s){return ii(t,e,n,i,r,s,a,o)}}),ql=M,Zl=["left","right","top","bottom","width","height"],$l=[["width","left","right"],["height","top","bottom"]];function Kl(t,e,n,i,r){var a=0,o=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild((function(l,c){var u,d,h=l.position,f=l.getBoundingRect(),g=e.childAt(c+1),p=g&&g.getBoundingRect();if("horizontal"===t){var m=f.width+(p?-p.x+f.x:0);s=i<(u=a+m)||l.newline?(a=0,u=m,o+=s+n,f.height):Math.max(s,f.height)}else{var v=f.height+(p?-p.y+f.y:0);s=r<(d=o+v)||l.newline?(a+=s+n,o=0,d=v,f.width):Math.max(s,f.width)}l.newline||(h[0]=a,h[1]=o,"horizontal"===t?a=u+n:o=d+n)}))}var Jl=Kl;function Ql(t,e,n){n=Nl(n||0);var i=e.width,r=e.height,a=gl(t.left,i),o=gl(t.top,r),s=gl(t.right,i),l=gl(t.bottom,r),c=gl(t.width,i),u=gl(t.height,r),d=n[2]+n[0],h=n[1]+n[3],f=t.aspect;switch(isNaN(c)&&(c=i-s-h-a),isNaN(u)&&(u=r-l-d-o),null!=f&&(isNaN(c)&&isNaN(u)&&(i/r<f?c=.8*i:u=.8*r),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(a)&&(a=i-s-c-h),isNaN(o)&&(o=r-l-u-d),t.left||t.right){case"center":a=i/2-c/2-n[3];break;case"right":a=i-c-h}switch(t.top||t.bottom){case"middle":case"center":o=r/2-u/2-n[0];break;case"bottom":o=r-u-d}a=a||0,o=o||0,isNaN(c)&&(c=i-h-a-(s||0)),isNaN(u)&&(u=r-d-o-(l||0));var g=new _n(a+n[3],o+n[0],c,u);return g.margin=n,g}function tc(t,e,n,i,r){var a=!r||!r.hv||r.hv[0],o=!r||!r.hv||r.hv[1],s=r&&r.boundingMode||"all";if(a||o){var l;if("raw"===s)l="group"===t.type?new _n(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();(l=l.clone()).applyTransform(c)}e=Ql(b({width:l.width,height:l.height},e),n,i);var u=t.position,d=a?e.x-l.x:0,h=o?e.y-l.y:0;t.attr("position","raw"===s?[d,h]:[u[0]+d,u[1]+h])}}function ec(t,e,n){z(n)||(n={});var i=n.ignoreSize;N(i)||(i=[i,i]);var r=o($l[0],0),a=o($l[1],1);function o(n,r){var a={},o=0,c={},u=0;if(ql(n,(function(e){c[e]=t[e]})),ql(n,(function(t){s(e,t)&&(a[t]=c[t]=e[t]),l(a,t)&&o++,l(c,t)&&u++})),i[r])return l(e,n[1])?c[n[2]]=null:l(e,n[2])&&(c[n[1]]=null),c;if(2!==u&&o){if(2<=o)return a;for(var d=0;d<n.length;d++){var h=n[d];if(!s(a,h)&&s(t,h)){a[h]=t[h];break}}return a}return c}function s(t,e){return t.hasOwnProperty(e)}function l(t,e){return null!=t[e]&&"auto"!==t[e]}function c(t,e,n){ql(t,(function(t){e[t]=n[t]}))}c($l[0],t,r),c($l[1],t,a)}function nc(t){return ic({},t)}function ic(t,e){return e&&t&&ql(Zl,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}E(Kl,"vertical"),E(Kl,"horizontal");var rc,ac,oc,sc=Nr(),lc=ll.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){ll.call(this,t,e,n,i),this.uid=hl("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?nc(t):{};v(t,e.getTheme().get(this.mainType)),v(t,this.getDefaultOption()),n&&ec(t,i,n)},mergeOption:function(t,e){v(this.option,t,!0);var n=this.layoutMode;n&&ec(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=sc(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var r={},a=e.length-1;0<=a;a--)r=v(r,e[a],!0);t.defaultOption=r}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function cc(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}qr(lc,{registerWhenExtend:!0}),ac={},(rc=lc).registerSubTypeDefaulter=function(t,e){t=Wr(t),ac[t.main]=e},rc.determineSubType=function(t,e){var n=e.type;if(!n){var i=Wr(t).main;rc.hasSubTypes(t)&&ac[i]&&(n=ac[i](e))}return n},oc=function(t){var e=[];return M(lc.getClassesByMainType(t),(function(t){e=e.concat(t.prototype.dependencies||[])})),e=T(e,(function(t){return Wr(t).main})),"dataset"!==t&&S(e,"dataset")<=0&&e.unshift("dataset"),e},lc.topologicalTravel=function(t,e,n,i){if(t.length){var r=function(t){var e={},n=[];return M(t,(function(i){var r=cc(e,i),a=function(t,e){var n=[];return M(t,(function(t){0<=S(e,t)&&n.push(t)})),n}(r.originalDeps=oc(i),t);r.entryCount=a.length,0===r.entryCount&&n.push(i),M(a,(function(t){S(r.predecessor,t)<0&&r.predecessor.push(t);var n=cc(e,t);S(n.successor,t)<0&&n.successor.push(i)}))})),{graph:e,noEntryList:n}}(e),a=r.graph,o=r.noEntryList,s={};for(M(t,(function(t){s[t]=!0}));o.length;){var l=o.pop(),c=a[l],u=!!s[l];u&&(n.call(i,l,c.originalDeps.slice()),delete s[l]),M(c.successor,u?h:d)}M(s,(function(){throw new Error("Circle dependency may exists")}))}function d(t){a[t].entryCount--,0===a[t].entryCount&&o.push(t)}function h(t){s[t]=!0,d(t)}},k(lc,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var uc="";"undefined"!=typeof navigator&&(uc=navigator.platform||"");var dc={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:uc.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},hc=Nr(),fc={clearColorPalette:function(){hc(this).colorIdx=0,hc(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var i=hc(e=e||this),r=i.colorIdx||0,a=i.colorNameMap=i.colorNameMap||{};if(a.hasOwnProperty(t))return a[t];var o=kr(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(s,n):o;if((l=l||o)&&l.length){var c=l[r];return t&&(a[t]=c),i.colorIdx=(r+1)%l.length,c}}},gc="original",pc="arrayRows",mc="objectRows",vc="keyedColumns",yc="unknown",xc="typedArray";function bc(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===vc?{}:[]),this.sourceFormat=t.sourceFormat||yc,this.seriesLayoutBy=t.seriesLayoutBy||"column",this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&Q(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}bc.seriesDataToSource=function(t){return new bc({data:t,sourceFormat:F(t)?xc:gc,fromDataset:!1})},Gr(bc);var wc=Nr();function _c(t){var e=t.option,n=e.data,i=F(n)?xc:gc,r=!1,a=e.seriesLayoutBy,o=e.sourceHeader,s=e.dimensions,l=Mc(t);if(l){var c=l.option;n=c.source,i=wc(l).sourceFormat,r=!0,a=a||c.seriesLayoutBy,null==o&&(o=c.sourceHeader),s=s||c.dimensions}var u=function(t,e,n,i,r){if(!t)return{dimensionsDefine:Sc(r)};var a,o;if(e===pc)"auto"===i||null==i?Cc((function(t){null!=t&&"-"!==t&&(O(t)?null==o&&(o=1):o=0)}),n,t,10):o=i?1:0,r||1!==o||(r=[],Cc((function(t,e){r[e]=null!=t?t:""}),n,t)),a=r?r.length:"row"===n?t.length:t[0]?t[0].length:null;else if(e===mc)r=r||function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var i=[];return M(e,(function(t,e){i.push(e)})),i}}(t);else if(e===vc)r||(r=[],M(t,(function(t,e){r.push(e)})));else if(e===gc){var s=Tr(t[0]);a=N(s)&&s.length||1}return{startIndex:o,dimensionsDefine:Sc(r),dimensionsDetectCount:a}}(n,i,a,o,s);wc(t).source=new bc({data:n,fromDataset:r,seriesLayoutBy:a,sourceFormat:i,dimensionsDefine:u.dimensionsDefine,startIndex:u.startIndex,dimensionsDetectCount:u.dimensionsDetectCount,encodeDefine:e.encode})}function Sc(t){if(t){var e=Q();return T(t,(function(t,n){if(null==(t=x({},z(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var i=e.get(t.name);return i?t.name+="-"+i.count++:e.set(t.name,{count:1}),t}))}}function Cc(t,e,n,i){if(null==i&&(i=1/0),"row"===e)for(var r=0;r<n.length&&r<i;r++)t(n[r]?n[r][0]:null,r);else{var a=n[0]||[];for(r=0;r<a.length&&r<i;r++)t(a[r],r)}}function kc(t,e,n){var i={},r=Mc(e);if(!r||!t)return i;var a,o,s=[],l=[],c=wc(e.ecModel).datasetMap,u=r.uid+"_"+n.seriesLayoutBy;M(t=t.slice(),(function(e,n){z(e)||(t[n]={name:e}),"ordinal"===e.type&&null==a&&(o=f(t[a=n])),i[e.name]=[]}));var d=c.get(u)||c.set(u,{categoryWayDim:o,valueWayDim:0});function h(t,e,n){for(var i=0;i<n;i++)t.push(e+i)}function f(t){var e=t.dimsDef;return e?e.length:1}return M(t,(function(t,e){var n=t.name,r=f(t);if(null==a){var o=d.valueWayDim;h(i[n],o,r),h(l,o,r),d.valueWayDim+=r}else a===e?(h(i[n],0,r),h(s,0,r)):(h(i[n],o=d.categoryWayDim,r),h(l,o,r),d.categoryWayDim+=r)})),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function Ac(t,e,n){var i={};if(!Mc(t))return i;var r,a=e.sourceFormat,o=e.dimensionsDefine;a!==mc&&a!==vc||M(o,(function(t,e){"name"===(z(t)?t.name:t)&&(r=e)}));var s=function(){for(var t={},i={},s=[],l=0,c=Math.min(5,n);l<c;l++){var u=Tc(e.data,a,e.seriesLayoutBy,o,e.startIndex,l);s.push(u);var d=3===u;if(d&&null==t.v&&l!==r&&(t.v=l),null!=t.n&&t.n!==t.v&&(d||3!==s[t.n])||(t.n=l),h(t)&&3!==s[t.n])return t;d||(2===u&&null==i.v&&l!==r&&(i.v=l),null!=i.n&&i.n!==i.v||(i.n=l))}function h(t){return null!=t.v&&null!=t.n}return h(t)?t:h(i)?i:null}();if(s){i.value=s.v;var l=null!=r?r:s.n;i.itemName=[l],i.seriesName=[l]}return i}function Mc(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function Tc(t,e,n,i,r,a){var o,s,l;if(F(t))return 3;if(i){var c=i[a];z(c)?(s=c.name,l=c.type):O(c)&&(s=c)}if(null!=l)return"ordinal"===l?1:3;if(e===pc)if("row"===n){for(var u=t[a],d=0;d<(u||[]).length&&d<5;d++)if(null!=(o=p(u[r+d])))return o}else for(d=0;d<t.length&&d<5;d++){var h=t[r+d];if(h&&null!=(o=p(h[a])))return o}else if(e===mc){if(!s)return 3;for(d=0;d<t.length&&d<5;d++)if((f=t[d])&&null!=(o=p(f[s])))return o}else if(e===vc){if(!s)return 3;if(!(u=t[s])||F(u))return 3;for(d=0;d<u.length&&d<5;d++)if(null!=(o=p(u[d])))return o}else if(e===gc)for(d=0;d<t.length&&d<5;d++){var f,g=Tr(f=t[d]);if(!N(g))return 3;if(null!=(o=p(g[a])))return o}function p(t){var e=O(t);return null!=t&&isFinite(t)&&""!==t?e?2:3:e&&"-"!==t?1:void 0}return 3}var Ic="\0_ec_inner",Dc=ll.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new ll(n),this._optionManager=i},setOption:function(t,e){j(!(Ic in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):(function(t){t=t,this.option={},this.option[Ic]=1,this._componentsMap=Q({series:[]}),function(t,e){var n=t.color&&!t.colorLayer;M(e,(function(e,i){"colorLayer"===i&&n||lc.hasClass(i)||("object"==typeof e?t[i]=t[i]?v(t[i],e,!1):m(e):null==t[i]&&(t[i]=e))}))}(t,this._theme.option),v(t,dc,!1),this.mergeOption(t)}).call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var r=n.getTimelineOption(this);r&&(this.mergeOption(r),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&M(a,(function(t){this.mergeOption(t,e=!0)}),this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,i=[];!function(t){wc(t).datasetMap=Q()}(this),M(t,(function(t,n){null!=t&&(lc.hasClass(n)?n&&i.push(n):e[n]=null==e[n]?m(t):v(e[n],t,!0))})),lc.topologicalTravel(i,lc.getAllClassMainTypes(),(function(i,r){var a=kr(t[i]),o=Ir(n.get(i),a);Dr(o),M(o,(function(t,e){var n=t.option;z(n)&&(t.keyInfo.mainType=i,t.keyInfo.subType=function(t,e,n){return e.type?e.type:n?n.subType:lc.determineSubType(t,e)}(i,n,t.exist))}));var s=function(t,e){N(e)||(e=e?[e]:[]);var n={};return M(e,(function(e){n[e]=(t.get(e)||[]).slice()})),n}(n,r);e[i]=[],n.set(i,[]),M(o,(function(t,r){var a=t.exist,o=t.option;if(j(z(o)||a,"Empty component definition"),o){var l=lc.getClass(i,t.keyInfo.subType,!0);if(a&&a.constructor===l)a.name=t.keyInfo.name,a.mergeOption(o,this),a.optionUpdated(o,!1);else{var c=x({dependentModels:s,componentIndex:r},t.keyInfo);x(a=new l(o,this,this,c),c),a.init(o,this,this,c),a.optionUpdated(null,!0)}}else a.mergeOption({},this),a.optionUpdated({},!1);n.get(i)[r]=a,e[i][r]=a.option}),this),"series"===i&&Pc(this,n.get("series"))}),this),this._seriesIndicesMap=Q(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=m(this.option);return M(t,(function(e,n){if(lc.hasClass(n)){for(var i=(e=kr(e)).length-1;0<=i;i--)Lr(e[i])&&e.splice(i,1);t[n]=e}})),delete t[Ic],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,a=t.name,o=this._componentsMap.get(e);if(!o||!o.length)return[];if(null!=i)N(i)||(i=[i]),n=D(T(i,(function(t){return o[t]})),(function(t){return!!t}));else if(null!=r){var s=N(r);n=D(o,(function(t){return s&&0<=S(r,t.id)||!s&&t.id===r}))}else if(null!=a){var l=N(a);n=D(o,(function(t){return l&&0<=S(a,t.name)||!l&&t.name===a}))}else n=o.slice();return Lc(n,t)},findComponents:function(t){var e,n,i,r,a,o=t.mainType,s=(n=o+"Index",i=o+"Id",r=o+"Name",!(e=t.query)||null==e[n]&&null==e[i]&&null==e[r]?null:{mainType:o,index:e[n],id:e[i],name:e[r]});return a=Lc(s?this.queryComponents(s):this._componentsMap.get(o),t),t.filter?D(a,t.filter):a},eachComponent:function(t,e,n){var i=this._componentsMap;"function"==typeof t?(n=e,e=t,i.each((function(t,i){M(t,(function(t,r){e.call(n,i,t,r)}))}))):O(t)?M(i.get(t),e,n):z(t)&&M(this.findComponents(t),e,n)},getSeriesByName:function(t){return D(this._componentsMap.get("series"),(function(e){return e.name===t}))},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){return D(this._componentsMap.get("series"),(function(e){return e.subType===t}))},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){M(this._seriesIndices,(function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)}),this)},eachRawSeries:function(t,e){M(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){M(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)}),this)},eachRawSeriesByType:function(t,e,n){return M(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Pc(this,D(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Pc(this,e.get("series"));var n=[];e.each((function(t,e){n.push(e)})),lc.topologicalTravel(n,lc.getAllClassMainTypes(),(function(n,i){M(e.get(n),(function(e){"series"===n&&function(t,e){if(e){var n=e.seiresIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}(e,t)||e.restoreData()}))}))}});function Pc(t,e){t._seriesIndicesMap=Q(t._seriesIndices=T(e,(function(t){return t.componentIndex}))||[])}function Lc(t,e){return e.hasOwnProperty("subType")?D(t,(function(t){return t.subType===e.subType})):t}k(Dc,fc);var Ec=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Nc(t){M(Ec,(function(e){this[e]=L(t[e],t)}),this)}var Rc={};function Oc(){this._coordinateSystems=[]}Oc.prototype={constructor:Oc,create:function(t,e){var n=[];M(Rc,(function(i,r){var a=i.create(t,e);n=n.concat(a||[])})),this._coordinateSystems=n},update:function(t,e){M(this._coordinateSystems,(function(n){n.update&&n.update(t,e)}))},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},Oc.register=function(t,e){Rc[t]=e},Oc.get=function(t){return Rc[t]};var zc=M,Bc=m,Fc=T,Hc=v,Vc=/^(min|max)?(.+)$/;function Wc(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function Xc(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return M(t,(function(t,e){var n=e.match(Vc);if(n&&n[1]&&n[2]){var a=n[1],o=n[2].toLowerCase();!function(t,e,n){return"min"===n?e<=t:"max"===n?t<=e:t===e}(i[o],t,a)&&(r=!1)}})),r}Wc.prototype={constructor:Wc,setOption:function(t,e){t&&M(kr(t.series),(function(t){t&&t.data&&F(t.data)&&$(t.data)})),t=Bc(t);var n=this._optionBackup,i=(function(t,e,n){var i,r,a=[],o=[],s=t.timeline;return t.baseOption&&(r=t.baseOption),(s||t.options)&&(r=r||{},a=(t.options||[]).slice()),t.media&&(r=r||{},zc(t.media,(function(t){t&&t.option&&(t.query?o.push(t):i=i||t)}))),(r=r||t).timeline||(r.timeline=s),zc([r].concat(a).concat(T(o,(function(t){return t.option}))),(function(t){zc(e,(function(e){e(t,n)}))})),{baseOption:r,timelineOptions:a,mediaDefault:i,mediaList:o}}).call(this,t,e,!n);this._newBaseOption=i.baseOption,n?(function(t,e){zc(e=e||{},(function(e,n){if(null!=e){var i=t[n];if(lc.hasClass(n)){e=kr(e);var r=Ir(i=kr(i),e);t[n]=Fc(r,(function(t){return t.option&&t.exist?Hc(t.exist,t.option,!0):t.exist||t.option}))}else t[n]=Hc(i,e,!0)}}))}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=Fc(e.timelineOptions,Bc),this._mediaList=Fc(e.mediaList,Bc),this._mediaDefault=Bc(e.mediaDefault),this._currentMediaIndices=[],Bc(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=Bc(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,a=[],o=[];if(!i.length&&!r)return o;for(var s=0,l=i.length;s<l;s++)Xc(i[s].query,e,n)&&a.push(s);return!a.length&&r&&(a=[-1]),a.length&&!function(t,e){return t.join(",")===e.join(",")}(a,this._currentMediaIndices)&&(o=Fc(a,(function(t){return Bc(-1===t?r.option:i[t].option)}))),this._currentMediaIndices=a,o}};var Yc=M,Gc=z,Uc=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function jc(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=Uc.length;n<i;n++){var r=Uc[n],a=e.normal,o=e.emphasis;a&&a[r]&&(t[r]=t[r]||{},t[r].normal?v(t[r].normal,a[r]):t[r].normal=a[r],a[r]=null),o&&o[r]&&(t[r]=t[r]||{},t[r].emphasis?v(t[r].emphasis,o[r]):t[r].emphasis=o[r],o[r]=null)}}function qc(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,b(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r)}}function Zc(t){qc(t,"itemStyle"),qc(t,"lineStyle"),qc(t,"areaStyle"),qc(t,"label"),qc(t,"labelLine"),qc(t,"upperLabel"),qc(t,"edgeLabel")}function $c(t,e){var n=Gc(t)&&t[e],i=Gc(n)&&n.textStyle;if(i)for(var r=0,a=Mr.length;r<a;r++)i.hasOwnProperty(e=Mr[r])&&(n[e]=i[e])}function Kc(t){t&&(Zc(t),$c(t,"label"),t.emphasis&&$c(t.emphasis,"label"))}function Jc(t){return N(t)?t:t?[t]:[]}function Qc(t){return(N(t)?t[0]:t)||{}}function tu(t){M(eu,(function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])}))}var eu=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],nu=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],iu=function(t,e){(function(t,e){Yc(Jc(t.series),(function(t){Gc(t)&&function(t){if(Gc(t)){jc(t),Zc(t),$c(t,"label"),$c(t,"upperLabel"),$c(t,"edgeLabel"),t.emphasis&&($c(t.emphasis,"label"),$c(t.emphasis,"upperLabel"),$c(t.emphasis,"edgeLabel")),(n=t.markPoint)&&(jc(n),Kc(n)),(i=t.markLine)&&(jc(i),Kc(i));var e=t.markArea;e&&Kc(e);var n,i,r=t.data;if("graph"===t.type){r=r||t.nodes;var a=t.links||t.edges;if(a&&!F(a))for(var o=0;o<a.length;o++)Kc(a[o]);M(t.categories,(function(t){Zc(t)}))}if(r&&!F(r))for(o=0;o<r.length;o++)Kc(r[o]);if((n=t.markPoint)&&n.data){var s=n.data;for(o=0;o<s.length;o++)Kc(s[o])}if((i=t.markLine)&&i.data){var l=i.data;for(o=0;o<l.length;o++)N(l[o])?(Kc(l[o][0]),Kc(l[o][1])):Kc(l[o])}"gauge"===t.type?($c(t,"axisLabel"),$c(t,"title"),$c(t,"detail")):"treemap"===t.type?(qc(t.breadcrumb,"itemStyle"),M(t.levels,(function(t){Zc(t)}))):"tree"===t.type&&Zc(t.leaves)}}(t)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Yc(n,(function(e){Yc(Jc(t[e]),(function(t){t&&($c(t,"axisLabel"),$c(t.axisPointer,"label"))}))})),Yc(Jc(t.parallel),(function(t){var e=t&&t.parallelAxisDefault;$c(e,"axisLabel"),$c(e&&e.axisPointer,"label")})),Yc(Jc(t.calendar),(function(t){qc(t,"itemStyle"),$c(t,"dayLabel"),$c(t,"monthLabel"),$c(t,"yearLabel")})),Yc(Jc(t.radar),(function(t){$c(t,"name")})),Yc(Jc(t.geo),(function(t){Gc(t)&&(Kc(t),Yc(Jc(t.regions),(function(t){Kc(t)})))})),Yc(Jc(t.timeline),(function(t){Kc(t),qc(t,"label"),qc(t,"itemStyle"),qc(t,"controlStyle",!0);var e=t.data;N(e)&&M(e,(function(t){z(t)&&(qc(t,"label"),qc(t,"itemStyle"))}))})),Yc(Jc(t.toolbox),(function(t){qc(t,"iconStyle"),Yc(t.feature,(function(t){qc(t,"iconStyle")}))})),$c(Qc(t.axisPointer),"label"),$c(Qc(t.tooltip).axisPointer,"label")})(t,e),t.series=kr(t.series),M(t.series,(function(t){if(z(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&null!=(n=n&&n[e[i]]);i++);return n}(t,"pointer.color");null!=n&&function(t,e,n,i){e=e.split(",");for(var r,a=t,o=0;o<e.length-1;o++)null==a[r=e[o]]&&(a[r]={}),a=a[r];null!=a[e[o]]||(a[e[o]]=n)}(t,"itemStyle.color",n)}tu(t)}})),t.dataRange&&(t.visualMap=t.dataRange),M(nu,(function(e){var n=t[e];n&&(N(n)||(n=[n]),M(n,(function(t){tu(t)})))}))};function ru(t){M(t,(function(e,n){var i=[],r=[NaN,NaN],a=e.data,o=e.isStackedByIndex,s=a.map([e.stackResultDimension,e.stackedOverDimension],(function(s,l,c){var u,d,h=a.get(e.stackedDimension,c);if(isNaN(h))return r;o?d=a.getRawIndex(c):u=a.get(e.stackedByDimension,c);for(var f=NaN,g=n-1;0<=g;g--){var p=t[g];if(o||(d=p.data.rawIndexOf(p.stackedByDimension,u)),0<=d){var m=p.data.getByRawIndex(p.stackResultDimension,d);if(0<=h&&0<m||h<=0&&m<0){h+=m,f=m;break}}}return i[0]=h,i[1]=f,i}));a.hostModel.setData(s),e.data=s}))}function au(t,e){bc.isInstance(t)||(t=bc.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===xc&&(this._offset=0,this._dimSize=e,this._data=n),x(this,su[i===pc?i+"_"+t.seriesLayoutBy:i])}var ou=au.prototype;ou.pure=!1;var su={arrayRows_column:{pure:ou.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:uu},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var r=n[i];e.push(r?r[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:lu,getItem:cu,appendData:uu},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var r=this._data[n[i].name];e.push(r?r[t]:null)}return e},appendData:function(t){var e=this._data;M(t,(function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])}))}},original:{count:lu,getItem:cu,appendData:uu},typedArray:{persistent:!(ou.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){e=e||[];for(var n=this._dimSize*(t-=this._offset),i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function lu(){return this._data.length}function cu(t){return this._data[t]}function uu(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var du={arrayRows:hu,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:hu,original:function(t,e,n,i){var r=Tr(t);return null!=n&&r instanceof Array?r[n]:r},typedArray:hu};function hu(t,e,n,i){return null!=n?t[n]:t}var fu={arrayRows:gu,objectRows:function(t,e,n,i){return pu(t[e],this._dimensionInfos[e])},keyedColumns:gu,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return!this._rawData.pure&&function(t){return _r(t)&&!(t instanceof Array)}(t)&&(this.hasItemOption=!0),pu(r instanceof Array?r[i]:r,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}};function gu(t,e,n,i){return pu(t[i],this._dimensionInfos[e])}function pu(t,e){var n=e&&e.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+kl(t)),null==t||""===t?NaN:+t;var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}function mu(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r,a,o=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(r=s.name,a=s.index),du[o](i,e,a,r)}}}function vu(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===gc||i===mc){var r=t.getRawDataItem(e);return i!==gc||z(r)||(r=null),r?r[n]:void 0}}}var yu=/\{@(.+?)\}/g,xu={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),a=n.getName(t),o=n.getRawDataItem(t),s=n.getItemVisual(t,"color"),l=n.getItemVisual(t,"borderColor"),c=this.ecModel.getComponent("tooltip"),u=Fr(c&&c.get("renderMode")),d=this.mainType,h="series"===d,f=n.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:r,data:o,dataType:e,value:i,color:s,borderColor:l,dimensionNames:f?f.dimensionNames:null,encode:f?f.encode:null,marker:Wl({color:s,renderMode:u}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,r){e=e||"normal";var a=this.getData(n),o=a.getItemModel(t),s=this.getDataParams(t,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=o.get("normal"===e?[r||"label","formatter"]:[e,r||"label","formatter"]);return"function"==typeof l?(s.status=e,s.dimensionIndex=i,l(s)):"string"==typeof l?Hl(l,s).replace(yu,(function(e,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),mu(a,t,n)})):void 0},getRawValue:function(t,e){return mu(this.getData(e),t)},formatTooltip:function(){}};function bu(t){return new wu(t)}function wu(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}var _u=wu.prototype;_u.perform=function(t){var e,n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var r=this.context;r.data=r.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var a,o=u(this._modBy),s=this._modDataCount||0,l=u(t&&t.modBy),c=t&&t.modDataCount||0;function u(t){return 1<=t||(t=1),t}o===l&&s===c||(e="reset"),!this._dirty&&"reset"!==e||(this._dirty=!1,a=function(t,e){var n,i;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(i=n.forceFirstProgress,n=n.progress),N(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var r=t._downstream;return r&&r.dirty(),i}(this,i)),this._modBy=l,this._modDataCount=c;var d=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,f=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(a||h<f)){var g=this._progress;if(N(g))for(var p=0;p<g.length;p++)Lu(this,g[p],h,f,l,c);else Lu(this,g,h,f,l,c)}this._dueIndex=f,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var Su,Cu,ku,Au,Mu,Tu,Iu=Tu={reset:function(t,e,n,i){Cu=t,Su=e,ku=n,Au=i,Mu=Math.ceil(Au/ku),Tu.next=1<ku&&0<Au?Pu:Du}};function Du(){return Cu<Su?Cu++:null}function Pu(){var t=Cu%Mu*ku+Math.ceil(Cu/Mu),e=Su<=Cu?null:t<Au?t:Cu;return Cu++,e}function Lu(t,e,n,i,r,a){Iu.reset(n,i,r,a),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:Iu.next},t.context)}_u.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},_u.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},_u.pipe=function(t){this._downstream===t&&!this._dirty||((this._downstream=t)._upstream=this,t.dirty())},_u.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},_u.getUpstream=function(){return this._upstream},_u.getDownstream=function(){return this._downstream},_u.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Eu=Nr(),Nu=lc.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=bu({count:Ou,reset:zu}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),_c(this);var r=this.getInitialData(t,n);Fu(r,this),this.dataTask.context.data=r,Eu(this).dataBeforeProcessed=r,Ru(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?nc(t):{},r=this.subType;lc.hasClass(r)&&(r+="Series"),v(t,e.getTheme().get(this.subType)),v(t,this.getDefaultOption()),Ar(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&ec(t,i,n)},mergeOption:function(t,e){t=v(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&ec(this.option,t,n),_c(this);var i=this.getInitialData(t,e);Fu(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Eu(this).dataBeforeProcessed=i,Ru(this)},fillDataTextStyle:function(t){if(t&&!F(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Ar(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=Vu(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return Eu(this).data},setData:function(t){var e=Vu(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}Eu(this).data=t},getSource:function(){return function(t){return wc(t).source}(this)},getRawData:function(){return Eu(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,i){var r=this,a="html"===(i=i||"html")?"<br/>":"\n",o="richText"===i,s={},l=0,c=this.getData(),u=c.mapDimension("defaultedTooltip",!0),d=u.length,h=this.getRawValue(t),f=N(h),g=c.getItemVisual(t,"color");z(g)&&g.colorStops&&(g=(g.colorStops[0]||{}).color),g=g||"transparent";var p=(1<d||f&&!d?function(n){var a=I(n,(function(t,e,n){var i=c.getDimensionInfo(n);return t|(i&&!1!==i.tooltip&&null!=i.displayName)}),0),d=[];function h(t,n){var u=c.getDimensionInfo(n);if(u&&!1!==u.otherDims.tooltip){var h=u.type,f="sub"+r.seriesIndex+"at"+l,p=Wl({color:g,type:"subItem",renderMode:i,markerId:f}),m=(a?("string"==typeof p?p:p.content)+zl(u.displayName||"-")+": ":"")+zl("ordinal"===h?t+"":"time"===h?e?"":Yl("yyyy/MM/dd hh:mm:ss",t):Ll(t));m&&d.push(m),o&&(s[f]=g,++l)}}u.length?M(u,(function(e){h(mu(c,t,e),e)})):M(n,h);var f=a?o?"\n":"<br/>":"",p=f+d.join(f||", ");return{renderMode:i,content:p,style:s}}(h):function(t){return{renderMode:i,content:zl(Ll(t)),style:s}}(d?mu(c,t,u[0]):f?h[0]:h)).content,m=r.seriesIndex+"at"+l,v=Wl({color:g,type:"item",renderMode:i,markerId:m});s[m]=g,++l;var y=c.getName(t),x=this.name;Pr(this)||(x=""),x=x?zl(x)+(e?": ":a):"";var b="string"==typeof v?v:v.content;return{html:e?b+x+p:x+b+(y?zl(y)+": "+p:p),markers:s}},isAnimationEnabled:function(){if(r.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel;return fc.getColorFromPalette.call(this,t,e,n)||i.getColorFromPalette(t,e,n)},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Ru(t){var e=t.name;Pr(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),i=[];return M(n,(function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)})),i.join(" ")}(t)||e)}function Ou(t){return t.model.getRawData().count()}function zu(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),Bu}function Bu(t,e){t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Fu(t,e){M(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,E(Hu,e))}))}function Hu(t){var e=Vu(t);e&&e.setOutputEnd(this.count())}function Vu(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}k(Nu,xu),k(Nu,fc);var Wu=function(){this.group=new Sn,this.uid=hl("viewComponent")},Xu=Wu.prototype={constructor:Wu,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){},filterForExposedEvent:null};function Yu(){var t=Nr();return function(e){var n=t(e),i=e.pipelineContext,r=n.large,a=n.progressiveRender,o=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(r^o||a^s)&&"reset"}}Xu.updateView=Xu.updateLayout=Xu.updateVisual=function(t,e,n,i){},Xr(Wu),qr(Wu,{registerWhenExtend:!0});var Gu=Nr(),Uu=Yu();function ju(){this.group=new Sn,this.uid=hl("viewChart"),this.renderTask=bu({plan:Ku,reset:Ju}),this.renderTask.context={view:this}}var qu=ju.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){$u(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){$u(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function Zu(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!Ls(t)))for(var i=0,r=t.childCount();i<r;i++)Zu(t.childAt(i),e,n)}function $u(t,e,n){var i=Er(t,e),r=e&&null!=e.highlightKey?Es(e.highlightKey):null;null!=i?M(kr(i),(function(e){Zu(t.getItemGraphicEl(e),n,r)})):t.eachItemGraphicEl((function(t){Zu(t,n,r)}))}function Ku(t){return Uu(t.model)}function Ju(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=r&&Gu(r).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==l&&o[l](e,n,i,r),Qu[l]}qu.updateView=qu.updateLayout=qu.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},Xr(ju),qr(ju,{registerWhenExtend:!0}),ju.markUpdateMethod=function(t,e){Gu(t).updateMethod=e};var Qu={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},td="\0__throttleOriginMethod",ed="\0__throttleRate",nd="\0__throttleType";function id(t,e,n){var i,r,a,o,s,l=0,c=0,u=null;function d(){c=(new Date).getTime(),u=null,t.apply(a,o||[])}function h(){i=(new Date).getTime(),a=this,o=arguments;var t=s||e,h=s||n;s=null,r=i-(h?l:c)-t,clearTimeout(u),h?u=setTimeout(d,t):0<=r?d():u=setTimeout(d,-r),l=i}return e=e||0,h.clear=function(){u&&(clearTimeout(u),u=null)},h.debounceNextCall=function(t){s=t},h}function rd(t,e,n,i){var r=t[e];if(r){var a=r[td]||r;if(r[ed]!==n||r[nd]!==i){if(null==n||!i)return t[e]=a;(r=t[e]=id(a,n,"debounce"===i))[td]=a,r[nd]=i,r[ed]=n}return r}}function ad(t,e){var n=t[e];n&&n[td]&&(t[e]=n[td])}var od={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=(t.visualColorAccessPath||"itemStyle.color").split("."),r=t.get(i),a=!R(r)||r instanceof Uo?null:r;r&&!a||(r=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",r);var o=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=t.get(o);if(n.setVisual("borderColor",s),!e.isSeriesFiltered(t))return a&&n.each((function(e){n.setItemVisual(e,"color",a(t.getDataParams(e)))})),{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e),r=n.get(i,!0),a=n.get(o,!0);null!=r&&t.setItemVisual(e,"color",r),null!=a&&t.setItemVisual(e,"borderColor",a)}:null}}},sd={legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}},ld=Math.PI;function cd(t,e,n,i){this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=Q()}var ud=cd.prototype;function dd(t,e,n,i,r){var a;function o(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}r=r||{},M(e,(function(e,s){if(!r.visualType||r.visualType===e.visualType){var l=t._stageTaskMap.get(e.uid),c=l.seriesTaskMap,u=l.overallTask;if(u){var d,h=u.agentStubMap;h.each((function(t){o(r,t)&&(t.dirty(),d=!0)})),d&&u.dirty(),hd(u,i);var f=t.getPerformArgs(u,r.block);h.each((function(t){t.perform(f)})),a|=u.perform(f)}else c&&c.each((function(s,l){o(r,s)&&s.dirty();var c=t.getPerformArgs(s,r.block);c.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),hd(s,i),a|=s.perform(c)}))}})),t.unfinished|=a}ud.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each((function(t){var e=t.overallTask;e&&e.dirty()}))},ud.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,a=i&&i.modDataCount;return{step:r,modBy:null!=a?Math.ceil(a/r):null,modDataCount:a}}},ud.getPipeline=function(t){return this._pipelineMap.get(t)},ud.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),r=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,a=t.get("large")&&i>=t.get("largeThreshold"),o="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:r,modDataCount:o,large:a}},ud.restorePipelines=function(t){var e=this,n=e._pipelineMap=Q();t.eachSeries((function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),_d(e,t,t.dataTask)}))},ud.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;M(this._allHandlers,(function(i){var r=t.get(i.uid)||t.set(i.uid,[]);i.reset&&function(t,e,n,i,r){var a=n.seriesTaskMap||(n.seriesTaskMap=Q()),o=e.seriesType,s=e.getTargetSeries;function l(n){var o=n.uid,s=a.get(o)||a.set(o,bu({plan:vd,reset:yd,count:wd}));s.context={model:n,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},_d(t,n,s)}e.createOnAllSeries?i.eachRawSeries(l):o?i.eachRawSeriesByType(o,l):s&&s(i,r).each(l);var c=t._pipelineMap;a.each((function(t,e){c.get(e)||(t.dispose(),a.removeKey(e))}))}(this,i,r,e,n),i.overallReset&&function(t,e,n,i,r){var a=n.overallTask=n.overallTask||bu({reset:fd});a.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:t};var o=a.agentStubMap=a.agentStubMap||Q(),s=e.seriesType,l=e.getTargetSeries,c=!0,u=e.modifyOutputEnd;function d(e){var n=e.uid,i=o.get(n);i||(i=o.set(n,bu({reset:gd,onDirty:md})),a.dirty()),i.context={model:e,overallProgress:c,modifyOutputEnd:u},i.agent=a,i.__block=c,_d(t,e,i)}s?i.eachRawSeriesByType(s,d):l?l(i,r).each(d):(c=!1,M(i.getSeries(),d));var h=t._pipelineMap;o.each((function(t,e){h.get(e)||(t.dispose(),a.dirty(),o.removeKey(e))}))}(this,i,r,e,n)}),this)},ud.prepareView=function(t,e,n,i){var r=t.renderTask,a=r.context;a.model=e,a.ecModel=n,a.api=i,r.__block=!t.incrementalPrepareRender,_d(this,e,r)},ud.performDataProcessorTasks=function(t,e){dd(this,this._dataProcessorHandlers,t,e,{block:!0})},ud.performVisualTasks=function(t,e,n){dd(this,this._visualHandlers,t,e,n)},ud.performSeriesTasks=function(t){var e;t.eachSeries((function(t){e|=t.dataTask.perform()})),this.unfinished|=e},ud.plan=function(){this._pipelineMap.each((function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)}))};var hd=ud.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function fd(t){t.overallReset(t.ecModel,t.api,t.payload)}function gd(t,e){return t.overallProgress&&pd}function pd(){this.agent.dirty(),this.getDownstream().dirty()}function md(){this.agent&&this.agent.dirty()}function vd(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function yd(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=kr(t.reset(t.model,t.ecModel,t.api,t.payload));return 1<e.length?T(e,(function(t,e){return bd(e)})):xd}var xd=bd(0);function bd(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var a=e.start;a<e.end;a++)r.dataEach(i,a);else r&&r.progress&&r.progress(e,i)}}function wd(t){return t.data.count()}function _d(t,e,n){var i=t._pipelineMap.get(e.uid);i.head||(i.head=n),i.tail&&i.tail.pipe(n),(i.tail=n).__idxInPipeline=i.count++,n.__pipeline=i}cd.wrapStageHandler=function(t,e){return R(t)&&(t={overallReset:t,seriesType:function(t){Sd=null;try{t(Cd,kd)}catch(t){}return Sd}(t)}),t.uid=hl("stageHandler"),e&&(t.visualType=e),t};var Sd,Cd={},kd={};function Ad(t,e){for(var n in e.prototype)t[n]=et}function Md(){return{axisLine:{lineStyle:{color:Dd}},axisTick:{lineStyle:{color:Dd}},axisLabel:{textStyle:{color:Dd}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Dd}}}}Ad(Cd,Dc),Ad(kd,Nc),Cd.eachSeriesByType=Cd.eachRawSeriesByType=function(t){Sd=t},Cd.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Sd=t.subType)};var Td=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Id={color:Td,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Td]},Dd="#eee",Pd=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Ld={color:Pd,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Dd},crossStyle:{color:Dd},label:{color:"#000"}}},legend:{textStyle:{color:Dd}},textStyle:{color:Dd},title:{textStyle:{color:Dd}},toolbox:{iconStyle:{normal:{borderColor:Dd}}},dataZoom:{textStyle:{color:Dd}},visualMap:{textStyle:{color:Dd}},timeline:{lineStyle:{color:Dd},itemStyle:{normal:{color:Pd[1]}},label:{normal:{textStyle:{color:Dd}}},controlStyle:{normal:{color:Dd,borderColor:Dd}}},timeAxis:Md(),logAxis:Md(),valueAxis:Md(),categoryAxis:Md(),line:{symbol:"circle"},graph:{color:Pd},gauge:{title:{textStyle:{color:Dd}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Ld.categoryAxis.splitLine.show=!1,lc.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=yc;if(F(e))n=xc;else if(N(e)){0===e.length&&(n=pc);for(var i=0,r=e.length;i<r;i++){var a=e[i];if(null!=a){if(N(a)){n=pc;break}if(z(a)){n=mc;break}}}}else if(z(e)){for(var o in e)if(e.hasOwnProperty(o)&&A(e[o])){n=vc;break}}else if(null!=e)throw new Error("Invalid data");wc(t).sourceFormat=n}(this)}}),Wu.extend({type:"dataset"});var Ed=lo.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.rx,a=e.ry,o=.5522848*r,s=.5522848*a;t.moveTo(n-r,i),t.bezierCurveTo(n-r,i-s,n-o,i-a,n,i-a),t.bezierCurveTo(n+o,i-a,n+r,i-s,n+r,i),t.bezierCurveTo(n+r,i+s,n+o,i+a,n,i+a),t.bezierCurveTo(n-o,i+a,n-r,i+s,n-r,i),t.closePath()}}),Nd=/[\s,]+/;function Rd(t){for(O(t)&&(t=(new DOMParser).parseFromString(t,"text/xml")),9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function Od(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}Od.prototype.parse=function(t,e){e=e||{};var n=Rd(t);if(!n)throw new Error("Illegal svg");var i=new Sn;this._root=i;var r=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),o=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(o)&&(o=null),Wd(n,i,null,!0);for(var s,l,c=n.firstChild;c;)this._parseNode(c,i),c=c.nextSibling;if(r){var u=q(r).split(Nd);4<=u.length&&(s={x:parseFloat(u[0]||0),y:parseFloat(u[1]||0),width:parseFloat(u[2]),height:parseFloat(u[3])})}if(s&&null!=a&&null!=o&&(l=jd(s,a,o),!e.ignoreViewBox)){var d=i;(i=new Sn).add(d),d.scale=l.scale.slice(),d.position=l.position.slice()}return e.ignoreRootClip||null==a||null==o||i.setClipPath(new Vo({shape:{x:0,y:0,width:a,height:o}})),{root:i,width:a,height:o,viewBoxRect:s,viewBoxTransform:l}},Od.prototype._parseNode=function(t,e){var n,i,r=t.nodeName.toLowerCase();if("defs"===r?this._isDefine=!0:"text"===r&&(this._isText=!0),this._isDefine){if(i=Bd[r]){var a=i.call(this,t),o=t.getAttribute("id");o&&(this._defs[o]=a)}}else(i=zd[r])&&(n=i.call(this,t,e),e.add(n));for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===r?this._isDefine=!1:"text"===r&&(this._isText=!1)},Od.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var r=new Ao({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Fd(e,r),Wd(t,r,this._defs);var a=r.style.fontSize;a&&a<9&&(r.style.fontSize=9,r.scale=r.scale||[1,1],r.scale[0]*=a/9,r.scale[1]*=a/9);var o=r.getBoundingRect();return this._textX+=o.width,e.add(r),r};var zd={g:function(t,e){var n=new Sn;return Fd(e,n),Wd(t,n,this._defs),n},rect:function(t,e){var n=new Vo;return Fd(e,n),Wd(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new To;return Fd(e,n),Wd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new Xo;return Fd(e,n),Wd(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Ed;return Fd(e,n),Wd(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n=n&&Hd(n);var i=new No({shape:{points:n||[]}});return Fd(e,i),Wd(t,i,this._defs),i},polyline:function(t,e){var n=new lo;Fd(e,n),Wd(t,n,this._defs);var i=t.getAttribute("points");return i=i&&Hd(i),new Ro({shape:{points:i||[]}})},image:function(t,e){var n=new Vi;return Fd(e,n),Wd(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,i=t.getAttribute("y")||0,r=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(a);var o=new Sn;return Fd(e,o),Wd(t,o,this._defs),o},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0,o=new Sn;return Fd(e,o),Wd(t,o,this._defs),this._textX+=r,this._textY+=a,o},path:function(t,e){var n=ko(t.getAttribute("d")||"");return Fd(e,n),Wd(t,n,this._defs),n}},Bd={lineargradient:function(t){var e=new $o(parseInt(t.getAttribute("x1")||0,10),parseInt(t.getAttribute("y1")||0,10),parseInt(t.getAttribute("x2")||10,10),parseInt(t.getAttribute("y2")||0,10));return function(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType){var i=n.getAttribute("offset");i=0<i.indexOf("%")?parseInt(i,10)/100:i?parseFloat(i):0;var r=n.getAttribute("stop-color")||"#000000";e.addColorStop(i,r)}n=n.nextSibling}}(t,e),e},radialgradient:function(t){}};function Fd(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),b(e.__inheritedStyle,t.__inheritedStyle))}function Hd(t){for(var e=q(t).split(Nd),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),a=parseFloat(e[i+1]);n.push([r,a])}return n}var Vd={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function Wd(t,e,n,i){var r=e.__inheritedStyle||{},a="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=null,r=[];n.replace(Gd,(function(t,e,n){r.push(e,n)}));for(var a=r.length-1;0<a;a-=2){var o=r[a],s=r[a-1];switch(i=i||ne(),s){case"translate":o=q(o).split(Nd),oe(i,i,[parseFloat(o[0]),parseFloat(o[1]||0)]);break;case"scale":o=q(o).split(Nd),le(i,i,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=q(o).split(Nd),se(i,i,parseFloat(o[0]));break;case"skew":o=q(o).split(Nd),console.warn("Skew transform is not supported yet");break;case"matrix":o=q(o).split(Nd),i[0]=parseFloat(o[0]),i[1]=parseFloat(o[1]),i[2]=parseFloat(o[2]),i[3]=parseFloat(o[3]),i[4]=parseFloat(o[4]),i[5]=parseFloat(o[5])}}e.setLocalTransform(i)}}(t,e),x(r,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var i,r={};for(Ud.lastIndex=0;null!=(i=Ud.exec(e));)r[i[1]]=i[2];for(var a in Vd)Vd.hasOwnProperty(a)&&null!=r[a]&&(n[Vd[a]]=r[a]);return n}(t)),!i))for(var o in Vd)if(Vd.hasOwnProperty(o)){var s=t.getAttribute(o);null!=s&&(r[Vd[o]]=s)}var l=a?"textFill":"fill",c=a?"textStroke":"stroke";e.style=e.style||new Rn;var u=e.style;null!=r.fill&&u.set(l,Yd(r.fill,n)),null!=r.stroke&&u.set(c,Yd(r.stroke,n)),M(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){null!=r[t]&&u.set("lineWidth"===t&&a?"textStrokeWidth":t,parseFloat(r[t]))})),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),M(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(t){null!=r[t]&&u.set(t,r[t])})),r.lineDash&&(e.style.lineDash=q(r.lineDash).split(Nd)),u[c]&&"none"!==u[c]&&(e[c]=!0),e.__inheritedStyle=r}var Xd=/url\(\s*#(.*?)\)/;function Yd(t,e){var n=e&&t&&t.match(Xd);return n?e[q(n[1])]:t}var Gd=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,Ud=/([^\s:;]+)\s*:\s*([^:;]+)/g;function jd(t,e,n){var i=Math.min(e/t.width,n/t.height);return{scale:[i,i],position:[-(t.x+t.width/2)*i+e/2,-(t.y+t.height/2)*i+n/2]}}var qd=Q(),Zd=function(t){return qd.get(t)},$d={geoJSON:function(t){var e=t.source;t.geoJSON=O(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=Rd(t.source)}},Kd=j,Jd=M,Qd=R,th=z,eh=lc.parseClassType,nh={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},ih="__flagInMainProcess",rh="__optionUpdated",ah=/^[a-zA-Z0-9_]+$/;function oh(t,e){return function(n,i,r){!e&&this._disposed||(n=n&&n.toLowerCase(),Mt.prototype[t].call(this,n,i,r))}}function sh(){Mt.call(this)}function lh(t,e,n){n=n||{},"string"==typeof e&&(e=Lh[e]),this._dom=t;var i=this._zr=vr(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=id(L(i.flush,i),17),(e=m(e))&&iu(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Oc;var r=this._api=function(t){var e=t._coordSysMgr;return x(new Nc(t),{getCoordinateSystems:L(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}(this);function a(t,e){return t.__prio-e.__prio}In(Ph,a),In(Th,a),this._scheduler=new cd(this,r,Th,Ph),Mt.call(this,this._ecEventProcessor=new kh),this._messageCenter=new sh,this._initEvents(),this.resize=L(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",(function(){e.trigger("rendered"),!t.animation.isFinished()||e[rh]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")}))}(i,this),$(this)}sh.prototype.on=oh("on",!0),sh.prototype.off=oh("off",!0),sh.prototype.one=oh("one",!0),k(sh,Mt);var ch=lh.prototype;function uh(t,e,n){if(!this._disposed){var i,r=this._model,a=this._coordSysMgr.getCoordinateSystems();e=Or(r,e);for(var o=0;o<a.length;o++){var s=a[o];if(s[t]&&null!=(i=s[t](r,e,n)))return i}}}ch._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[rh]){var e=this[rh].silent;this[ih]=!0,hh(this),dh.update.call(this),this[ih]=!1,this[rh]=!1,mh.call(this,e),vh.call(this,e)}else if(t.unfinished){var n=1,i=this._model;t.unfinished=!1;do{var r=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),gh(this,i),t.performVisualTasks(i),wh(this,this._model,0,"remain"),n-=+new Date-r}while(0<n&&t.unfinished);t.unfinished||this._zr.flush()}}},ch.getDom=function(){return this._dom},ch.getZr=function(){return this._zr},ch.setOption=function(t,e,n){if(!this._disposed){var i;if(th(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[ih]=!0,!this._model||e){var r=new Wc(this._api),a=this._theme,o=this._model=new Dc;o.scheduler=this._scheduler,o.init(null,null,a,r)}this._model.setOption(t,Ih),n?(this[rh]={silent:i},this[ih]=!1):(hh(this),dh.update.call(this),this._zr.flush(),this[rh]=!1,this[ih]=!1,mh.call(this,i),vh.call(this,i))}},ch.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},ch.getModel=function(){return this._model},ch.getOption=function(){return this._model&&this._model.getOption()},ch.getWidth=function(){return this._zr.getWidth()},ch.getHeight=function(){return this._zr.getHeight()},ch.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},ch.getRenderedCanvas=function(t){if(r.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},ch.getSvgDataUrl=function(){if(r.svgSupported){var t=this._zr;return M(t.storage.getDisplayList(),(function(t){t.stopAnimation(!0)})),t.painter.pathToDataUrl()}},ch.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;Jd(e,(function(t){n.eachComponent({mainType:t},(function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)}))}));var a="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Jd(i,(function(t){t.group.ignore=!1})),a}},ch.getConnectedDataURL=function(t){if(!this._disposed&&r.canvasSupported){var e=this.group,n=Math.min,i=Math.max;if(Rh[e]){var a=1/0,o=1/0,s=-1/0,l=-1/0,c=[],u=t&&t.pixelRatio||1;M(Nh,(function(r,u){if(r.group===e){var d=r.getRenderedCanvas(m(t)),h=r.getDom().getBoundingClientRect();a=n(h.left,a),o=n(h.top,o),s=i(h.right,s),l=i(h.bottom,l),c.push({dom:d,left:h.left,top:h.top})}}));var d=(s*=u)-(a*=u),h=(l*=u)-(o*=u),f=w();f.width=d,f.height=h;var g=vr(f);return t.connectedBackgroundColor&&g.add(new Vo({shape:{x:0,y:0,width:d,height:h},style:{fill:t.connectedBackgroundColor}})),Jd(c,(function(t){var e=new Vi({style:{x:t.left*u-a,y:t.top*u-o,image:t.dom}});g.add(e)})),g.refreshImmediately(),f.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},ch.convertToPixel=E(uh,"convertToPixel"),ch.convertFromPixel=E(uh,"convertFromPixel"),ch.containPixel=function(t,e){var n;if(!this._disposed)return M(t=Or(this._model,t),(function(t,i){0<=i.indexOf("Models")&&M(t,(function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n|=!!r.containPoint(e);else if("seriesModels"===i){var a=this._chartsMap[t.__viewId];a&&a.containPoint&&(n|=a.containPoint(e,t))}}),this)}),this),!!n},ch.getVisual=function(t,e){var n=(t=Or(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),i=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=i?n.getItemVisual(i,e):n.getVisual(e)},ch.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},ch.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var dh={prepareAndUpdate:function(t){hh(this),dh.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,a=this._coordSysMgr,o=this._scheduler;if(e){o.restoreData(e,t),o.performSeriesTasks(e),a.create(e,n),o.performDataProcessorTasks(e,t),gh(this,e),a.update(e,n),xh(e),o.performVisualTasks(e,t),bh(this,e,n,t);var s=e.get("backgroundColor")||"transparent";if(r.canvasSupported)i.setBackgroundColor(s);else{var l=Be(s);s=Ue(l,"rgb"),0===l[3]&&(s="transparent")}_h(e,n)}},updateTransform:function(t){var e=this._model,n=this,i=this._api;if(e){var r=[];e.eachComponent((function(a,o){var s=n.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(o,e,i,t);l&&l.update&&r.push(s)}else r.push(s)}));var a=Q();e.eachSeries((function(r){var o=n._chartsMap[r.__viewId];if(o.updateTransform){var s=o.updateTransform(r,e,i,t);s&&s.update&&a.set(r.uid,1)}else a.set(r.uid,1)})),xh(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:a}),wh(n,e,0,t,a),_h(e,this._api)}},updateView:function(t){var e=this._model;e&&(ju.markUpdateMethod(t,"updateView"),xh(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),bh(this,this._model,this._api,t),_h(e,this._api))},updateVisual:function(t){dh.update.call(this,t)},updateLayout:function(t){dh.update.call(this,t)}};function hh(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),yh(t,"component",e,n),yh(t,"chart",e,n),n.plan()}function fh(t,e,n,i,r){var a=t._model;if(i){var o={};o[i+"Id"]=n[i+"Id"],o[i+"Index"]=n[i+"Index"],o[i+"Name"]=n[i+"Name"];var s={mainType:i,query:o};r&&(s.subType=r);var l=n.excludeSeriesId;null!=l&&(l=Q(kr(l))),a&&a.eachComponent(s,(function(e){l&&null!=l.get(e.id)||c(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])}),t)}else Jd(t._componentsViews.concat(t._chartsViews),c);function c(i){i&&i.__alive&&i[e]&&i[e](i.__model,a,t._api,n)}}function gh(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries((function(t){i.updateStreamModes(t,n[t.__viewId])}))}function ph(t,e){var n=t.type,i=t.escapeConnect,r=Ah[n],a=r.actionInfo,o=(a.update||"update").split(":"),s=o.pop();o=null!=o[0]&&eh(o[0]),this[ih]=!0;var l=[t],c=!1;t.batch&&(c=!0,l=T(t.batch,(function(e){return(e=b(x({},e),t)).batch=null,e})));var u,d=[],h="highlight"===n||"downplay"===n;Jd(l,(function(t){(u=(u=r.action(t,this._model,this._api))||x({},t)).type=a.event||u.type,d.push(u),h?fh(this,s,t,"series"):o&&fh(this,s,t,o.main,o.sub)}),this),"none"===s||h||o||(this[rh]?(hh(this),dh.update.call(this,t),this[rh]=!1):dh[s].call(this,t)),u=c?{type:a.event||n,escapeConnect:i,batch:d}:d[0],this[ih]=!1,e||this._messageCenter.trigger(u.type,u)}function mh(t){for(var e=this._pendingActions;e.length;){var n=e.shift();ph.call(this,n,t)}}function vh(t){t||this.trigger("updated")}function yh(t,e,n,i){for(var r="component"===e,a=r?t._componentsViews:t._chartsViews,o=r?t._componentsMap:t._chartsMap,s=t._zr,l=t._api,c=0;c<a.length;c++)a[c].__alive=!1;function u(t){var e="_ec_"+t.id+"_"+t.type,c=o[e];if(!c){var u=eh(t.type);(c=new(r?Wu.getClass(u.main,u.sub):ju.getClass(u.sub))).init(n,l),o[e]=c,a.push(c),s.add(c.group)}t.__viewId=c.__id=e,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},r||i.prepareView(c,t,n,l)}for(r?n.eachComponent((function(t,e){"series"!==t&&u(e)})):n.eachSeries(u),c=0;c<a.length;){var d=a[c];d.__alive?c++:(r||d.renderTask.dispose(),s.remove(d.group),d.dispose(n,l),a.splice(c,1),delete o[d.__id],d.__id=d.group.__ecComponentInfo=null)}}function xh(t){t.clearColorPalette(),t.eachSeries((function(t){t.clearColorPalette()}))}function bh(t,e,n,i){!function(t,e,n,i,r){Jd(t._componentsViews,(function(t){var r=t.__model;t.render(r,e,n,i),Ch(r,t)}))}(t,e,n,i),Jd(t._chartsViews,(function(t){t.__alive=!1})),wh(t,e,0,i),Jd(t._chartsViews,(function(t){t.__alive||t.remove(e,n)}))}function wh(t,e,n,i,a){var o,s=t._scheduler;e.eachSeries((function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var r=n.renderTask;s.updatePayload(r,i),a&&a.get(e.uid)&&r.dirty(),o|=r.perform(s.getPerformArgs(r)),n.group.silent=!!e.get("silent"),Ch(e,n),function(t,e){var n=t.get("blendMode")||null;e.group.traverse((function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable((function(t){t.setStyle("blend",n)}))}))}(e,n)})),s.unfinished|=o,function(t,e){var n=0;t._zr.storage.traverse((function(t){n++})),n>e.get("hoverLayerThreshold")&&!r.node&&e.eachSeries((function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse((function(t){t.useHoverLayer=!0}))}}))}(t,e),function(t,e){var n=e.getModel("aria");if(n.get("show"))if(n.get("description"))t.setAttribute("aria-label",n.get("description"));else{var i=0;e.eachSeries((function(t,e){++i}),this);var r,a=n.get("data.maxCount")||10,o=n.get("series.maxCount")||10,s=Math.min(i,o);if(!(i<1)){var l=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();r=l?u(d("general.withTitle"),{title:l}):d("general.withoutTitle");var c=[];r+=u(d(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),e.eachSeries((function(t,e){if(e<s){var n,r=t.get("name"),o="series."+(1<i?"multiple":"single")+".";n=u(n=d(r?o+"withName":o+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return sd.series.typeNames[t]||""}(t.subType)});var l=t.getData();(window.data=l).count()>a?n+=u(d("data.partialData"),{displayCnt:a}):n+=d("data.allData");for(var h=[],f=0;f<l.count();f++)if(f<a){var g=l.getName(f),p=mu(l,f);h.push(u(d(g?"data.withName":"data.withoutName"),{name:g,value:p}))}n+=h.join(d("data.separator.middle"))+d("data.separator.end"),c.push(n)}})),r+=c.join(d("series.multiple.separator.middle"))+d("series.multiple.separator.end"),t.setAttribute("aria-label",r)}}function u(t,e){if("string"!=typeof t)return t;var n=t;return M(e,(function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)})),n}function d(t){var e=n.get(t);if(null!=e)return e;for(var i=t.split("."),r=sd.aria,a=0;a<i.length;++a)r=r[i[a]];return r}}(t._zr.dom,e)}function _h(t,e){Jd(Dh,(function(n){n(t,e)}))}ch.resize=function(t){if(!this._disposed){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[ih]=!0,n&&hh(this),dh.update.call(this),this[ih]=!1,mh.call(this,i),vh.call(this,i)}}},ch.showLoading=function(t,e){if(!this._disposed&&(th(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Eh[t])){var n=Eh[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},ch.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},ch.makeActionFromEvent=function(t){var e=x({},t);return e.type=Mh[t.type],e},ch.dispatchAction=function(t,e){this._disposed||(th(e)||(e={silent:!!e}),Ah[t.type]&&this._model&&(this[ih]?this._pendingActions.push(t):(ph.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&r.browser.weChat&&this._throttledZrFlush(),mh.call(this,e.silent),vh.call(this,e.silent))))},ch.appendData=function(t){if(!this._disposed){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0}},ch.on=oh("on",!1),ch.off=oh("off",!1),ch.one=oh("one",!1);var Sh=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Ch(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse((function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))}))}function kh(){}ch._initEvents=function(){Jd(Sh,(function(t){function e(e){var n,i=this.getModel(),r=e.target;if("globalout"===t)n={};else if(r&&null!=r.dataIndex){var a=r.dataModel||i.getSeriesByIndex(r.seriesIndex);n=a&&a.getDataParams(r.dataIndex,r.dataType,r)||{}}else r&&r.eventData&&(n=x({},r.eventData));if(n){var o=n.componentType,s=n.componentIndex;"markLine"!==o&&"markPoint"!==o&&"markArea"!==o||(o="series",s=n.seriesIndex);var l=o&&null!=s&&i.getComponent(o,s),c=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:r,packedEvent:n,model:l,view:c},this.trigger(t,n)}}e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)}),this),Jd(Mh,(function(t,e){this._messageCenter.on(e,(function(t){this.trigger(e,t)}),this)}),this)},ch.isDisposed=function(){return this._disposed},ch.clear=function(){this._disposed||this.setOption({series:[]},!0)},ch.dispose=function(){if(!this._disposed){this._disposed=!0,Br(this.getDom(),Bh,"");var t=this._api,e=this._model;Jd(this._componentsViews,(function(n){n.dispose(e,t)})),Jd(this._chartsViews,(function(n){n.dispose(e,t)})),this._zr.dispose(),delete Nh[this.id]}},k(lh,Mt),kh.prototype={constructor:kh,normalizeQuery:function(t){var e={},n={},i={};if(O(t)){var r=eh(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};M(t,(function(t,r){for(var s=!1,l=0;l<a.length;l++){var c=a[l],u=r.lastIndexOf(c);if(0<u&&u===r.length-c.length){var d=r.slice(0,u);"data"!==d&&(e.mainType=d,e[c.toLowerCase()]=t,s=!0)}}o.hasOwnProperty(r)&&(n[r]=t,s=!0),s||(i[r]=t)}))}return{cptQuery:e,dataQuery:n,otherQuery:i}},filter:function(t,e,n){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,a=i.packedEvent,o=i.model,s=i.view;if(!o||!s)return!0;var l=e.cptQuery,c=e.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,r,a));function u(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},afterTrigger:function(){this.eventInfo=null}};var Ah={},Mh={},Th=[],Ih=[],Dh=[],Ph=[],Lh={},Eh={},Nh={},Rh={},Oh=new Date-0,zh=new Date-0,Bh="_echarts_instance_";function Fh(t){Rh[t]=!1}var Hh=Fh;function Vh(t){return Nh[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,Bh)]}function Wh(t,e){Lh[t]=e}function Xh(t){Ih.push(t)}function Yh(t,e){Zh(Th,t,e,1e3)}function Gh(t,e,n){"function"==typeof e&&(n=e,e="");var i=th(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,Kd(ah.test(i)&&ah.test(e)),Ah[i]||(Ah[i]={action:n,actionInfo:t}),Mh[e]=i}function Uh(t,e){Oc.register(t,e)}function jh(t,e){Zh(Ph,t,e,1e3,"layout")}function qh(t,e){Zh(Ph,t,e,3e3,"visual")}function Zh(t,e,n,i,r){(Qd(e)||th(e))&&(n=e,e=i);var a=cd.wrapStageHandler(n,r);return a.__prio=e,a.__raw=n,t.push(a),a}function $h(t,e){Eh[t]=e}function Kh(t){return lc.extend(t)}function Jh(t){return Wu.extend(t)}function Qh(t){return Nu.extend(t)}function tf(t){return ju.extend(t)}function ef(t){return t}function nf(t,e,n,i,r){this._old=t,this._new=e,this._oldKeyGetter=n||ef,this._newKeyGetter=i||ef,this.context=r}function rf(t,e,n,i,r){for(var a=0;a<t.length;a++){var o="_ec_"+r[i](t[a],a),s=e[o];null==s?(n.push(o),e[o]=a):(s.length||(e[o]=s=[s]),s.push(a))}}qh(2e3,od),Xh(iu),Yh(900,(function(t){var e=Q();t.eachSeries((function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),a={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}})),e.each(ru)})),$h("default",(function(t,e){b(e=e||{},{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var n=new Vo({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4}),i=new qo({shape:{startAngle:-ld/2,endAngle:-ld/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001}),r=new Vo({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});i.animateShape(!0).when(1e3,{endAngle:3*ld/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*ld/2}).delay(300).start("circularInOut");var a=new Sn;return a.add(i),a.add(r),a.add(n),a.resize=function(){var e=t.getWidth()/2,a=t.getHeight()/2;i.setShape({cx:e,cy:a});var o=i.shape.r;r.setShape({x:e-o,y:a-o,width:2*o,height:2*o}),n.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a})),Gh({type:"highlight",event:"highlight",update:"highlight"},et),Gh({type:"downplay",event:"downplay",update:"downplay"},et),Wh("light",Id),Wh("dark",Ld),nf.prototype={constructor:nf,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],r=[];for(rf(t,{},i,"_oldKeyGetter",this),rf(e,n,r,"_newKeyGetter",this),a=0;a<t.length;a++)null!=(s=n[o=i[a]])?((c=s.length)?(1===c&&(n[o]=null),s=s.shift()):n[o]=null,this._update&&this._update(s,a)):this._remove&&this._remove(a);for(var a=0;a<r.length;a++){var o=r[a];if(n.hasOwnProperty(o)){var s;if(null==(s=n[o]))continue;if(s.length)for(var l=0,c=s.length;l<c;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var af=Q(["tooltip","label","itemName","itemId","seriesName"]);function of(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function sf(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function lf(t){null!=t&&x(this,t),this.otherDims={}}var cf=z,uf="undefined",df={float:typeof Float64Array==uf?Array:Float64Array,int:typeof Int32Array==uf?Array:Int32Array,ordinal:Array,number:Array,time:Array},hf=typeof Uint32Array==uf?Array:Uint32Array,ff=typeof Int32Array==uf?Array:Int32Array,gf=typeof Uint16Array==uf?Array:Uint16Array;function pf(t){return 65535<t._rawCount?hf:gf}var mf=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],vf=["_extent","_approximateExtent","_rawExtent"];function yf(t,e){M(mf.concat(e.__wrappedMethods||[]),(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t.__wrappedMethods=e.__wrappedMethods,M(vf,(function(n){t[n]=m(e[n])})),t._calculationInfo=x(e._calculationInfo)}var xf=function(t,e){t=t||["x","y"];for(var n={},i=[],r={},a=0;a<t.length;a++){var o=t[a];O(o)?o=new lf({name:o}):o instanceof lf||(o=new lf(o));var s=o.name;o.type=o.type||"float",o.coordDim||(o.coordDim=s,o.coordDimIndex=0),o.otherDims=o.otherDims||{},i.push(s),(n[s]=o).index=a,o.createInvertedIndices&&(r[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(t){var e={},n=e.encode={},i=Q(),r=[],a=[],o=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};M(t.dimensions,(function(e){var s=t.getDimensionInfo(e),l=s.coordDim;if(l){var c=s.coordDimIndex;of(n,l)[c]=e,s.isExtraCoord||(i.set(l,1),function(t){return!("ordinal"===t||"time"===t)}(s.type)&&(r[0]=e),of(o.encode,l)[c]=s.index),s.defaultTooltip&&a.push(e)}af.each((function(t,e){var i=of(n,e),r=s.otherDims[e];null!=r&&!1!==r&&(i[r]=s.name)}))}));var s=[],l={};i.each((function(t,e){var i=n[e];l[e]=i[0],s=s.concat(i)})),e.dataDimsOnCoord=s,e.encodeFirstDimNotExtra=l;var c=n.label;c&&c.length&&(r=c.slice());var u=n.tooltip;return u&&u.length?a=u.slice():a.length||(a=r.slice()),n.defaultedLabel=r,n.defaultedTooltip=a,e}(this),this._invertedIndicesMap=r,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},bf=xf.prototype;function wf(t,e,n,i,r){var a=df[e.type],o=i-1,s=e.name,l=t[s][o];if(l&&l.length<n){for(var c=new a(Math.min(r-o*n,n)),u=0;u<l.length;u++)c[u]=l[u];t[s][o]=c}for(var d=i*n;d<r;d+=n)t[s].push(new a(Math.min(r-d,n)))}function _f(t){var e=t._invertedIndicesMap;M(e,(function(n,i){var r=t._dimensionInfos[i].ordinalMeta;if(r){n=e[i]=new ff(r.categories.length);for(var a=0;a<n.length;a++)n[a]=-1;for(a=0;a<t._count;a++)n[t.get(i,a)]=a}}))}function Sf(t,e,n){var i;if(null!=e){var r=t._chunkSize,a=Math.floor(n/r),o=t.dimensions[e],s=t._storage[o][a];if(s){i=s[n%r];var l=t._dimensionInfos[o].ordinalMeta;l&&l.categories.length&&(i=l.categories[i])}}return i}function Cf(t){return t}function kf(t){return t<this._count&&0<=t?this._indices[t]:-1}function Af(t,e){var n=t._idList[e];return null==n&&(n=Sf(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n}function Mf(t){return N(t)||(t=[t]),t}function Tf(t,e){var n=t.dimensions,i=new xf(T(n,t.getDimensionInfo,t),t.hostModel);yf(i,t);for(var r=i._storage={},a=t._storage,o=0;o<n.length;o++){var s=n[o];a[s]&&(0<=S(e,s)?(r[s]=If(a[s]),i._rawExtent[s]=[1/0,-1/0],i._extent[s]=null):r[s]=a[s])}return i}function If(t){for(var e,n,i=new Array(t.length),r=0;r<t.length;r++)i[r]=(n=void 0,(n=(e=t[r]).constructor)===Array?e.slice():new n(e));return i}function Df(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType}function Pf(t,e,n){bc.isInstance(e)||(e=bc.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var i=(n.dimsDef||[]).slice(),r=Q(),a=Q(),o=[],s=function(t,e,n,i){var r=Math.max(t.dimensionsDetectCount||1,e.length,n.length,i||0);return M(e,(function(t){var e=t.dimsDef;e&&(r=Math.max(r,e.length))})),r}(e,t,i,n.dimCount),l=0;l<s;l++){var c=i[l]=x({},z(i[l])?i[l]:{name:i[l]}),u=c.name,d=o[l]=new lf;null!=u&&null==r.get(u)&&(d.name=d.displayName=u,r.set(u,l)),null!=c.type&&(d.type=c.type),null!=c.displayName&&(d.displayName=c.displayName)}var h=n.encodeDef;!h&&n.encodeDefaulter&&(h=n.encodeDefaulter(e,s)),(h=Q(h)).each((function(t,e){if(1===(t=kr(t).slice()).length&&!O(t[0])&&t[0]<0)h.set(e,!1);else{var n=h.set(e,[]);M(t,(function(t,i){O(t)&&(t=r.get(t)),null!=t&&t<s&&(n[i]=t,g(o[t],e,i))}))}}));var f=0;function g(t,e,n){null!=af.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,a.set(e,!0))}M(t,(function(t,e){var n,i,r;if(O(t))n=t,t={};else{n=t.name;var a=t.ordinalMeta;t.ordinalMeta=null,(t=m(t)).ordinalMeta=a,i=t.dimsDef,r=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}if(!1!==(s=h.get(n))){var s;if(!(s=kr(s)).length)for(var l=0;l<(i&&i.length||1);l++){for(;f<o.length&&null!=o[f].coordDim;)f++;f<o.length&&s.push(f++)}M(s,(function(e,a){var s=o[e];if(g(b(s,t),n,a),null==s.name&&i){var l=i[a];z(l)||(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}r&&b(s.otherDims,r)}))}}));var p=n.generateCoord,v=n.generateCoordCount,y=null!=v;v=p?v||1:0;for(var w,_=p||"value",S=0;S<s;S++)null==(d=o[S]=o[S]||new lf).coordDim&&(d.coordDim=Lf(_,a,y),d.coordDimIndex=0,(!p||v<=0)&&(d.isExtraCoord=!0),v--),null==d.name&&(d.name=Lf(d.coordDim,r)),null==d.type&&(1===Tc((w=e).data,w.sourceFormat,w.seriesLayoutBy,w.dimensionsDefine,w.startIndex,S)||d.isExtraCoord&&(null!=d.otherDims.itemName||null!=d.otherDims.seriesName))&&(d.type="ordinal");return o}function Lf(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}bf.type="list",bf.hasItemOption=!0,bf.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},bf.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},bf.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},bf.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return!0===e?(i||[]).slice():i&&i[e]},bf.initData=function(t,e,n){(bc.isInstance(t)||A(t))&&(t=new au(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=fu[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=fu.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},bf.getProvider=function(){return this._rawData},bf.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=n),this._initDataFromProvider(n,i)},bf.appendValues=function(t,e){for(var n=this._chunkSize,i=this._storage,r=this.dimensions,a=r.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e?e.length:0),c=this._chunkCount,u=0;u<a;u++)o[v=r[u]]||(o[v]=[1/0,-1/0]),i[v]||(i[v]=[]),wf(i,this._dimensionInfos[v],n,c,l),this._chunkCount=i[v].length;for(var d=new Array(a),h=s;h<l;h++){for(var f=h-s,g=Math.floor(h/n),p=h%n,m=0;m<a;m++){var v=r[m],y=this._dimValueGetterArrayRows(t[f]||d,v,f,m);i[v][g][p]=y;var x=o[v];y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}e&&(this._nameList[h]=e[f])}this._rawCount=this._count=l,this._extent={},_f(this)},bf._initDataFromProvider=function(t,e){if(!(e<=t)){for(var n,i=this._chunkSize,r=this._rawData,a=this._storage,o=this.dimensions,s=o.length,l=this._dimensionInfos,c=this._nameList,u=this._idList,d=this._rawExtent,h=this._nameRepeatCount={},f=this._chunkCount,g=0;g<s;g++){d[w=o[g]]||(d[w]=[1/0,-1/0]);var p=l[w];0===p.otherDims.itemName&&(n=this._nameDimIdx=g),0===p.otherDims.itemId&&(this._idDimIdx=g),a[w]||(a[w]=[]),wf(a,p,i,f,e),this._chunkCount=a[w].length}for(var m=new Array(s),v=t;v<e;v++){m=r.getItem(v,m);for(var y=Math.floor(v/i),x=v%i,b=0;b<s;b++){var w,_=a[w=o[b]][y],S=this._dimValueGetter(m,w,v,b);_[x]=S;var C=d[w];S<C[0]&&(C[0]=S),S>C[1]&&(C[1]=S)}if(!r.pure){var k=c[v];if(m&&null==k)if(null!=m.name)c[v]=k=m.name;else if(null!=n){var A=o[n],M=a[A][y];if(M){k=M[x];var T=l[A].ordinalMeta;T&&T.categories.length&&(k=T.categories[k])}}var I=null==m?null:m.id;null==I&&null!=k&&(h[k]=h[k]||0,0<h[I=k]&&(I+="__ec__"+h[k]),h[k]++),null!=I&&(u[v]=I)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},_f(this)}},bf.count=function(){return this._count},bf.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){r=new e(n);for(var i=0;i<n;i++)r[i]=t[i]}else r=new e(t.buffer,0,n)}else{var r=new(e=pf(this))(this.count());for(i=0;i<r.length;i++)r[i]=i}return r},bf.get=function(t,e){if(!(0<=e&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize);return n[t][i][e%this._chunkSize]},bf.getByRawIndex=function(t,e){if(!(0<=e&&e<this._rawCount))return NaN;var n=this._storage[t];return n?n[Math.floor(e/this._chunkSize)][e%this._chunkSize]:NaN},bf._getFast=function(t,e){var n=Math.floor(e/this._chunkSize);return this._storage[t][n][e%this._chunkSize]},bf.getValues=function(t,e){var n=[];N(t)||(e=t,t=this.dimensions);for(var i=0,r=t.length;i<r;i++)n.push(this.get(t[i],e));return n},bf.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},bf.getDataExtent=function(t){t=this.getDimension(t);var e=[1/0,-1/0];if(!this._storage[t])return e;var n,i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(n=this._extent[t])return n.slice();for(var r=(n=e)[0],a=n[1],o=0;o<i;o++){var s=this._getFast(t,this.getRawIndex(o));s<r&&(r=s),a<s&&(a=s)}return this._extent[t]=[r,a]},bf.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},bf.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},bf.getCalculationInfo=function(t){return this._calculationInfo[t]},bf.setCalculationInfo=function(t,e){cf(t)?x(this._calculationInfo,t):this._calculationInfo[t]=e},bf.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,i=this.count();n<i;n++){var r=this.get(t,n);isNaN(r)||(e+=r)}return e},bf.getMedian=function(t){var e=[];this.each(t,(function(t,n){isNaN(t)||e.push(t)}));var n=[].concat(e).sort((function(t,e){return t-e})),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},bf.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},bf.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},bf.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var a=(i+r)/2|0;if(e[a]<t)i=1+a;else{if(!(e[a]>t))return a;r=a-1}}return-1},bf.indicesOfNearest=function(t,e,n){var i=[];if(!this._storage[t])return i;null==n&&(n=1/0);for(var r=1/0,a=-1,o=0,s=0,l=this.count();s<l;s++){var c=e-this.get(t,s),u=Math.abs(c);u<=n&&((u<r||u===r&&0<=c&&a<0)&&(r=u,a=c,o=0),c===a&&(i[o++]=s))}return i.length=o,i},bf.getRawIndex=Cf,bf.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++)e.push(this.get(this.dimensions[n],t));return e},bf.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||Sf(this,this._nameDimIdx,e)||""},bf.getId=function(t){return Af(this,this.getRawIndex(t))},bf.each=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;for(var r=(t=T(Mf(t),this.getDimension,this)).length,a=0;a<this.count();a++)switch(r){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var o=0,s=[];o<r;o++)s[o]=this.get(t[o],a);s[o]=a,e.apply(n,s)}}},bf.filterSelf=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=T(Mf(t),this.getDimension,this);for(var r=this.count(),a=new(pf(this))(r),o=[],s=t.length,l=0,c=t[0],u=0;u<r;u++){var d,h=this.getRawIndex(u);if(0===s)d=e.call(n,u);else if(1===s){var f=this._getFast(c,h);d=e.call(n,f,u)}else{for(var g=0;g<s;g++)o[g]=this._getFast(c,h);o[g]=u,d=e.apply(n,o)}d&&(a[l++]=h)}return l<r&&(this._indices=a),this._count=l,this._extent={},this.getRawIndex=this._indices?kf:Cf,this}},bf.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=e.length;if(i){var r=this.count(),a=new(pf(this))(r),o=0,s=e[0],l=t[s][0],c=t[s][1],u=!1;if(!this._indices){var d=0;if(1===i){for(var h=this._storage[e[0]],f=0;f<this._chunkCount;f++)for(var g=h[f],p=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<p;m++)(l<=(w=g[m])&&w<=c||isNaN(w))&&(a[o++]=d),d++;u=!0}else if(2===i){h=this._storage[s];var v=this._storage[e[1]],y=t[e[1]][0],x=t[e[1]][1];for(f=0;f<this._chunkCount;f++){g=h[f];var b=v[f];for(p=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<p;m++){var w=g[m],_=b[m];(l<=w&&w<=c||isNaN(w))&&(y<=_&&_<=x||isNaN(_))&&(a[o++]=d),d++}}u=!0}}if(!u)if(1===i)for(m=0;m<r;m++){var S=this.getRawIndex(m);(l<=(w=this._getFast(s,S))&&w<=c||isNaN(w))&&(a[o++]=S)}else for(m=0;m<r;m++){var C=!0;for(S=this.getRawIndex(m),f=0;f<i;f++){var k=e[f];((w=this._getFast(n,S))<t[k][0]||w>t[k][1])&&(C=!1)}C&&(a[o++]=this.getRawIndex(m))}return o<r&&(this._indices=a),this._count=o,this._extent={},this.getRawIndex=this._indices?kf:Cf,this}}},bf.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var r=[];return this.each(t,(function(){r.push(e&&e.apply(this,arguments))}),n=n||i||this),r},bf.map=function(t,e,n,i){n=n||i||this;var r=Tf(this,t=T(Mf(t),this.getDimension,this));r._indices=this._indices,r.getRawIndex=r._indices?kf:Cf;for(var a=r._storage,o=[],s=this._chunkSize,l=t.length,c=this.count(),u=[],d=r._rawExtent,h=0;h<c;h++){for(var f=0;f<l;f++)u[f]=this.get(t[f],h);u[l]=h;var g=e&&e.apply(n,u);if(null!=g){"object"!=typeof g&&(o[0]=g,g=o);for(var p=this.getRawIndex(h),m=Math.floor(p/s),v=p%s,y=0;y<g.length;y++){var x=t[y],b=g[y],w=d[x],_=a[x];_&&(_[m][v]=b),b<w[0]&&(w[0]=b),b>w[1]&&(w[1]=b)}}}return r},bf.downSample=function(t,e,n,i){for(var r=Tf(this,[t]),a=r._storage,o=[],s=Math.floor(1/e),l=a[t],c=this.count(),u=this._chunkSize,d=r._rawExtent[t],h=new(pf(this))(c),f=0,g=0;g<c;g+=s){c-g<s&&(o.length=s=c-g);for(var p=0;p<s;p++){var m=this.getRawIndex(g+p),v=Math.floor(m/u);o[p]=l[v][m%u]}var y=n(o),x=this.getRawIndex(Math.min(g+i(o,y)||0,c-1)),b=x%u;(l[Math.floor(x/u)][b]=y)<d[0]&&(d[0]=y),y>d[1]&&(d[1]=y),h[f++]=x}return r._count=f,r._indices=h,r.getRawIndex=kf,r},bf.getItemModel=function(t){var e=this.hostModel;return new ll(this.getRawDataItem(t),e,e&&e.ecModel)},bf.diff=function(t){var e=this;return new nf(t?t.getIndices():[],this.getIndices(),(function(e){return Af(t,e)}),(function(t){return Af(e,t)}))},bf.getVisual=function(t){var e=this._visual;return e&&e[t]},bf.setVisual=function(t,e){if(cf(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},bf.setLayout=function(t,e){if(cf(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},bf.getLayout=function(t){return this._layout[t]},bf.getItemLayout=function(t){return this._itemLayouts[t]},bf.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?x(this._itemLayouts[t]||{},e):e},bf.clearItemLayouts=function(){this._itemLayouts.length=0},bf.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],r=i&&i[e];return null!=r||n?r:this.getVisual(e)},bf.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},r=this.hasItemVisual;if(this._itemVisuals[t]=i,cf(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a],r[a]=!0);else i[e]=n,r[e]=!0},bf.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},bf.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(Df,e)),this._graphicEls[t]=e},bf.getItemGraphicEl=function(t){return this._graphicEls[t]},bf.eachItemGraphicEl=function(t,e){M(this._graphicEls,(function(n,i){n&&t&&t.call(e,n,i)}))},bf.cloneShallow=function(t){if(!t){var e=T(this.dimensions,this.getDimensionInfo,this);t=new xf(e,this.hostModel)}return t._storage=this._storage,yf(t,this),t._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,t.getRawIndex=t._indices?kf:Cf,t},bf.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(G(arguments)))})},bf.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],bf.CHANGABLE_METHODS=["filterSelf","selectRange"];var Ef=function(t,e){return Pf((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function Nf(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.firstCategoryDimIndex=null}var Rf={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis")[0],a=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",a),Of(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),Of(a)&&(i.set("y",a),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",r),Of(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar")[0],a=r.findAxisModel("radiusAxis"),o=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Of(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),Of(o)&&(i.set("angle",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var r=t.ecModel,a=r.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();M(a.parallelAxisIndex,(function(t,a){var s=r.getComponent("parallelAxis",t),l=o[a];n.set(l,s),Of(s)&&null==e.firstCategoryDimIndex&&(i.set(l,s),e.firstCategoryDimIndex=a)}))}};function Of(t){return"category"===t.get("type")}function zf(t,e,n){var i,r,a,o,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,c=!(!t||!t.get("stack"));if(M(e,(function(t,n){O(t)&&(e[n]=t={name:t}),c&&!t.isExtraCoord&&(s||i||!t.ordinalMeta||(i=t),r||"ordinal"===t.type||"time"===t.type||l&&l!==t.coordDim||(r=t))})),!r||s||i||(s=!0),r){a="__\0ecstackresult",o="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var u=r.coordDim,d=r.type,h=0;M(e,(function(t){t.coordDim===u&&h++})),e.push({name:a,coordDim:u,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0}),h++,e.push({name:o,coordDim:o,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:r&&r.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:o,stackResultDimension:a}}function Bf(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Ff(t,e){return Bf(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Hf(t,e,n){n=n||{},bc.isInstance(t)||(t=bc.seriesDataToSource(t));var i,r=e.get("coordinateSystem"),a=Oc.get(r),o=function(t){var e=t.get("coordinateSystem"),n=new Nf(e),i=Rf[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}(e);o&&(i=T(o.coordSysDims,(function(t){var e={name:t},n=o.axisMap.get(t);if(n){var i=n.get("type");e.type=sf(i)}return e}))),i=i||a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"];var s,l,c=Ef(t,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?E(kc,i,e):null});o&&M(c,(function(t,e){var n=o.categoryAxisMap.get(t.coordDim);n&&(null==s&&(s=e),t.ordinalMeta=n.getOrdinalMeta()),null!=t.otherDims.itemName&&(l=!0)})),l||null==s||(c[s].otherDims.itemName=0);var u=zf(e,c),d=new xf(c,e);d.setCalculationInfo(u);var h=null!=s&&function(t){if(t.sourceFormat===gc){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!N(Tr(e))}}(t)?function(t,e,n,i){return i===s?n:this.defaultDimValueGetter(t,e,n,i)}:null;return d.hasItemOption=!1,d.initData(t,null,h),d}function Vf(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Wf(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication}Vf.prototype.parse=function(t){return t},Vf.prototype.getSetting=function(t){return this._setting[t]},Vf.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Vf.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Vf.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Vf.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Vf.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Vf.prototype.getExtent=function(){return this._extent.slice()},Vf.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Vf.prototype.isBlank=function(){return this._isBlank},Vf.prototype.setBlank=function(t){this._isBlank=t},Vf.prototype.getLabel=null,Xr(Vf),qr(Vf,{registerWhenExtend:!0}),Wf.createByAxisModel=function(t){var e=t.option,n=e.data,i=n&&T(n,Gf);return new Wf({categories:i,needCollect:!i,deduplication:!1!==e.dedplication})};var Xf=Wf.prototype;function Yf(t){return t._map||(t._map=Q(t.categories))}function Gf(t){return z(t)&&null!=t.value?t.value:t+""}Xf.getOrdinal=function(t){return Yf(this).get(t)},Xf.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var i=Yf(this);return null==(e=i.get(t))&&(n?(this.categories[e=this.categories.length]=t,i.set(t,e)):e=NaN),e};var Uf=Vf.prototype,jf=Vf.extend({type:"ordinal",init:function(t,e){t&&!N(t)||(t=new Wf({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),Uf.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return Uf.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(Uf.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:et,niceExtent:et});jf.create=function(){return new jf};var qf=pl;function Zf(t){return yl(t)+2}function $f(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function Kf(t,e){isFinite(t[0])||(t[0]=e[0]),isFinite(t[1])||(t[1]=e[1]),$f(t,0,e),$f(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var Jf=pl,Qf=Vf.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),Qf.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Zf(t)},getTicks:function(t){var e=this._interval,n=this._extent,i=this._niceExtent,r=this._intervalPrecision,a=[];if(!e)return a;n[0]<i[0]&&a.push(t?Jf(i[0]-e,r):n[0]);for(var o=i[0];o<=i[1]&&(a.push(o),(o=Jf(o+e,r))!==a[a.length-1]);)if(1e4<a.length)return[];var s=a.length?a[a.length-1]:i[1];return n[1]>s&&a.push(t?Jf(s+e,r):n[1]),a},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),r=1;r<e.length;r++){for(var a=e[r-1],o=0,s=[],l=(e[r]-a)/t;o<t-1;){var c=pl(a+(o+1)*l);c>i[0]&&c<i[1]&&s.push(c),o++}n.push(s)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=yl(t)||0:"auto"===n&&(n=this._intervalPrecision),Ll(t=Jf(t,n,!0))},niceTicks:function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var a=function(t,e,n,i){var r={},a=r.interval=Tl((t[1]-t[0])/e,!0);null!=n&&a<n&&(a=r.interval=n),null!=i&&i<a&&(a=r.interval=i);var o=r.intervalPrecision=Zf(a);return Kf(r.niceTickExtent=[qf(Math.ceil(t[0]/a)*a,o),qf(Math.floor(t[1]/a)*a,o)],t),r}(i,t,e,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;isFinite(e[1]-e[0])||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=Jf(Math.floor(e[0]/i)*i)),t.fixMax||(e[1]=Jf(Math.ceil(e[1]/i)*i))}});Qf.create=function(){return new Qf};var tg="__ec_stack_",eg="undefined"!=typeof Float32Array?Float32Array:Array;function ng(t){return t.get("stack")||tg+t.seriesIndex}function ig(t){return t.dim+t.index}function rg(t,e){var n=[];return e.eachSeriesByType(t,(function(t){ug(t)&&!dg(t)&&n.push(t)})),n}function ag(t){var e=function(t){var e={};M(t,(function(t){var n=t.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var i=t.getData(),r=n.dim+"_"+n.index,a=i.mapDimension(n.dim),o=0,s=i.count();o<s;++o){var l=i.get(a,o);e[r]?e[r].push(l):e[r]=[l]}}));var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(r){r.sort((function(t,e){return t-e}));for(var a=null,o=1;o<r.length;++o){var s=r[o]-r[o-1];0<s&&(a=null===a?s:Math.min(a,s))}n[i]=a}}return n}(t),n=[];return M(t,(function(t){var i,r=t.coordinateSystem.getBaseAxis(),a=r.getExtent();if("category"===r.type)i=r.getBandWidth();else if("value"===r.type||"time"===r.type){var o=e[r.dim+"_"+r.index],s=Math.abs(a[1]-a[0]),l=r.scale.getExtent(),c=Math.abs(l[1]-l[0]);i=o?s/c*o:s}else{var u=t.getData();i=Math.abs(a[1]-a[0])/u.count()}var d=gl(t.get("barWidth"),i),h=gl(t.get("barMaxWidth"),i),f=gl(t.get("barMinWidth")||1,i),g=t.get("barGap"),p=t.get("barCategoryGap");n.push({bandWidth:i,barWidth:d,barMaxWidth:h,barMinWidth:f,barGap:g,barCategoryGap:p,axisKey:ig(r),stackId:ng(t)})})),og(n)}function og(t){var e={};M(t,(function(t,n){var i=t.axisKey,r=t.bandWidth,a=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=a.stacks;e[i]=a;var s=t.stackId;o[s]||a.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!o[s].width&&(o[s].width=l,l=Math.min(a.remainedWidth,l),a.remainedWidth-=l);var c=t.barMaxWidth;c&&(o[s].maxWidth=c);var u=t.barMinWidth;u&&(o[s].minWidth=u);var d=t.barGap;null!=d&&(a.gap=d);var h=t.barCategoryGap;null!=h&&(a.categoryGap=h)}));var n={};return M(e,(function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,a=gl(t.categoryGap,r),o=gl(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,c=(s-a)/(l+(l-1)*o);c=Math.max(c,0),M(i,(function(t){var e=t.maxWidth,n=t.minWidth;if(t.width)i=t.width,e&&(i=Math.min(i,e)),n&&(i=Math.max(i,n)),t.width=i,s-=i+o*i,l--;else{var i=c;e&&e<i&&(i=Math.min(e,s)),n&&i<n&&(i=n),i!==c&&(t.width=i,s-=i+o*i,l--)}})),c=(s-a)/(l+(l-1)*o),c=Math.max(c,0);var u,d=0;M(i,(function(t,e){t.width||(t.width=c),d+=(u=t).width*(1+o)})),u&&(d-=u.width*o);var h=-d/2;M(i,(function(t,i){n[e][i]=n[e][i]||{bandWidth:r,offset:h,width:t.width},h+=t.width*(1+o)}))})),n}function sg(t,e,n){if(t&&e){var i=t[ig(e)];return null!=i&&null!=n&&(i=i[ng(n)]),i}}function lg(t,e){var n=rg(t,e),i=ag(n),r={};M(n,(function(t){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),o=ng(t),s=i[ig(a)][o],l=s.offset,c=s.width,u=n.getOtherAxis(a),d=t.get("barMinHeight")||0;r[o]=r[o]||[],e.setLayout({bandWidth:s.bandWidth,offset:l,size:c});for(var h=e.mapDimension(u.dim),f=e.mapDimension(a.dim),g=Bf(e,h),p=u.isHorizontal(),m=hg(0,u),v=0,y=e.count();v<y;v++){var x,b,w,_,S,C=e.get(h,v),k=e.get(f,v),A=0<=C?"p":"n",M=m;g&&(r[o][k]||(r[o][k]={p:m,n:m}),M=r[o][k][A]),p?(x=M,b=(S=n.dataToPoint([C,k]))[1]+l,w=S[0]-m,_=c,Math.abs(w)<d&&(w=(w<0?-1:1)*d),isNaN(w)||g&&(r[o][k][A]+=w)):(x=(S=n.dataToPoint([k,C]))[0]+l,b=M,w=c,_=S[1]-m,Math.abs(_)<d&&(_=(_<=0?-1:1)*d),isNaN(_)||g&&(r[o][k][A]+=_)),e.setItemLayout(v,{x:x,y:b,width:w,height:_})}}),this)}var cg={seriesType:"bar",plan:Yu(),reset:function(t){if(ug(t)&&dg(t)){var e=t.getData(),n=t.coordinateSystem,i=n.grid.getRect(),r=n.getBaseAxis(),a=n.getOtherAxis(r),o=e.mapDimension(a.dim),s=e.mapDimension(r.dim),l=a.isHorizontal(),c=l?0:1,u=sg(ag([t]),r,t).width;return.5<u||(u=.5),{progress:function(t,e){for(var r,d=t.count,h=new eg(2*d),f=new eg(2*d),g=new eg(d),p=[],m=[],v=0,y=0;null!=(r=t.next());)m[c]=e.get(o,r),m[1-c]=e.get(s,r),p=n.dataToPoint(m,null,p),f[v]=l?i.x+i.width:p[0],h[v++]=p[0],f[v]=l?p[1]:i.y+i.height,h[v++]=p[1],g[y++]=r;e.setLayout({largePoints:h,largeDataIndices:g,largeBackgroundPoints:f,barWidth:u,valueAxisStart:hg(0,a),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function ug(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function dg(t){return t.pipelineContext&&t.pipelineContext.large}function hg(t,e){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var fg=Qf.prototype,gg=Math.ceil,pg=Math.floor,mg=864e5,vg=Qf.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return Yl(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=mg,e[1]+=mg),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-mg}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=pl(pg(e[0]/i)*i)),t.fixMax||(e[1]=pl(gg(e[1]/i)*i))},niceTicks:function(t,e,n){var i=this._extent,r=i[1]-i[0],a=r/(t=t||10);null!=e&&a<e&&(a=e),null!=n&&n<a&&(a=n);var o=yg.length,s=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=1+r:i=r}return n}(yg,a,0,o),l=yg[Math.min(s,o-1)],c=l[1];"year"===l[0]&&(c*=Tl(r/c/t,!0));var u=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,d=[Math.round(gg((i[0]-u)/c)*c+u),Math.round(pg((i[1]-u)/c)*c+u)];Kf(d,i),this._stepLvl=l,this._interval=c,this._niceExtent=d},parse:function(t){return+kl(t)}});M(["contain","normalize"],(function(t){vg.prototype[t]=function(e){return fg[t].call(this,this.parse(e))}}));var yg=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",mg],["MM-dd\nyyyy",2*mg],["MM-dd\nyyyy",3*mg],["MM-dd\nyyyy",4*mg],["MM-dd\nyyyy",5*mg],["MM-dd\nyyyy",6*mg],["week",7*mg],["MM-dd\nyyyy",864e6],["week",14*mg],["week",21*mg],["month",31*mg],["week",42*mg],["month",62*mg],["week",70*mg],["quarter",95*mg],["month",31*mg*4],["month",13392e6],["half-year",16416e6],["month",31*mg*8],["month",26784e6],["year",380*mg]];vg.create=function(t){return new vg({useUTC:t.ecModel.get("useUTC")})};var xg=Vf.prototype,bg=Qf.prototype,wg=yl,_g=pl,Sg=Math.floor,Cg=Math.ceil,kg=Math.pow,Ag=Math.log,Mg=Vf.extend({type:"log",base:10,$constructor:function(){Vf.apply(this,arguments),this._originalScale=new Qf},getTicks:function(t){var e=this._originalScale,n=this._extent,i=e.getExtent();return T(bg.getTicks.call(this,t),(function(t){var r=pl(kg(this.base,t));return r=t===n[0]&&e.__fixMin?Tg(r,i[0]):r,t===n[1]&&e.__fixMax?Tg(r,i[1]):r}),this)},getMinorTicks:bg.getMinorTicks,getLabel:bg.getLabel,scale:function(t){return t=xg.scale.call(this,t),kg(this.base,t)},setExtent:function(t,e){var n=this.base;t=Ag(t)/Ag(n),e=Ag(e)/Ag(n),bg.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=xg.getExtent.call(this);e[0]=kg(t,e[0]),e[1]=kg(t,e[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(e[0]=Tg(e[0],i[0])),n.__fixMax&&(e[1]=Tg(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Ag(t[0])/Ag(e),t[1]=Ag(t[1])/Ag(e),xg.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n==1/0||n<=0)){var i=Al(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var r=[pl(Cg(e[0]/i)*i),pl(Sg(e[1]/i)*i)];this._interval=i,this._niceExtent=r}},niceExtent:function(t){bg.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function Tg(t,e){return _g(t,wg(e))}function Ig(t,e){var n,i,r,a=t.type,o=e.getMin(),s=e.getMax(),l=null!=o,c=null!=s,u=t.getExtent();"ordinal"===a?n=e.getCategories().length:(N(i=e.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=gl(i[0],1),i[1]=gl(i[1],1),r=u[1]-u[0]||Math.abs(u[0])),null==o&&(o="ordinal"===a?n?0:NaN:u[0]-i[0]*r),null==s&&(s="ordinal"===a?n?n-1:NaN:u[1]+i[1]*r),"dataMin"===o?o=u[0]:"function"==typeof o&&(o=o({min:u[0],max:u[1]})),"dataMax"===s?s=u[1]:"function"==typeof s&&(s=s({min:u[0],max:u[1]})),null!=o&&isFinite(o)||(o=NaN),null!=s&&isFinite(s)||(s=NaN),t.setBlank(V(o)||V(s)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(0<o&&0<s&&!l&&(o=0),o<0&&s<0&&!c&&(s=0));var d=e.ecModel;if(d&&"time"===a){var h,f=rg("bar",d);if(M(f,(function(t){h|=t.getBaseAxis()===e.axis})),h){var g=ag(f),p=function(t,e,n,i){var r=n.axis.getExtent(),a=r[1]-r[0],o=sg(i,n.axis);if(void 0===o)return{min:t,max:e};var s=1/0;M(o,(function(t){s=Math.min(t.offset,s)}));var l=-1/0;M(o,(function(t){l=Math.max(t.offset+t.width,l)})),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-t,d=u/(1-(s+l)/a)-u;return{min:t-=s/c*d,max:e+=l/c*d}}(o,s,e,g);o=p.min,s=p.max}}return[o,s]}function Dg(t,e){var n=Ig(t,e),i=null!=e.getMin(),r=null!=e.getMax(),a=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var o=t.type;t.setExtent(n[0],n[1]),t.niceExtent({splitNumber:a,fixMin:i,fixMax:r,minInterval:"interval"===o||"time"===o?e.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)}function Pg(t,e){if(e=e||t.get("type"))switch(e){case"category":return new jf(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new Qf;default:return(Vf.getClass(e)||Qf).create(t)}}function Lg(t){var e,n=t.getLabelModel().get("formatter"),i="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof n?(e=n,n=function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}):"function"==typeof n?function(e,r){return null!=i&&(r=e-i),n(Eg(t,e),r)}:function(e){return t.scale.getLabel(e)}}function Eg(t,e){return"category"===t.type?t.scale.getLabel(e):e}function Ng(t){var e=t.get("interval");return null==e?"auto":e}function Rg(t){return"category"===t.type&&0===Ng(t.getLabelModel())}M(["contain","normalize"],(function(t){Mg.prototype[t]=function(e){return e=Ag(e)/Ag(this.base),xg[t].call(this,e)}})),Mg.create=function(){return new Mg};var Og={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!V(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!V(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:et,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},zg=ls({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+r,i+a),t.lineTo(n-r,i+a),t.closePath()}}),Bg=ls({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+r,i),t.lineTo(n,i+a),t.lineTo(n-r,i),t.closePath()}}),Fg=ls({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,a=Math.max(r,e.height),o=r/2,s=o*o/(a-o),l=i-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,d=Math.sin(c),h=Math.cos(c),f=.6*o,g=.7*o;t.moveTo(n-u,l+s),t.arc(n,l,o,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+u-d*f,l+s+h*f,n,i-g,n,i),t.bezierCurveTo(n,i-g,n-u+d*f,l+s+h*f,n-u,l+s),t.closePath()}}),Hg=ls({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.x,r=e.y,a=e.width/3*2;t.moveTo(i,r),t.lineTo(i+a,r+n),t.lineTo(i,r+n/4*3),t.lineTo(i-a,r+n),t.lineTo(i,r),t.closePath()}}),Vg={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var a=Math.min(n,i);r.x=t,r.y=e,r.width=a,r.height=a},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},Wg={};M({line:Xo,rect:Vo,roundRect:Vo,square:Vo,circle:To,diamond:Bg,pin:Fg,arrow:Hg,triangle:zg},(function(t,e){Wg[e]=new t}));var Xg=ls({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=oi(t,e,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var r=Wg[i];r=r||Wg[i="rect"],Vg[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n)}}});function Yg(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function Gg(t,e,n,i,r,a,o){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?hs(t.slice(8),new _n(e,n,i,r),o?"center":"cover"):0===t.indexOf("path://")?ds(t.slice(7),{},new _n(e,n,i,r),o?"center":"cover"):new Xg({shape:{symbolType:t,x:e,y:n,width:i,height:r}})).__isEmptyBrush=l,s.setColor=Yg,s.setColor(a),s}var Ug=(Object.freeze||Object)({createList:function(t){return Hf(t.getSource(),t)},getLayoutRect:Ql,dataStack:{isDimensionStacked:Bf,enableDataStack:zf,getStackedDimension:Ff},createScale:function(t,e){var n=e;ll.isInstance(e)||k(n=new ll(e),Og);var i=Pg(n);return i.setExtent(t[0],t[1]),Dg(i,n),i},mixinAxisModelCommonMethods:function(t){k(t,Og)},completeDimensions:Pf,createDimensions:Ef,createSymbol:Gg});function jg(t,e){return Math.abs(t-e)<1e-8}function qg(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var a=1;a<t.length;a++){var o=t[a];i+=$a(r[0],r[1],o[0],o[1],e,n),r=o}var s=t[0];return jg(r[0],s[0])&&jg(r[1],s[1])||(i+=$a(r[0],r[1],s[0],s[1],e,n)),0!==i}function Zg(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function $g(t,e,n){for(var i=[],r=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,l=t.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,a=l+=a,i.push([s/n,l/n])}return i}function Kg(t){return function(t){if(t.UTF8Encoding){var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,i=0;i<n.length;i++)for(var r=n[i].geometry,a=r.coordinates,o=r.encodeOffsets,s=0;s<a.length;s++){var l=a[s];if("Polygon"===r.type)a[s]=$g(l,o[s],e);else if("MultiPolygon"===r.type)for(var c=0;c<l.length;c++)l[c]=$g(l[c],o[s][c],e)}t.UTF8Encoding=!1}}(t),T(D(t.features,(function(t){return t.geometry&&t.properties&&0<t.geometry.coordinates.length})),(function(t){var e=t.properties,n=t.geometry,i=n.coordinates,r=[];"Polygon"===n.type&&r.push({type:"polygon",exterior:i[0],interiors:i.slice(1)}),"MultiPolygon"===n.type&&M(i,(function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}));var a=new Zg(e.name,r,e.cp);return a.properties=e,a}))}Zg.prototype={constructor:Zg,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],r=[],a=[],o=this.geometries,s=0;s<o.length;s++)"polygon"===o[s].type&&(Ca(o[s].exterior,r,a),wt(n,n,r),_t(i,i,a));return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new _n(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var a=n[i].interiors;if(qg(n[i].exterior,t[0],t[1])){for(var o=0;o<(a?a.length:0);o++)if(qg(a[o]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),a=r.width/r.height;n?i=i||n/a:n=a*i;for(var o=new _n(t,e,n,i),s=r.calculateTransform(o),l=this.geometries,c=0;c<l.length;c++)if("polygon"===l[c].type){for(var u=l[c].exterior,d=l[c].interiors,h=0;h<u.length;h++)bt(u[h],u[h],s);for(var f=0;f<(d?d.length:0);f++)for(h=0;h<d[f].length;h++)bt(d[f][h],d[f][h],s)}(r=this._rect).copy(o),this.center=[r.x+r.width/2,r.y+r.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new Zg(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var Jg=Nr();function Qg(t,e){var n,i=tp(t,"labels"),r=Ng(e);return ep(i,r)||np(i,r,{labels:R(r)?rp(t,r):ip(t,n="auto"===r?function(t){var e=Jg(t).autoInterval;return null!=e?e:Jg(t).autoInterval=t.calculateCategoryInterval()}(t):r),labelCategoryInterval:n})}function tp(t,e){return Jg(t)[e]||(Jg(t)[e]=[])}function ep(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function np(t,e,n){return t.push({key:e,value:n}),n}function ip(t,e,n){var i=Lg(t),r=t.scale,a=r.getExtent(),o=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=a[0],u=r.count();0!==c&&1<l&&2<u/l&&(c=Math.round(Math.ceil(c/l)*l));var d=Rg(t),h=o.get("showMinLabel")||d,f=o.get("showMaxLabel")||d;h&&c!==a[0]&&p(a[0]);for(var g=c;g<=a[1];g+=l)p(g);function p(t){s.push(n?t:{formattedLabel:i(t),rawLabel:r.getLabel(t),tickValue:t})}return f&&g-l!==a[1]&&p(a[1]),s}function rp(t,e,n){var i=t.scale,r=Lg(t),a=[];return M(i.getTicks(),(function(t){var o=i.getLabel(t);e(t,o)&&a.push(n?t:{formattedLabel:r(t),rawLabel:o,tickValue:t})})),a}var ap=[0,1],op=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function sp(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}op.prototype={constructor:op,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return n<=t&&t<=i},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return xl(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&sp(n=n.slice(),i.count()),fl(t,ap,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&sp(n=n.slice(),i.count());var r=fl(t,n,ap,e);return this.scale.scale(r)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=T(function(t,e){return"category"===t.type?function(t,e){var n,i,r=tp(t,"ticks"),a=Ng(e),o=ep(r,a);if(o)return o;if(e.get("show")&&!t.scale.isBlank()||(n=[]),R(a))n=rp(t,a,!0);else if("auto"===a){var s=Qg(t,t.getLabelModel());i=s.labelCategoryInterval,n=T(s.labels,(function(t){return t.tickValue}))}else n=ip(t,i=a,!0);return np(r,a,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:t.scale.getTicks()}}(this,e).ticks,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this);return function(t,e,n,i){var r=e.length;if(t.onBand&&!n&&r){var a,o=t.getExtent();if(1===r)e[0].coord=o[0],a=e[1]={coord:o[0]};else{var s=(e[r-1].coord-e[0].coord)/(e[r-1].tickValue-e[0].tickValue);M(e,(function(t){t.coord-=s/2}));var l=t.scale.getExtent();e.push(a={coord:e[r-1].coord+s*(1+l[1]-e[r-1].tickValue)})}var c=o[0]>o[1];u(e[0].coord,o[0])&&(i?e[0].coord=o[0]:e.shift()),i&&u(o[0],e[0].coord)&&e.unshift({coord:o[0]}),u(o[1],a.coord)&&(i?a.coord=o[1]:e.pop()),i&&u(a.coord,o[1])&&e.push({coord:o[1]})}function u(t,e){return t=pl(t),e=pl(e),c?e<t:t<e}}(this,n,e.get("alignWithLabel"),t.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return 0<t&&t<100||(t=5),T(this.scale.getMinorTicks(t),(function(t){return T(t,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this)},getViewLabels:function(){return function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),n=Qg(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Lg(t);return{labels:T(e,(function(e,i){return{formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}}))}}(t)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Lg(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,a=r.getExtent(),o=r.count();if(a[1]-a[0]<1)return 0;var s=1;40<o&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=t.dataToCoord(l+1)-t.dataToCoord(l),u=Math.abs(c*Math.cos(i)),d=Math.abs(c*Math.sin(i)),h=0,f=0;l<=a[1];l+=s){var g,p=ii(n(l),e.font,"center","top");g=1.3*p.height,h=Math.max(h,1.3*p.width,7),f=Math.max(f,g,7)}var m=h/u,v=f/d;isNaN(m)&&(m=1/0),isNaN(v)&&(v=1/0);var y=Math.max(0,Math.floor(Math.min(m,v))),x=Jg(t.model),b=t.getExtent(),w=x.lastAutoInterval,_=x.lastTickCount;return null!=w&&null!=_&&Math.abs(w-y)<=1&&Math.abs(_-o)<=1&&y<w&&x.axisExtend0===b[0]&&x.axisExtend1===b[1]?y=w:(x.lastTickCount=o,x.lastAutoInterval=y,x.axisExtend0=b[0],x.axisExtend1=b[1]),y}(this)}};var lp=Kg,cp={};M(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],(function(t){cp[t]=nt[t]}));var up={};function dp(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return mu(t,e,n[0]);if(i){for(var r=[],a=0;a<n.length;a++){var o=mu(t,e,n[a]);r.push(o)}return r.join(" ")}}function hp(t,e,n){Sn.call(this),this.updateData(t,e,n)}M(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],(function(t){up[t]=el[t]})),Nu.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return Hf(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var fp=hp.prototype,gp=hp.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function pp(t){return[t[0]/2,t[1]/2]}function mp(t,e){this.parent.drift(t,e)}fp._createSymbol=function(t,e,n,i,r){this.removeAll();var a=Gg(t,-1,-1,2,2,e.getItemVisual(n,"color"),r);a.attr({z2:100,culling:!0,scale:pp(i)}),a.drift=mp,this._symbolType=t,this.add(a)},fp.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},fp.getSymbolPath=function(){return this.childAt(0)},fp.getScale=function(){return this.childAt(0).scale},fp.highlight=function(){this.childAt(0).trigger("emphasis")},fp.downplay=function(){this.childAt(0).trigger("normal")},fp.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},fp.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},fp.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",r=t.hostModel,a=gp(t,e),o=i!==this._symbolType;if(o){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,a,s)}else(l=this.childAt(0)).silent=!1,Ys(l,{scale:pp(a)},r,e);if(this._updateCommon(t,e,a,n),o){var l=this.childAt(0),c=n&&n.fadeIn,u={scale:l.scale.slice()};c&&(u.style={opacity:l.style.opacity}),l.scale=[0,0],c&&(l.style.opacity=0),Gs(l,u,r,e)}this._seriesModel=r};var vp=["itemStyle"],yp=["emphasis","itemStyle"],xp=["label"],bp=["emphasis","label"];function wp(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,i=n[1]/n[0],r={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(r,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function _p(t){this.group=new Sn,this._symbolCtor=t||hp}fp._updateCommon=function(t,e,n,i){var r=this.childAt(0),a=t.hostModel,o=t.getItemVisual(e,"color");"image"!==r.type?r.useStyle({strokeNoScale:!0}):r.setStyle({opacity:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,c=i&&i.symbolRotate,u=i&&i.symbolOffset,d=i&&i.labelModel,h=i&&i.hoverLabelModel,f=i&&i.hoverAnimation,g=i&&i.cursorStyle;if(!i||t.hasItemOption){var p=i&&i.itemModel?i.itemModel:t.getItemModel(e);s=p.getModel(vp).getItemStyle(["color"]),l=p.getModel(yp).getItemStyle(),c=p.getShallow("symbolRotate"),u=p.getShallow("symbolOffset"),d=p.getModel(xp),h=p.getModel(bp),f=p.getShallow("hoverAnimation"),g=p.getShallow("cursor")}else l=x({},l);var m=r.style;r.attr("rotation",(c||0)*Math.PI/180||0),u&&r.attr("position",[gl(u[0],n[0]),gl(u[1],n[1])]),g&&r.attr("cursor",g),r.setColor(o,i&&i.symbolInnerColor),r.setStyle(s);var v=t.getItemVisual(e,"opacity");null!=v&&(m.opacity=v);var y=t.getItemVisual(e,"liftZ"),b=r.__z2Origin;null!=y?null==b&&(r.__z2Origin=r.z2,r.z2+=y):null!=b&&(r.z2=b,r.__z2Origin=null);var w=i&&i.useNameLabel;Ns(m,l,d,h,{labelFetcher:a,labelDataIndex:e,defaultText:function(e,n){return w?t.getName(e):dp(t,e)},isRectText:!0,autoColor:o}),r.__symbolOriginalScale=pp(n),r.hoverStyle=l,r.highDownOnUpdate=f&&a.isAnimationEnabled()?wp:null,Ds(r)},fp.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,e&&e.keepLabel||(n.style.text=null),Ys(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},C(hp,Sn);var Sp=_p.prototype;function Cp(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function kp(t){return null==t||z(t)||(t={isIgnore:t}),t||{}}function Ap(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function Mp(t,e,n){var i,r=t.getBaseAxis(),a=t.getOtherAxis(r),o=function(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:0<i[0]?n=i[0]:i[1]<0&&(n=i[1]),n}(a,n),s=r.dim,l=a.dim,c=e.mapDimension(l),u=e.mapDimension(s),d="x"===l||"radius"===l?1:0,h=T(t.dimensions,(function(t){return e.mapDimension(t)})),f=e.getCalculationInfo("stackResultDimension");return(i|=Bf(e,h[0]))&&(h[0]=f),(i|=Bf(e,h[1]))&&(h[1]=f),{dataDimsForPoint:h,valueStart:o,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:c,baseDim:u,baseDataOffset:d,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Tp(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,i),o[1-a]=r,e.dataToPoint(o)}Sp.updateData=function(t,e){e=kp(e);var n=this.group,i=t.hostModel,r=this._data,a=this._symbolCtor,o=Ap(t);r||n.removeAll(),t.diff(r).add((function(i){var r=t.getItemLayout(i);if(Cp(t,r,i,e)){var s=new a(t,i,o);s.attr("position",r),t.setItemGraphicEl(i,s),n.add(s)}})).update((function(s,l){var c=r.getItemGraphicEl(l),u=t.getItemLayout(s);Cp(t,u,s,e)?(c?(c.updateData(t,s,o),Ys(c,{position:u},i)):(c=new a(t,s)).attr("position",u),n.add(c),t.setItemGraphicEl(s,c)):n.remove(c)})).remove((function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}))})).execute(),this._data=t},Sp.isPersistent=function(){return!0},Sp.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl((function(e,n){var i=t.getItemLayout(n);e.attr("position",i)}))},Sp.incrementalPrepareUpdate=function(t){this._seriesScope=Ap(t),this._data=null,this.group.removeAll()},Sp.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=kp(n);for(var r=t.start;r<t.end;r++){var a=e.getItemLayout(r);if(Cp(e,a,r,n)){var o=new this._symbolCtor(e,r,this._seriesScope);o.traverse(i),o.attr("position",a),this.group.add(o),e.setItemGraphicEl(r,o)}}},Sp.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()};var Ip=wt,Dp=_t,Pp=ct,Lp=at,Ep=[],Np=[],Rp=[];function Op(t){return isNaN(t[0])||isNaN(t[1])}function zp(t,e,n,i,r,a,o,s,l,c){return"none"!==c&&c?(function(t,e,n,i,r,a,o,s,l,c,u){for(var d=0,h=n,f=0;f<i;f++){var g=e[h];if(r<=h||h<0)break;if(Op(g)){if(u){h+=a;continue}break}if(h===n)t[0<a?"moveTo":"lineTo"](g[0],g[1]);else if(0<l){var p=e[d],m="y"===c?1:0,v=(g[m]-p[m])*l;Lp(Np,p),Np[m]=p[m]+v,Lp(Rp,g),Rp[m]=g[m]-v,t.bezierCurveTo(Np[0],Np[1],Rp[0],Rp[1],g[0],g[1])}else t.lineTo(g[0],g[1]);d=h,h+=a}return f}).apply(this,arguments):(function(t,e,n,i,r,a,o,s,l,c,u){for(var d=0,h=n,f=0;f<i;f++){var g=e[h];if(r<=h||h<0)break;if(Op(g)){if(u){h+=a;continue}break}if(h===n)t[0<a?"moveTo":"lineTo"](g[0],g[1]),Lp(Np,g);else if(0<l){var p=h+a,m=e[p];if(u)for(;m&&Op(e[p]);)m=e[p+=a];var v=.5,y=e[d];if(!(m=e[p])||Op(m))Lp(Rp,g);else{var x,b;if(Op(m)&&!u&&(m=g),ut(Ep,m,y),"x"===c||"y"===c){var w="x"===c?0:1;x=Math.abs(g[w]-y[w]),b=Math.abs(g[w]-m[w])}else x=mt(g,y),b=mt(g,m);Pp(Rp,g,Ep,-l*(1-(v=b/(b+x))))}Ip(Np,Np,s),Dp(Np,Np,o),Ip(Rp,Rp,s),Dp(Rp,Rp,o),t.bezierCurveTo(Np[0],Np[1],Rp[0],Rp[1],g[0],g[1]),Pp(Np,g,Ep,l*v)}else t.lineTo(g[0],g[1]);d=h,h+=a}return f}).apply(this,arguments)}function Bp(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var a=t[r];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>i[0]&&(i[0]=a[0]),a[1]>i[1]&&(i[1]=a[1])}return{min:e?n:i,max:e?i:n}}var Fp=lo.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Mo(lo.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,r=n.length,a=Bp(n,e.smoothConstraint);if(e.connectNulls){for(;0<r&&Op(n[r-1]);r--);for(;i<r&&Op(n[i]);i++);}for(;i<r;)i+=zp(t,n,i,r,r,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Hp=lo.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Mo(lo.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,a=n.length,o=e.smoothMonotone,s=Bp(n,e.smoothConstraint),l=Bp(i,e.smoothConstraint);if(e.connectNulls){for(;0<a&&Op(n[a-1]);a--);for(;r<a&&Op(n[r]);r++);}for(;r<a;){var c=zp(t,n,r,a,a,1,s.min,s.max,e.smooth,o,e.connectNulls);zp(t,i,r+c-1,c,a,-1,l.min,l.max,e.stackedOnSmooth,o,e.connectNulls),r+=c+1,t.closePath()}}});function Vp(t,e,n){var i=t.getArea(),r=t.getBaseAxis().isHorizontal(),a=i.x,o=i.y,s=i.width,l=i.height,c=n.get("lineStyle.width")||2,u=new Vo({shape:{x:a-=c/2,y:o-=c/2,width:s+=c,height:l+=c}});return e&&(u.shape[r?"width":"height"]=0,Gs(u,{shape:{width:s,height:l}},n)),u}function Wp(t,e,n){var i=t.getArea(),r=new Do({shape:{cx:pl(t.cx,1),cy:pl(t.cy,1),r0:pl(i.r0,1),r:pl(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&(r.shape.endAngle=i.startAngle,Gs(r,{shape:{endAngle:i.endAngle}},n)),r}function Xp(t,e,n){return t?"polar"===t.type?Wp(t,e,n):"cartesian2d"===t.type?Vp(t,e,n):null:null}function Yp(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function Gp(t){return"number"==typeof t?t:t?.5:0}function Up(t,e,n){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,a=[],o=0;o<t.length-1;o++){var s=t[o+1],l=t[o];a.push(l);var c=[];switch(n){case"end":c[r]=s[r],c[1-r]=l[1-r],a.push(c);break;case"middle":var u=[];c[r]=u[r]=(l[r]+s[r])/2,c[1-r]=l[1-r],u[1-r]=s[1-r],a.push(c),a.push(u);break;default:c[r]=l[r],c[1-r]=s[1-r],a.push(c)}}return t[o]&&a.push(t[o]),a}function jp(t,e,n){if("cartesian2d"!==t.type)return Wp(t,e,n);var i=t.getBaseAxis().isHorizontal(),r=Vp(t,e,n);if(!n.get("clip",!0)){var a=r.shape,o=Math.max(a.width,a.height);i?(a.y-=o,a.height+=2*o):(a.x-=o,a.width+=2*o)}return r}function qp(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,i,r){var a=t.getData(),o=t.get("symbol"),s=t.get("symbolSize"),l=t.get("symbolKeepAspect"),c=R(o),u=R(s),d=c||u,h=!c&&o?o:e;if(a.setVisual({legendSymbol:n||h,symbol:h,symbolSize:u?null:s,symbolKeepAspect:l}),!i.isSeriesFiltered(t))return{dataEach:a.hasItemOption||d?function(e,n){if(d){var i=t.getRawValue(n),r=t.getDataParams(n);c&&e.setItemVisual(n,"symbol",o(i,r)),u&&e.setItemVisual(n,"symbolSize",s(i,r))}if(e.hasItemOption){var a=e.getItemModel(n),l=a.getShallow("symbol",!0),h=a.getShallow("symbolSize",!0),f=a.getShallow("symbolKeepAspect",!0);null!=l&&e.setItemVisual(n,"symbol",l),null!=h&&e.setItemVisual(n,"symbolSize",h),null!=f&&e.setItemVisual(n,"symbolKeepAspect",f)}}:null}}}}function Zp(t){return{seriesType:t,plan:Yu(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,i=t.pipelineContext.large;if(n){var r=T(n.dimensions,(function(t){return e.mapDimension(t)})).slice(0,2),a=r.length,o=e.getCalculationInfo("stackResultDimension");return Bf(e,r[0])&&(r[0]=o),Bf(e,r[1])&&(r[1]=o),a&&{progress:function(t,e){for(var o=i&&new Float32Array((t.end-t.start)*a),s=t.start,l=0,c=[],u=[];s<t.end;s++){var d;if(1===a){var h=e.get(r[0],s);d=!isNaN(h)&&n.dataToPoint(h,null,u)}else{h=c[0]=e.get(r[0],s);var f=c[1]=e.get(r[1],s);d=!isNaN(h)&&!isNaN(f)&&n.dataToPoint(c,null,u)}i?(o[l++]=d?d[0]:NaN,o[l++]=d?d[1]:NaN):e.setItemLayout(s,d&&d.slice()||[NaN,NaN])}i&&e.setLayout("symbolPoints",o)}}}}}}function $p(t,e){return Math.round(t.length/2)}ju.extend({type:"line",init:function(){var t=new Sn,e=new _p;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=a.mapArray(a.getItemLayout),c="polar"===i.type,u=this._coordSys,d=this._symbolDraw,h=this._polyline,f=this._polygon,g=this._lineGroup,p=t.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=function(t,e,n){if(!n.valueDim)return[];for(var i=[],r=0,a=e.count();r<a;r++)i.push(Tp(n,t,e,r));return i}(i,a,Mp(i,a,v)),x=t.get("showSymbol"),w=x&&!c&&function(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var a=n.getAxesByScale("ordinal")[0];if(a&&(!r||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),a=Math.max(1,Math.round(r/5)),o=0;o<r;o+=a)if(1.5*hp.getSymbolSize(e,o)[t.isHorizontal()?1:0]>i)return!1;return!0}(a,e))){var o=e.mapDimension(a.dim),s={};return M(a.getViewLabels(),(function(t){s[t.tickValue]=1})),function(t){return!s.hasOwnProperty(e.get(o,t))}}}}(t,a,i),_=this._data;_&&_.eachItemGraphicEl((function(t,e){t.__temp&&(r.remove(t),_.setItemGraphicEl(e,null))})),x||d.remove(),r.add(g);var S,C=!c&&t.get("step");i&&i.getArea&&t.get("clip",!0)&&(null!=(S=i.getArea()).width?(S.x-=.1,S.y-=.1,S.width+=.2,S.height+=.2):S.r0&&(S.r0-=.5,S.r1+=.5)),this._clipShapeForSymbol=S,h&&u.type===i.type&&C===this._step?(m&&!f?f=this._newPolygon(l,y,i,p):f&&!m&&(g.remove(f),f=this._polygon=null),g.setClipPath(jp(i,!1,t)),x&&d.updateData(a,{isIgnore:w,clipShape:S}),a.eachItemGraphicEl((function(t){t.stopAnimation(!0)})),Yp(this._stackedOnPoints,y)&&Yp(this._points,l)||(p?this._updateAnimation(a,y,i,n,C,v):(C&&(l=Up(l,i,C),y=Up(y,i,C)),h.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:y})))):(x&&d.updateData(a,{isIgnore:w,clipShape:S}),C&&(l=Up(l,i,C),y=Up(y,i,C)),h=this._newPolyline(l,i,p),m&&(f=this._newPolygon(l,y,i,p)),g.setClipPath(jp(i,!0,t)));var k=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,r,a=n.length-1;0<=a;a--){var o=t.getDimensionInfo(t.dimensions[n[a].dimension]);if("x"===(i=o&&o.coordDim)||"y"===i){r=n[a];break}}if(r){var s=e.getAxis(i),l=T(r.stops,(function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}})),c=l.length,u=r.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),u.reverse());var d=l[0].coord-10,h=l[c-1].coord+10,f=h-d;if(f<.001)return"transparent";M(l,(function(t){t.offset=(t.coord-d)/f})),l.push({offset:c?l[c-1].offset:.5,color:u[1]||"transparent"}),l.unshift({offset:c?l[0].offset:.5,color:u[0]||"transparent"});var g=new $o(0,0,0,0,l,!0);return g[i]=d,g[i+"2"]=h,g}}}(a,i)||a.getVisual("color");h.useStyle(b(o.getLineStyle(),{fill:"none",stroke:k,lineJoin:"bevel"}));var A=t.get("smooth");if(A=Gp(t.get("smooth")),h.setShape({smooth:A,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),f){var I=a.getCalculationInfo("stackedOnSeries"),D=0;f.useStyle(b(s.getAreaStyle(),{fill:k,opacity:.7,lineJoin:"bevel"})),I&&(D=Gp(I.get("smooth"))),f.setShape({smooth:A,stackedOnSmooth:D,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=a,this._coordSys=i,this._stackedOnPoints=y,this._points=l,this._step=C,this._valueOrigin=v},dispose:function(){},highlight:function(t,e,n,i){var r=t.getData(),a=Er(r,i);if(!(a instanceof Array)&&null!=a&&0<=a){var o=r.getItemGraphicEl(a);if(!o){var s=r.getItemLayout(a);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(o=new hp(r,a)).position=s,o.setZ(t.get("zlevel"),t.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,r.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else ju.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var r=t.getData(),a=Er(r,i);if(null!=a&&0<=a){var o=r.getItemGraphicEl(a);o&&(o.__temp?(r.setItemGraphicEl(a,null),this.group.remove(o)):o.downplay())}else ju.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Fp({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Hp({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(t,e,n,i,r,a){var o=this._polyline,s=this._polygon,l=t.hostModel,c=function(t,e,n,i,r,a,o,s){for(var l=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),c=[],u=[],d=[],h=[],f=[],g=[],p=[],m=Mp(r,e,o),v=Mp(a,t,s),y=0;y<l.length;y++){var x=l[y],b=!0;switch(x.cmd){case"=":var w=t.getItemLayout(x.idx),_=e.getItemLayout(x.idx1);(isNaN(w[0])||isNaN(w[1]))&&(w=_.slice()),c.push(w),u.push(_),d.push(n[x.idx]),h.push(i[x.idx1]),p.push(e.getRawIndex(x.idx1));break;case"+":var S=x.idx;c.push(r.dataToPoint([e.get(m.dataDimsForPoint[0],S),e.get(m.dataDimsForPoint[1],S)])),u.push(e.getItemLayout(S).slice()),d.push(Tp(m,r,e,S)),h.push(i[S]),p.push(e.getRawIndex(S));break;case"-":var C=t.getRawIndex(S=x.idx);C!==S?(c.push(t.getItemLayout(S)),u.push(a.dataToPoint([t.get(v.dataDimsForPoint[0],S),t.get(v.dataDimsForPoint[1],S)])),d.push(n[S]),h.push(Tp(v,a,t,S)),p.push(C)):b=!1}b&&(f.push(x),g.push(g.length))}g.sort((function(t,e){return p[t]-p[e]}));var k=[],A=[],M=[],T=[],I=[];for(y=0;y<g.length;y++)k[y]=c[S=g[y]],A[y]=u[S],M[y]=d[S],T[y]=h[S],I[y]=f[S];return{current:k,next:A,stackedOnCurrent:M,stackedOnNext:T,status:I}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),u=c.current,d=c.stackedOnCurrent,h=c.next,f=c.stackedOnNext;r&&(u=Up(c.current,n,r),d=Up(c.stackedOnCurrent,n,r),h=Up(c.next,n,r),f=Up(c.stackedOnNext,n,r)),o.shape.__points=c.current,o.shape.points=u,Ys(o,{shape:{points:h}},l),s&&(s.setShape({points:u,stackedOnPoints:d}),Ys(s,{shape:{points:h,stackedOnPoints:f}},l));for(var g=[],p=c.status,m=0;m<p.length;m++)if("="===p[m].cmd){var v=t.getItemGraphicEl(p[m].idx1);v&&g.push({el:v,ptIdx:m})}o.animators&&o.animators.length&&o.animators[0].during((function(){for(var t=0;t<g.length;t++)g[t].el.attr("position",o.shape.__points[g[t].ptIdx])}))},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Kp={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};function Jp(t){return this._axes[t]}function Qp(t){this._axes={},this._dimList=[],this.name=t||""}function tm(t){Qp.call(this,t)}function em(t,e,n,i,r){op.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom"}Qp.prototype={constructor:Qp,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return T(this._dimList,Jp,this)},getAxesByScale:function(t){return t=t.toLowerCase(),D(this.getAxes(),(function(e){return e.scale.type===t}))},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},r=0;r<n.length;r++){var a=n[r];i[a]=this._axes[a][e](t[a])}return i}},tm.prototype={constructor:tm,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),r=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=r.toGlobalCoord(r.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),a=i.getExtent(),o=n.parse(t[0]),s=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]);return new _n(n,i,Math.max(t[0],t[1])-n,Math.max(e[0],e[1])-i)}},C(tm,Qp),em.prototype={constructor:em,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},C(em,op);var nm={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},im={};function rm(t,e,n,i){M(am,(function(r){e.extend({type:t+"Axis."+r,mergeDefaultAndTheme:function(e,i){var a=this.layoutMode,o=a?nc(e):{};v(e,i.getTheme().get(r+"Axis")),v(e,this.getDefaultOption()),e.type=n(t,e),a&&ec(e,o,a)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Wf.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:y([{},im[r+"Axis"],i],!0)})})),lc.registerSubTypeDefaulter(t+"Axis",E(n,t))}im.categoryAxis=v({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},nm),im.valueAxis=v({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},nm),im.timeAxis=b({scale:!0,min:"dataMin",max:"dataMax"},im.valueAxis),im.logAxis=b({scale:!0,logBase:10},im.valueAxis);var am=["value","category","time","log"],om=lc.extend({type:"cartesian2dAxis",axis:null,init:function(){om.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){om.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){om.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function sm(t,e){return e.type||(e.data?"category":"value")}v(om.prototype,Og);var lm={offset:0};function cm(t,e){return t.getCoordSysModel()===e}function um(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}rm("x",om,sm,lm),rm("y",om,sm,lm),lc.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var dm=um.prototype;function hm(t,e,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,a=t[e],o=n.model,s=o.get("axisLine.onZero"),l=o.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)fm(a[l])&&(r=a[l]);else for(var c in a)if(a.hasOwnProperty(c)&&fm(a[c])&&!i[u(a[c])]){r=a[c];break}r&&(i[u(r)]=!0)}function u(t){return t.dim+"_"+t.index}}function fm(t){return t&&"category"!==t.type&&"time"!==t.type&&function(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(0<n&&0<i||n<0&&i<0)}(t)}dm.type="grid",dm.axisPointerEnabled=!0,dm.getRect=function(){return this._rect},dm.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),M(n.x,(function(t){Dg(t.scale,t.model)})),M(n.y,(function(t){Dg(t.scale,t.model)}));var i={};M(n.x,(function(t){hm(n,"y",t,i)})),M(n.y,(function(t){hm(n,"x",t,i)})),this.resize(this.model,e)},dm.resize=function(t,e,n){var i=Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var r=this._axesList;function a(){M(r,(function(t){var e=t.isHorizontal(),n=e?[0,i.width]:[0,i.height],r=t.inverse?1:0;t.setExtent(n[r],n[1-r]),function(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?i.x:i.y)}))}a(),!n&&t.get("containLabel")&&(M(r,(function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e=t.scale;if(t.model.get("axisLabel.show")&&!e.isBlank()){var n,i,r="category"===t.type,a=e.getExtent();i=r?e.count():(n=e.getTicks()).length;var o,s,l,c,u,d,h,f,g=t.getLabelModel(),p=Lg(t),m=1;40<i&&(m=Math.ceil(i/40));for(var v=0;v<i;v+=m){var y=p(n?n[v]:a[0]+v),x=(s=g.getTextRect(y),l=(g.get("rotate")||0)*Math.PI/180,d=(c=s.plain()).height,h=(u=c.width)*Math.cos(l)+d*Math.sin(l),f=u*Math.sin(l)+d*Math.cos(l),new _n(c.x,c.y,h,f));o?o.union(x):o=x}return o}}(t);if(e){var n=t.isHorizontal()?"height":"width",r=t.model.get("axisLabel.margin");i[n]-=e[n]+r,"top"===t.position?i.y+=e.height+r:"left"===t.position&&(i.x+=e.width+r)}}})),a())},dm.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},dm.getAxes=function(){return this._axesList.slice()},dm.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];z(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===t||i[n].getAxis("y").index===e)return i[n]},dm.getCartesians=function(){return this._coordsList.slice()},dm.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},dm.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},dm._findConvertTarget=function(t,e){var n,i,r=e.seriesModel,a=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel;return r?S(this._coordsList,n=r.coordinateSystem)<0&&(n=null):a&&o?n=this.getCartesian(a.componentIndex,o.componentIndex):a?i=this.getAxis("x",a.componentIndex):o?i=this.getAxis("y",o.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},dm.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},dm._initCartesian=function(t,e,n){var i={left:!1,right:!1,top:!1,bottom:!1},r={x:{},y:{}},a={x:0,y:0};if(e.eachComponent("xAxis",o("x"),this),e.eachComponent("yAxis",o("y"),this),!a.x||!a.y)return this._axesMap={},void(this._axesList=[]);function o(e){return function(n,o){if(cm(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&(s=i.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=i.left?"right":"left"),i[s]=!0;var l=new em(e,Pg(n),[0,0],n.get("type"),s);l.onBand="category"===l.type&&n.get("boundaryGap"),l.inverse=n.get("inverse"),(n.axis=l).model=n,l.grid=this,l.index=o,this._axesList.push(l),r[e][o]=l,a[e]++}}}M((this._axesMap=r).x,(function(e,n){M(r.y,(function(i,r){var a="x"+n+"y"+r,o=new tm(a);o.grid=this,o.model=t,this._coordsMap[a]=o,this._coordsList.push(o),o.addAxis(e),o.addAxis(i)}),this)}),this)},dm._updateScale=function(t,e){function n(t,e){M(t.mapDimension(e.dim,!0),(function(n){e.scale.unionExtentFromData(t,Ff(t,n))}))}M(this._axesList,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeries((function(t){if(mm(t)){var i=pm(t),r=i[0],a=i[1];if(!cm(r,e)||!cm(a,e))return;var o=this.getCartesian(r.componentIndex,a.componentIndex),s=t.getData(),l=o.getAxis("x"),c=o.getAxis("y");"list"===s.type&&(n(s,l),n(s,c))}}),this)},dm.getTooltipAxes=function(t){var e=[],n=[];return M(this.getCartesians(),(function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(r);S(e,r)<0&&e.push(r),S(n,a)<0&&n.push(a)})),{baseAxes:e,otherAxes:n}};var gm=["xAxis","yAxis"];function pm(t){return T(gm,(function(e){return t.getReferringComponents(e)[0]}))}function mm(t){return"cartesian2d"===t.get("coordinateSystem")}function vm(t,e){this.opt=e,this.axisModel=t,b(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Sn;var n=new Sn({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}um.create=function(t,e){var n=[];return t.eachComponent("grid",(function(i,r){var a=new um(i,t,e);a.name="grid_"+r,a.resize(i,e,!0),i.coordinateSystem=a,n.push(a)})),t.eachSeries((function(t){if(mm(t)){var e=pm(t),n=e[0],i=e[1],r=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(n.componentIndex,i.componentIndex)}})),n},um.dimensions=um.prototype.dimensions=tm.prototype.dimensions,Oc.register("cartesian2d",um);var ym=Math.PI;vm.prototype={constructor:vm,hasBuilder:function(t){return!!xm[t]},add:function(t){xm[t].call(this)},getGroup:function(){return this.group}};var xm={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,r=[n[0],0],a=[n[1],0];i&&(bt(r,r,i),bt(a,a,i));var o=x({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Xo({anid:"line",subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:a[0],y2:a[1]},style:o,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize"),c=e.get("axisLine.symbolOffset")||0;if("number"==typeof c&&(c=[c,c]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var u=l[0],d=l[1];M([{rotate:t.rotation+Math.PI/2,offset:c[0],r:0},{rotate:t.rotation-Math.PI/2,offset:c[1],r:Math.sqrt((r[0]-a[0])*(r[0]-a[0])+(r[1]-a[1])*(r[1]-a[1]))}],(function(e,n){if("none"!==s[n]&&null!=s[n]){var i=Gg(s[n],-u/2,-d/2,u,d,o.stroke,!0),a=e.r+e.offset,l=[r[0]+a*Math.cos(t.rotation),r[1]-a*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:l,silent:!0,z2:11}),this.group.add(i)}}),this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var i=e.axis,r=e.getModel("axisTick");if(r.get("show")&&!i.scale.isBlank()){for(var a=r.getModel("lineStyle"),o=n.tickDirection*r.get("length"),s=Am(i.getTicksCoords(),t._transform,o,b(a.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<s.length;l++)t.group.add(s[l]);return s}}(this,t,e);!function(t,e,n){if(!Rg(t.axis)){var i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel"),a=(e=e||[])[0],o=e[1],s=e[e.length-1],l=e[e.length-2],c=(n=n||[])[0],u=n[1],d=n[n.length-1],h=n[n.length-2];!1===i?(Sm(a),Sm(c)):Cm(a,o)&&(i?(Sm(o),Sm(u)):(Sm(a),Sm(c))),!1===r?(Sm(s),Sm(d)):Cm(l,s)&&(r?(Sm(l),Sm(h)):(Sm(s),Sm(d)))}}(t,function(t,e,n){var i=e.axis;if(W(n.axisLabelShow,e.get("axisLabel.show"))&&!i.scale.isBlank()){var r=e.getModel("axisLabel"),a=r.get("margin"),o=i.getViewLabels(),s=(W(n.labelRotate,r.get("rotate"))||0)*ym/180,l=wm(n.rotation,s,n.labelDirection),c=e.getCategories&&e.getCategories(!0),u=[],d=_m(e),h=e.get("triggerEvent");return M(o,(function(o,s){var f=o.tickValue,g=o.formattedLabel,p=o.rawLabel,m=r;c&&c[f]&&c[f].textStyle&&(m=new ll(c[f].textStyle,r,e.ecModel));var v=m.getTextColor()||e.get("axisLine.lineStyle.color"),y=[i.dataToCoord(f),n.labelOffset+n.labelDirection*a],x=new Ao({anid:"label_"+f,position:y,rotation:l.rotation,silent:d,z2:10});Os(x.style,m,{text:g,textAlign:m.getShallow("align",!0)||l.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||l.textVerticalAlign,textFill:"function"==typeof v?v("category"===i.type?p:"value"===i.type?f+"":f,s):v}),h&&(x.eventData=bm(e),x.eventData.targetType="axisLabel",x.eventData.value=p),t._dumbGroup.add(x),x.updateTransform(),u.push(x),t.group.add(x),x.decomposeTransform()})),u}}(this,t,e),n),function(t,e,n){var i=e.axis,r=e.getModel("minorTick");if(r.get("show")&&!i.scale.isBlank()){var a=i.getMinorTicksCoords();if(a.length)for(var o=r.getModel("lineStyle"),s=n.tickDirection*r.get("length"),l=b(o.getLineStyle(),b(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),c=0;c<a.length;c++)for(var u=Am(a[c],t._transform,s,l,"minorticks_"+c),d=0;d<u.length;d++)t.group.add(u[d])}}(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,n=W(t.axisName,e.get("name"));if(n){var i,r,a=e.get("nameLocation"),o=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=this.axisModel.axis.getExtent(),u=c[0]>c[1]?-1:1,d=["start"===a?c[0]-u*l:"end"===a?c[1]+u*l:(c[0]+c[1])/2,km(a)?t.labelOffset+o*l:0],h=e.get("nameRotate");null!=h&&(h=h*ym/180),km(a)?i=wm(t.rotation,null!=h?h:t.rotation,o):(i=function(t,e,n,i){var r,a=_l(n-t.rotation),o=i[0]>i[1],s="start"===e&&!o||"start"!==e&&o;return{rotation:a,textAlign:Sl(a-ym/2)?(r=s?"bottom":"top","center"):Sl(a-1.5*ym)?(r=s?"top":"bottom","center"):(r="middle",a<1.5*ym&&ym/2<a?s?"left":"right":s?"right":"left"),textVerticalAlign:r}}(t,a,h||0,c),null!=(r=t.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(i.rotation)),isFinite(r)||(r=null)));var f=s.getFont(),g=e.get("nameTruncate",!0)||{},p=g.ellipsis,m=W(t.nameTruncateMaxWidth,g.maxWidth,r),v=null!=p&&null!=m?Ul(n,m,f,p,{minChar:2,placeholder:g.placeholder}):n,y=e.get("tooltip",!0),b=e.mainType,w={componentType:b,name:n,$vars:["name"]};w[b+"Index"]=e.componentIndex;var _=new Ao({anid:"name",__fullText:n,__truncatedText:v,position:d,rotation:i.rotation,silent:_m(e),z2:1,tooltip:y&&y.show?x({content:n,formatter:function(){return n},formatterParams:w},y):null});Os(_.style,s,{text:v,textFont:f,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:s.get("align")||i.textAlign,textVerticalAlign:s.get("verticalAlign")||i.textVerticalAlign}),e.get("triggerEvent")&&(_.eventData=bm(e),_.eventData.targetType="axisName",_.eventData.name=n),this._dumbGroup.add(_),_.updateTransform(),this.group.add(_),_.decomposeTransform()}}},bm=vm.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},wm=vm.innerTextLayout=function(t,e,n){var i,r=_l(e-t);return{rotation:r,textAlign:Sl(r)?(i=0<n?"top":"bottom","center"):Sl(r-ym)?(i=0<n?"bottom":"top","center"):(i="middle",0<r&&r<ym?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},_m=vm.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function Sm(t){t&&(t.ignore=!0)}function Cm(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var r=ie([]);return se(r,r,-t.rotation),n.applyTransform(ae([],r,t.getLocalTransform())),i.applyTransform(ae([],r,e.getLocalTransform())),n.intersect(i)}}function km(t){return"middle"===t||"center"===t}function Am(t,e,n,i,r){for(var a=[],o=[],s=[],l=0;l<t.length;l++){var c=t[l].coord;o[0]=c,s[o[1]=0]=c,s[1]=n,e&&(bt(o,o,e),bt(s,s,e));var u=new Xo({anid:r+"_"+t[l].tickValue,subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});a.push(u)}return a}var Mm=M,Tm=E;function Im(t,e){return"all"===t||N(t)&&0<=S(t,e)||t===e}function Dm(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Lm(t)]}function Pm(t){return!!t.get("handle.show")}function Lm(t){return t.type+"||"+t.id}var Em=Jh({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){this.axisPointerClass&&function(t){var e=Dm(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,a=n.get("status"),o=n.get("value");null!=o&&(o=i.parse(o));var s=Pm(n);null==a&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==o||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),r.value=o,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}(t),Em.superApply(this,"render",arguments),Nm(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,i,r){Nm(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),Em.superApply(this,"remove",arguments)},dispose:function(t,e){Rm(this,e),Em.superApply(this,"dispose",arguments)}});function Nm(t,e,n,i,r,a){var o=Em.getAxisPointerClass(t.axisPointerClass);if(o){var s=function(t){var e=Dm(t);return e&&e.axisPointerModel}(e);s?(t._axisPointer||(t._axisPointer=new o)).render(e,s,i,a):Rm(t,i)}}function Rm(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var Om=[];function zm(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,a={},o=r.getAxesOnZeroOf()[0],s=r.position,l=o?"onZero":s,c=r.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,g="x"===c?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));g[h.onZero]=Math.max(Math.min(p,g[1]),g[0])}a.position=["y"===c?g[h[l]]:d[0],"x"===c?g[h[l]]:d[3]],a.rotation=Math.PI/2*("x"===c?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=o?g[h[s]]-g[h.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),W(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var m=e.get("axisLabel.rotate");return a.labelRotate="top"===l?-m:m,a.z2=1,a}function Bm(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=i.coordinateSystem.getRect(),c=r.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var u=s.length,d=t.__splitAreaColors,h=Q(),f=0;if(d)for(var g=0;g<c.length;g++){var p=d.get(c[g].tickValue);if(null!=p){f=(p+(u-1)*g)%u;break}}var m=r.toGlobalCoord(c[0].coord),v=o.getAreaStyle();for(s=N(s)?s:[s],g=1;g<c.length;g++){var y,x,w,_,S=r.toGlobalCoord(c[g].coord);m=r.isHorizontal()?(x=l.y,_=l.height,(y=m)+(w=S-y)):(y=l.x,w=l.width,(x=m)+(_=S-x));var C=c[g-1].tickValue;null!=C&&h.set(C,f),e.add(new Vo({anid:null!=C?"area_"+C:null,shape:{x:y,y:x,width:w,height:_},style:b({fill:s[f]},v),silent:!0})),f=(f+1)%u}t.__splitAreaColors=h}}}function Fm(t){t.__splitAreaColors=null}Em.registerAxisPointerClass=function(t,e){Om[t]=e},Em.getAxisPointerClass=function(t){return t&&Om[t]};var Hm=["axisLine","axisTickLabel","axisName"],Vm=["splitArea","splitLine","minorSplitLine"],Wm=Em.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,i){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Sn,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),o=zm(a,t),s=new vm(t,o);M(Hm,s.add,s),this._axisGroup.add(s.getGroup()),M(Vm,(function(e){t.get(e+".show")&&this["_"+e](t,a)}),this),Zs(r,this._axisGroup,t),Wm.superCall(this,"render",t,e,n,i)}},remove:function(){Fm(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitLine"),r=i.getModel("lineStyle"),a=r.get("color");a=N(a)?a:[a];for(var o=e.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,c=n.getTicksCoords({tickModel:i}),u=[],d=[],h=r.getLineStyle(),f=0;f<c.length;f++){var g=n.toGlobalCoord(c[f].coord);s?(u[0]=g,u[1]=o.y,d[0]=g,d[1]=o.y+o.height):(u[0]=o.x,u[1]=g,d[0]=o.x+o.width,d[1]=g);var p=l++%a.length;this._axisGroup.add(new Xo({anid:null!=c[f].tickValue?"line_"+c[f].tickValue:null,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:b({stroke:a[p]},h),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,i=t.getModel("minorSplitLine").getModel("lineStyle"),r=e.coordinateSystem.getRect(),a=n.isHorizontal(),o=n.getMinorTicksCoords();if(o.length)for(var s=[],l=[],c=i.getLineStyle(),u=0;u<o.length;u++)for(var d=0;d<o[u].length;d++){var h=n.toGlobalCoord(o[u][d].coord);a?(s[0]=h,s[1]=r.y,l[0]=h,l[1]=r.y+r.height):(s[0]=r.x,s[1]=h,l[0]=r.x+r.width,l[1]=h),this._axisGroup.add(new Xo({anid:"minor_line_"+o[u][d].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,silent:!0}))}},_splitArea:function(t,e){Bm(this,this._axisGroup,t,e)}});Wm.extend({type:"xAxis"}),Wm.extend({type:"yAxis"}),Jh({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Vo({shape:t.coordinateSystem.getRect(),style:b({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),Xh((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})),qh(qp("line","circle","line")),jh(Zp("line")),Yh(nh.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var i=t.getData(),r=t.get("sampling"),a=t.coordinateSystem;if("cartesian2d"===a.type&&r){var o,s=a.getBaseAxis(),l=a.getOtherAxis(s),c=s.getExtent(),u=c[1]-c[0],d=Math.round(i.count()/u);1<d&&("string"==typeof r?o=Kp[r]:"function"==typeof r&&(o=r),o&&t.setData(i.downSample(i.mapDimension(l.dim),1/d,o,$p)))}}});var Xm=Nu.extend({type:"series.__base_bar__",getInitialData:function(t,e){return Hf(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),r=i.getLayout("offset"),a=i.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=r+a/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Ym(t,e,n,i,r,a){Ns(t,e,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:r,labelDataIndex:a,defaultText:dp(r.getData(),a),isRectText:!0,autoColor:i}),Gm(t),Gm(e)}function Gm(t,e){"outside"===t.textPosition&&(t.textPosition=e)}Xm.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return t<e&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var Um=Zr([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),jm={getBarItemStyle:function(t){var e=Um(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}},qm=ls({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),a=Math.max(e.r,0),o=.5*(a-r),s=r+o,l=e.startAngle,c=e.endAngle,u=e.clockwise,d=Math.cos(l),h=Math.sin(l),f=Math.cos(c),g=Math.sin(c);(u?c-l<2*Math.PI:l-c<2*Math.PI)&&(t.moveTo(d*r+n,h*r+i),t.arc(d*s+n,h*s+i,o,-Math.PI+l,l,!u)),t.arc(n,i,a,l,c,!u),t.moveTo(f*a+n,g*a+i),t.arc(f*s+n,g*s+i,o,c-2*Math.PI,c-Math.PI,!u),0!==r&&(t.arc(n,i,r,c,l,u),t.moveTo(d*r+n,g*r+i)),t.closePath()}}),Zm=["itemStyle","barBorderWidth"],$m=[0,0];x(ll.prototype,jm),tf({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var i,r=this.group,a=t.getData(),o=this._data,s=t.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var c=t.isAnimationEnabled()?t:null,u=t.get("clip",!0),d=function(t,e){var n=t.getArea&&t.getArea();if("cartesian2d"===t.type){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=r,n.width+=2*r):(n.y-=r,n.height+=2*r)}}return n}(s,a);r.removeClipPath();var h=t.get("roundCap",!0),f=t.get("showBackground",!0),g=t.getModel("backgroundStyle"),p=[],m=this._backgroundEls||[];a.diff(o).add((function(e){var n=a.getItemModel(e),o=iv[s.type](a,e,n);if(f){var l=function(t,e,n){return new("polar"===t.type?Do:Vo)({shape:cv(e,n,t),silent:!0,z2:0})}(s,i,o);l.useStyle(g.getBarItemStyle()),p[e]=l}if(a.hasValue(e)){if(u&&Qm[s.type](d,o))return void r.remove(m);var m=tv[s.type](e,o,i,c,!1,h);a.setItemGraphicEl(e,m),r.add(m),av(m,a,e,n,o,t,0,"polar"===s.type)}})).update((function(e,n){var l=a.getItemModel(e),v=iv[s.type](a,e,l);if(f){var y=m[n];y.useStyle(g.getBarItemStyle()),Ys(p[e]=y,{shape:cv(i,v,s)},c,e)}var x=o.getItemGraphicEl(n);if(a.hasValue(e)){if(u&&Qm[s.type](d,v))return void r.remove(x);x?Ys(x,{shape:v},c,e):x=tv[s.type](e,v,i,c,!0,h),a.setItemGraphicEl(e,x),r.add(x),av(x,a,e,l,v,t,0,"polar"===s.type)}else r.remove(x)})).remove((function(t){var e=o.getItemGraphicEl(t);"cartesian2d"===s.type?e&&ev(t,c,e):e&&nv(t,c,e)})).execute();var v=this._backgroundGroup||(this._backgroundGroup=new Sn);v.removeAll();for(var y=0;y<p.length;++y)v.add(p[y]);r.add(v),this._backgroundEls=p,this._data=a},_renderLarge:function(t,e,n){this._clear(),sv(t,this.group);var i=t.get("clip",!0)?Xp(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),sv(e,this.group,!0)},dispose:et,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(e){"sector"===e.type?nv(e.dataIndex,t,e):ev(e.dataIndex,t,e)}))):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var Km=Math.max,Jm=Math.min,Qm={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=Km(e.x,t.x),a=Jm(e.x+e.width,t.x+t.width),o=Km(e.y,t.y),s=Jm(e.y+e.height,t.y+t.height);e.x=r,e.y=o,e.width=a-r,e.height=s-o;var l=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),l},polar:function(t){return!1}},tv={cartesian2d:function(t,e,n,i,r){var a=new Vo({shape:x({},e),z2:1});if(a.name="item",i){var o=n?"height":"width",s={};a.shape[o]=0,s[o]=e[o],el[r?"updateProps":"initProps"](a,{shape:s},i,t)}return a},polar:function(t,e,n,i,r,a){var o=new(!n&&a?qm:Do)({shape:b({clockwise:e.startAngle<e.endAngle},e),z2:1});if(o.name="item",i){var s=n?"r":"endAngle",l={};o.shape[s]=n?0:e.startAngle,l[s]=e[s],el[r?"updateProps":"initProps"](o,{shape:l},i,t)}return o}};function ev(t,e,n){n.style.text=null,Ys(n,{shape:{width:0}},e,t,(function(){n.parent&&n.parent.remove(n)}))}function nv(t,e,n){n.style.text=null,Ys(n,{shape:{r:n.shape.r0}},e,t,(function(){n.parent&&n.parent.remove(n)}))}var iv={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=function(t,e){var n=t.get(Zm)||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),r=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,i,r)}(n,i),a=0<i.width?1:-1,o=0<i.height?1:-1;return{x:i.x+a*r/2,y:i.y+o*r/2,width:i.width-a*r,height:i.height-o*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function rv(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function av(t,e,n,i,r,a,o,s){var l=e.getItemVisual(n,"color"),c=e.getItemVisual(n,"opacity"),u=e.getVisual("borderColor"),d=i.getModel("itemStyle"),h=i.getModel("emphasis.itemStyle").getBarItemStyle();s||t.setShape("r",d.get("barBorderRadius")||0),t.useStyle(b({stroke:rv(r)?"none":u,fill:rv(r)?"none":l,opacity:c},d.getBarItemStyle()));var f=i.getShallow("cursor");f&&t.attr("cursor",f),s||Ym(t.style,h,i,l,a,n),rv(r)&&(h.fill=h.stroke="none"),Ds(t,h)}var ov=lo.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,r=this.__baseDimIdx,a=0;a<n.length;a+=2)i[r]=n[a+r],t.moveTo(i[0],i[1]),t.lineTo(n[a],n[a+1])}});function sv(t,e,n){var i=t.getData(),r=[],a=i.getLayout("valueAxisHorizontal")?1:0;r[1-a]=i.getLayout("valueAxisStart");var o=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var c=i.getLayout("largeBackgroundPoints"),u=[];u[1-a]=i.getLayout("backgroundStart");var d=new ov({shape:{points:c},incremental:!!n,__startPoint:u,__baseDimIdx:a,__largeDataIndices:o,__barWidth:s,silent:!0,z2:0});!function(t,e,n){var i=e.get("borderColor")||e.get("color"),r=e.getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}(d,l,i),e.add(d)}var h=new ov({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:r,__baseDimIdx:a,__largeDataIndices:o,__barWidth:s});e.add(h),function(t,e,n){var i=n.getVisual("borderColor")||n.getVisual("color"),r=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}(h,t,i),h.seriesIndex=t.seriesIndex,t.get("silent")||(h.on("mousedown",lv),h.on("mousemove",lv))}var lv=id((function(t){var e=function(t,e,n){var i=t.__baseDimIdx,r=1-i,a=t.shape.points,o=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[r];$m[0]=e,$m[1]=n;for(var c=$m[i],u=$m[1-i],d=c-s,h=c+s,f=0,g=a.length/2;f<g;f++){var p=2*f,m=a[p+i],v=a[p+r];if(d<=m&&m<=h&&(l<=v?l<=u&&u<=v:v<=u&&u<=l))return o[f]}return-1}(this,t.offsetX,t.offsetY);this.dataIndex=0<=e?e:null}),30,!1);function cv(t,e,n){var i,r="polar"===n.type;return i=r?n.getArea():n.grid.getRect(),r?{cx:i.cx,cy:i.cy,r0:t?i.r0:e.r0,r:t?i.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:i.x,y:t?i.y:e.y,width:t?e.width:i.width,height:t?i.height:e.height}}function uv(t,e,n){e=N(e)&&{coordDimensions:e}||x({},e);var i=t.getSource(),r=Ef(i,e),a=new xf(r,t);return a.initData(i,n),a}jh(nh.VISUAL.LAYOUT,E(lg,"bar")),jh(nh.VISUAL.PROGRESSIVE_LAYOUT,cg),qh({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var dv={updateSelectedMap:function(t){this._targetList=N(t)?t.slice():[],this._selectTargetMap=I(t||[],(function(t,e){return t.set(e.name,e),t}),Q())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each((function(t){t.selected=!1})),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}};function hv(t,e){this.getAllNames=function(){var t=e();return t.mapArray(t.getName)},this.containName=function(t){return 0<=e().indexOfName(t)},this.indexOfName=function(e){return t().indexOfName(e)},this.getItemVisual=function(e,n){return t().getItemVisual(e,n)}}var fv=Qh({type:"series.pie",init:function(t){fv.superApply(this,"init",arguments),this.legendVisualProvider=new hv(L(this.getData,this),L(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){fv.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return uv(this,{coordDimensions:["value"],encodeDefaulter:E(Ac,this)})},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,r=t.count();i<r;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:vu(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=fv.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),(function(t){i.push(t)})),n.percent=bl(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Ar(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function gv(t,e,n,i){var r=e.getData(),a=r.getName(this.dataIndex),o=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:a,seriesId:e.id}),r.each((function(t){pv(r.getItemGraphicEl(t),r.getItemLayout(t),e.isSelected(r.getName(t)),o,n)}))}function pv(t,e,n,i,r){var a=(e.startAngle+e.endAngle)/2,o=n?i:0,s=[Math.cos(a)*o,Math.sin(a)*o];r?t.animate().when(200,{position:s}).start("bounceOut"):t.attr("position",s)}function mv(t,e){Sn.call(this);var n=new Do({z2:2}),i=new Ro,r=new Ao;this.add(n),this.add(i),this.add(r),this.updateData(t,e,!0)}k(fv,dv);var vv=mv.prototype;function yv(t,e){M(e,(function(e){e.update="updateView",Gh(e,(function(n,i){var r={};return i.eachComponent({mainType:"series",subType:t,query:n},(function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var i=t.getData();i.each((function(e){var n=i.getName(e);r[n]=t.isSelected(n)||!1}))})),{name:n.name,selected:r,seriesId:n.seriesId}}))}))}function xv(t){return{getTargetSeries:function(e){var n={},i=Q();return e.eachSeriesByType(t,(function(t){t.__paletteScope=n,i.set(t.uid,t)})),i},reset:function(t,e){var n=t.getRawData(),i={},r=t.getData();r.each((function(t){var e=r.getRawIndex(t);i[e]=t})),n.each((function(e){var a,o=i[e],s=null!=o&&r.getItemVisual(o,"color",!0),l=null!=o&&r.getItemVisual(o,"borderColor",!0);if(s&&l||(a=n.getItemModel(e)),!s){var c=a.get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());null!=o&&r.setItemVisual(o,"color",c)}if(!l){var u=a.get("itemStyle.borderColor");null!=o&&r.setItemVisual(o,"borderColor",u)}}))}}}vv.updateData=function(t,e,n){var i=this.childAt(0),r=this.childAt(1),a=this.childAt(2),o=t.hostModel,s=t.getItemModel(e),l=t.getItemLayout(e),c=x({},l);c.label=null;var u=o.getShallow("animationTypeUpdate");n?(i.setShape(c),"scale"===o.getShallow("animationType")?(i.shape.r=l.r0,Gs(i,{shape:{r:l.r}},o,e)):(i.shape.endAngle=l.startAngle,Ys(i,{shape:{endAngle:l.endAngle}},o,e))):"expansion"===u?i.setShape(c):Ys(i,{shape:c},o,e);var d=t.getItemVisual(e,"color");i.useStyle(b({lineJoin:"bevel",fill:d},s.getModel("itemStyle").getItemStyle())),i.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var h=s.getShallow("cursor");h&&i.attr("cursor",h),pv(this,t.getItemLayout(e),o.isSelected(t.getName(e)),o.get("selectedOffset"),o.get("animation")),this._updateLabel(t,e,!n&&"transition"===u),this.highDownOnUpdate=s.get("hoverAnimation")&&o.isAnimationEnabled()?function(t,e){"emphasis"===e?(r.ignore=r.hoverIgnore,a.ignore=a.hoverIgnore,i.stopAnimation(!0),i.animateTo({shape:{r:l.r+o.get("hoverOffset")}},300,"elasticOut")):(r.ignore=r.normalIgnore,a.ignore=a.normalIgnore,i.stopAnimation(!0),i.animateTo({shape:{r:l.r}},300,"elasticOut"))}:null,Ds(this)},vv._updateLabel=function(t,e,n){var i=this.childAt(1),r=this.childAt(2),a=t.hostModel,o=t.getItemModel(e),s=t.getItemLayout(e).label,l=t.getItemVisual(e,"color");if(!s||isNaN(s.x)||isNaN(s.y))r.ignore=r.normalIgnore=r.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var c={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},u={x:s.x,y:s.y};n?(Ys(i,{shape:c},a,e),Ys(r,{style:u},a,e)):(i.attr({shape:c}),r.attr({style:u})),r.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=o.getModel("label"),h=o.getModel("emphasis.label"),f=o.getModel("labelLine"),g=o.getModel("emphasis.labelLine");l=t.getItemVisual(e,"color"),Ns(r.style,r.hoverStyle={},d,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),r.ignore=r.normalIgnore=!d.get("show"),r.hoverIgnore=!h.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!g.get("show"),i.setStyle({stroke:l,opacity:t.getItemVisual(e,"opacity")}),i.setStyle(f.getModel("lineStyle").getLineStyle()),i.hoverStyle=g.getModel("lineStyle").getLineStyle();var p=f.get("smooth");p&&!0===p&&(p=.4),i.setShape({smooth:p})}},C(mv,Sn),ju.extend({type:"pie",init:function(){var t=new Sn;this._sectorGroup=t},render:function(t,e,n,i){if(!i||i.from!==this.uid){var r=t.getData(),a=this._data,o=this.group,s=e.get("animation"),l=!a,c=t.get("animationType"),u=t.get("animationTypeUpdate"),d=E(gv,this.uid,t,s,n),h=t.get("selectedMode");if(r.diff(a).add((function(t){var e=new mv(r,t);l&&"scale"!==c&&e.eachChild((function(t){t.stopAnimation(!0)})),h&&e.on("click",d),r.setItemGraphicEl(t,e),o.add(e)})).update((function(t,e){var n=a.getItemGraphicEl(e);l||"transition"===u||n.eachChild((function(t){t.stopAnimation(!0)})),n.updateData(r,t),n.off("click"),h&&n.on("click",d),o.add(n),r.setItemGraphicEl(t,n)})).remove((function(t){var e=a.getItemGraphicEl(t);o.remove(e)})).execute(),s&&0<r.count()&&(l?"scale"!==c:"transition"!==u)){for(var f=r.getItemLayout(0),g=1;isNaN(f.startAngle)&&g<r.count();++g)f=r.getItemLayout(g);var p=Math.max(n.getWidth(),n.getHeight())/2,m=L(o.removeClipPath,o);o.setClipPath(this._createClipPath(f.cx,f.cy,p,f.startAngle,f.clockwise,m,t,l))}else o.removeClipPath();this._data=r}},dispose:function(){},_createClipPath:function(t,e,n,i,r,a,o,s){var l=new Do({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:r}});return(s?Gs:Ys)(l,{shape:{endAngle:i+(r?1:-1)*Math.PI*2}},o,a),l},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}}});var bv=Math.PI/180;function wv(t,e,n,i,r,a,o,s,l,c){function u(e,n,i){for(var r=e;r<n&&!(t[r].y+i>l+o);r++)if(t[r].y+=i,e<r&&r+1<n&&t[r+1].y>t[r].y+t[r].height)return void d(r,i/2);d(n-1,i/2)}function d(e,n){for(var i=e;0<=i&&!(t[i].y-n<l)&&(t[i].y-=n,!(0<i&&t[i].y>t[i-1].y+t[i-1].height));i--);}function h(t,e,n,i,r,a){for(var o=e?Number.MAX_VALUE:0,s=0,l=t.length;s<l;s++)if("none"===t[s].labelAlignTo){var c=Math.abs(t[s].y-i),u=t[s].len,d=t[s].len2,h=c<r+u?Math.sqrt((r+u+d)*(r+u+d)-c*c):Math.abs(t[s].x-n);e&&o<=h&&(h=o-10),!e&&h<=o&&(h=o+10),t[s].x=n+h*a,o=h}}t.sort((function(t,e){return t.y-e.y}));for(var f,g=0,p=t.length,m=[],v=[],y=0;y<p;y++)"outer"===t[y].position&&"labelLine"===t[y].labelAlignTo&&(t[y].linePoints[1][0]+=t[y].x-c,t[y].x=c),(f=t[y].y-g)<0&&u(y,p,-f),g=t[y].y+t[y].height;for(o-g<0&&d(p-1,g-o),y=0;y<p;y++)t[y].y>=n?v.push(t[y]):m.push(t[y]);h(m,!1,e,n,i,r),h(v,!0,e,n,i,r)}function _v(t){return"center"===t.position}var Sv=2*Math.PI,Cv=Math.PI/180;function kv(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf((function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0}))}}}}yv("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),qh(xv("pie")),jh(E((function(t,e,n,i){e.eachSeriesByType(t,(function(t){var e=t.getData(),i=e.mapDimension("value"),r=function(t,e){return Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,n),a=t.get("center"),o=t.get("radius");N(o)||(o=[0,o]),N(a)||(a=[a,a]);var s=gl(r.width,n.getWidth()),l=gl(r.height,n.getHeight()),c=Math.min(s,l),u=gl(a[0],s)+r.x,d=gl(a[1],l)+r.y,h=gl(o[0],c/2),f=gl(o[1],c/2),g=-t.get("startAngle")*Cv,p=t.get("minAngle")*Cv,m=0;e.each(i,(function(t){isNaN(t)||m++}));var v=e.getSum(i),y=Math.PI/(v||m)*2,x=t.get("clockwise"),b=t.get("roseType"),w=t.get("stillShowZeroSum"),_=e.getDataExtent(i);_[0]=0;var S=Sv,C=0,k=g,A=x?1:-1;if(e.each(i,(function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:u,cy:d,r0:h,r:b?NaN:f,viewRect:r});else{(i="area"!==b?0===v&&w?y:t*y:Sv/m)<p?S-=i=p:C+=t;var a=k+A*i;e.setItemLayout(n,{angle:i,startAngle:k,endAngle:a,clockwise:x,cx:u,cy:d,r0:h,r:b?fl(t,_,[h,f]):f,viewRect:r}),k=a}})),S<Sv&&m)if(S<=.001){var M=Sv/m;e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=M,i.startAngle=g+A*n*M,i.endAngle=g+A*(n+1)*M}}))}else y=S/C,k=g,e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===p?p:t*y;i.startAngle=k,i.endAngle=k+A*r,k+=A*r}}));!function(t,e,n,i,r,a){var o,s,l=t.getData(),c=[],u=!1,d=(t.get("minShowLabelAngle")||0)*bv;l.each((function(i){var a=l.getItemLayout(i),h=l.getItemModel(i),f=h.getModel("label"),g=f.get("position")||h.get("emphasis.label.position"),p=f.get("distanceToLabelLine"),m=f.get("alignTo"),v=gl(f.get("margin"),n),y=f.get("bleedMargin"),x=f.getFont(),b=h.getModel("labelLine"),w=b.get("length");w=gl(w,n);var _=b.get("length2");if(_=gl(_,n),!(a.angle<d)){var S,C,k,A,M=(a.startAngle+a.endAngle)/2,T=Math.cos(M),I=Math.sin(M);o=a.cx,s=a.cy;var D,P=t.getFormattedLabel(i,"normal")||l.getName(i),L=ii(P,x,A,"top"),E="inside"===g||"inner"===g;if("center"===g)S=a.cx,C=a.cy,A="center";else{var N=(E?(a.r+a.r0)/2*T:a.r*T)+o,R=(E?(a.r+a.r0)/2*I:a.r*I)+s;if(S=N+3*T,C=R+3*I,!E){var O=N+T*(w+e-a.r),z=R+I*(w+e-a.r),B=O+(T<0?-1:1)*_;S="edge"===m?T<0?r+v:r+n-v:B+(T<0?-p:p),k=[[N,R],[O,z],[B,C=z]]}A=E?"center":"edge"===m?0<T?"right":"left":0<T?"left":"right"}var F=f.get("rotate");D="number"==typeof F?F*(Math.PI/180):F?T<0?-M+Math.PI:-M:0,u=!!D,a.label={x:S,y:C,position:g,height:L.height,len:w,len2:_,linePoints:k,textAlign:A,verticalAlign:"middle",rotation:D,inside:E,labelDistance:p,labelAlignTo:m,labelMargin:v,bleedMargin:y,textRect:L,text:P,font:x},E||c.push(a.label)}})),!u&&t.get("avoidLabelOverlap")&&function(t,e,n,i,r,a,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<t.length;h++)_v(t[h])||(t[h].x<e?(u=Math.min(u,t[h].x),l.push(t[h])):(d=Math.max(d,t[h].x),c.push(t[h])));for(wv(c,e,n,i,1,0,a,0,s,d),wv(l,e,n,i,-1,0,a,0,s,u),h=0;h<t.length;h++){var f=t[h];if(!_v(f)){var g=f.linePoints;if(g){var p,m="edge"===f.labelAlignTo,v=f.textRect.width;(p=m?f.x<e?g[2][0]-f.labelDistance-o-f.labelMargin:o+r-f.labelMargin-g[2][0]-f.labelDistance:f.x<e?f.x-o-f.bleedMargin:o+r-f.x-f.bleedMargin)<f.textRect.width&&(f.text=si(f.text,p,f.font),"edge"===f.labelAlignTo&&(v=ni(f.text,f.font)));var y=g[1][0]-g[2][0];m?g[2][0]=f.x<e?o+f.labelMargin+v+f.labelDistance:o+r-f.labelMargin-v-f.labelDistance:(g[2][0]=f.x<e?f.x+f.labelDistance:f.x-f.labelDistance,g[1][0]=g[2][0]+y),g[1][1]=g[2][1]=f.y}}}}(c,o,s,e,n,i,r,a)}(t,f,r.width,r.height,r.x,r.y)}))}),"pie")),Yh(kv("pie")),Nu.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return Hf(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Av=ls({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(t,e){var n=e.points,i=e.size,r=this.symbolProxy,a=r.shape;if(!((t.getContext?t.getContext():t)&&i[0]<4))for(var o=0;o<n.length;){var s=n[o++],l=n[o++];isNaN(s)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(s,l)||(a.x=s-i[0]/2,a.y=l-i[1]/2,a.width=i[0],a.height=i[1],r.buildPath(t,a,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,i=e.size;if(i[0]<4){this.setTransform(t);for(var r=0;r<n.length;){var a=n[r++],o=n[r++];isNaN(a)||isNaN(o)||this.softClipShape&&!this.softClipShape.contain(a,o)||t.fillRect(a-i[0]/2,o-i[1]/2,i[0],i[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,i=n.points,r=n.size,a=Math.max(r[0],4),o=Math.max(r[1],4),s=i.length/2-1;0<=s;s--){var l=2*s,c=i[l]-a/2,u=i[1+l]-o/2;if(c<=t&&u<=e&&t<=c+a&&e<=u+o)return s}return-1}});function Mv(){this.group=new Sn}var Tv=Mv.prototype;function Iv(t,e,n){op.call(this,t,e,n),this.type="value",this.angle=0,this.name=""}function Dv(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=T(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,i=new Iv(n,"log"===t.get("axisType")?new Mg:new Qf);return i.name=t.get("name"),(i.model=t).axis=i,this.dimensions.push(n),i}),this),this.resize(t,n)}Tv.isPersistent=function(){return!this._incremental},Tv.updateData=function(t,e){this.group.removeAll();var n=new Av({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},Tv.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild((function(t){null!=t.startIndex&&(e=new Float32Array(e.buffer,4*t.startIndex*2,2*(t.endIndex-t.startIndex))),t.setShape("points",e)}))}},Tv.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),2e6<t.count()?(this._incremental||(this._incremental=new Jo({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Tv.incrementalUpdate=function(t,e,n){var i;this._incremental?(i=new Av,this._incremental.addDisplayable(i,!0)):((i=new Av({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(i)),i.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(i,e,!!this._incremental,n)},Tv._setCommon=function(t,e,n,i){var r=e.hostModel;i=i||{};var a=e.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=i.clipShape||null,t.symbolProxy=Gg(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<4;t.useStyle(r.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("color");s&&t.setColor(s),n||(t.seriesIndex=r.seriesIndex,t.on("mousemove",(function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<=n&&(t.dataIndex=n+(t.startIndex||0))})))},Tv.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Tv._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},tf({type:"scatter",render:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var r=Zp().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new Mv:new _p,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),qh(qp("scatter","circle")),jh(Zp("scatter")),C(Iv,op),Dv.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Dv.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},Dv.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},Dv.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,a=Math.atan2(-n,e),o=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var c=this._indicatorAxes[l],u=Math.abs(a-c.angle);u<o&&(r=c,s=l,o=u)}return[s,+(r&&r.coordToData(i))]},Dv.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),a=Math.min(i,r)/2;this.cx=gl(n[0],i),this.cy=gl(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var o=t.get("radius");"string"!=typeof o&&"number"!=typeof o||(o=[0,o]),this.r0=gl(o[0],a),this.r=gl(o[1],a),M(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},Dv.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;M(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var a=e.getData();M(n,(function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))}))}}),this);var r=i.get("splitNumber");function a(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}M(n,(function(t,e){var n=Ig(t.scale,t.model);Dg(t.scale,t.model);var i=t.model,o=t.scale,s=i.getMin(),l=i.getMax(),c=o.getInterval();if(null!=s&&null!=l)o.setExtent(+s,+l),o.setInterval((l-s)/r);else if(null!=s)for(;o.setExtent(+s,d=s+c*r),o.setInterval(c),c=a(c),d<n[1]&&isFinite(d)&&isFinite(n[1]););else if(null!=l)for(;o.setExtent(h=l-c*r,+l),o.setInterval(c),c=a(c),h>n[0]&&isFinite(h)&&isFinite(n[0]););else{var u=o.getTicks().length-1;r<u&&(c=a(c));var d,h=pl((d=Math.ceil(n[1]/c)*c)-c*r);o.setExtent(h,d),o.setInterval(c)}}))},Dv.dimensions=[],Dv.create=function(t,e){var n=[];return t.eachComponent("radar",(function(i){var r=new Dv(i,t,e);n.push(r),i.coordinateSystem=r})),t.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])})),n},Oc.register("radar",Dv);var Pv=im.valueAxis;function Lv(t,e){return b({show:e},t)}Kh({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),a=this.get("axisType"),o=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),c=this.get("name.formatter"),u=this.get("nameGap"),d=this.get("triggerEvent"),h=T(this.get("indicator")||[],(function(h){null!=h.max&&0<h.max&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var f=s;if(null!=h.color&&(f=b({color:h.color},s)),h=v(m(h),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisType:a,axisLabel:o,name:h.text,nameLocation:"end",nameGap:u,nameTextStyle:f,triggerEvent:d},!1),l||(h.name=""),"string"==typeof c){var g=h.name;h.name=c.replace("{value}",null!=g?g:"")}else"function"==typeof c&&(h.name=c(h.name,h));var p=x(new ll(h,null,this.ecModel),Og);return p.mainType="radar",p.componentIndex=this.componentIndex,p}),this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:v({lineStyle:{color:"#bbb"}},Pv.axisLine),axisLabel:Lv(Pv.axisLabel,!1),axisTick:Lv(Pv.axisTick,!1),axisType:"interval",splitLine:Lv(Pv.splitLine,!0),splitArea:Lv(Pv.splitArea,!0),indicator:[]}});var Ev=["axisLine","axisTickLabel","axisName"];Jh({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;M(T(e.getIndicatorAxes(),(function(t){return new vm(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})})),(function(t){M(Ev,t.add,t),this.group.add(t.getGroup())}),this)},_buildSplitLineAndArea:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),r=t.getModel("splitLine"),a=t.getModel("splitArea"),o=r.getModel("lineStyle"),s=a.getModel("areaStyle"),l=r.get("show"),c=a.get("show"),u=o.get("color"),d=s.get("color");u=N(u)?u:[u],d=N(d)?d:[d];var h=[],f=[];if("circle"===i)for(var g=n[0].getTicksCoords(),p=e.cx,m=e.cy,v=0;v<g.length;v++)l&&h[A(h,u,v)].push(new To({shape:{cx:p,cy:m,r:g[v].coord}})),c&&v<g.length-1&&f[A(f,d,v)].push(new Po({shape:{cx:p,cy:m,r0:g[v].coord,r:g[v+1].coord}}));else{var y,x=T(n,(function(t,n){var i=t.getTicksCoords();return y=null==y?i.length-1:Math.min(i.length-1,y),T(i,(function(t){return e.coordToPoint(t.coord,n)}))})),w=[];for(v=0;v<=y;v++){for(var _=[],S=0;S<n.length;S++)_.push(x[S][v]);_[0]&&_.push(_[0].slice()),l&&h[A(h,u,v)].push(new Ro({shape:{points:_}})),c&&w&&f[A(f,d,v-1)].push(new No({shape:{points:_.concat(w)}})),w=_.slice().reverse()}}var C=o.getLineStyle(),k=s.getAreaStyle();M(f,(function(t,e){this.group.add(gs(t,{style:b({stroke:"none",fill:d[e%d.length]},k),silent:!0}))}),this),M(h,(function(t,e){this.group.add(gs(t,{style:b({fill:"none",stroke:u[e%u.length]},C),silent:!0}))}),this)}function A(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}}});var Nv=Nu.extend({type:"series.radar",dependencies:["radar"],init:function(t){Nv.superApply(this,"init",arguments),this.legendVisualProvider=new hv(L(this.getData,this),L(this.getRawData,this))},getInitialData:function(t,e){return uv(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t){var e=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),i=this.getData().getName(t);return zl(""===i?this.name:i)+"<br/>"+T(n,(function(n,i){var r=e.get(e.mapDimension(n.dim),t);return zl(n.name+" : "+r)})).join("<br />")},getTooltipPosition:function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(T(n.dimensions,(function(t){return e.mapDimension(t)})),t,!0),r=0,a=i.length;r<a;r++)if(!isNaN(i[r])){var o=n.getIndicatorAxes();return n.coordToPoint(o[r].dataToCoord(i[r]),r)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function Rv(t){return!isNaN(t[0])&&!isNaN(t[1])}function Ov(t){return[t.cx,t.cy]}tf({type:"radar",render:function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle",i=t.getItemVisual(e,"color");if("none"!==n){var r=function(t){return N(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),a=Gg(n,-1,-1,2,2,i);return a.attr({style:{strokeNoScale:!0},z2:100,scale:[r[0]/2,r[1]/2]}),a}}function l(e,n,i,r,a,o){i.removeAll();for(var l=0;l<n.length-1;l++){var c=s(r,a);c&&(e[c.__dimIdx=l]?(c.attr("position",e[l]),el[o?"initProps":"updateProps"](c,{position:n[l]},t,a)):c.attr("position",n[l]),i.add(c))}}function c(t){return T(t,(function(t){return[i.cx,i.cy]}))}a.diff(o).add((function(e){var n=a.getItemLayout(e);if(n){var i=new No,r=new Ro,o={shape:{points:n}};i.shape.points=c(n),r.shape.points=c(n),Gs(i,o,t,e),Gs(r,o,t,e);var s=new Sn,u=new Sn;s.add(r),s.add(i),s.add(u),l(r.shape.points,n,u,a,e,!0),a.setItemGraphicEl(e,s)}})).update((function(e,n){var i=o.getItemGraphicEl(n),r=i.childAt(0),s=i.childAt(1),c=i.childAt(2),u={shape:{points:a.getItemLayout(e)}};u.shape.points&&(l(r.shape.points,u.shape.points,c,a,e,!1),Ys(r,u,t),Ys(s,u,t),a.setItemGraphicEl(e,i))})).remove((function(t){r.remove(o.getItemGraphicEl(t))})).execute(),a.eachItemGraphicEl((function(t,e){var n=a.getItemModel(e),i=t.childAt(0),o=t.childAt(1),s=t.childAt(2),l=a.getItemVisual(e,"color");r.add(t),i.useStyle(b(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),i.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var c=n.getModel("areaStyle"),u=n.getModel("emphasis.areaStyle"),d=c.isEmpty()&&c.parentModel.isEmpty(),h=u.isEmpty()&&u.parentModel.isEmpty();h=h&&d,o.ignore=d,o.useStyle(b(c.getAreaStyle(),{fill:l,opacity:.7})),o.hoverStyle=u.getAreaStyle();var f=n.getModel("itemStyle").getItemStyle(["color"]),g=n.getModel("emphasis.itemStyle").getItemStyle(),p=n.getModel("label"),v=n.getModel("emphasis.label");s.eachChild((function(t){t.setStyle(f),t.hoverStyle=m(g);var n=a.get(a.dimensions[t.__dimIdx],e);null!=n&&!isNaN(n)||(n=""),Ns(t.style,t.hoverStyle,p,v,{labelFetcher:a.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:n,autoColor:l,isRectText:!0})})),t.highDownOnUpdate=function(t,e){o.attr("ignore","emphasis"===e?h:d)},Ds(t)})),this._data=a},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),qh(xv("radar")),qh(qp("radar","circle")),jh((function(t){t.eachSeriesByType("radar",(function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var r=i.getIndicatorAxes();M(r,(function(t,a){e.each(e.mapDimension(r[a].dim),(function(t,e){n[e]=n[e]||[];var r=i.dataToPoint(t,a);n[e][a]=Rv(r)?r:Ov(i)}))})),e.each((function(t){var r=P(n[t],(function(t){return Rv(t)}))||Ov(i);n[t].push(r.slice()),e.setItemLayout(t,n[t])}))}}))})),Yh(kv("radar")),Xh((function(t){var e=t.polar;if(e){N(e)||(e=[e]);var n=[];M(e,(function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],N(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)})),t.polar=n}M(t.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}));for(var zv=[126,25],Bv=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Fv=0;Fv<Bv.length;Fv++)for(var Hv=0;Hv<Bv[Fv].length;Hv++)Bv[Fv][Hv][0]/=10.5,Bv[Fv][Hv][1]/=-14,Bv[Fv][Hv][0]+=zv[0],Bv[Fv][Hv][1]+=zv[1];var Vv={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]},Wv={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Xv=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Yv=Nr(),Gv={load:function(t,e){var n=Yv(e).parsed;if(n)return n;var i,r=e.specialAreas||{},a=e.geoJSON;try{i=a?Kg(a):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(t,e){"china"===t&&e.push(new Zg("",T(Bv,(function(t){return{type:"polygon",exterior:t}})),zv))}(t,i),M(i,(function(e){var n=e.name;!function(t,e){if("china"===t){var n=Vv[e.name];if(n){var i=e.center;i[0]+=n[0]/10.5,i[1]+=-n[1]/14}}}(t,e),function(t,e){if("world"===t){var n=Wv[e.name];if(n){var i=e.center;i[0]=n[0],i[1]=n[1]}}}(t,e),function(t,e){"china"===t&&""===e.name&&e.geometries.push({type:"polygon",exterior:Xv[0]})}(t,e);var i=r[n];i&&e.transformTo(i.left,i.top,i.width,i.height)})),Yv(e).parsed={regions:i,boundingRect:function(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();(e=e||i.clone()).union(i)}return e}(i)}}},Uv=Nr();function jv(t,e){var n,i,r=t.svgXML;try{j(null!=(i=(n=r&&function(t,e){return(new Od).parse(t,{ignoreViewBox:!0,ignoreRootClip:!0})}(r)||{}).root))}catch(t){throw new Error("Invalid svg format\n"+t.message)}var a=n.width,o=n.height,s=n.viewBoxRect;if(e||(e=null==a||null==o?i.getBoundingRect():new _n(0,0,0,0),null!=a&&(e.width=a),null!=o&&(e.height=o)),s){var l=jd(s,e.width,e.height),c=i;(i=new Sn).add(c),c.scale=l.scale,c.position=l.position}return i.setClipPath(new Vo({shape:e.plain()})),{root:i,boundingRect:e}}var qv={geoJSON:Gv,svg:{load:function(t,e){var n=Uv(e).originRoot;if(n)return{root:n,boundingRect:Uv(e).boundingRect};var i=jv(e);return Uv(e).originRoot=i.root,Uv(e).boundingRect=i.boundingRect,i},makeGraphic:function(t,e,n){var i=Uv(e),r=i.rootMap||(i.rootMap=Q()),a=r.get(n);if(a)return a;var o=i.originRoot;return a=i.originRootHostKey?jv(e,i.boundingRect).root:(i.originRootHostKey=n,o),r.set(n,a)},removeGraphic:function(t,e,n){var i=Uv(e),r=i.rootMap;r&&r.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},Zv={load:function(t,e){var n,i=[],r=Q(),a=Q();return M(Kv(t),(function(o){var s=qv[o.type].load(t,o);M(s.regions,(function(t){var n=t.name;e&&e.hasOwnProperty(n)&&(t=t.cloneShallow(n=e[n])),i.push(t),r.set(n,t),a.set(n,t.center)}));var l=s.boundingRect;l&&(n?n.union(l):n=l.clone())})),{regions:i,regionsMap:r,nameCoordMap:a,boundingRect:n||new _n(0,0,0,0)}},makeGraphic:$v("makeGraphic"),removeGraphic:$v("removeGraphic")};function $v(t){return function(e,n){var i=Kv(e),r=[];return M(i,(function(i){var a=qv[i.type][t];a&&r.push(a(e,i,n))})),r}}function Kv(t){return Zd(t)||[]}k(Nu.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(t){for(var e=uv(this,{coordDimensions:["value"],encodeDefaulter:E(Ac,this)}),n=e.mapDimension("value"),i=Q(),r=[],a=[],o=0,s=e.count();o<s;o++){var l=e.getName(o);i.set(l,!0),r.push({name:l,value:e.get(n,o),selected:vu(e,o,"selected")})}return M(Zv.load(this.getMapType(),this.option.nameMap).regions,(function(t){var e=t.name;i.get(e)||(r.push({name:e}),a.push(e))})),this.updateSelectedMap(r),e.appendValues([],a),e},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){for(var e=this.getData(),n=Ll(this.getRawValue(t)),i=e.getName(t),r=this.seriesGroup,a=[],o=0;o<r.length;o++){var s=r[o].originalData.indexOfName(i),l=e.mapDimension("value");isNaN(r[o].originalData.get(l,s))||a.push(zl(r[o].name))}return a.join(", ")+"<br />"+zl(i+" : "+n)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}}),dv);var Jv="\0_ec_interaction_mutex";function Qv(t,e){return!!ty(t)[e]}function ty(t){return t[Jv]||(t[Jv]={})}function ey(t){this._zr=t,this._opt={};var e=L,n=e(ny,this),i=e(iy,this),r=e(ry,this),a=e(ay,this),o=e(oy,this);Mt.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,s){this.disable(),this._opt=b(m(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",r)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",a),t.on("pinch",o))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",i),t.off("mouseup",r),t.off("mousewheel",a),t.off("pinch",o)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function ny(t){if(!(Gt(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function iy(t){if(this._dragging&&cy("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Qv(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,a=e-i,o=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&Yt(t.event),ly(this,"pan","moveOnMouseMove",t,{dx:a,dy:o,oldX:i,oldY:r,newX:e,newY:n})}}function ry(t){Gt(t)||(this._dragging=!1)}function ay(t){var e=cy("zoomOnMouseWheel",t,this._opt),n=cy("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,r=Math.abs(i),a=t.offsetX,o=t.offsetY;if(0!==i&&(e||n)){if(e){var s=3<r?1.4:1<r?1.2:1.1;sy(this,"zoom","zoomOnMouseWheel",t,{scale:0<i?s:1/s,originX:a,originY:o})}if(n){var l=Math.abs(i);sy(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(0<i?1:-1)*(3<l?.4:1<l?.15:.05),originX:a,originY:o})}}}function oy(t){Qv(this._zr,"globalPan")||sy(this,"zoom",null,t,{scale:1<t.pinchScale?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY})}function sy(t,e,n,i,r){t.pointerChecker&&t.pointerChecker(i,r.originX,r.originY)&&(Yt(i.event),ly(t,e,n,i,r))}function ly(t,e,n,i,r){r.isAvailableBehavior=L(cy,null,n,i),t.trigger(e,r)}function cy(t,e,n){var i=n[t];return!t||i&&(!O(i)||e.event[i+"Key"])}function uy(t,e,n){var i=t.target,r=i.position;r[0]+=e,r[1]+=n,i.dirty()}function dy(t,e,n,i){var r=t.target,a=t.zoomLimit,o=r.position,s=r.scale,l=t.zoom=t.zoom||1;if(l*=e,a){var c=a.min||0;l=Math.max(Math.min(a.max||1/0,l),c)}var u=l/t.zoom;t.zoom=l,o[0]-=(n-o[0])*(u-1),o[1]-=(i-o[1])*(u-1),s[0]*=u,s[1]*=u,r.dirty()}Gh({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){})),k(ey,Mt);var hy={axisPointer:1,tooltip:1,brush:1};function fy(t,e,n){var i=e.getComponentByElement(t.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!hy[i.mainType]&&r&&r.model!==n}function gy(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function py(t,e){e.eachChild((function(e){M(e.__regions,(function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")}))}))}function my(t,e){var n=new Sn;this.uid=hl("ec_map_draw"),this._controller=new ey(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,n.add(this._regionsGroup=new Sn),n.add(this._backgroundGroup=new Sn)}my.prototype={constructor:my,draw:function(t,e,n,i,r){var a="geo"===t.mainType,o=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},(function(e){o||e.getHostGeoModel()!==t||(o=e.getData())}));var s=t.coordinateSystem;this._updateBackground(s);var l=this._regionsGroup,c=this.group,u=s.getTransformInfo();c.transform=u.roamTransform,c.decomposeTransform(),c.dirty();var d=u.rawScale,h=u.rawPosition;l.removeAll();var f=["itemStyle"],g=["emphasis","itemStyle"],p=["label"],m=["emphasis","label"],v=Q();M(s.regions,(function(e){var n=v.get(e.name)||v.set(e.name,new Sn),i=new Zo({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(i);var r,s=(L=t.getRegionModel(e.name)||t).getModel(f),u=L.getModel(g),y=gy(s),x=gy(u),b=L.getModel(p),w=L.getModel(m);if(o){r=o.indexOfName(e.name);var _=o.getItemVisual(r,"color",!0);_&&(y.fill=_)}function S(t){return[t[0]*d[0]+h[0],t[1]*d[1]+h[1]]}M(e.geometries,(function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(S(t.exterior[n]));for(i.shape.paths.push(new No({segmentIgnoreThreshold:1,shape:{points:e}})),n=0;n<(t.interiors?t.interiors.length:0);++n){for(var r=t.interiors[n],a=(e=[],0);a<r.length;++a)e.push(S(r[a]));i.shape.paths.push(new No({segmentIgnoreThreshold:1,shape:{points:e}}))}}})),i.setStyle(y),i.style.strokeNoScale=!0,i.culling=!0;var C=b.get("show"),k=w.get("show"),A=o&&isNaN(o.get(o.mapDimension("value"),r)),T=o&&o.getItemLayout(r);if(a||A&&(C||k)||T&&T.showLabel){var I,D=a?e.name:r;(!o||0<=r)&&(I=t);var P=new Ao({position:S(e.center.slice()),scale:[1/c.scale[0],1/c.scale[1]],z2:10,silent:!0});Ns(P.style,P.hoverStyle={},b,w,{labelFetcher:I,labelDataIndex:D,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),n.add(P)}if(o)o.setItemGraphicEl(r,n);else{var L=t.getRegionModel(e.name);i.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:e.name,region:L&&L.option||{}}}(n.__regions||(n.__regions=[])).push(e),n.highDownSilentOnTouch=!!t.get("selectedMode"),Ds(n,x),l.add(n)})),this._updateController(t,e,n),function(t,e,n,i,r){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",(function(){t._mouseDownFlag=!0})),n.on("click",(function(a){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var o=a.target;!o.__regions;)o=o.parent;if(o){var s={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:T(o.__regions,(function(t){return{name:t.name,from:r.uid}}))};s[e.mainType+"Id"]=e.id,i.dispatchAction(s),py(e,n)}}})))}(this,t,l,n,i),py(t,l)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Zv.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&M(Zv.makeGraphic(e,this.uid),(function(t){this._backgroundGroup.add(t)}),this),this._mapName=e},_updateController:function(t,e,n){var i=t.coordinateSystem,r=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=i.getZoom(),r.enable(t.get("roam")||!1);var o=t.mainType;function s(){var e={type:"geoRoam",componentType:o};return e[o+"Id"]=t.id,e}r.off("pan").on("pan",(function(t){this._mouseDownFlag=!1,uy(a,t.dx,t.dy),n.dispatchAction(x(s(),{dx:t.dx,dy:t.dy}))}),this),r.off("zoom").on("zoom",(function(t){if(this._mouseDownFlag=!1,dy(a,t.scale,t.originX,t.originY),n.dispatchAction(x(s(),{zoom:t.scale,originX:t.originX,originY:t.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse((function(t){"text"===t.type&&t.attr("scale",[1/e[0],1/e[1]])}))}}),this),r.setPointerChecker((function(e,r,a){return i.getViewRectAfterRoam().contain(r,a)&&!fy(e,n,t)}))}};var vy="__seriesMapHighDown",yy="__seriesMapCallKey";function xy(t){var e=this[vy];e&&e.recordVersion===this[yy]&&by(e,t)}function by(t,e){var n=t.circle,i=t.labelModel,r=t.hoverLabelModel,a=t.emphasisText,o=t.normalText;e?(n.style.extendFrom(Os({},r,{text:r.get("show")?a:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Os(n.style,i,{text:i.get("show")?o:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function wy(t,e,n){var i=t.getZoom(),r=t.getCenter(),a=e.zoom,o=t.dataToPoint(r);if(null!=e.dx&&null!=e.dy&&(o[0]-=e.dx,o[1]-=e.dy,r=t.pointToData(o),t.setCenter(r)),null!=a){if(n){var s=n.min||0;a=Math.max(Math.min(i*a,n.max||1/0),s)/i}t.scale[0]*=a,t.scale[1]*=a;var l=t.position,c=(e.originY-l[1])*(a-1);l[0]-=(e.originX-l[0])*(a-1),l[1]-=c,t.updateTransform(),r=t.pointToData(o),t.setCenter(r),t.setZoom(a*i)}return{center:t.getCenter(),zoom:t.getZoom()}}tf({type:"map",render:function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(a=this._mapDraw)&&r.add(a.group);else if(t.needsDrawMap){var a=this._mapDraw||new my(n,!0);r.add(a.group),a.draw(t,e,n,this,i),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var i=t.originalData,r=this.group;i.each(i.mapDimension("value"),(function(e,n){if(!isNaN(e)){var a=i.getItemLayout(n);if(a&&a.point){var o=a.point,s=a.offset,l=new To({style:{fill:t.getData().getVisual("color")},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:8+(s?0:2)});if(!s){var c=t.mainSeries.getData(),u=i.getName(n),d=c.indexOfName(u),h=i.getItemModel(n),f=h.getModel("label"),g=h.getModel("emphasis.label"),p=c.getItemGraphicEl(d),m=X(t.getFormattedLabel(d,"normal"),u),v=X(t.getFormattedLabel(d,"emphasis"),m),y=p[vy],b=Math.random();if(!y){y=p[vy]={};var w=E(xy,!0),_=E(xy,!1);p.on("mouseover",w).on("mouseout",_).on("emphasis",w).on("normal",_)}x(y,{recordVersion:p[yy]=b,circle:l,labelModel:f,hoverLabelModel:g,emphasisText:v,normalText:m}),by(y,!1)}r.add(l)}}}))}}),Gh({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},(function(e){var i=e.coordinateSystem;if("geo"===i.type){var r=wy(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(r.center),e.setZoom&&e.setZoom(r.zoom),"series"===n&&M(e.seriesGroup,(function(t){t.setCenter(r.center),t.setZoom(r.zoom)}))}}))}));var _y=bt;function Sy(){ge.call(this)}function Cy(t){this.name=t,ge.call(this),this._roamTransformable=new Sy,this._rawTransformable=new Sy}function ky(t,e,n,i){var r=n.seriesModel,a=r?r.coordinateSystem:null;return a===this?a[t](i):null}function Ay(t,e,n,i){Cy.call(this,t),this.map=e;var r=Zv.load(e,n);this._nameCoordMap=r.nameCoordMap,this._regionsMap=r.regionsMap,this._invertLongitute=null==i||i,this.regions=r.regions,this._rect=r.boundingRect}function My(t,e,n,i){var r=n.geoModel,a=n.seriesModel,o=r?r.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[t](i):null}function Ty(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(r[0])||isNaN(r[1])||this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}var a,o=this.getBoundingRect(),s=t.get("layoutCenter"),l=t.get("layoutSize"),c=e.getWidth(),u=e.getHeight(),d=o.width/o.height*this.aspectScale,h=!1;if(s&&l&&(s=[gl(s[0],c),gl(s[1],u)],l=gl(l,Math.min(c,u)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(h=!0)),h){var f={};1<d?(f.width=l,f.height=l/d):(f.height=l,f.width=l*d),f.y=s[1]-f.height/2,f.x=s[0]-f.width/2}else(a=t.getBoxLayoutParams()).aspect=d,f=Ql(a,{width:c,height:u});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Iy(t,e){M(e.get("geoCoord"),(function(e,n){t.addGeoCoord(n,e)}))}k(Sy,ge),Cy.prototype={constructor:Cy,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,i){return this._rect=new _n(t,e,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,i){this.transformTo(t,e,n,i),this._viewRect=new _n(t,e,n,i)},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new _n(t,e,n,i)),a.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=bt([],i,t),n=bt([],n,t),e.origin=i,e.position=[n[0]-i[0],n[1]-i[1]],e.scale=[r,r],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),re(this.transform||(this.transform=[]),t.transform||ne()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],ce(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var t=this._roamTransformable.transform,e=this._rawTransformable;return{roamTransform:t?G(t):ne(),rawScale:G(e.scale),rawPosition:G(e.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?_y(n,t,i):at(n,t)},pointToData:function(t){var e=this.invTransform;return e?_y([],t,e):[t[0],t[1]]},convertToPixel:E(ky,"dataToPoint"),convertFromPixel:E(ky,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},k(Cy,ge),Ay.prototype={constructor:Ay,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),a=this._invertLongitute;r=r.clone(),a&&(r.y=-r.y-r.height);var o=this._rawTransformable;if(o.transform=r.calculateTransform(new _n(t,e,n,i)),o.decomposeTransform(),a){var s=o.scale;s[1]=-s[1]}o.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return Cy.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:E(My,"dataToPoint"),convertFromPixel:E(My,"pointToData")},k(Ay,Cy);var Dy={dimensions:Ay.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",(function(t,i){var r=t.get("map"),a=t.get("aspectScale"),o=!0,s=Zd(r);s&&s[0]&&"svg"===s[0].type?(null==a&&(a=1),o=!1):null==a&&(a=.75);var l=new Ay(r+i,r,t.get("nameMap"),o);l.aspectScale=a,l.zoomLimit=t.get("scaleLimit"),n.push(l),Iy(l,t),(t.coordinateSystem=l).model=t,l.resize=Ty,l.resize(t,e)})),t.eachSeries((function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}}));var i={};return t.eachSeriesByType("map",(function(t){if(!t.getHostGeoModel()){var e=t.getMapType();i[e]=i[e]||[],i[e].push(t)}})),M(i,(function(t,i){var r=new Ay(i,i,y(T(t,(function(t){return t.get("nameMap")}))));r.zoomLimit=W.apply(null,T(t,(function(t){return t.get("scaleLimit")}))),n.push(r),r.resize=Ty,r.aspectScale=t[0].get("aspectScale"),r.resize(t[0],e),M(t,(function(t){Iy(t.coordinateSystem=r,t)}))})),n},getFilledRegions:function(t,e,n){for(var i=(t||[]).slice(),r=Q(),a=0;a<i.length;a++)r.set(i[a].name,i[a]);return M(Zv.load(e,n).regions,(function(t){var e=t.name;r.get(e)||i.push({name:e})})),i}};Uh("geo",Dy),jh((function(t){var e={};t.eachSeriesByType("map",(function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var r={};M(n.seriesGroup,(function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),(function(t,e){var a=i.getName(e),o=n.getRegion(a);if(o&&!isNaN(t)){var s=r[a]||0,l=n.dataToPoint(o.center);r[a]=s+1,i.setItemLayout(e,{point:l,offset:s})}}))}));var a=n.getData();a.each((function(t){var e=a.getName(t),n=a.getItemLayout(t)||{};n.showLabel=!r[e],a.setItemLayout(t,n)})),e[i]=!0}}))})),qh((function(t){t.eachSeriesByType("map",(function(t){var e=t.get("color"),n=t.getModel("itemStyle"),i=n.get("areaColor"),r=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:r})}))})),Yh(nh.PROCESSOR.STATISTIC,(function(t){var e={};t.eachSeriesByType("map",(function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)})),M(e,(function(t,e){for(var n=function(t,e){var n={};return M(t,(function(t){t.each(t.mapDimension("value"),(function(e,i){var r="ec-"+t.getName(i);n[r]=n[r]||[],isNaN(e)||n[r].push(e)}))})),t[0].map(t[0].mapDimension("value"),(function(i,r){for(var a="ec-"+t[0].getName(r),o=0,s=1/0,l=-1/0,c=n[a].length,u=0;u<c;u++)s=Math.min(s,n[a][u]),l=Math.max(l,n[a][u]),o+=n[a][u];return 0===c?NaN:"min"===e?s:"max"===e?l:"average"===e?o/c:o}))}(T(t,(function(t){return t.getData()})),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(i=0;i<t.length;i++)(t[i].seriesGroup=t)[i].needsDrawMap=0===i&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]}))})),Xh((function(t){var e=[];M(t.series,(function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,b(t,t.mapLocation))}))})),yv("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var Py=M,Ly="\0__link_datas",Ey="\0__link_mainData";function Ny(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Fy(e,n,t),Py(n,(function(n){Py(e.TRANSFERABLE_METHODS,(function(e){n.wrapMethod(e,E(Ry,t))}))})),e.wrapMethod("cloneShallow",E(zy,t)),Py(e.CHANGABLE_METHODS,(function(n){e.wrapMethod(n,E(Oy,t))})),j(n[e.dataType]===e)}function Ry(t,e){if(function(t){return t[Ey]===t}(this)){var n=x({},this[Ly]);Fy(n[this.dataType]=e,n,t)}else Hy(e,this.dataType,this[Ey],t);return e}function Oy(t,e){return t.struct&&t.struct.update(this),e}function zy(t,e){return Py(e[Ly],(function(n,i){n!==e&&Hy(n.cloneShallow(),i,e,t)})),e}function By(t){var e=this[Ey];return null==t||null==e?e:e[Ly][t]}function Fy(t,e,n){t[Ly]={},Py(e,(function(e,i){Hy(e,i,t,n)}))}function Hy(t,e,n,i){(n[Ly][e]=t)[Ey]=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=By}function Vy(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e}function Wy(t,e,n){this._nodes=[],this.hostModel=t,this.levelModels=T(e||[],(function(e){return new ll(e,t,t.ecModel)})),this.leavesModel=new ll(n||{},t,t.ecModel)}function Xy(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,i=0,r=0;0<=--n;){var a=e[n];a.hierNode.prelim+=i,a.hierNode.modifier+=i,i+=a.hierNode.shift+(r+=a.hierNode.change)}}(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=function(t,e,n,i){if(e){for(var r=t,a=t,o=a.parentNode.children[0],s=e,l=r.hierNode.modifier,c=a.hierNode.modifier,u=o.hierNode.modifier,d=s.hierNode.modifier;s=jy(s),a=qy(a),s&&a;){r=jy(r),o=qy(o),r.hierNode.ancestor=t;var h=s.hierNode.prelim+d-a.hierNode.prelim-c+i(s,a);0<h&&(Zy((f=s).hierNode.ancestor.parentNode===t.parentNode?f.hierNode.ancestor:n,t,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=a.hierNode.modifier,l+=r.hierNode.modifier,u+=o.hierNode.modifier}s&&!jy(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=d-l),a&&!qy(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=c-u,n=t)}var f;return n}(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)}function Yy(t){t.setLayout({x:t.hierNode.prelim+t.parentNode.hierNode.modifier},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function Gy(t){return arguments.length?t:$y}function Uy(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function jy(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function qy(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function Zy(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function $y(t,e){return t.parentNode===e.parentNode?1:2}Vy.prototype={constructor:Vy,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),O(t=t||{})&&(t={order:t});var i,r=t.order||"preorder",a=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var o=0;!i&&o<a.length;o++)a[o].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0)){var e,n=this.hostTree,i=n.data.getItemModel(this.dataIndex),r=this.getLevelModel();return r||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(e=this.getLeavesModel()),i.getModel(t,(r||e||n.hostModel).getModel(t))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},Wy.prototype={constructor:Wy,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Wy.createTree=function(t,e,n,i){var r=new Wy(e,n.levels,n.leaves),a=[],o=1;!function t(e,n){var i=e.value;o=Math.max(o,N(i)?i.length:1),a.push(e);var s=new Vy(e.name,r);n?function(t,e){t.parentNode!==e&&(e.children.push(t),t.parentNode=e)}(s,n):r.root=s,r._nodes.push(s);var l=e.children;if(l)for(var c=0;c<l.length;c++)t(l[c],s)}(t),r.root.updateDepthAndHeight(0);var s=Ef(a,{coordDimensions:["value"],dimensionsCount:o}),l=new xf(s,e);return l.initData(a),Ny({mainData:l,struct:r,structAttr:"tree"}),r.update(),i&&i(l),r},Nu.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n={};n.leaves=t.leaves||{};var i=Wy.createTree(e,this,n,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=i.getNodeByDataIndex(e),r=n.getLeavesModel();return n.children.length&&n.isExpand||(t.parentModel=r),t}))})),r=0;i.eachNode("preorder",(function(t){t.depth>r&&(r=t.depth)}));var a=t.expandAndCollapse&&0<=t.initialTreeDepth?t.initialTreeDepth:r;return i.root.eachNode("preorder",(function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=a})),i.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],i=e.getNodeByDataIndex(t),r=i.getValue(),a=i.name;i&&i!==n;)a=i.parentNode.name+"."+a,i=i.parentNode;return zl(a+(isNaN(r)||null==r?"":" : "+r))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var Ky=ls({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.childPoints,i=n.length,r=e.parentPoint,a=n[0],o=n[i-1];if(1===i)return t.moveTo(r[0],r[1]),void t.lineTo(a[0],a[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,c=1-l,u=gl(e.forkPosition,1),d=[];d[l]=r[l],d[c]=r[c]+(o[c]-r[c])*u,t.moveTo(r[0],r[1]),t.lineTo(d[0],d[1]),t.moveTo(a[0],a[1]),d[l]=a[l],t.lineTo(d[0],d[1]),d[l]=o[l],t.lineTo(d[0],d[1]),t.lineTo(o[0],o[1]);for(var h=1;h<i-1;h++){var f=n[h];t.moveTo(f[0],f[1]),d[l]=f[l],t.lineTo(d[0],d[1])}}});function Jy(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function Qy(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),n.symbolInnerColor=!1===t.isExpand&&0!==t.children.length?n.itemStyle.fill:"#fff",n}function tx(t,e,n,i,r,a){var o=!n,s=t.tree.getNodeByDataIndex(e),l=s.getModel(),c=(a=Qy(s,l,a),t.tree.root),u=s.parentNode===c?s:s.parentNode||s,d=t.getItemGraphicEl(u.dataIndex),h=u.getLayout(),f=d?{x:d.position[0],y:d.position[1],rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:h,g=s.getLayout();o?(n=new hp(t,e,a)).attr("position",[f.x,f.y]):n.updateData(t,e,a),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,i.add(n),t.setItemGraphicEl(e,n),Ys(n,{position:[g.x,g.y]},r);var p=n.getSymbolPath();if("radial"===a.layout){var m,v,y=c.children[0],x=y.getLayout(),w=y.children.length;if(g.x===x.x&&!0===s.isExpand){var _={};_.x=(y.children[0].getLayout().x+y.children[w-1].getLayout().x)/2,_.y=(y.children[0].getLayout().y+y.children[w-1].getLayout().y)/2,(m=Math.atan2(_.y-x.y,_.x-x.x))<0&&(m=2*Math.PI+m),(v=_.x<x.x)&&(m-=Math.PI)}else(m=Math.atan2(g.y-x.y,g.x-x.x))<0&&(m=2*Math.PI+m),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(v=g.x<x.x)&&(m-=Math.PI):(v=g.x>x.x)||(m-=Math.PI);var S=v?"left":"right",C=a.labelModel.get("rotate"),k=C*(Math.PI/180);p.setStyle({textPosition:a.labelModel.get("position")||S,textRotation:null==C?-m:k,textOrigin:"center",verticalAlign:"middle"})}!function(t,e,n,i,r,a,o,s,l){var c=l.edgeShape,u=i.__edge;if("curve"===c)e.parentNode&&e.parentNode!==n&&Ys(u=u||(i.__edge=new jo({shape:nx(l,r,r),style:b({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:nx(l,a,o),style:{opacity:1}},t);else if("polyline"===c&&"orthogonal"===l.layout&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var d=e.children,h=[],f=0;f<d.length;f++){var g=d[f].getLayout();h.push([g.x,g.y])}Ys(u=u||(i.__edge=new Ky({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:l.orient,forkPosition:l.edgeForkPosition},style:b({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:{parentPoint:[o.x,o.y],childPoints:h},style:{opacity:1}},t)}s.add(u)}(r,s,c,n,f,h,g,i,a)}function ex(t,e,n,i,r,a){for(var o,s,l=t.tree.getNodeByDataIndex(e),c=t.tree.root,u=l.getModel(),d=(a=Qy(l,u,a),l.parentNode===c?l:l.parentNode||l);null==(o=d.getLayout());)d=d.parentNode===c?d:d.parentNode||d;Ys(n,{position:[o.x+1,o.y+1]},r,(function(){i.remove(n),t.setItemGraphicEl(e,null)})),n.fadeOut(null,{keepLabel:!0});var h=t.getItemGraphicEl(d.dataIndex).__edge,f=n.__edge||(!1===d.isExpand||1===d.children.length?h:void 0);s=a.edgeShape,f&&("curve"===s?Ys(f,{shape:nx(a,o,o),style:{opacity:0}},r,(function(){i.remove(f)})):"polyline"===s&&"orthogonal"===a.layout&&Ys(f,{shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]]},style:{opacity:0}},r,(function(){i.remove(f)})))}function nx(t,e,n){var i,r,a,o,s,l,c,u,d=t.orient;if("radial"!==t.layout)return s=e.x,c=e.y,l=n.x,u=n.y,"LR"!==d&&"RL"!==d||(i=s+(l-s)*t.curvature,r=c,a=l+(s-l)*t.curvature,o=u),"TB"!==d&&"BT"!==d||(i=s,r=c+(u-c)*t.curvature,a=l,o=u+(c-u)*t.curvature),{x1:s,y1:c,x2:l,y2:u,cpx1:i,cpy1:r,cpx2:a,cpy2:o};l=n.rawX,u=n.rawY;var h=Uy(s=e.rawX,c=e.rawY),f=Uy(s,c+(u-c)*t.curvature),g=Uy(l,u+(c-u)*t.curvature),p=Uy(l,u);return{x1:h.x,y1:h.y,x2:p.x,y2:p.y,cpx1:f.x,cpy1:f.y,cpx2:g.x,cpy2:g.y}}function ix(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var r=n.children;if(r.length)for(var a=r.length-1;0<=a;a--)i.push(r[a])}}function rx(t,e,n){if(t&&0<=S(e,t.type)){var i=n.getData().tree.root,r=t.targetNode;if("string"==typeof r&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var a=t.targetNodeId;if(null!=a&&(r=i.getNodeById(a)))return{node:r}}}function ax(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function ox(t,e){return 0<=S(ax(t),e)}function sx(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}function lx(t){this.group=new Sn,t.add(this.group)}function cx(t,e,n,i,r,a){var o=[[r?t:t-5,e],[t+n,e],[t+n,e+i],[r?t:t-5,e+i]];return a||o.splice(2,0,[t+n+5,e+i/2]),r||o.push([t,e+i/2]),o}function ux(t){var e=xx(t);return e.stroke=e.fill=e.lineWidth=null,e}tf({type:"tree",init:function(t,e){this._mainGroup=new Sn,this._controller=new ey(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,i){var r=t.getData(),a=t.layoutInfo,o=this._mainGroup,s=t.get("layout");o.attr("position","radial"===s?[a.x+a.width/2,a.y+a.height/2]:[a.x,a.y]),this._updateViewCoordSys(t,a,s),this._updateController(t,e,n);var l=this._data,c={expandAndCollapse:t.get("expandAndCollapse"),layout:s,edgeShape:t.get("edgeShape"),edgeForkPosition:t.get("edgeForkPosition"),orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};r.diff(l).add((function(e){Jy(r,e)&&tx(r,e,null,o,t,c)})).update((function(e,n){var i=l.getItemGraphicEl(n);Jy(r,e)?tx(r,e,i,o,t,c):i&&ex(l,n,i,o,t,c)})).remove((function(e){var n=l.getItemGraphicEl(e);n&&ex(l,e,n,o,t,c)})).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===c.expandAndCollapse&&r.eachItemGraphicEl((function(e,i){e.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})}))})),this._data=r},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each((function(t){var i=e.getItemLayout(t);!i||isNaN(i.x)||isNaN(i.y)||n.push([+i.x,+i.y])}));var i=[],r=[];Ca(n,i,r);var a=this._min,o=this._max;r[0]-i[0]==0&&(i[0]=a?a[0]:i[0]-1,r[0]=o?o[0]:r[0]+1),r[1]-i[1]==0&&(i[1]=a?a[1]:i[1]-1,r[1]=o?o[1]:r[1]+1);var s=t.coordinateSystem=new Cy;s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),s.setCenter(t.get("center")),s.setZoom(t.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=r},_updateController:function(t,e,n){var i=this._controller,r=this._controllerHost,a=this.group;i.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!fy(e,n,t)})),i.enable(t.get("roam")),r.zoomLimit=t.get("scaleLimit"),r.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(e){uy(r,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})}),this).on("zoom",(function(e){dy(r,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(t)}),this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),i=[n,n];e.eachItemGraphicEl((function(t,e){t.attr("scale",i)}))},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scale,r=i&&i[0]||1;return((e.getZoom()-1)*n+1)/r},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Gh({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand}))})),Gh({type:"treeRoam",event:"treeRoam",update:"none"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=wy(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)}))})),qh(qp("tree","circle")),jh((function(t,e){t.eachSeriesByType("tree",(function(t){!function(t,e){var n=function(t,e){return Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,a=0,o=null;o="radial"===i?(r=2*Math.PI,a=Math.min(n.height,n.width)/2,Gy((function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth}))):(r=n.width,a=n.height,Gy());var s=t.getData().tree.root,l=s.children[0];if(l){!function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,i=[t];e=i.pop();)if(n=e.children,e.isExpand&&n.length)for(var r=n.length-1;0<=r;r--){var a=n[r];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},i.push(a)}}(s),function(t,e,n){for(var i,r=[t],a=[];i=r.pop();)if(a.push(i),i.isExpand){var o=i.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;i=a.pop();)e(i,n)}(l,Xy,o),s.hierNode.modifier=-l.hierNode.prelim,ix(l,Yy);var c=l,u=l,d=l;ix(l,(function(t){var e=t.getLayout().x;e<c.getLayout().x&&(c=t),e>u.getLayout().x&&(u=t),t.depth>d.depth&&(d=t)}));var h=c===u?1:o(c,u)/2,f=h-c.getLayout().x,g=0,p=0,m=0,v=0;if("radial"===i)g=r/(u.getLayout().x+h+f),p=a/(d.depth-1||1),ix(l,(function(t){var e=Uy(m=(t.getLayout().x+f)*g,v=(t.depth-1)*p);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)}));else{var y=t.getOrient();"RL"===y||"LR"===y?(p=a/(u.getLayout().x+h+f),g=r/(d.depth-1||1),ix(l,(function(t){v=(t.getLayout().x+f)*p,t.setLayout({x:m="LR"===y?(t.depth-1)*g:r-(t.depth-1)*g,y:v},!0)}))):"TB"!==y&&"BT"!==y||(g=r/(u.getLayout().x+h+f),p=a/(d.depth-1||1),ix(l,(function(t){m=(t.getLayout().x+f)*g,t.setLayout({x:m,y:v="TB"===y?(t.depth-1)*p:a-(t.depth-1)*p},!0)})))}}}(t,e)}))})),Nu.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;M(e.children,(function(e){t(e);var i=e.value;N(i)&&(i=i[0]),n+=i}));var i=e.value;N(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),N(e.value)?e.value[0]=i:e.value=i}(n);var i=t.levels||[];i=t.levels=function(t,e){var n,i=e.get("color");if(i)return M(t=t||[],(function(t){var e=new ll(t),i=e.get("color");(e.get("itemStyle.color")||i&&"none"!==i)&&(n=!0)})),n||((t[0]||(t[0]={})).color=i.slice()),t}(i,e);var r={};return r.levels=i,Wy.createTree(n,this,r).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=N(n)?Ll(n[0]):Ll(n);return zl(e.getName(t)+": "+i)},getDataParams:function(t){var e=Nu.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=sx(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},x(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=Q(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}}),lx.prototype={constructor:lx,render:function(t,e,n,i){var r=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),r.get("show")&&n){var o=r.getModel("itemStyle"),s=o.getModel("textStyle"),l={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(t,l,o,s,i),tc(a,l.pos,l.box)}},_prepare:function(t,e,n){for(var i=t;i;i=i.parentNode){var r=i.getModel().get("name"),a=n.getTextRect(r),o=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=o+8,e.renderList.push({node:i,text:r,width:o})}},_renderContent:function(t,e,n,i,r){for(var a,o,s=0,l=e.emptyItemWidth,c=t.get("breadcrumb.height"),u=function(t,e,n){var i=e.width,r=e.height,a=gl(t.x,i),o=gl(t.y,r),s=gl(t.x2,i),l=gl(t.y2,r);return(isNaN(a)||isNaN(parseFloat(t.x)))&&(a=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i),(isNaN(o)||isNaN(parseFloat(t.y)))&&(o=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=r),n=Nl(n||0),{width:Math.max(s-a-n[1]-n[3],0),height:Math.max(l-o-n[0]-n[2],0)}}(e.pos,e.box),d=e.totalWidth,h=e.renderList,f=h.length-1;0<=f;f--){var g=h[f],p=g.node,m=g.width,v=g.text;d>u.width&&(d-=m-l,m=l,v=null);var y=new No({shape:{points:cx(s,0,m,c,f===h.length-1,0===f)},style:b(n.getItemStyle(),{lineJoin:"bevel",text:v,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:E(r,p)});this.group.add(y),y.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(a=t).componentIndex,seriesIndex:a.componentIndex,seriesName:a.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(o=p)&&o.dataIndex,name:o&&o.name},treePathInfo:o&&sx(o,a)},s+=m+8}},remove:function(){this.group.removeAll()}};var dx=L,hx=Sn,fx=Vo,gx=M,px=["label"],mx=["emphasis","label"],vx=["upperLabel"],yx=["emphasis","upperLabel"],xx=Zr([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function bx(t,e,n,i,r,a,o,s,l,c){if(o){var u=o.getLayout(),d=t.getData();if(d.setItemGraphicEl(o.dataIndex,null),u&&u.isInView){var h=u.width,f=u.height,g=u.borderWidth,p=u.invisible,v=o.getRawIndex(),y=s&&s.getRawIndex(),b=o.viewChildren,w=u.upperHeight,_=b&&b.length,S=o.getModel("itemStyle"),C=o.getModel("emphasis.itemStyle"),k=P("nodeGroup",hx);if(k){if(l.add(k),k.attr("position",[u.x||0,u.y||0]),k.__tmNodeWidth=h,k.__tmNodeHeight=f,u.isAboveViewRoot)return k;var A=o.getModel(),M=P("background",fx,c,1);if(M&&function(e,n,i){if(n.dataIndex=o.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:h,height:f}),p)I(n);else{n.invisible=!1;var r=o.getVisual("borderColor",!0),a=C.get("borderColor"),s=ux(S);s.fill=r;var l=xx(C);if(l.fill=a,i){var c=h-2*g;D(s,l,r,c,w,{x:g,y:0,width:c,height:w})}else s.text=l.text=null;n.setStyle(s),Cs(n,l)}e.add(n)}(k,M,_&&u.upperHeight),_)Ls(k)&&Ps(k,!1),M&&(Ps(M,!0),d.setItemGraphicEl(o.dataIndex,M));else{var T=P("content",fx,c,2);T&&function(e,n){n.dataIndex=o.dataIndex,n.seriesIndex=t.seriesIndex;var i=Math.max(h-2*g,0),r=Math.max(f-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:i,height:r}),p)I(n);else{n.invisible=!1;var a=o.getVisual("color",!0),s=ux(S);s.fill=a;var l=xx(C);D(s,l,a,i,r),n.setStyle(s),Cs(n,l)}e.add(n)}(k,T),M&&Ls(M)&&Ps(M,!1),Ps(k,!0),d.setItemGraphicEl(o.dataIndex,k)}return k}}}function I(t){t.invisible||a.push(t)}function D(e,n,i,r,a,s){var l=W(t.getFormattedLabel(o.dataIndex,"normal",null,null,s?"upperLabel":"label"),A.get("name"));if(!s&&u.isLeafRoot){var c=t.get("drillDownIcon",!0);l=c?c+" "+l:l}var d=A.getModel(s?vx:px),h=A.getModel(s?yx:mx),f=d.getShallow("show");Ns(e,n,d,h,{defaultText:f?l:null,autoColor:i,isRectText:!0}),s&&(e.textRect=m(s)),e.truncate=f&&d.get("ellipsis")?{outerWidth:r,outerHeight:a,minChar:2}:null}function P(t,a,s,l){var c=null!=y&&n[t][y],u=r[t];return c?(n[t][y]=null,function(t,e,n){(t[v]={}).old="nodeGroup"===n?e.position.slice():x({},e.shape)}(u,c,t)):p||((c=new a({z:function(t,e){var n=10*t+e;return(n-1)/n}(s,l)})).__tmDepth=s,function(t,e,n){var a=t[v]={},s=o.parentNode;if(s&&(!i||"drillDown"===i.direction)){var l=0,c=0,u=r.background[s.getRawIndex()];!i&&u&&u.old&&(l=u.old.width,c=u.old.height),a.old="nodeGroup"===n?[0,c]:{x:l,y:c,width:0,height:0}}a.fadein="nodeGroup"!==n}(u,0,c.__tmStorageName=t)),e[t][v]=c}}tf({type:"treemap",init:function(t,e){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(t,e,n,i){if(!(S(e.findComponents({mainType:"series",subType:"treemap",query:i}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var r=rx(i,["treemapZoomToNode","treemapRootToNode"],t),a=i&&i.type,o=t.layoutInfo,s=!this._oldTree,l=this._storage,c="treemapRootToNode"===a&&r&&l?{rootNodeGroup:l.nodeGroup[r.node.getRawIndex()],direction:i.direction}:null,u=this._giveContainerGroup(o),d=this._doRender(u,t,c);s||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?d.renderFinally():this._doAnimation(u,d,t,c),this._resetController(n),this._renderBreadcrumb(t,n,r)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new hx,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){var i=e.getData().tree,r=this._oldTree,a={nodeGroup:[],background:[],content:[]},o={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],c=E(bx,e,o,s,n,a,l);!function t(e,n,i,r,a){function o(t){return t.getId()}function s(o,s){var l=null!=o?e[o]:null,u=null!=s?n[s]:null,d=c(l,u,i,a);d&&t(l&&l.viewChildren||[],u&&u.viewChildren||[],d,r,a+1)}r?gx(n=e,(function(t,e){t.isRemoved()||s(e,e)})):new nf(n,e,o,o).add(s).update(s).remove(E(s,null)).execute()}(i.root?[i.root]:[],r&&r.root?[r.root]:[],t,i===r||!r,0);var u,d,h=(d={nodeGroup:[],background:[],content:[]},(u=s)&&gx(u,(function(t,e){var n=d[e];gx(t,(function(t){t&&(n.push(t),t.__tmWillDelete=1)}))})),d);return this._oldTree=i,this._storage=o,{lastsForAnimation:a,willDeleteEls:h,renderFinally:function(){gx(h,(function(t){gx(t,(function(t){t.parent&&t.parent.remove(t)}))})),gx(l,(function(t){t.invisible=!0,t.dirty()}))}}},_doAnimation:function(t,e,n,i){if(n.get("animation")){var r=n.get("animationDurationUpdate"),a=n.get("animationEasing"),o=function(){var t,e=[],n={};return{add:function(t,i,r,a,o){return O(a)&&(o=a,a=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:i,time:r,delay:a,easing:o}),!0)},done:function(e){return t=e,this},start:function(){for(var i=e.length,r=0,a=e.length;r<a;r++){var o=e[r];o.el.animateTo(o.target,o.time,o.delay,o.easing,s)}return this;function s(){--i||(e.length=0,n={},t&&t())}}}}();gx(e.willDeleteEls,(function(t,e){gx(t,(function(t,n){if(!t.invisible){var s,l=t.parent;if(i&&"drillDown"===i.direction)s=l===i.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,u=0;l.__tmWillDelete||(c=l.__tmNodeWidth/2,u=l.__tmNodeHeight/2),s="nodeGroup"===e?{position:[c,u],style:{opacity:0}}:{shape:{x:c,y:u,width:0,height:0},style:{opacity:0}}}s&&o.add(t,s,r,a)}}))})),gx(this._storage,(function(t,n){gx(t,(function(t,i){var s=e.lastsForAnimation[n][i],l={};s&&("nodeGroup"===n?s.old&&(l.position=t.position.slice(),t.attr("position",s.old)):(s.old&&(l.shape=x({},t.shape),t.setShape(s.old)),s.fadein?(t.setStyle("opacity",0),l.style={opacity:1}):1!==t.style.opacity&&(l.style={opacity:1})),o.add(t,l,r,a))}))}),this),this._state="animating",o.done(dx((function(){this._state="ready",e.renderFinally()}),this)).start()}},_resetController:function(t){var e=this._controller;e||((e=this._controller=new ey(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",dx(this._onPan,this)),e.on("zoom",dx(this._onZoom,this)));var n=new _n(0,0,t.getWidth(),t.getHeight());e.setPointerChecker((function(t,e,i){return n.contain(e,i)}))},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(3<Math.abs(t.dx)||3<Math.abs(t.dy))){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var a=new _n(r.x,r.y,r.width,r.height),o=this.seriesModel.layoutInfo;e-=o.x,n-=o.y;var s=ne();oe(s,s,[-e,-n]),le(s,s,[t.scale,t.scale]),oe(s,s,[e,n]),a.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},_initEvents:function(t){t.on("click",(function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var i=n.node;if(i.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var r=i.hostTree.data.getItemModel(i.dataIndex),a=r.get("link",!0),o=r.get("target",!0)||"blank";a&&window.open(a,o)}}}}}),this)},_renderBreadcrumb:function(t,e,n){n=n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||{node:t.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new lx(this.group))).render(t,e,n.node,dx((function(e){"animating"!==this._state&&(ox(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))}),this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var a=r.transformCoordToLocal(t,e),o=r.shape;if(!(o.x<=a[0]&&a[0]<=o.x+o.width&&o.y<=a[1]&&a[1]<=o.y+o.height))return!1;n={node:i,offsetX:a[0],offsetY:a[1]}}}),this),n}});for(var _x=function(){},Sx=["treemapZoomToNode","treemapRender","treemapMove"],Cx=0;Cx<Sx.length;Cx++)Gh({type:Sx[Cx],update:"updateView"},_x);Gh({type:"treemapRootToNode",update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},(function(e,n){var i=rx(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=ox(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))}));var kx=M,Ax=z,Mx=function(t){var e=t.mappingMethod,n=t.type,i=this.option=m(t);this.type=n,this.mappingMethod=e,this._normalizeData=Bx[e];var r=Tx[n];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[e],"piecewise"===e?(Ix(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,M(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(i)):"category"===e?i.categories?function(t){var e=t.categories,n=t.visual,i=t.categoryMap={};if(kx(e,(function(t,e){i[t]=e})),!N(n)){var r=[];z(n)?kx(n,(function(t,e){var n=i[e];r[null!=n?n:-1]=t})):r[-1]=n,n=zx(t,r)}for(var a=e.length-1;0<=a;a--)null==n[a]&&(delete i[e[a]],e.pop())}(i):Ix(i,!0):(j("linear"!==e||i.dataExtent),Ix(i))};Mx.prototype={constructor:Mx,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return L(this._normalizeData,this)}};var Tx=Mx.visualHandlers={color:{applyVisual:Lx("color"),getColorMapper:function(){var t=this.option;return L("category"===t.mappingMethod?function(t,e){return e||(t=this._normalizeData(t)),Ex.call(this,t)}:function(e,n,i){var r=!!i;return n||(e=this._normalizeData(e)),i=We(e,t.parsedVisual,i),r?i:Ue(i,"rgba")},this)},_doMap:{linear:function(t){return Ue(We(t,this.option.parsedVisual),"rgba")},category:Ex,piecewise:function(t,e){var n=Ox.call(this,e);return null==n&&(n=Ue(We(t,this.option.parsedVisual),"rgba")),n},fixed:Nx}},colorHue:Dx((function(t,e){return Ye(t,e)})),colorSaturation:Dx((function(t,e){return Ye(t,null,e)})),colorLightness:Dx((function(t,e){return Ye(t,null,null,e)})),colorAlpha:Dx((function(t,e){return Ge(t,e)})),opacity:{applyVisual:Lx("opacity"),_doMap:Rx([0,1])},liftZ:{applyVisual:Lx("liftZ"),_doMap:{linear:Nx,category:Nx,piecewise:Nx,fixed:Nx}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(O(i))n("symbol",i);else if(Ax(i))for(var r in i)i.hasOwnProperty(r)&&n(r,i[r])},_doMap:{linear:Px,category:Ex,piecewise:function(t,e){var n=Ox.call(this,e);return null==n&&(n=Px.call(this,t)),n},fixed:Nx}},symbolSize:{applyVisual:Lx("symbolSize"),_doMap:Rx([0,1])}};function Ix(t,e){var n=t.visual,i=[];z(n)?kx(n,(function(t){i.push(t)})):null!=n&&i.push(n),e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),zx(t,i)}function Dx(t){return{applyVisual:function(e,n,i){e=this.mapValueToVisual(e),i("color",t(n("color"),e))},_doMap:Rx([0,1])}}function Px(t){var e=this.option.visual;return e[Math.round(fl(t,[0,1],[0,e.length-1],!0))]||{}}function Lx(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function Ex(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function Nx(){return this.option.visual[0]}function Rx(t){return{linear:function(e){return fl(e,t,this.option.visual,!0)},category:Ex,piecewise:function(e,n){var i=Ox.call(this,n);return null==i&&(i=fl(e,t,this.option.visual,!0)),i},fixed:Nx}}function Ox(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[Mx.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function zx(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=T(e,(function(t){return Be(t)}))),e}var Bx={linear:function(t){return fl(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=Mx.findPieceIndex(t,e,!0);if(null!=n)return fl(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:et};function Fx(t,e,n){return t?e<=n:e<n}Mx.listVisualTypes=function(){var t=[];return M(Tx,(function(e,n){t.push(n)})),t},Mx.addVisualHandler=function(t,e){Tx[t]=e},Mx.isValidType=function(t){return Tx.hasOwnProperty(t)},Mx.eachVisual=function(t,e,n){z(t)?M(t,e,n):e.call(n,t)},Mx.mapVisual=function(t,e,n){var i,r=N(t)?[]:z(t)?{}:(i=!0,null);return Mx.eachVisual(t,(function(t,a){var o=e.call(n,t,a);i?r=o:r[a]=o})),r},Mx.retrieveVisuals=function(t){var e,n={};return t&&kx(Tx,(function(i,r){t.hasOwnProperty(r)&&(n[r]=t[r],e=!0)})),e?n:null},Mx.prepareVisualTypes=function(t){if(Ax(t)){var e=[];kx(t,(function(t,n){e.push(n)})),t=e}else{if(!N(t))return[];t=t.slice()}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},Mx.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},Mx.findPieceIndex=function(t,e,n){for(var i,r=1/0,a=0,o=e.length;a<o;a++){var s=e[a].value;if(null!=s){if(s===t||"string"==typeof s&&s===t+"")return a;n&&d(s,a)}}for(a=0,o=e.length;a<o;a++){var l=e[a],c=l.interval,u=l.close;if(c){if(c[0]===-1/0){if(Fx(u[1],t,c[1]))return a}else if(c[1]===1/0){if(Fx(u[0],c[0],t))return a}else if(Fx(u[0],c[0],t)&&Fx(u[1],t,c[1]))return a;n&&d(c[0],a),n&&d(c[1],a)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function d(e,n){var a=Math.abs(e-t);a<r&&(r=a,i=n)}};var Hx=N,Vx="itemStyle",Wx={seriesType:"treemap",reset:function(t,e,n,i){var r=t.getData().tree,a=r.root,o=t.getModel(Vx);a.isRemoved()||function t(e,n,i,r,a,o){var s=e.getModel(),l=e.getLayout();if(l&&!l.invisible&&l.isInView){var c,u,d=e.getModel(Vx),h=function(t,e,n,i){var r=x({},e);return M(["color","colorAlpha","colorSaturation"],(function(a){var o=t.get(a,!0);null==o&&n&&(o=n[a]),null==o&&(o=e[a]),null==o&&(o=i.get(a)),null!=o&&(r[a]=o)})),r}(d,n,i[e.depth],r),f=d.get("borderColor"),g=d.get("borderColorSaturation");null!=g&&(f=null!=(u=c=Xx(h))?Ye(u,null,null,g):null),e.setVisual("borderColor",f);var p=e.viewChildren;if(p&&p.length){var m=function(t,e,n,i,r,a){if(a&&a.length){var o=Gx(e,"color")||null!=r.color&&"none"!==r.color&&(Gx(e,"colorAlpha")||Gx(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=l&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),d={type:o.name,dataExtent:c,visual:o.range};"color"!==d.type||"index"!==u&&"id"!==u?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var h=new Mx(d);return h.__drColorMappingBy=u,h}}}(0,s,l,0,h,p);M(p,(function(e,n){if(e.depth>=a.length||e===a[e.depth]){var l=function(t,e,n,i,r,a){var o=x({},e);if(r){var s=r.type,l="color"===s&&r.__drColorMappingBy,c="index"===l?i:"id"===l?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));o[s]=r.mapValueToVisual(c)}return o}(s,h,e,n,m,o);t(e,l,i,r,a,o)}}))}else c=Xx(h),e.setVisual("color",c)}}(a,{},T(r.levelModels,(function(t){return t?t.get(Vx):null})),o,t.getViewRoot().getAncestors(),t)}};function Xx(t){var e=Yx(t,"color");if(e){var n=Yx(t,"colorAlpha"),i=Yx(t,"colorSaturation");return i&&(e=Ye(e,null,null,i)),n&&(e=Ge(e,n)),e}}function Yx(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function Gx(t,e){var n=t.get(e);return Hx(n)&&n.length?{name:e,range:n}:null}var Ux=Math.max,jx=Math.min,qx=W,Zx=M,$x=["itemStyle","borderWidth"],Kx=["itemStyle","gapWidth"],Jx=["upperLabel","show"],Qx=["upperLabel","height"],tb={seriesType:"treemap",reset:function(t,e,n,i){var r=n.getWidth(),a=n.getHeight(),o=t.option,s=Ql(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=o.size||[],c=gl(qx(s.width,l[0]),r),u=gl(qx(s.height,l[1]),a),d=i&&i.type,h=rx(i,["treemapZoomToNode","treemapRootToNode"],t),f="treemapRender"===d||"treemapMove"===d?i.rootRect:null,g=t.getViewRoot(),p=ax(g);if("treemapMove"!==d){var m="treemapZoomToNode"===d?function(t,e,n,i,r){var a,o=(e||{}).node,s=[i,r];if(!o||o===n)return s;for(var l=i*r,c=l*t.option.zoomToNodeRatio;a=o.parentNode;){for(var u=0,d=a.children,h=0,f=d.length;h<f;h++)u+=d[h].getValue();var g=o.getValue();if(0===g)return s;c*=u/g;var p=a.getModel(),m=p.get($x);c+=4*m*m+(3*m+Math.max(m,rb(p)))*Math.pow(c,.5),wl<c&&(c=wl),o=a}c<l&&(c=l);var v=Math.pow(c/l,.5);return[i*v,r*v]}(t,h,g,c,u):f?[f.width,f.height]:[c,u],v=o.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:o.squareRatio,sort:v,leafDepth:o.leafDepth};g.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};g.setLayout(b),function t(e,n,i,r){var a,o;if(!e.isRemoved()){var s=e.getLayout();a=s.width,o=s.height;var l=(g=e.getModel()).get($x),c=g.get(Kx)/2,u=rb(g),d=Math.max(l,u),h=l-c,f=d-c,g=e.getModel();e.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0);var p=(a=Ux(a-2*h,0))*(o=Ux(o-h-f,0)),m=eb(e,g,p,n,i,r);if(m.length){var v={x:h,y:f,width:a,height:o},y=jx(a,o),x=1/0,b=[];b.area=0;for(var w=0,_=m.length;w<_;){var S=m[w];b.push(S),b.area+=S.getLayout().area;var C=nb(b,y,n.squareRatio);x=C<=x?(w++,C):(b.area-=b.pop().getLayout().area,ib(b,y,v,c,!1),y=jx(v.width,v.height),b.length=b.area=0,1/0)}if(b.length&&ib(b,y,v,c,!0),!i){var k=g.get("childrenVisibleMin");null!=k&&p<k&&(i=!0)}for(w=0,_=m.length;w<_;w++)t(m[w],n,i,r+1)}}}(g,y,!1,0),b=g.getLayout(),Zx(p,(function(t,e){var n=(p[e+1]||g).getValue();t.setLayout(x({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))}))}var w=t.getData().tree.root;w.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,a=r.getLayout();if(!a)return i;for(var o=[a.width/2,a.height/2],s=r;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}(s,f,h),!0),t.setLayoutInfo(s),function t(e,n,i,r,a){var o=e.getLayout(),s=i[a],l=s&&s===e;if(!(s&&!l||a===i.length&&e!==r)){e.setLayout({isInView:!0,invisible:!l&&!n.intersect(o),isAboveViewRoot:l},!0);var c=new _n(n.x-o.x,n.y-o.y,n.width,n.height);Zx(e.viewChildren||[],(function(e){t(e,c,i,r,a+1)}))}}(w,new _n(-s.x,-s.y,r,a),p,g,0)}};function eb(t,e,n,i,r,a){var o=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=a;if(r&&!l)return t.viewChildren=[];!function(t,e){e&&t.sort((function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0==i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i}))}(o=D(o,(function(t){return!t.isRemoved()})),s);var c=function(t,e,n){for(var i=0,r=0,a=e.length;r<a;r++)i+=e[r].getValue();var o=t.get("visualDimension");if(e&&e.length)if("value"===o&&n)s=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];Zx(e,(function(t){var e=t.getValue(o);e<s[0]&&(s[0]=e),e>s[1]&&(s[1]=e)}))}else s=[NaN,NaN];return{sum:i,dataExtent:s}}(e,o,s);if(0===c.sum)return t.viewChildren=[];if(c.sum=function(t,e,n,i,r){if(!i)return n;for(var a=t.get("visibleMin"),o=r.length,s=o,l=o-1;0<=l;l--){var c=r["asc"===i?o-l-1:l].getValue();c/n*e<a&&(s=l,n-=c)}return r.splice("asc"===i?0:s,o-s),n}(e,n,c.sum,s,o),0===c.sum)return t.viewChildren=[];for(var u=0,d=o.length;u<d;u++){var h=o[u].getValue()/c.sum*n;o[u].setLayout({area:h})}return l&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:c.dataExtent},!0),o}function nb(t,e,n){for(var i,r=0,a=1/0,o=0,s=t.length;o<s;o++)(i=t[o].getLayout().area)&&(i<a&&(a=i),r<i&&(r=i));var l=t.area*t.area,c=e*e*n;return l?Ux(c*r/l,l/(c*a)):1/0}function ib(t,e,n,i,r){var a=e===n.width?0:1,o=1-a,s=["x","y"],l=["width","height"],c=n[s[a]],u=e?t.area/e:0;(r||u>n[l[o]])&&(u=n[l[o]]);for(var d=0,h=t.length;d<h;d++){var f=t[d],g={},p=u?f.getLayout().area/u:0,m=g[l[o]]=Ux(u-2*i,0),v=n[s[a]]+n[l[a]]-c,y=d===h-1||v<p?v:p,x=g[l[a]]=Ux(y-2*i,0);g[s[o]]=n[s[o]]+jx(i,m/2),g[s[a]]=c+jx(i,x/2),c+=y,f.setLayout(g,!0)}n[s[o]]+=u,n[l[o]]-=u}function rb(t){return t.get(Jx)?t.get(Qx):0}function ab(t){return"_EC_"+t}function ob(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}qh(Wx),jh(tb);var sb=ob.prototype;function lb(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==e?-1:e}function cb(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function ub(t,e){return{getValue:function(n){var i=this[t][e];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[t][e].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function db(t,e,n,i,r){for(var a=new ob(i),o=0;o<t.length;o++)a.addNode(W(t[o].id,t[o].name,o),o);var s=[],l=[],c=0;for(o=0;o<e.length;o++){var u=e[o],d=u.source,h=u.target;a.addEdge(d,h,c)&&(l.push(u),s.push(W(u.id,d+" > "+h)),c++)}var f,g=n.get("coordinateSystem");if("cartesian2d"===g||"polar"===g)f=Hf(t,n);else{var p=Oc.get(g),m=p&&"view"!==p.type&&p.dimensions||[];S(m,"value")<0&&m.concat(["value"]);var v=Ef(t,{coordDimensions:m});(f=new xf(v,n)).initData(t)}var y=new xf(["value"],n);return y.initData(l,s),r&&r(f,y),Ny({mainData:f,struct:a,structAttr:"graph",datas:{node:f,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}sb.type="graph",sb.isDirected=function(){return this._directed},sb.addNode=function(t,e){var n=this._nodesMap;if(!n[ab(t=null==t?""+e:""+t)]){var i=new lb(t,e);return(i.hostGraph=this).nodes.push(i),n[ab(t)]=i}},sb.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},sb.getNodeById=function(t){return this._nodesMap[ab(t)]},sb.addEdge=function(t,e,n){var i=this._nodesMap,r=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),lb.isInstance(t)||(t=i[ab(t)]),lb.isInstance(e)||(e=i[ab(e)]),t&&e){var a=t.id+"-"+e.id;if(!r[a]){var o=new cb(t,e,n);return(o.hostGraph=this)._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),r[a]=o}}},sb.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},sb.getEdge=function(t,e){lb.isInstance(t)&&(t=t.id),lb.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},sb.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)0<=n[r].dataIndex&&t.call(e,n[r],r)},sb.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)0<=n[r].dataIndex&&0<=n[r].node1.dataIndex&&0<=n[r].node2.dataIndex&&t.call(e,n[r],r)},sb.breadthFirstTraverse=function(t,e,n,i){if(lb.isInstance(e)||(e=this._nodesMap[ab(e)]),e){for(var r="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(i,e,null))for(var o=[e];o.length;){var s=o.shift(),l=s[r];for(a=0;a<l.length;a++){var c=l[a],u=c.node1===s?c.node2:c.node1;if(!u.__visited){if(t.call(i,u,s))return;o.push(u),u.__visited=!0}}}}},sb.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,a=n.length;r<a;r++)n[r].dataIndex=-1;for(r=0,a=t.count();r<a;r++)n[t.getRawIndex(r)].dataIndex=r;for(e.filterSelf((function(t){var n=i[e.getRawIndex(t)];return 0<=n.node1.dataIndex&&0<=n.node2.dataIndex})),r=0,a=i.length;r<a;r++)i[r].dataIndex=-1;for(r=0,a=e.count();r<a;r++)i[e.getRawIndex(r)].dataIndex=r},sb.clone=function(){for(var t=new ob(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(i=0;i<n.length;i++){var r=n[i];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},lb.prototype={constructor:lb,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},cb.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},k(lb,ub("hostGraph","data")),k(cb,ub("hostGraph","edgeData")),ob.Node=lb,ob.Edge=cb,Gr(lb),Gr(cb);var hb=Qh({type:"series.graph",init:function(t){hb.superApply(this,"init",arguments);var e=this;function n(){return e._categoriesData}this.legendVisualProvider=new hv(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){hb.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){hb.superApply(this,"mergeDefaultAndTheme",arguments),Ar(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],r=this;if(i&&n)return db(i,n,this,!0,(function(t,n){t.wrapMethod("getItemModel",(function(t){var e=r._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t}));var i=r.getModel("edgeLabel"),a=new ll({label:i.option},i.parentModel,e),o=r.getModel("emphasis.edgeLabel"),s=new ll({emphasis:{label:o.option}},o.parentModel,e);function l(t){return(t=this.parsePath(t))&&"label"===t[0]?a:t&&"emphasis"===t[0]&&"label"===t[1]?s:this.parentModel}n.wrapMethod("getItemModel",(function(t){return t.customizeGetParent(l),t}))})).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"!==n)return hb.superApply(this,"formatTooltip",arguments);var i=this.getData(),r=this.getDataParams(t,n),a=i.graph.getEdgeByIndex(t),o=i.getName(a.node1.dataIndex),s=i.getName(a.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),l=zl(l.join(" > ")),r.value&&(l+=" : "+zl(r.value)),l},_updateCategoriesData:function(){var t=T(this.option.categories||[],(function(t){return null!=t.value?t:x({value:0},t)})),e=new xf(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray((function(t){return e.getItemModel(t,!0)}))},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return hb.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),fb=Xo.prototype,gb=jo.prototype;function pb(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var mb=ls({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){this[pb(e)?"_buildPathLine":"_buildPathCurve"](t,e)},_buildPathLine:fb.buildPath,_buildPathCurve:gb.buildPath,pointAt:function(t){return this[pb(this.shape)?"_pointAtLine":"_pointAtCurve"](t)},_pointAtLine:fb.pointAt,_pointAtCurve:gb.pointAt,tangentAt:function(t){var e=this.shape,n=pb(e)?[e.x2-e.x1,e.y2-e.y1]:this._tangentAtCurve(t);return gt(n,n)},_tangentAtCurve:gb.tangentAt}),vb=["fromSymbol","toSymbol"];function yb(t){return"_"+t+"Type"}function xb(t,e,n){var i=e.getItemVisual(n,"color"),r=e.getItemVisual(n,t),a=e.getItemVisual(n,t+"Size");if(r&&"none"!==r){N(a)||(a=[a,a]);var o=Gg(r,-a[0]/2,-a[1]/2,a[0],a[1],i);return o.name=t,o}}function bb(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}function wb(t,e,n){Sn.call(this),this._createLine(t,e,n)}var _b=wb.prototype;function Sb(t){this._ctor=t||wb,this.group=new Sn}_b.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),n=this.childOfName("label");if(t||e||!n.ignore){for(var i=1,r=this.parent;r;)r.scale&&(i/=r.scale[0]),r=r.parent;var a=this.childOfName("line");if(this.__dirty||a.__dirty){var o=a.shape.percent,s=a.pointAt(0),l=a.pointAt(o),c=ut([],l,s);if(gt(c,c),t){t.attr("position",s);var u=a.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(u[1],u[0])),t.attr("scale",[i*o,i*o])}if(e&&(e.attr("position",l),u=a.tangentAt(1),e.attr("rotation",-Math.PI/2-Math.atan2(u[1],u[0])),e.attr("scale",[i*o,i*o])),!n.ignore){var d,h,f,g;n.attr("position",l);var p=n.__labelDistance,m=p[0]*i,v=p[1]*i,y=o/2,x=[(u=a.tangentAt(y))[1],-u[0]],b=a.pointAt(y);0<x[1]&&(x[0]=-x[0],x[1]=-x[1]);var w,_=u[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var S=-Math.atan2(u[1],u[0]);l[0]<s[0]&&(S=Math.PI+S),n.attr("rotation",S)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-v,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=v,f="top";break;default:w=0,f="middle"}switch(n.__position){case"end":d=[c[0]*m+l[0],c[1]*v+l[1]],h=.8<c[0]?"left":c[0]<-.8?"right":"center",f=.8<c[1]?"top":c[1]<-.8?"bottom":"middle";break;case"start":d=[-c[0]*m+s[0],-c[1]*v+s[1]],h=.8<c[0]?"right":c[0]<-.8?"left":"center",f=.8<c[1]?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":d=[m*_+s[0],s[1]+w],h=u[0]<0?"right":"left",g=[-m*_,-w];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":d=[b[0],b[1]+w],h="center",g=[0,-w];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":d=[-m*_+l[0],l[1]+w],h=0<=u[0]?"right":"left",g=[m*_,-w]}n.attr({style:{textVerticalAlign:n.__verticalAlign||f,textAlign:n.__textAlign||h},position:d,scale:[i,i],origin:g})}}}},_b._createLine=function(t,e,n){var i=t.hostModel,r=function(t){var e=new mb({name:"line",subPixelOptimize:!0});return bb(e.shape,t),e}(t.getItemLayout(e));r.shape.percent=0,Gs(r,{shape:{percent:1}},i,e),this.add(r);var a=new Ao({name:"label",lineLabelOriginalOpacity:1});this.add(a),M(vb,(function(n){var i=xb(n,t,e);this.add(i),this[yb(n)]=t.getItemVisual(e,n)}),this),this._updateCommonStl(t,e,n)},_b.updateData=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=t.getItemLayout(e),o={shape:{}};bb(o.shape,a),Ys(r,o,i,e),M(vb,(function(n){var i=t.getItemVisual(e,n),r=yb(n);if(this[r]!==i){this.remove(this.childOfName(n));var a=xb(n,t,e);this.add(a)}this[r]=i}),this),this._updateCommonStl(t,e,n)},_b._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=n&&n.lineStyle,o=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var c=t.getItemModel(e);a=c.getModel("lineStyle").getLineStyle(),o=c.getModel("emphasis.lineStyle").getLineStyle(),s=c.getModel("label"),l=c.getModel("emphasis.label")}var u=t.getItemVisual(e,"color"),d=Y(t.getItemVisual(e,"opacity"),a.opacity,1);r.useStyle(b({strokeNoScale:!0,fill:"none",stroke:u,opacity:d},a)),r.hoverStyle=o,M(vb,(function(t){var e=this.childOfName(t);e&&(e.setColor(u),e.setStyle({opacity:d}))}),this);var h,f,g=s.getShallow("show"),p=l.getShallow("show"),m=this.childOfName("label");if((g||p)&&(h=u||"#000",null==(f=i.getFormattedLabel(e,"normal",t.dataType)))){var v=i.getRawValue(e);f=null==v?t.getName(e):isFinite(v)?pl(v):v}var y=g?f:null,x=p?X(i.getFormattedLabel(e,"emphasis",t.dataType),f):null,w=m.style;if(null!=y||null!=x){Os(m.style,s,{text:y},{autoColor:h}),m.__textAlign=w.textAlign,m.__verticalAlign=w.textVerticalAlign,m.__position=s.get("position")||"middle";var _=s.get("distance");N(_)||(_=[_,_]),m.__labelDistance=_}m.hoverStyle=null!=x?{text:x,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},m.ignore=!g&&!p,Ds(this)},_b.highlight=function(){this.trigger("emphasis")},_b.downplay=function(){this.trigger("normal")},_b.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},_b.setLinePoints=function(t){var e=this.childOfName("line");bb(e.shape,t),e.dirty()},C(wb,Sn);var Cb=Sb.prototype;function kb(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function Ab(t){return isNaN(t[0])||isNaN(t[1])}function Mb(t){return!Ab(t[0])&&!Ab(t[1])}function Tb(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scale,r=i&&i[0]||1;return((e.getZoom()-1)*n+1)/r}function Ib(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}Cb.isPersistent=function(){return!0},Cb.updateData=function(t){var e=this,n=e.group,i=e._lineData;e._lineData=t,i||n.removeAll();var r=kb(t);t.diff(i).add((function(n){!function(t,e,n,i){if(Mb(e.getItemLayout(n))){var r=new t._ctor(e,n,i);e.setItemGraphicEl(n,r),t.group.add(r)}}(e,t,n,r)})).update((function(n,a){!function(t,e,n,i,r,a){var o=e.getItemGraphicEl(i);if(!Mb(n.getItemLayout(r)))return t.group.remove(o);o?o.updateData(n,r,a):o=new t._ctor(n,r,a),n.setItemGraphicEl(r,o),t.group.add(o)}(e,i,t,a,n,r)})).remove((function(t){n.remove(i.getItemGraphicEl(t))})).execute()},Cb.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl((function(e,n){e.updateLayout(t,n)}),this)},Cb.incrementalPrepareUpdate=function(t){this._seriesScope=kb(t),this._lineData=null,this.group.removeAll()},Cb.incrementalUpdate=function(t,e){function n(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}for(var i=t.start;i<t.end;i++)if(Mb(e.getItemLayout(i))){var r=new this._ctor(e,i,this._seriesScope);r.traverse(n),this.group.add(r),e.setItemGraphicEl(i,r)}},Cb.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Cb._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var Db=[],Pb=[],Lb=[],Eb=ha,Nb=yt,Rb=Math.abs;function Ob(t,e,n){for(var i,r=t[0],a=t[1],o=t[2],s=1/0,l=n*n,c=.1,u=.1;u<=.9;u+=.1)Db[0]=Eb(r[0],a[0],o[0],u),Db[1]=Eb(r[1],a[1],o[1],u),(f=Rb(Nb(Db,e)-l))<s&&(s=f,i=u);for(var d=0;d<32;d++){var h=i+c;Pb[0]=Eb(r[0],a[0],o[0],i),Pb[1]=Eb(r[1],a[1],o[1],i),Lb[0]=Eb(r[0],a[0],o[0],h),Lb[1]=Eb(r[1],a[1],o[1],h);var f=Nb(Pb,e)-l;if(Rb(f)<.01)break;var g=Nb(Lb,e)-l;c/=2,f<0?0<=g?i+=c:i-=c:0<=g?i-=c:i+=c}return i}function zb(t,e){var n=[],i=pa,r=[[],[],[]],a=[[],[]],o=[];e/=2,t.eachEdge((function(t,s){var l=t.getLayout(),c=t.getVisual("fromSymbol"),u=t.getVisual("toSymbol");l.__original||(l.__original=[ot(l[0]),ot(l[1])],l[2]&&l.__original.push(ot(l[2])));var d=l.__original;if(null!=l[2]){if(at(r[0],d[0]),at(r[1],d[2]),at(r[2],d[1]),c&&"none"!==c){var h=Ib(t.node1),f=Ob(r,d[0],h*e);i(r[0][0],r[1][0],r[2][0],f,n),r[0][0]=n[3],r[1][0]=n[4],i(r[0][1],r[1][1],r[2][1],f,n),r[0][1]=n[3],r[1][1]=n[4]}u&&"none"!==u&&(h=Ib(t.node2),f=Ob(r,d[1],h*e),i(r[0][0],r[1][0],r[2][0],f,n),r[1][0]=n[1],r[2][0]=n[2],i(r[0][1],r[1][1],r[2][1],f,n),r[1][1]=n[1],r[2][1]=n[2]),at(l[0],r[0]),at(l[1],r[2]),at(l[2],r[1])}else at(a[0],d[0]),at(a[1],d[1]),ut(o,a[1],a[0]),gt(o,o),c&&"none"!==c&&(h=Ib(t.node1),ct(a[0],a[0],o,h*e)),u&&"none"!==u&&(h=Ib(t.node2),ct(a[1],a[1],o,-h*e)),at(l[0],a[0]),at(l[1],a[1])}))}var Bb="__focusNodeAdjacency",Fb="__unfocusNodeAdjacency",Hb=["itemStyle","opacity"],Vb=["lineStyle","opacity"];function Wb(t,e){var n=t.getVisual("opacity");return null!=n?n:t.getModel().get(e)}function Xb(t,e,n){var i=t.getGraphicEl(),r=Wb(t,e);null!=n&&(null==r&&(r=1),r*=n),i.downplay&&i.downplay(),i.traverse((function(t){if(!t.isGroup){var e=t.lineLabelOriginalOpacity;null!=e&&null==n||(e=r),t.setStyle("opacity",e)}}))}function Yb(t,e){var n=Wb(t,e),i=t.getGraphicEl();i.traverse((function(t){t.isGroup||t.setStyle("opacity",n)})),i.highlight&&i.highlight()}function Gb(t){return t instanceof Array||(t=[t,t]),t}function Ub(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode((function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])})),jb(n)}}function jb(t){t.eachEdge((function(t){var e=t.getModel().get("lineStyle.curveness")||0,n=ot(t.node1.getLayout()),i=ot(t.node2.getLayout()),r=[n,i];+e&&r.push([(n[0]+i[0])/2-(n[1]-i[1])*e,(n[1]+i[1])/2-(i[0]-n[0])*e]),t.setLayout(r)}))}tf({type:"graph",init:function(t,e){var n=new _p,i=new Sb,r=this.group;this._controller=new ey(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(t,e,n){var i=this,r=t.coordinateSystem;this._model=t;var a=this._symbolDraw,o=this._lineDraw,s=this.group;if("view"===r.type){var l={position:r.position,scale:r.scale};this._firstRender?s.attr(l):Ys(s,l,t)}zb(t.getGraph(),Tb(t));var c=t.getData();a.updateData(c);var u=t.getEdgeData();o.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var d=t.forceLayout,h=t.get("force.layoutAnimation");d&&this._startForceLayoutIteration(d,h),c.eachItemGraphicEl((function(e,r){var a=c.getItemModel(r);e.off("drag").off("dragend");var o=a.get("draggable");o&&e.on("drag",(function(){d&&(d.warmUp(),this._layouting||this._startForceLayoutIteration(d,h),d.setFixed(r),c.setItemLayout(r,e.position))}),this).on("dragend",(function(){d&&d.setUnfixed(r)}),this),e.setDraggable(o&&d),e[Bb]&&e.off("mouseover",e[Bb]),e[Fb]&&e.off("mouseout",e[Fb]),a.get("focusNodeAdjacency")&&(e.on("mouseover",e[Bb]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e[Fb]=function(){i._dispatchUnfocus(n)}))}),this),c.graph.eachEdge((function(e){var r=e.getGraphicEl();r[Bb]&&r.off("mouseover",r[Bb]),r[Fb]&&r.off("mouseout",r[Fb]),e.getModel().get("focusNodeAdjacency")&&(r.on("mouseover",r[Bb]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),r.on("mouseout",r[Fb]=function(){i._dispatchUnfocus(n)}))}));var f="circular"===t.get("layout")&&t.get("circular.rotateLabel"),g=c.getLayout("cx"),p=c.getLayout("cy");c.eachItemGraphicEl((function(t,e){var n=c.getItemModel(e).get("label.rotate")||0,i=t.getSymbolPath();if(f){var r=c.getItemLayout(e),a=Math.atan2(r[1]-p,r[0]-g);a<0&&(a=2*Math.PI+a);var o=r[0]<g;o&&(a-=Math.PI);var s=o?"left":"right";Rs(i,{textRotation:-a,textPosition:s,textOrigin:"center"},{textPosition:s})}else Rs(i,{textRotation:n*=Math.PI/180})})),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(t,e){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){n._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var r=t.getData().graph,a=i.edgeDataIndex,o=r.getNodeByIndex(i.dataIndex),s=r.getEdgeByIndex(a);(o||s)&&(r.eachNode((function(t){Xb(t,Hb,.1)})),r.eachEdge((function(t){Xb(t,Vb,.1)})),o&&(Yb(o,Hb),M(o.edges,(function(t){t.dataIndex<0||(Yb(t,Vb),Yb(t.node1,Hb),Yb(t.node2,Hb))}))),s&&(Yb(s,Vb),Yb(s.node1,Hb),Yb(s.node2,Hb)))},unfocusNodeAdjacency:function(t,e,n,i){var r=t.getData().graph;r.eachNode((function(t){Xb(t,Hb)})),r.eachEdge((function(t){Xb(t,Vb)}))},_startForceLayoutIteration:function(t,e){var n=this;!function i(){t.step((function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())}))}()},_updateController:function(t,e,n){var i=this._controller,r=this._controllerHost,a=this.group;i.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!fy(e,n,t)})),"view"===t.coordinateSystem.type?(i.enable(t.get("roam")),r.zoomLimit=t.get("scaleLimit"),r.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(e){uy(r,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){dy(r,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(),zb(t.getGraph(),Tb(t)),this._lineDraw.updateLayout()}),this)):i.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=Tb(t),i=[n,n];e.eachItemGraphicEl((function(t,e){t.attr("scale",i)}))},updateLayout:function(t){zb(t.getGraph(),Tb(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Gh({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),Gh({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){})),Gh({type:"graphRoam",event:"graphRoam",update:"none"},(function(t,e){e.eachComponent({mainType:"series",query:t},(function(e){var n=wy(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)}))}));var qb=Math.PI,Zb=[];function $b(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),r=t.getData(),a=r.graph,o=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,c=r.count();r.setLayout({cx:o,cy:s}),c&&(Kb[e](t,n,a,r,l,o,s,c),a.eachEdge((function(t){var e,n=t.getModel().get("lineStyle.curveness")||0,i=ot(t.node1.getLayout()),r=ot(t.node2.getLayout());+n&&(e=[o*(n*=3)+(i[0]+r[0])/2*(1-n),s*n+(i[1]+r[1])/2*(1-n)]),t.setLayout([i,r,e])})))}}var Kb={value:function(t,e,n,i,r,a,o,s){var l=0,c=i.getSum("value"),u=2*Math.PI/(c||s);n.eachNode((function(t){var e=t.getValue("value"),n=u*(c?e:1)/2;l+=n,t.setLayout([r*Math.cos(l)+a,r*Math.sin(l)+o]),l+=n}))},symbolSize:function(t,e,n,i,r,a,o,s){var l=0;Zb.length=s;var c=Tb(t);n.eachNode((function(t){var e=Ib(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=c;var n=Math.asin(e/2/r);isNaN(n)&&(n=qb/2),Zb[t.dataIndex]=n,l+=2*n}));var u=(2*qb-l)/s/2,d=0;n.eachNode((function(t){var e=u+Zb[t.dataIndex];d+=e,t.setLayout([r*Math.cos(d)+a,r*Math.sin(d)+o]),d+=e}))}},Jb=ct;Yh((function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getGraph().data,r=n.mapArray(n.getName);i.filterSelf((function(t){var n=i.getItemModel(t).getShallow("category");if(null!=n){"number"==typeof n&&(n=r[n]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(n))return!1}return!0}))}),this)})),qh(qp("graph","circle",null)),qh((function(t){var e={};t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each((function(i){var a=n.getName(i);r["ec-"+a]=i;var o=n.getItemModel(i),s=o.get("itemStyle.color")||t.getColorFromPalette(a,e);n.setItemVisual(i,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],c=0;c<l.length;c++){var u=o.getShallow(l[c],!0);null!=u&&n.setItemVisual(i,l[c],u)}})),n.count()&&i.each((function(t){var e=i.getItemModel(t).getShallow("category");if(null!=e){"string"==typeof e&&(e=r["ec-"+e]);for(var a=["color","opacity","symbol","symbolSize","symbolKeepAspect"],o=0;o<a.length;o++)null==i.getItemVisual(t,a[o],!0)&&i.setItemVisual(t,a[o],n.getItemVisual(e,a[o]))}}))}))})),qh((function(t){t.eachSeriesByType("graph",(function(t){var e=t.getGraph(),n=t.getEdgeData(),i=Gb(t.get("edgeSymbol")),r=Gb(t.get("edgeSymbolSize")),a="lineStyle.color".split("."),o="lineStyle.opacity".split(".");n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]),n.setVisual("color",t.get(a)),n.setVisual("opacity",t.get(o)),n.each((function(t){var i=n.getItemModel(t),r=e.getEdgeByIndex(t),s=Gb(i.getShallow("symbol",!0)),l=Gb(i.getShallow("symbolSize",!0)),c=i.get(a),u=i.get(o);switch(c){case"source":c=r.node1.getVisual("color");break;case"target":c=r.node2.getVisual("color")}s[0]&&r.setVisual("fromSymbol",s[0]),s[1]&&r.setVisual("toSymbol",s[1]),l[0]&&r.setVisual("fromSymbolSize",l[0]),l[1]&&r.setVisual("toSymbolSize",l[1]),r.setVisual("color",c),r.setVisual("opacity",u)}))}))})),jh((function(t,e){t.eachSeriesByType("graph",(function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];M(n.dimensions,(function(t){r=r.concat(i.mapDimension(t,!0))}));for(var a=0;a<i.count();a++){for(var o=[],s=!1,l=0;l<r.length;l++){var c=i.get(r[l],a);isNaN(c)||(s=!0),o.push(c)}i.setItemLayout(a,s?n.dataToPoint(o):[NaN,NaN])}jb(i.graph)}else e&&"none"!==e||Ub(t)}))})),jh(nh.VISUAL.POST_CHART_LAYOUT,(function(t){t.eachSeriesByType("graph",(function(t){"circular"===t.get("layout")&&$b(t,"symbolSize")}))})),jh((function(t){t.eachSeriesByType("graph",(function(t){if(!(d=t.coordinateSystem)||"view"===d.type)if("force"===t.get("layout")){var e=t.preservedPoints||{},n=t.getGraph(),i=n.data,r=n.edgeData,a=t.getModel("force"),o=a.get("initLayout");t.preservedPoints?i.each((function(t){var n=i.getId(t);i.setItemLayout(t,e[n]||[NaN,NaN])})):o&&"none"!==o?"circular"===o&&$b(t,"value"):Ub(t);var s=i.getDataExtent("value"),l=r.getDataExtent("value"),c=a.get("repulsion"),u=a.get("edgeLength");N(c)||(c=[c,c]),N(u)||(u=[u,u]),u=[u[1],u[0]];var d,h=i.mapArray("value",(function(t,e){var n=i.getItemLayout(e),r=fl(t,s,c);return isNaN(r)&&(r=(c[0]+c[1])/2),{w:r,rep:r,fixed:i.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),f=r.mapArray("value",(function(t,e){var i=n.getEdgeByIndex(e),r=fl(t,l,u);isNaN(r)&&(r=(u[0]+u[1])/2);var a=i.getModel();return{n1:h[i.node1.dataIndex],n2:h[i.node2.dataIndex],d:r,curveness:a.get("lineStyle.curveness")||0,ignoreForceLayout:a.get("ignoreForceLayout")}})),g=(d=t.coordinateSystem).getBoundingRect(),p=function(t,e,n){for(var i=n.rect,r=i.width,a=i.height,o=[i.x+r/2,i.y+a/2],s=null==n.gravity?.1:n.gravity,l=0;l<t.length;l++){var c=t[l];c.p||(c.p=rt(r*(Math.random()-.5)+o[0],a*(Math.random()-.5)+o[1])),c.pp=ot(c.p),c.edges=null}var u=null==n.friction?.6:n.friction,d=u;return{warmUp:function(){d=.8*u},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var i=[],r=t.length,a=0;a<e.length;a++){var l=e[a];if(!l.ignoreForceLayout){var c=l.n1;ut(i,(g=l.n2).p,c.p);var u=dt(i)-l.d,h=g.w/(c.w+g.w);isNaN(h)&&(h=0),gt(i,i),c.fixed||Jb(c.p,c.p,i,h*u*d),g.fixed||Jb(g.p,g.p,i,-(1-h)*u*d)}}for(a=0;a<r;a++)(v=t[a]).fixed||(ut(i,o,v.p),Jb(v.p,v.p,i,s*d));for(a=0;a<r;a++){c=t[a];for(var f=a+1;f<r;f++){var g;ut(i,(g=t[f]).p,c.p),0===(u=dt(i))&&(st(i,Math.random()-.5,Math.random()-.5),u=1);var p=(c.rep+g.rep)/u/u;c.fixed||Jb(c.pp,c.pp,i,p),g.fixed||Jb(g.pp,g.pp,i,-p)}}var m=[];for(a=0;a<r;a++){var v;(v=t[a]).fixed||(ut(m,v.p,v.pp),Jb(v.p,v.p,m,d),at(v.pp,v.p))}d*=.992,n&&n(t,e,d<.01)}}}(h,f,{rect:g,gravity:a.get("gravity"),friction:a.get("friction")}),m=p.step;p.step=function(t){for(var r=0,a=h.length;r<a;r++)h[r].fixed&&at(h[r].p,n.getNodeByIndex(r).getLayout());m((function(r,a,o){for(var s=0,l=r.length;s<l;s++)r[s].fixed||n.getNodeByIndex(s).setLayout(r[s].p),e[i.getId(s)]=r[s].p;for(s=0,l=a.length;s<l;s++){var c=a[s],u=n.getEdgeByIndex(s),d=c.n1.p,h=c.n2.p,f=u.getLayout();(f=f?f.slice():[])[0]=f[0]||[],f[1]=f[1]||[],at(f[0],d),at(f[1],h),+c.curveness&&(f[2]=[(d[0]+h[0])/2-(d[1]-h[1])*c.curveness,(d[1]+h[1])/2-(h[0]-d[0])*c.curveness]),u.setLayout(f)}t&&t(o)}))},t.forceLayout=p,t.preservedPoints=e,p.step()}else t.forceLayout=null}))})),Uh("graphView",{create:function(t,e){var n=[];return t.eachSeriesByType("graph",(function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var r=t.getData(),a=[],o=[];Ca(r.mapArray((function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]})),a,o),o[0]-a[0]==0&&(o[0]+=1,a[0]-=1),o[1]-a[1]==0&&(o[1]+=1,a[1]-=1);var s=(o[0]-a[0])/(o[1]-a[1]),l=function(t,e,n){var i=t.getBoxLayoutParams();return i.aspect=n,Ql(i,{width:e.getWidth(),height:e.getHeight()})}(t,e,s);isNaN(s)&&(a=[l.x,l.y],o=[l.x+l.width,l.y+l.height]);var c=o[0]-a[0],u=o[1]-a[1],d=l.width,h=l.height,f=t.coordinateSystem=new Cy;f.zoomLimit=t.get("scaleLimit"),f.setBoundingRect(a[0],a[1],c,u),f.setViewRect(l.x,l.y,d,h),f.setCenter(t.get("center")),f.setZoom(t.get("zoom")),n.push(f)}})),n}}),Nu.extend({type:"series.gauge",getInitialData:function(t,e){return uv(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var Qb=lo.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,i=Math.sin,r=e.r,a=e.width,o=e.angle,s=e.x-n(o)*a*(r/3<=a?1:2),l=e.y-i(o)*a*(r/3<=a?1:2);o=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(o)*a,e.y+i(o)*a),t.lineTo(e.x+n(e.angle)*r,e.y+i(e.angle)*r),t.lineTo(e.x-n(o)*a,e.y-i(o)*a),t.lineTo(s,l)}});function tw(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}var ew=2*Math.PI,nw=(ju.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var i=t.get("axisLine.lineStyle.color"),r=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),a=Math.min(i,r);return{cx:gl(n[0],e.getWidth()),cy:gl(n[1],e.getHeight()),r:gl(t.get("radius"),a/2)}}(t,n);this._renderMain(t,e,n,i,r)},dispose:function(){},_renderMain:function(t,e,n,i,r){for(var a=this.group,o=t.getModel("axisLine"),s=o.getModel("lineStyle"),l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=((p=-t.get("endAngle")/180*Math.PI)-c)%ew,d=c,h=s.get("width"),f=o.get("show"),g=0;f&&g<i.length;g++){var p,m=Math.min(Math.max(i[g][0],0),1),v=new Do({shape:{startAngle:d,endAngle:p=c+u*m,cx:r.cx,cy:r.cy,clockwise:l,r0:r.r-h,r:r.r},silent:!0});v.setStyle({fill:i[g][1]}),v.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),a.add(v),d=p}function y(t){if(t<=0)return i[0][1];for(var e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]}if(!l){var x=c;c=p,p=x}this._renderTicks(t,e,n,y,r,c,p,l),this._renderPointer(t,e,n,y,r,c,p,l),this._renderTitle(t,e,n,y,r),this._renderDetail(t,e,n,y,r)},_renderTicks:function(t,e,n,i,r,a,o,s){for(var l=this.group,c=r.cx,u=r.cy,d=r.r,h=+t.get("min"),f=+t.get("max"),g=t.getModel("splitLine"),p=t.getModel("axisTick"),m=t.getModel("axisLabel"),v=t.get("splitNumber"),y=p.get("splitNumber"),x=gl(g.get("length"),d),b=gl(p.get("length"),d),w=a,_=(o-a)/v,S=_/y,C=g.getModel("lineStyle").getLineStyle(),k=p.getModel("lineStyle").getLineStyle(),A=0;A<=v;A++){var M=Math.cos(w),T=Math.sin(w);if(g.get("show")){var I=new Xo({shape:{x1:M*d+c,y1:T*d+u,x2:M*(d-x)+c,y2:T*(d-x)+u},style:C,silent:!0});"auto"===C.stroke&&I.setStyle({stroke:i(A/v)}),l.add(I)}if(m.get("show")){var D=tw(pl(A/v*(f-h)+h),m.get("formatter")),P=m.get("distance"),L=i(A/v);l.add(new Ao({style:Os({},m,{text:D,x:M*(d-x-P)+c,y:T*(d-x-P)+u,textVerticalAlign:T<-.4?"top":.4<T?"bottom":"middle",textAlign:M<-.4?"left":.4<M?"right":"center"},{autoColor:L}),silent:!0}))}if(p.get("show")&&A!==v){for(var E=0;E<=y;E++){M=Math.cos(w),T=Math.sin(w);var N=new Xo({shape:{x1:M*d+c,y1:T*d+u,x2:M*(d-b)+c,y2:T*(d-b)+u},silent:!0,style:k});"auto"===k.stroke&&N.setStyle({stroke:i((A+E/y)/v)}),l.add(N),w+=S}w-=S}else w+=_}},_renderPointer:function(t,e,n,i,r,a,o,s){var l=this.group,c=this._data;if(t.get("pointer.show")){var u=[+t.get("min"),+t.get("max")],d=[a,o],h=t.getData(),f=h.mapDimension("value");h.diff(c).add((function(e){var n=new Qb({shape:{angle:a}});Gs(n,{shape:{angle:fl(h.get(f,e),u,d,!0)}},t),l.add(n),h.setItemGraphicEl(e,n)})).update((function(e,n){var i=c.getItemGraphicEl(n);Ys(i,{shape:{angle:fl(h.get(f,e),u,d,!0)}},t),l.add(i),h.setItemGraphicEl(e,i)})).remove((function(t){var e=c.getItemGraphicEl(t);l.remove(e)})).execute(),h.eachItemGraphicEl((function(t,e){var n=h.getItemModel(e),a=n.getModel("pointer");t.setShape({x:r.cx,y:r.cy,width:gl(a.get("width"),r.r),r:gl(a.get("length"),r.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",i(fl(h.get(f,e),u,[0,1],!0))),Ds(t,n.getModel("emphasis.itemStyle").getItemStyle())})),this._data=h}else c&&c.eachItemGraphicEl((function(t){l.remove(t)}))},_renderTitle:function(t,e,n,i,r){var a=t.getData(),o=a.mapDimension("value"),s=t.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),c=r.cx+gl(l[0],r.r),u=r.cy+gl(l[1],r.r),d=+t.get("min"),h=+t.get("max"),f=i(fl(t.getData().get(o,0),[d,h],[0,1],!0));this.group.add(new Ao({silent:!0,style:Os({},s,{x:c,y:u,text:a.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(t,e,n,i,r){var a=t.getModel("detail"),o=+t.get("min"),s=+t.get("max");if(a.get("show")){var l=a.get("offsetCenter"),c=r.cx+gl(l[0],r.r),u=r.cy+gl(l[1],r.r),d=gl(a.get("width"),r.r),h=gl(a.get("height"),r.r),f=t.getData(),g=f.get(f.mapDimension("value"),0),p=i(fl(g,[o,s],[0,1],!0));this.group.add(new Ao({silent:!0,style:Os({},a,{x:c,y:u,text:tw(g,a.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}}}),Qh({type:"series.funnel",init:function(t){nw.superApply(this,"init",arguments),this.legendVisualProvider=new hv(L(this.getData,this),L(this.getRawData,this)),this._defaultLabelLine(t)},getInitialData:function(t,e){return uv(this,{coordDimensions:["value"],encodeDefaulter:E(Ac,this)})},_defaultLabelLine:function(t){Ar(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=nw.superCall(this,"getDataParams",t),i=e.mapDimension("value"),r=e.getSum(i);return n.percent=r?+(e.get(i,t)/r*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function iw(t,e){Sn.call(this);var n=new No,i=new Ro,r=new Ao;this.add(n),this.add(i),this.add(r),this.highDownOnUpdate=function(t,e){"emphasis"===e?(i.ignore=i.hoverIgnore,r.ignore=r.hoverIgnore):(i.ignore=i.normalIgnore,r.ignore=r.normalIgnore)},this.updateData(t,e,!0)}var rw=iw.prototype,aw=["itemStyle","opacity"];function ow(t,e,n,i,r){op.call(this,t,e,n),this.type=i||"value",this.axisIndex=r}function sw(t,e,n,i,r,a){t=t||0;var o=n[1]-n[0];if(null!=r&&(r=cw(r,[0,o])),null!=a&&(a=Math.max(a,null!=r?r:0)),"all"===i){var s=Math.abs(e[1]-e[0]);r=a=cw(s=cw(s,[0,o]),[r,a]),i=0}e[0]=cw(e[0],n),e[1]=cw(e[1],n);var l=lw(e,i);e[i]+=t;var c=r||0,u=n.slice();l.sign<0?u[0]+=c:u[1]-=c,e[i]=cw(e[i],u);var d=lw(e,i);return null!=r&&(d.sign!==l.sign||d.span<r)&&(e[1-i]=e[i]+l.sign*r),d=lw(e,i),null!=a&&d.span>a&&(e[1-i]=e[i]+d.sign*a),e}function lw(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:0<n?-1:n<0?1:e?-1:1}}function cw(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}rw.updateData=function(t,e,n){var i=this.childAt(0),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e),s=t.getItemModel(e).get(aw);s=null==s?1:s,i.useStyle({}),n?(i.setShape({points:o.points}),i.setStyle({opacity:0}),Gs(i,{style:{opacity:s}},r,e)):Ys(i,{style:{opacity:s},shape:{points:o.points}},r,e);var l=a.getModel("itemStyle"),c=t.getItemVisual(e,"color");i.setStyle(b({lineJoin:"round",fill:c},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),Ds(this)},rw._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Ys(n,{shape:{points:o.linePoints||o.linePoints}},r,e),Ys(i,{style:{x:o.x,y:o.y}},r,e),i.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var l=a.getModel("label"),c=a.getModel("emphasis.label"),u=a.getModel("labelLine"),d=a.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color"),Ns(i.style,i.hoverStyle={},l,c,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!c.get("show"),n.ignore=n.normalIgnore=!u.get("show"),n.hoverIgnore=!d.get("show"),n.setStyle({stroke:s}),n.setStyle(u.getModel("lineStyle").getLineStyle()),n.hoverStyle=d.getModel("lineStyle").getLineStyle()},C(iw,Sn),ju.extend({type:"funnel",render:function(t,e,n){var i=t.getData(),r=this._data,a=this.group;i.diff(r).add((function(t){var e=new iw(i,t);i.setItemGraphicEl(t,e),a.add(e)})).update((function(t,e){var n=r.getItemGraphicEl(e);n.updateData(i,t),a.add(n),i.setItemGraphicEl(t,n)})).remove((function(t){var e=r.getItemGraphicEl(t);a.remove(e)})).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),qh(xv("funnel")),jh((function(t,e,n){t.eachSeriesByType("funnel",(function(t){var n=t.getData(),i=n.mapDimension("value"),r=t.get("sort"),a=function(t,e){return Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),o=function(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,(function(t){return t})),r=[],a="ascending"===e,o=0,s=t.count();o<s;o++)r[o]=o;return"function"==typeof e?r.sort(e):"none"!==e&&r.sort((function(t,e){return a?i[t]-i[e]:i[e]-i[t]})),r}(n,r),s=[gl(t.get("minSize"),a.width),gl(t.get("maxSize"),a.width)],l=n.getDataExtent(i),c=t.get("min"),u=t.get("max");function d(t,e){var r,o=fl(n.get(i,t)||0,[c,u],s,!0);switch(h){case"left":r=a.x;break;case"center":r=a.x+(a.width-o)/2;break;case"right":r=a.x+a.width-o}return[[r,e],[r+o,e]]}null==c&&(c=Math.min(l[0],0)),null==u&&(u=l[1]);var h=t.get("funnelAlign"),f=t.get("gap"),g=(a.height-f*(n.count()-1))/n.count(),p=a.y;"ascending"===r&&(g=-g,f=-f,p+=a.height,o=o.reverse());for(var m=0;m<o.length;m++){var v=o[m],y=o[m+1],x=n.getItemModel(v).get("itemStyle.height");null==x?x=g:(x=gl(x,a.height),"ascending"===r&&(x=-x));var b=d(v,p),w=d(y,p+x);p+=x+f,n.setItemLayout(v,{points:b.concat(w.slice().reverse())})}!function(t){t.each((function(e){var n,i,r,a,o=t.getItemModel(e),s=o.getModel("label").get("position"),l=o.getModel("labelLine"),c=t.getItemLayout(e),u=c.points,d="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(d)n="insideLeft"===s?(i=(u[0][0]+u[3][0])/2+5,r=(u[0][1]+u[3][1])/2,"left"):"insideRight"===s?(i=(u[1][0]+u[2][0])/2-5,r=(u[1][1]+u[2][1])/2,"right"):(i=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,r=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,"center"),a=[[i,r],[i,r]];else{var h,f,g,p=l.get("length");n="left"===s?(f=(u[3][1]+u[0][1])/2,i=(g=(h=(u[3][0]+u[0][0])/2)-p)-5,"right"):"right"===s?(f=(u[1][1]+u[2][1])/2,i=(g=(h=(u[1][0]+u[2][0])/2)+p)+5,"left"):"rightTop"===s?(f=u[1][1],i=(g=(h=u[1][0])+p)+5,"top"):"rightBottom"===s?(f=u[2][1],i=(g=(h=u[2][0])+p)+5,"bottom"):"leftTop"===s?(f=u[1][1],i=(g=(h=u[0][0])-p)-5,"right"):"leftBottom"===s?(f=u[2][1],i=(g=(h=u[3][0])-p)-5,"right"):(f=(u[1][1]+u[2][1])/2,i=(g=(h=(u[1][0]+u[2][0])/2)+p)+5,"left"),a=[[h,f],[g,f]],r=f}c.label={linePoints:a,x:i,y:r,verticalAlign:"middle",textAlign:n,inside:d}}))}(n)}))})),Yh(kv("funnel")),ow.prototype={constructor:ow,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},C(ow,op);var uw=M,dw=Math.min,hw=Math.max,fw=Math.floor,gw=Math.ceil,pw=pl,mw=Math.PI;function vw(t,e,n){this._axesMap=Q(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}function yw(t,e){return dw(hw(t,e[0]),e[1])}vw.prototype={type:"parallel",constructor:vw,_init:function(t,e,n){var i=t.parallelAxisIndex;uw(t.dimensions,(function(t,n){var r=i[n],a=e.getComponent("parallelAxis",r),o=this._axesMap.set(t,new ow(t,Pg(a),[0,0],a.get("type"),r));o.onBand="category"===o.type&&a.get("boundaryGap"),o.inverse=a.get("inverse"),(a.axis=o).model=a,o.coordinateSystem=a.coordinateSystem=this}),this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,a=t[1-r],o=t[r];return n<=a&&a<=n+e.axisLength&&i<=o&&o<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries((function(n){if(t.contains(n,e)){var i=n.getData();uw(this.dimensions,(function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),Dg(e.scale,e.model)}),this)}}),this)},resize:function(t,e){this._rect=Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,i=["x","y"],r=["width","height"],a=e.get("layout"),o="horizontal"===a?0:1,s=n[r[o]],l=[0,s],c=this.dimensions.length,u=yw(e.get("axisExpandWidth"),l),d=yw(e.get("axisExpandCount")||0,[0,c]),h=e.get("axisExpandable")&&3<c&&d<c&&1<d&&0<u&&0<s,f=e.get("axisExpandWindow");f?(t=yw(f[1]-f[0],l),f[1]=f[0]+t):(t=yw(u*(d-1),l),(f=[u*(e.get("axisExpandCenter")||fw(c/2))-t/2])[1]=f[0]+t);var g=(s-t)/(c-d);g<3&&(g=0);var p=[fw(pw(f[0]/u,1))+1,gw(pw(f[1]/u,1))-1];return{layout:a,pixelDimIndex:o,layoutBase:n[i[o]],layoutLength:s,axisBase:n[i[1-o]],axisLength:n[r[1-o]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:g,axisExpandWindow:f,axisCount:c,winInnerIndices:p,axisExpandWindow0Pos:g/u*f[0]}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each((function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])})),uw(n,(function(e,n){var a=(i.axisExpandable?function(t,e){var n,i,r=e.axisExpandWidth,a=e.axisCollapseWidth,o=e.winInnerIndices,s=a,l=!1;return t<o[0]?(n=t*a,i=a):t<=o[1]?(n=e.axisExpandWindow0Pos+t*r-e.axisExpandWindow[0],s=r,l=!0):(n=e.layoutLength-(e.axisCount-1-t)*a,i=a),{position:n,axisNameAvailableWidth:s,axisLabelShow:l,nameTruncateMaxWidth:i}}:function(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,i),o={horizontal:{x:a.position,y:i.axisLength},vertical:{x:0,y:a.position}},s=[o[r].x+t.x,o[r].y+t.y],l={horizontal:mw/2,vertical:0}[r],c=ne();se(c,c,l),oe(c,c,s),this._axesLayout[e]={position:s,rotation:l,transform:c,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,a=this.dimensions,o=[],s=[];M(a,(function(e){o.push(t.mapDimension(e)),s.push(r.get(e).model)}));for(var l=this.hasAxisBrushed(),c=n;c<i;c++){var u;if(l){u="active";for(var d=t.getValues(o,c),h=0,f=a.length;h<f;h++)if("inactive"===s[h].getActiveState(d[h])){u="inactive";break}}else u="normal";e(u,c)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){return js([t,0],this._axesLayout[e].transform)},getAxisLayout:function(t){return m(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var o,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",c=e.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),d=null!=u[0];return c?(d&&c&&s<r*u[0]?(l="jump",o=s-r*u[2]):d&&c&&s>r*(1-u[0])?(l="jump",o=s-r*(1-u[2])):0<=(o=s-r*u[1])&&(o=s-r*(1-u[1]))<=0&&(o=0),(o*=e.axisExpandWidth/c)?sw(o,i,a,"all"):l="none"):((i=[hw(0,a[1]*s/(r=i[1]-i[0])-r/2)])[1]=dw(a[1],i[0]+r),i[0]=i[1]-r),{axisExpandWindow:i,behavior:l}}},Oc.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",(function(i,r){var a=new vw(i,t,e);a.name="parallel_"+r,a.resize(i,e),(i.coordinateSystem=a).model=i,n.push(a)})),t.eachSeries((function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}})),n}});var xw=lc.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Zr([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=m(t);if(e)for(var n=e.length-1;0<=n;n--)ml(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}});v(xw.prototype,Og),rm("parallel",xw,(function(t,e){return e.type||(e.data?"category":"value")}),{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),lc.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){lc.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){t&&v(this.option,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){M(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])}),this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];M(D(this.dependentModels.parallelAxis,(function(t){return(t.get("parallelIndex")||0)===this.componentIndex}),this),(function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)}))}}),Gh({type:"axisAreaSelect",event:"axisAreaSelected"},(function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},(function(e){e.axis.model.setActiveIntervals(t.intervals)}))})),Gh("parallelAxisExpand",(function(t,e){e.eachComponent({mainType:"parallel",query:t},(function(e){e.setAxisExpand(t)}))}));var bw=E,ww=M,_w=T,Sw=Math.min,Cw=Math.max,kw=Math.pow,Aw={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Mw={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Tw={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},Iw=0;function Dw(t){Mt.call(this),this._zr=t,this.group=new Sn,this._track=[],this._covers=[],this._uid="brushController_"+Iw++,this._handlers={},ww(n_,(function(t,e){this._handlers[e]=L(t,this)}),this)}function Pw(t,e){var n=r_[e.brushType].createCover(t,e);return n.__brushOption=e,Nw(n,e),t.group.add(n),n}function Lw(t,e){var n=Ow(e);return n.endCreating&&(n.endCreating(t,e),Nw(e,e.__brushOption)),e}function Ew(t,e){var n=e.__brushOption;Ow(e).updateCoverShape(t,e,n.range,n)}function Nw(t,e){var n=e.z;null==n&&(n=1e4),t.traverse((function(t){t.z=n,t.z2=n}))}function Rw(t,e){Ow(e).updateCommon(t,e),Ew(t,e)}function Ow(t){return r_[t.__brushOption.brushType]}function zw(t,e,n){var i,r=t._panels;if(!r)return!0;var a=t._transform;return ww(r,(function(t){t.isTargetByCursor(e,n,a)&&(i=t)})),i}function Bw(t,e){var n=t._panels;if(!n)return!0;var i=e.__brushOption.panelId;return null==i||n[i]}function Fw(t){var e=t._covers,n=e.length;return ww(e,(function(e){t.group.remove(e)}),t),e.length=0,!!n}function Hw(t,e){var n=_w(t._covers,(function(t){var e=t.__brushOption,n=m(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}}));t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Vw(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Ww(t,e,n,i){var r=new Sn;return r.add(new Vo({name:"main",style:Uw(n),silent:!0,draggable:!0,cursor:"move",drift:bw(t,e,r,"nswe"),ondragend:bw(Hw,e,{isEnd:!0})})),ww(i,(function(n){r.add(new Vo({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:bw(t,e,r,n),ondragend:bw(Hw,e,{isEnd:!0})}))})),r}function Xw(t,e,n,i){var r=i.brushStyle.lineWidth||0,a=Cw(r,6),o=n[0][0],s=n[1][0],l=o-r/2,c=s-r/2,u=n[0][1],d=n[1][1],h=u-a+r/2,f=d-a+r/2,g=u-o,p=d-s,m=g+r,v=p+r;Gw(t,e,"main",o,s,g,p),i.transformable&&(Gw(t,e,"w",l,c,a,v),Gw(t,e,"e",h,c,a,v),Gw(t,e,"n",l,c,m,a),Gw(t,e,"s",l,f,m,a),Gw(t,e,"nw",l,c,a,a),Gw(t,e,"ne",h,c,a,a),Gw(t,e,"sw",l,f,a,a),Gw(t,e,"se",h,f,a,a))}function Yw(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(Uw(n)),r.attr({silent:!i,cursor:i?"move":"default"}),ww(["w","e","n","s","se","sw","ne","nw"],(function(n){var r=e.childOfName(n),a=function t(e,n){return 1<n.length?("e"!==(i=[t(e,(n=n.split(""))[0]),t(e,n[1])])[0]&&"w"!==i[0]||i.reverse(),i.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[i=qs({w:"left",e:"right",n:"top",s:"bottom"}[n],Us(e.group))];var i}(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?Mw[a]+"-resize":null})}))}function Gw(t,e,n,i,r,a,o){var s=e.childOfName(n);s&&s.setShape(function(t){var e=Sw(t[0][0],t[1][0]),n=Sw(t[0][1],t[1][1]);return{x:e,y:n,width:Cw(t[0][0],t[1][0])-e,height:Cw(t[0][1],t[1][1])-n}}(Kw(t,e,[[i,r],[i+a,r+o]])))}function Uw(t){return b({strokeNoScale:!0},t.brushStyle)}function jw(t,e,n,i){var r=[Sw(t,n),Sw(e,i)],a=[Cw(t,n),Cw(e,i)];return[[r[0],a[0]],[r[1],a[1]]]}function qw(t,e,n,i,r,a,o,s){var l=i.__brushOption,c=t(l.range),u=$w(n,a,o);ww(r.split(""),(function(t){var e=Aw[t];c[e[0]][e[1]]+=u[e[0]]})),l.range=e(jw(c[0][0],c[1][0],c[0][1],c[1][1])),Rw(n,i),Hw(n,{isEnd:!1})}function Zw(t,e,n,i,r){var a=e.__brushOption.range,o=$w(t,n,i);ww(a,(function(t){t[0]+=o[0],t[1]+=o[1]})),Rw(t,e),Hw(t,{isEnd:!1})}function $w(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),a=i.transformCoordToLocal(0,0);return[r[0]-a[0],r[1]-a[1]]}function Kw(t,e,n){var i=Bw(t,e);return i&&!0!==i?i.clipPath(n,t._transform):m(n)}function Jw(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Qw(t,e,n){return t.childOfName("main").contain(e,n)}function t_(t,e,n,i){var r,a=t._creatingCover,o=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],a=n[1]-i[1];return 6<kw(r*r+a*a,.5)}(t)||a){if(o&&!a){"single"===s.brushMode&&Fw(t);var l=m(s);l.brushType=e_(l.brushType,o),l.panelId=!0===o?null:o.panelId,a=t._creatingCover=Pw(t,l),t._covers.push(a)}if(a){var c=r_[e_(t._brushType,o)];a.__brushOption.range=c.getCreatingRange(Kw(t,a,t._track)),i&&(Lw(t,a),c.updateCommon(t,a)),Ew(t,a),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&zw(t,e,n)&&Fw(t)&&(r={isEnd:i,removeOnClick:!0});return r}function e_(t,e){return"auto"===t?e.defaultBrushType:t}Dw.prototype={constructor:Dw,enableBrush:function(t){return this._brushType&&function(t){var e=t._zr;(function(t,e,n){var i=ty(t);i[e]===n&&(i[e]=null)})(e,"globalPan",t._uid),function(t,e){ww(e,(function(e,n){t.off(n,e)}))}(e,t._handlers),t._brushType=t._brushOption=null}(this),t.brushType&&function(t,e){var n=t._zr;t._enableGlobalPan||function(t,e,n){ty(t).globalPan=n}(n,0,t._uid),function(t,e){ww(e,(function(e,n){t.on(n,e)}))}(n,t._handlers),t._brushType=e.brushType,t._brushOption=v(m(Tw),e,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};M(t,(function(t){e[t.panelId]=m(t)}))}else this._panels=null;return this},mount:function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){ww(this._covers,t,e)},updateCovers:function(t){t=T(t,(function(t){return v(m(Tw),t,!0)}));var e=this._covers,n=this._covers=[],i=this,r=this._creatingCover;return new nf(e,t,(function(t,e){return a(t.__brushOption,e)}),a).add(o).update(o).remove((function(t){e[t]!==r&&i.group.remove(e[t])})).execute(),this;function a(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function o(a,o){var s=t[a];if(null!=o&&e[o]===r)n[a]=e[o];else{var l=n[a]=null!=o?(e[o].__brushOption=s,e[o]):Lw(i,Pw(i,s));Rw(i,l)}}},unmount:function(){return this.enableBrush(!1),Fw(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},k(Dw,Mt);var n_={mousedown:function(t){if(this._dragging)i_(this,t);else if(!t.target||!t.target.draggable){Jw(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=zw(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||void 0>i.getHeight()}(t,e)){var i=t._zr,r=t._covers,a=zw(t,e,n);if(!t._dragging)for(var o=0;o<r.length;o++){var s=r[o].__brushOption;if(a&&(!0===a||s.panelId===a.panelId)&&r_[s.brushType].contain(r[o],n[0],n[1]))return}a&&i.setCursorStyle("crosshair")}}(this,t,e),this._dragging){Jw(t);var n=t_(this,t,e,!1);n&&Hw(this,n)}},mouseup:function(t){i_(this,t)}};function i_(t,e){if(t._dragging){Jw(e);var n=t.group.transformCoordToLocal(e.offsetX,e.offsetY),i=t_(t,e,n,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&Hw(t,i)}}var r_={lineX:a_(0),lineY:a_(1),rect:{createCover:function(t,e){return Ww(bw(qw,(function(t){return t}),(function(t){return t})),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=Vw(t);return jw(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){Xw(t,e,n,i)},updateCommon:Yw,contain:Qw},polygon:{createCover:function(t,e){var n=new Sn;return n.add(new Ro({name:"main",style:Uw(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new No({name:"main",draggable:!0,drift:bw(Zw,t,e),ondragend:bw(Hw,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:Kw(t,e,n)})},updateCommon:Yw,contain:Qw}};function a_(t){return{createCover:function(e,n){return Ww(bw(qw,(function(e){var n=[e,[0,100]];return t&&n.reverse(),n}),(function(e){return e[t]})),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=Vw(e);return[Sw(n[0][t],n[1][t]),Cw(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,r){var a,o=Bw(e,n);if(!0!==o&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,a];t&&l.reverse(),Xw(e,n,l,r)},updateCommon:Yw,contain:Qw}}function o_(t){return t=c_(t),function(e,n){return $s(e,t)}}function s_(t,e){return t=c_(t),function(n){var i=null!=e?e:n,r=i?t.x:t.y;return[r,r+((i?t.width:t.height)||0)]}}function l_(t,e,n){return t=c_(t),function(i,r,a){return t.contain(r[0],r[1])&&!fy(i,e,n)}}function c_(t){return _n.create(t)}var u_=["axisLine","axisTickLabel","axisName"],d_=Jh({type:"parallelAxis",init:function(t,e){d_.superApply(this,"init",arguments),(this._brushController=new Dw(e.getZr())).on("brush",L(this._onBrush,this))},render:function(t,e,n,i){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Sn,this.group.add(this._axisGroup),t.get("show")){var a=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),o=a.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,c=x({strokeContainThreshold:l},o.getAxisLayout(t.axis.dim)),u=new vm(t,c);M(u_,u.add,u),this._axisGroup.add(u.getGroup()),this._refreshBrushController(c,s,t,a,l,n),Zs(r,this._axisGroup,i&&!1===i.animation?null:t)}}},_refreshBrushController:function(t,e,n,i,r,a){var o=n.axis.getExtent(),s=o[1]-o[0],l=Math.min(30,.1*Math.abs(s)),c=_n.create({x:o[0],y:-r/2,width:s,height:r});c.x-=l,c.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:o_(c),isTargetByCursor:l_(c,a,i),getLinearBrushOtherExtent:s_(c,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return T(t.activeIntervals,(function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}}))}(n))},_onBrush:function(t,e){var n=this.axisModel,i=n.axis,r=T(t,(function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]}));!n.option.realtime!==e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},dispose:function(){this._brushController.dispose()}});Jh({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},M(h_,(function(t,e){n.getZr().on(e,this._handlers[e]=L(t,this))}),this)),rd(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){M(this._handlers,(function(t,n){e.getZr().off(n,t)})),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(x({type:"parallelAxisExpand"},t))}});var h_={mousedown:function(t){f_(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(f_(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(5<Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&f_(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function f_(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function g_(t,e,n,i){for(var r,a=[],o=0;o<n.length;o++){var s=n[o],l=t.get(t.mapDimension(s),e);r=l,("category"===i.getAxis(s).type?null==r:null==r||isNaN(r))||a.push(i.dataToPoint(l,s))}return a}function p_(t,e,n,i,r){var a=g_(t,n,i,r),o=new Ro({shape:{points:a},silent:!0,z2:10});return e.add(o),t.setItemGraphicEl(n,o),o}function m_(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:.3}}function v_(t,e,n,i){var r=i.lineStyle;e.hasItemOption&&(r=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(r);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(n,"color"),a.opacity=e.getItemVisual(n,"opacity"),i.smooth&&(t.shape.smooth=i.smooth)}Xh((function(t){!function(t){if(!t.parallel){var e=!1;M(t.series,(function(t){t&&"parallel"===t.type&&(e=!0)})),e&&(t.parallel=[{}])}}(t),function(t){M(kr(t.parallelAxis),(function(e){if(z(e)){var n=e.parallelIndex||0,i=kr(t.parallel)[n];i&&i.parallelAxisDefault&&v(e,i.parallelAxisDefault,!1)}}))}(t)})),Nu.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var i=t.encodeDefine=Q();M(n.dimensions,(function(t){var e=function(t){return+t.replace("dim","")}(t);i.set(t,e)}))}}}(n,this),Hf(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,(function(e,r){t===e&&i.push(n.getRawIndex(r))})),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),ju.extend({type:"parallel",init:function(){this._dataGroup=new Sn,this.group.add(this._dataGroup)},render:function(t,e,n,i){var r=this._dataGroup,a=t.getData(),o=this._data,s=t.coordinateSystem,l=s.dimensions,c=m_(t);if(a.diff(o).add((function(t){v_(p_(a,r,t,l,s),a,t,c)})).update((function(e,n){var r=o.getItemGraphicEl(n),u=g_(a,e,l,s);a.setItemGraphicEl(e,r),Ys(r,{shape:{points:u}},i&&!1===i.animation?null:t,e),v_(r,a,e,c)})).remove((function(t){var e=o.getItemGraphicEl(t);r.remove(e)})).execute(),!this._initialized){this._initialized=!0;var u=function(t,e,n){var i=t.model,r=t.getRect(),a=new Vo({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),o="horizontal"===i.get("layout")?"width":"height";return a.setShape(o,0),Gs(a,{shape:{width:r.width,height:r.height}},e,n),a}(s,t,(function(){setTimeout((function(){r.removeClipPath()}))}));r.setClipPath(u)}this._data=a},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,a=r.dimensions,o=m_(e),s=t.start;s<t.end;s++){var l=p_(i,this._dataGroup,s,a,r);l.incremental=!0,v_(l,i,s,o)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var y_=["lineStyle","normal","opacity"];qh({seriesType:"parallel",reset:function(t,e,n){var i=t.getModel("itemStyle"),r=t.getModel("lineStyle"),a=e.get("color"),o=r.get("color")||i.get("color")||a[t.seriesIndex%a.length],s=t.get("inactiveOpacity"),l=t.get("activeOpacity"),c=t.getModel("lineStyle").getLineStyle(),u=t.coordinateSystem,d=t.getData(),h={normal:c.opacity,active:l,inactive:s};return d.setVisual("color",o),{progress:function(t,e){u.eachActiveState(e,(function(t,n){var i=h[t];if("normal"===t&&e.hasItemOption){var r=e.getItemModel(n).get(y_,!0);null!=r&&(i=r)}e.setItemVisual(n,"opacity",i)}),t.start,t.end)}}}});var x_=Nu.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){for(var n=t.edges||t.links,i=t.data||t.nodes,r=t.levels,a=this.levelModels={},o=0;o<r.length;o++)null!=r[o].depth&&0<=r[o].depth&&(a[r[o].depth]=new ll(r[o],this,e));if(i&&n)return db(i,n,this,!0,(function(t,e){t.wrapMethod("getItemModel",(function(t,e){return t.customizeGetParent((function(t){var n=this.parentModel,i=n.getData().getItemLayout(e).depth;return n.levelModels[i]||this.parentModel})),t})),e.wrapMethod("getItemModel",(function(t,e){return t.customizeGetParent((function(t){var n=this.parentModel,i=n.getGraph().getEdgeByIndex(e).node1.getLayout().depth;return n.levelModels[i]||this.parentModel})),t}))})).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getDataParams(t,n),r=i.data,a=r.source+" -- "+r.target;return i.value&&(a+=" : "+i.value),zl(a)}if("node"!==n)return x_.superCall(this,"formatTooltip",t,e);var o=this.getGraph().getNodeByIndex(t).getLayout().value,s=this.getDataParams(t,n).data.name;return o&&(a=s+" : "+o),zl(a)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},getDataParams:function(t,e){var n=x_.superCall(this,"getDataParams",t,e);if(null==n.value&&"node"===e){var i=this.getGraph().getNodeByIndex(t).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),b_=["itemStyle","opacity"],w_=["emphasis","itemStyle","opacity"],__=["lineStyle","opacity"],S_=["emphasis","lineStyle","opacity"];function C_(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function k_(t,e,n){var i=t.getGraphicEl(),r=C_(t,e);null!=n&&(null==r&&(r=1),r*=n),i.downplay&&i.downplay(),i.traverse((function(t){"group"!==t.type&&t.setStyle("opacity",r)}))}function A_(t,e){var n=C_(t,e),i=t.getGraphicEl();i.traverse((function(t){"group"!==t.type&&t.setStyle("opacity",n)})),i.highlight&&i.highlight()}var M_=ls({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function T_(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&0<=e.depth}function I_(t,e,n,i,r){var a="vertical"===r?"x":"y";M(t,(function(t){var o,s,l;t.sort((function(t,e){return t.getLayout()[a]-e.getLayout()[a]}));for(var c=0,u=t.length,d="vertical"===r?"dx":"dy",h=0;h<u;h++)0<(l=c-(s=t[h]).getLayout()[a])&&(o=s.getLayout()[a]+l,s.setLayout("vertical"===r?{x:o}:{y:o},!0)),c=s.getLayout()[a]+s.getLayout()[d]+e;if(0<(l=c-e-("vertical"===r?i:n)))for(o=s.getLayout()[a]-l,s.setLayout("vertical"===r?{x:o}:{y:o},!0),c=o,h=u-2;0<=h;--h)0<(l=(s=t[h]).getLayout()[a]+s.getLayout()[d]+e-c)&&(o=s.getLayout()[a]-l,s.setLayout("vertical"===r?{x:o}:{y:o},!0)),c=s.getLayout()[a]}))}function D_(t,e,n){M(t.slice().reverse(),(function(t){M(t,(function(t){if(t.outEdges.length){var i=R_(t.outEdges,P_,n)/R_(t.outEdges,N_,n);if("vertical"===n){var r=t.getLayout().x+(i-E_(t,n))*e;t.setLayout({x:r},!0)}else{var a=t.getLayout().y+(i-E_(t,n))*e;t.setLayout({y:a},!0)}}}))}))}function P_(t,e){return E_(t.node2,e)*t.getValue()}function L_(t,e){return E_(t.node1,e)*t.getValue()}function E_(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function N_(t){return t.getValue()}function R_(t,e,n){for(var i=0,r=t.length,a=-1;++a<r;){var o=+e.call(t,t[a],n);isNaN(o)||(i+=o)}return i}function O_(t,e,n){M(t,(function(t){M(t,(function(t){if(t.inEdges.length){var i=R_(t.inEdges,L_,n)/R_(t.inEdges,N_,n);if("vertical"===n){var r=t.getLayout().x+(i-E_(t,n))*e;t.setLayout({x:r},!0)}else{var a=t.getLayout().y+(i-E_(t,n))*e;t.setLayout({y:a},!0)}}}))}))}tf({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var i=this,r=t.getGraph(),a=this.group,o=t.layoutInfo,s=o.width,l=o.height,c=t.getData(),u=t.getData("edge"),d=t.get("orient");this._model=t,a.removeAll(),a.attr("position",[o.x,o.y]),r.eachEdge((function(e){var n=new M_;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var i,r,o,c,h,f,g,p,m=e.getModel("lineStyle"),v=m.get("curveness"),y=e.node1.getLayout(),x=e.node1.getModel(),b=x.get("localX"),w=x.get("localY"),_=e.node2.getLayout(),S=e.node2.getModel(),C=S.get("localX"),k=S.get("localY"),A=e.getLayout();switch(n.shape.extent=Math.max(1,A.dy),p="vertical"===(n.shape.orient=d)?(h=i=(null!=b?b*s:y.x)+A.sy,f=(r=(null!=w?w*l:y.y)+y.dy)*(1-v)+(c=null!=k?k*l:_.y)*v,g=o=(null!=C?C*s:_.x)+A.ty,r*v+c*(1-v)):(h=(i=(null!=b?b*s:y.x)+y.dx)*(1-v)+(o=null!=C?C*s:_.x)*v,f=r=(null!=w?w*l:y.y)+A.sy,g=i*v+o*(1-v),c=(null!=k?k*l:_.y)+A.ty),n.setShape({x1:i,y1:r,x2:o,y2:c,cpx1:h,cpy1:f,cpx2:g,cpy2:p}),n.setStyle(m.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}Ds(n,e.getModel("emphasis.lineStyle").getItemStyle()),a.add(n),u.setItemGraphicEl(e.dataIndex,n)})),r.eachNode((function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),o=i.get("localY"),u=i.getModel("label"),d=i.getModel("emphasis.label"),h=new Vo({shape:{x:null!=r?r*s:n.x,y:null!=o?o*l:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),f=e.getModel("emphasis.itemStyle").getItemStyle();Ns(h.style,f,u,d,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),h.setStyle("fill",e.getVisual("color")),Ds(h,f),a.add(h),c.setItemGraphicEl(e.dataIndex,h),h.dataType="node"})),c.eachItemGraphicEl((function(e,r){var a=c.getItemModel(r);a.get("draggable")&&(e.drift=function(e,a){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=a,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:c.getRawIndex(r),localX:this.shape.x/s,localY:this.shape.y/l})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),e.highlight=function(){this.trigger("emphasis")},e.downplay=function(){this.trigger("normal")},e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),a.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))})),u.eachItemGraphicEl((function(e,r){var a=u.getItemModel(r);e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),a.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))})),!this._data&&t.get("animation")&&a.setClipPath(function(t,e,n){var i=new Vo({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Gs(i,{shape:{width:t.width+20}},e,(function(){a.removeClipPath()})),i}(a.getBoundingRect(),t)),this._data=t.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(t){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){e._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var r=t.getData(),a=r.graph,o=i.dataIndex,s=r.getItemModel(o),l=i.edgeDataIndex;if(null!=o||null!=l){var c=a.getNodeByIndex(o),u=a.getEdgeByIndex(l);if(a.eachNode((function(t){k_(t,b_,.1)})),a.eachEdge((function(t){k_(t,__,.1)})),c){A_(c,w_);var d=s.get("focusNodeAdjacency");"outEdges"===d?M(c.outEdges,(function(t){t.dataIndex<0||(A_(t,S_),A_(t.node2,w_))})):"inEdges"===d?M(c.inEdges,(function(t){t.dataIndex<0||(A_(t,S_),A_(t.node1,w_))})):"allEdges"===d&&M(c.edges,(function(t){t.dataIndex<0||(A_(t,S_),t.node1!==c&&A_(t.node1,w_),t.node2!==c&&A_(t.node2,w_))}))}u&&(A_(u,S_),A_(u.node1,w_),A_(u.node2,w_))}},unfocusNodeAdjacency:function(t,e,n,i){var r=t.getGraph();r.eachNode((function(t){k_(t,b_)})),r.eachEdge((function(t){k_(t,__)}))}}),Gh({type:"dragNode",event:"dragnode",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},(function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])}))})),jh((function(t,e,n){t.eachSeriesByType("sankey",(function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),r=function(t,e){return Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),a=(t.layoutInfo=r).width,o=r.height,s=t.getGraph(),l=s.nodes,c=s.edges;!function(t){M(t,(function(t){var e=R_(t.outEdges,N_),n=R_(t.inEdges,N_),i=t.getValue()||0,r=Math.max(e,n,i);t.setLayout({value:r},!0)}))}(l),function(t,e,n,i,r,a,o,s,l){(function(t,e,n,i,r,a,o){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<e.length;h++)s[h]=1;for(h=0;h<t.length;h++)l[h]=t[h].inEdges.length,0===l[h]&&c.push(t[h]);for(var f=-1;c.length;){for(var g=0;g<c.length;g++){var p=c[g],m=p.hostGraph.data.getRawDataItem(p.dataIndex),v=null!=m.depth&&0<=m.depth;v&&m.depth>f&&(f=m.depth),p.setLayout({depth:v?m.depth:d},!0),p.setLayout("vertical"===a?{dy:n}:{dx:n},!0);for(var y=0;y<p.outEdges.length;y++){var x=p.outEdges[y];s[e.indexOf(x)]=0;var b=x.node2;0==--l[t.indexOf(b)]&&u.indexOf(b)<0&&u.push(b)}}++d,c=u,u=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var w=d-1<f?f:d-1;o&&"left"!==o&&function(t,e,n,i){if("right"===e){for(var r=[],a=t,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];r.indexOf(u.node1)<0&&r.push(u.node1)}}a=r,r=[],++o}M(t,(function(t){T_(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)}))}else"justify"===e&&function(t,e){M(t,(function(t){T_(t)||t.outEdges.length||t.setLayout({depth:e},!0)}))}(t,i)}(t,o,0,w),function(t,e,n){M(t,(function(t){var i=t.getLayout().depth*e;t.setLayout("vertical"===n?{y:i}:{x:i},!0)}))}(t,"vertical"===a?(r-n)/w:(i-n)/w,a)})(t,e,n,r,a,s,l),function(t,e,n,i,r,a,o){var s=function(t,e){var n=[],i="vertical"===e?"y":"x",r=Hr(t,(function(t){return t.getLayout()[i]}));return r.keys.sort((function(t,e){return t-e})),M(r.keys,(function(t){n.push(r.buckets.get(t))})),n}(t,o);(function(t,e,n,i,r,a){var o=1/0;M(t,(function(t){var e=t.length,s=0;M(t,(function(t){s+=t.getLayout().value}));var l="vertical"===a?(i-(e-1)*r)/s:(n-(e-1)*r)/s;l<o&&(o=l)})),M(t,(function(t){M(t,(function(t,e){var n=t.getLayout().value*o;"vertical"===a?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))}))})),M(e,(function(t){var e=+t.getValue()*o;t.setLayout({dy:e},!0)}))})(s,e,n,i,r,o),I_(s,r,n,i,o);for(var l=1;0<a;a--)D_(s,l*=.99,o),I_(s,r,n,i,o),O_(s,l,o),I_(s,r,n,i,o)}(t,e,a,r,i,o,s),function(t,e){var n="vertical"===e?"x":"y";M(t,(function(t){t.outEdges.sort((function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]})),t.inEdges.sort((function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]}))})),M(t,(function(t){var e=0,n=0;M(t.outEdges,(function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy})),M(t.inEdges,(function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy}))}))}(t,s)}(l,c,n,i,a,o,0!==D(l,(function(t){return 0===t.getLayout().value})).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))}))})),qh((function(t,e){t.eachSeriesByType("sankey",(function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,i=-1/0;M(e,(function(t){var e=t.getLayout().value;e<n&&(n=e),i<e&&(i=e)})),M(e,(function(e){var r=new Mx({type:"color",mappingMethod:"linear",dataExtent:[n,i],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),a=e.getModel().get("itemStyle.color");e.setVisual("color",null!=a?a:r)}))}}))}));var z_={_baseAxisDim:null,getInitialData:function(t,e){var n,i,r=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=r.get("type"),s=a.get("type");"category"===o?(t.layout="horizontal",n=r.getOrdinalMeta(),i=!0):"category"===s?(t.layout="vertical",n=a.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var l=["x","y"],c="horizontal"===t.layout?0:1,u=this._baseAxisDim=l[c],d=l[1-c],h=[r,a],f=h[c].get("type"),g=h[1-c].get("type"),p=t.data;if(p&&i){var m=[];M(p,(function(t,e){var n;t.value&&N(t.value)?(n=t.value.slice(),t.value.unshift(e)):N(t)?(n=t.slice(),t.unshift(e)):n=t,m.push(n)})),t.data=m}var v=this.defaultValueDimensions,y=[{name:u,type:sf(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:sf(g),dimsDef:v.slice()}];return uv(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:E(kc,y,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};k(Nu.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),z_,!0);var B_=["itemStyle"],F_=["emphasis","itemStyle"],H_=(ju.extend({type:"boxplot",render:function(t,e,n){var i=t.getData(),r=this.group,a=this._data;this._data||r.removeAll();var o="horizontal"===t.get("layout")?1:0;i.diff(a).add((function(t){if(i.hasValue(t)){var e=V_(i.getItemLayout(t),i,t,o,!0);i.setItemGraphicEl(t,e),r.add(e)}})).update((function(t,e){var n=a.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?W_(s,n,i,t):n=V_(s,i,t,o),r.add(n),i.setItemGraphicEl(t,n)}else r.remove(n)})).remove((function(t){var e=a.getItemGraphicEl(t);e&&r.remove(e)})).execute(),this._data=i},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(t){t&&e.remove(t)}))},dispose:et}),lo.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])}}));function V_(t,e,n,i,r){var a=t.ends,o=new H_({shape:{points:r?function(t,e,n){return T(t,(function(t){return(t=t.slice())[e]=n.initBaseline,t}))}(a,i,t):a}});return W_(t,o,e,n,r),o}function W_(t,e,n,i,r){(0,el[r?"initProps":"updateProps"])(e,{shape:{points:t.ends}},n.hostModel,i);var a=n.getItemModel(i),o=a.getModel(B_),s=n.getItemVisual(i,"color"),l=o.getItemStyle(["borderColor"]);l.stroke=s,l.strokeNoScale=!0,e.useStyle(l),e.z2=100,Ds(e,a.getModel(F_).getItemStyle())}var X_=["itemStyle","borderColor"],Y_=M;qh((function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",(function(e){var i=n[e.seriesIndex%n.length],r=e.getData();r.setVisual({legendSymbol:"roundRect",color:e.get(X_)||i}),t.isSeriesFiltered(e)||r.each((function(t){var e=r.getItemModel(t);r.setItemVisual(t,{color:e.get(X_,!0)})}))}))})),jh((function(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",(function(t){var i=t.getBaseAxis(),r=S(n,i);r<0&&(n[r=n.length]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)})),e}(t);Y_(e,(function(t){var e=t.seriesModels;e.length&&(function(t){var e,n,i=t.axis,r=t.seriesModels,a=r.length,o=t.boxWidthList=[],s=t.boxOffsetList=[],l=[];if("category"===i.type)n=i.getBandWidth();else{var c=0;Y_(r,(function(t){c=Math.max(c,t.getData().count())})),e=i.getExtent(),Math.abs(e[1]-e[0])}Y_(r,(function(t){var e=t.get("boxWidth");N(e)||(e=[e,e]),l.push([gl(e[0],n)||0,gl(e[1],n)||0])}));var u=.8*n-2,d=u/a*.3,h=(u-d*(a-1))/a,f=h/2-u/2;Y_(r,(function(t,e){s.push(f),f+=d+h,o.push(Math.min(Math.max(h,l[e][0]),l[e][1]))}))}(t),Y_(e,(function(e,n){!function(t,e,n){var i=t.coordinateSystem,r=t.getData(),a=n/2,o="horizontal"===t.get("layout")?0:1,s=1-o,l=["x","y"],c=r.mapDimension(l[o]),u=r.mapDimension(l[s],!0);if(!(null==c||u.length<5))for(var d=0;d<r.count();d++){var h=r.get(c,d),f=x(h,u[2],d),g=x(h,u[0],d),p=x(h,u[1],d),m=x(h,u[3],d),v=x(h,u[4],d),y=[];b(y,p,0),b(y,m,1),y.push(g,p,v,m),w(y,g),w(y,v),w(y,f),r.setItemLayout(d,{initBaseline:f[s],ends:y})}function x(t,n,a){var l,c=r.get(n,a),u=[];return u[o]=t,u[s]=c,isNaN(t)||isNaN(c)?l=[NaN,NaN]:(l=i.dataToPoint(u))[o]+=e,l}function b(t,e,n){var i=e.slice(),r=e.slice();i[o]+=a,r[o]-=a,n?t.push(i,r):t.push(r,i)}function w(t,e){var n=e.slice(),i=e.slice();n[o]-=a,i[o]+=a,t.push(n,i)}}(e,t.boxOffsetList[n],t.boxWidthList[n])})))}))})),k(Nu.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)}}),z_,!0);var G_=["itemStyle"],U_=["emphasis","itemStyle"],j_=["color","color0","borderColor","borderColor0"],q_=(ju.extend({type:"candlestick",render:function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,i=this.group,r=e.getLayout("isSimpleBox"),a=t.get("clip",!0),o=t.coordinateSystem,s=o.getArea&&o.getArea();this._data||i.removeAll(),e.diff(n).add((function(n){if(e.hasValue(n)){var o,l=e.getItemLayout(n);if(a&&$_(s,l))return;Gs(o=Z_(l,0,!0),{shape:{points:l.ends}},t,n),K_(o,e,n,r),i.add(o),e.setItemGraphicEl(n,o)}})).update((function(o,l){var c=n.getItemGraphicEl(l);if(e.hasValue(o)){var u=e.getItemLayout(o);a&&$_(s,u)?i.remove(c):(c?Ys(c,{shape:{points:u.ends}},t,o):c=Z_(u),K_(c,e,o,r),i.add(c),e.setItemGraphicEl(o,c))}else i.remove(c)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)})).execute(),this._data=e},_renderLarge:function(t){this._clear(),Q_(t,this.group);var e=t.get("clip",!0)?Xp(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var n,i=e.getData(),r=i.getLayout("isSimpleBox");null!=(n=t.next());){var a;K_(a=Z_(i.getItemLayout(n)),i,n,r),a.incremental=!0,this.group.add(a)}},_incrementalRenderLarge:function(t,e){Q_(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:et}),lo.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}}));function Z_(t,e,n){var i=t.ends;return new q_({shape:{points:n?function(t,e){return T(t,(function(t){return(t=t.slice())[1]=e.initBaseline,t}))}(i,t):i},z2:100})}function $_(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function K_(t,e,n,i){var r=e.getItemModel(n),a=r.getModel(G_),o=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||o,l=a.getItemStyle(j_);t.useStyle(l),t.style.strokeNoScale=!0,t.style.fill=o,t.style.stroke=s,t.__simpleBox=i,Ds(t,r.getModel(U_).getItemStyle())}var J_=lo.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3}});function Q_(t,e,n){var i=t.getData(),r=i.getLayout("largePoints"),a=new J_({shape:{points:r},__sign:1});e.add(a);var o=new J_({shape:{points:r},__sign:-1});e.add(o),tS(1,a,t,i),tS(-1,o,t,i),n&&(a.incremental=!0,o.incremental=!0)}function tS(t,e,n,i){var r=0<t?"P":"N",a=i.getVisual("borderColor"+r)||i.getVisual("color"+r),o=n.getModel(G_).getItemStyle(j_);e.useStyle(o),e.style.fill=null,e.style.stroke=a}var eS=["itemStyle","borderColor"],nS=["itemStyle","borderColor0"],iS=["itemStyle","color"],rS=["itemStyle","color0"],aS={seriesType:"candlestick",plan:Yu(),performRawSeries:!0,reset:function(t,e){if(t.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:i(1,t),borderColorN:i(-1,t)}),!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var r;null!=(r=t.next());){var a=e.getItemModel(r),o=e.getItemLayout(r).sign;e.setItemVisual(r,{color:n(o,a),borderColor:i(o,a)})}}};function n(t,e){return e.get(0<t?iS:rS)}function i(t,e){return e.get(0<t?eS:nS)}}},oS="undefined"!=typeof Float32Array?Float32Array:Array,sS={seriesType:"candlestick",plan:Yu(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=function(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),a=gl(X(t.get("barMaxWidth"),r),r),o=gl(X(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?gl(s,r):Math.max(Math.min(r/2,a),o)}(t,n),r=["x","y"],a=n.mapDimension(r[0]),o=n.mapDimension(r[1],!0),s=o[0],l=o[1],c=o[2],u=o[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==a||o.length<4))return{progress:t.pipelineContext.large?function(t,n){for(var i,r,o=new oS(4*t.count),d=0,h=[],f=[];null!=(r=t.next());){var g=n.get(a,r),p=n.get(s,r),m=n.get(l,r),v=n.get(c,r),y=n.get(u,r);isNaN(g)||isNaN(v)||isNaN(y)?(o[d++]=NaN,d+=3):(o[d++]=lS(n,r,p,m,l),h[0]=g,h[1]=v,i=e.dataToPoint(h,null,f),o[d++]=i?i[0]:NaN,o[d++]=i?i[1]:NaN,h[1]=y,i=e.dataToPoint(h,null,f),o[d++]=i?i[1]:NaN)}n.setLayout("largePoints",o)}:function(t,n){for(var r;null!=(r=t.next());){var o=n.get(a,r),d=n.get(s,r),h=n.get(l,r),f=n.get(c,r),g=n.get(u,r),p=Math.min(d,h),m=Math.max(d,h),v=_(p,o),y=_(m,o),x=_(f,o),b=_(g,o),w=[];S(w,y,0),S(w,v,1),w.push(k(b),k(y),k(x),k(v)),n.setItemLayout(r,{sign:lS(n,r,d,h,l),initBaseline:h<d?y[1]:v[1],ends:w,brushRect:C(f,g,o)})}function _(t,n){var i=[];return i[0]=n,i[1]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function S(t,e,n){var r=e.slice(),a=e.slice();r[0]=ms(r[0]+i/2,1,!1),a[0]=ms(a[0]-i/2,1,!0),n?t.push(r,a):t.push(a,r)}function C(t,e,n){var r=_(t,n),a=_(e,n);return r[0]-=i/2,a[0]-=i/2,{x:r[0],y:r[1],width:i,height:a[1]-r[1]}}function k(t){return t[0]=ms(t[0],1),t}}}}};function lS(t,e,n,i,r){return i<n?-1:n<i?1:0<e?t.get(r,e-1)<=i?1:-1:1}function cS(t,e){var n=e.rippleEffectColor||e.color;t.eachChild((function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})}))}function uS(t,e){Sn.call(this);var n=new hp(t,e),i=new Sn;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}Xh((function(t){t&&N(t.series)&&M(t.series,(function(t){z(t)&&"k"===t.type&&(t.type="candlestick")}))})),qh(aS),jh(sS),Nu.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return Hf(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var dS=uS.prototype;dS.stopEffectAnimation=function(){this.childAt(1).removeAll()},dS.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=this.childAt(1),r=0;r<3;r++){var a=Gg(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var o=-r/3*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(o).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(o).start(),i.add(a)}cS(i,t)},dS.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],r=0;r<i.length;r++){var a=i[r];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}cS(n,t)},dS.highlight=function(){this.trigger("emphasis")},dS.downplay=function(){this.trigger("normal")},dS.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1),r=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),o=function(t){return N(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"color");i.attr("scale",o),i.traverse((function(t){t.attr({fill:s})}));var l=r.getShallow("symbolOffset");if(l){var c=i.position;c[0]=gl(l[0],o[0]),c[1]=gl(l[1],o[1])}i.rotation=(r.getShallow("symbolRotate")||0)*Math.PI/180||0;var u={};if(u.showEffectOn=n.get("showEffectOn"),u.rippleScale=r.get("rippleEffect.scale"),u.brushType=r.get("rippleEffect.brushType"),u.period=1e3*r.get("rippleEffect.period"),u.effectOffset=e/t.count(),u.z=r.getShallow("z")||0,u.zlevel=r.getShallow("zlevel")||0,u.symbolType=a,u.color=s,u.rippleEffectColor=r.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===u.showEffectOn)this._effectCfg?this.updateEffectAnimation(u):this.startEffectAnimation(u),this._effectCfg=u;else{this._effectCfg=null,this.stopEffectAnimation();var d=this.childAt(0),h=function(){d.highlight(),"render"!==u.showEffectOn&&this.startEffectAnimation(u)},f=function(){d.downplay(),"render"!==u.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",h,this).on("mouseout",f,this).on("emphasis",h,this).on("normal",f,this)}this._effectCfg=u},dS.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},C(uS,Sn),tf({type:"effectScatter",init:function(){this._symbolDraw=new _p(uS)},render:function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i),this.group.add(r.group)},updateTransform:function(t,e,n){var i=t.getData();this.group.dirty();var r=Zp().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=ue(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),qh(qp("effectScatter","circle")),jh(Zp("effectScatter"));var hS="undefined"==typeof Uint32Array?Array:Uint32Array,fS="undefined"==typeof Float64Array?Array:Float64Array;function gS(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=T(e,(function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),y([e,t[0],t[1]])})))}var pS=Nu.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],gS(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),pS.superApply(this,"init",arguments)},mergeOption:function(t){if(t.data=t.data||[],gS(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}pS.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=tt(this._flatCoords,e.flatCoords),this._flatCoordsOffset=tt(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var a=this._getCoordsFromItemModel(t);for(r=0;r<a.length;r++)e[r]=e[r]||[],e[r][0]=a[r][0],e[r][1]=a[r][1];return a.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"!=typeof t[0])return{flatCoordsOffset:null,flatCoords:null,count:t.length};for(var n=t.length,i=new hS(n),r=new fS(n),a=0,o=0,s=0,l=0;l<n;){s++;var c=t[l++];i[o++]=a+e,i[o++]=c;for(var u=0;u<c;u++){var d=t[l++],h=t[l++];r[a++]=d,r[a++]=h}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,o),flatCoords:r,count:s}},getInitialData:function(t,e){var n=new xf(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var a=t.value;return null!=a?a instanceof Array?a[r]:a:void 0})),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var i=e.get("fromName"),r=e.get("toName"),a=[];return null!=i&&a.push(i),null!=r&&a.push(r),zl(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function mS(t,e,n){Sn.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}var vS=mS.prototype;function yS(t,e,n){Sn.call(this),this._createPolyline(t,e,n)}vS.createLine=function(t,e,n){return new wb(t,e,n)},vS._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),r=n.get("symbol");N(i)||(i=[i,i]);var a=n.get("color")||t.getItemVisual(e,"color"),o=this.childAt(1);this._symbolType!==r&&(this.remove(o),(o=Gg(r,-.5,-.5,1,1,a)).z2=100,o.culling=!0,this.add(o)),o&&(o.setStyle("shadowColor",a),o.setStyle(n.getItemStyle(["color"])),o.attr("scale",i),o.setColor(a),o.attr("scale",i),this._symbolType=r,this._symbolScale=i,this._updateEffectAnimation(t,n,e))},vS._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=this,a=t.getItemLayout(n),o=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),c=W(e.get("delay"),(function(e){return e/t.count()*o/3})),u="function"==typeof c;if(i.ignore=!0,this.updateAnimationPoints(i,a),0<l&&(o=this.getLineLength(i)/l*1e3),o!==this._period||s!==this._loop){i.stopAnimation();var d=c;u&&(d=c(n)),0<i.__t&&(d=-o*i.__t),i.__t=0;var h=i.animate("",s).when(o,{__t:1}).delay(d).during((function(){r.updateSymbolPosition(i)}));s||h.done((function(){r.remove(i)})),h.start()}this._period=o,this._loop=s}},vS.getLineLength=function(t){return mt(t.__p1,t.__cp1)+mt(t.__cp1,t.__p2)},vS.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},vS.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},vS.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t,a=t.position,o=[a[0],a[1]],s=ha,l=fa;a[0]=s(e[0],i[0],n[0],r),a[1]=s(e[1],i[1],n[1],r);var c=l(e[0],i[0],n[0],r),u=l(e[1],i[1],n[1],r);if(t.rotation=-Math.atan2(u,c)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==t.__lastT&&t.__lastT<t.__t){var d=1.05*mt(o,a);t.attr("scale",[t.scale[0],d]),1===r&&(a[0]=o[0]+(a[0]-o[0])/2,a[1]=o[1]+(a[1]-o[1])/2)}else 1===t.__lastT?(d=2*mt(e,a),t.attr("scale",[t.scale[0],d])):t.attr("scale",this._symbolScale);t.__lastT=t.__t,t.ignore=!1},vS.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},C(mS,Sn);var xS=yS.prototype;function bS(t,e,n){mS.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}xS._createPolyline=function(t,e,n){var i=t.getItemLayout(e),r=new Ro({shape:{points:i}});this.add(r),this._updateCommonStl(t,e,n)},xS.updateData=function(t,e,n){var i=t.hostModel;Ys(this.childAt(0),{shape:{points:t.getItemLayout(e)}},i,e),this._updateCommonStl(t,e,n)},xS._updateCommonStl=function(t,e,n){var i=this.childAt(0),r=t.getItemModel(e),a=t.getItemVisual(e,"color"),o=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!t.hasItemOption||(o=r.getModel("lineStyle").getLineStyle(),s=r.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(b({strokeNoScale:!0,fill:"none",stroke:a},o)),i.hoverStyle=s,Ds(this)},xS.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},C(yS,Sn);var wS=bS.prototype;wS.createLine=function(t,e,n){return new yS(t,e,n)},wS.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++)i+=mt(e[r-1],e[r]),n.push(i);if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}},wS.getLineLength=function(t){return this._length},wS.updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var a=this._lastFrame;if(e<this._lastFramePercent){for(o=Math.min(a+1,r-1);0<=o&&!(i[o]<=e);o--);o=Math.min(o,r-2)}else{for(var o=a;o<r&&!(i[o]>e);o++);o=Math.min(o-1,r-2)}xt(t.position,n[o],n[o+1],(e-i[o])/(i[o+1]-i[o])),t.rotation=-Math.atan2(n[o+1][1]-n[o][1],n[o+1][0]-n[o][0])-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},C(bS,mS);var _S=ls({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(var r=0;r<n.length;){var a=n[r++];if(0<a){t.moveTo(n[r++],n[r++]);for(var o=1;o<a;o++)t.lineTo(n[r++],n[r++])}}else for(r=0;r<n.length;){var s=n[r++],l=n[r++],c=n[r++],u=n[r++];t.moveTo(s,l),0<i?t.quadraticCurveTo((s+c)/2-(l-u)*i,(l+u)/2-(c-s)*i,c,u):t.lineTo(c,u)}},findDataIndex:function(t,e){var n=this.shape,i=n.segs,r=n.curveness;if(n.polyline)for(var a=0,o=0;o<i.length;){var s=i[o++];if(0<s)for(var l=i[o++],c=i[o++],u=1;u<s;u++)if(Xa(l,c,d=i[o++],h=i[o++]))return a;a++}else for(a=0,o=0;o<i.length;){l=i[o++],c=i[o++];var d=i[o++],h=i[o++];if(0<r){if(Ga(l,c,(l+d)/2-(c-h)*r,(c+h)/2-(d-l)*r,d,h))return a}else if(Xa(l,c,d,h))return a;a++}return-1}});function SS(){this.group=new Sn}var CS=SS.prototype;CS.isPersistent=function(){return!this._incremental},CS.updateData=function(t){this.group.removeAll();var e=new _S({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},CS.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),5e5<t.count()?(this._incremental||(this._incremental=new Jo({silent:!0})),this.group.add(this._incremental)):this._incremental=null},CS.incrementalUpdate=function(t,e){var n=new _S;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},CS.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},CS._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("color");r&&t.setStyle("stroke",r),t.setStyle("fill"),n||(t.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);0<n&&(t.dataIndex=n+t.__startIndex)})))},CS._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var kS={seriesType:"lines",plan:Yu(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(r,a){var o=[];if(i){var s,l=r.end-r.start;if(n){for(var c=0,u=r.start;u<r.end;u++)c+=t.getLineCoordsCount(u);s=new Float32Array(l+2*c)}else s=new Float32Array(4*l);var d=0,h=[];for(u=r.start;u<r.end;u++){var f=t.getLineCoords(u,o);n&&(s[d++]=f);for(var g=0;g<f;g++)h=e.dataToPoint(o[g],!1,h),s[d++]=h[0],s[d++]=h[1]}a.setLayout("linesPoints",s)}else for(u=r.start;u<r.end;u++){var p=a.getItemModel(u),m=(f=t.getLineCoords(u,o),[]);if(n)for(var v=0;v<f;v++)m.push(e.dataToPoint(o[v]));else{m[0]=e.dataToPoint(o[0]),m[1]=e.dataToPoint(o[1]);var y=p.get("lineStyle.curveness");+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}a.setItemLayout(u,m)}}}}};function AS(t){return t instanceof Array||(t=[t,t]),t}tf({type:"lines",init:function(){},render:function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),a=t.get("zlevel"),o=t.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&o&&(l||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),r.updateData(i);var c=t.get("clip",!0)&&Xp(t.coordinateSystem,!1,t);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var a=kS.reset(t);a.progress&&a.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),a=e.pipelineContext.large;return n&&i===this._hasEffet&&r===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new SS:new Sb(r?i?bS:yS:i?mS:wb),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});var MS="lineStyle.opacity".split("."),TS={seriesType:"lines",reset:function(t,e,n){var i=AS(t.get("symbol")),r=AS(t.get("symbolSize")),a=t.getData();return a.setVisual("fromSymbol",i&&i[0]),a.setVisual("toSymbol",i&&i[1]),a.setVisual("fromSymbolSize",r&&r[0]),a.setVisual("toSymbolSize",r&&r[1]),a.setVisual("opacity",t.get(MS)),{dataEach:a.hasItemOption?function(t,e){var n=t.getItemModel(e),i=AS(n.getShallow("symbol",!0)),r=AS(n.getShallow("symbolSize",!0)),a=n.get(MS);i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1]),t.setItemVisual(e,"opacity",a)}:null}}};function IS(){var t=w();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}jh(kS),qh(TS),Nu.extend({type:"series.heatmap",getInitialData:function(t,e){return Hf(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=Oc.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),IS.prototype={update:function(t,e,n,i,r,a){var o=this._getBrush(),s=this._getGradient(t,r,"inRange"),l=this._getGradient(t,r,"outOfRange"),c=this.pointSize+this.blurSize,u=this.canvas,d=u.getContext("2d"),h=t.length;u.width=e,u.height=n;for(var f=0;f<h;++f){var g=t[f],p=g[0],m=g[1],v=i(g[2]);d.globalAlpha=v,d.drawImage(o,p-c,m-c)}if(!u.width||!u.height)return u;for(var y=d.getImageData(0,0,u.width,u.height),x=y.data,b=0,w=x.length,_=this.minOpacity,S=this.maxOpacity-_;b<w;){v=x[b+3]/256;var C=4*Math.floor(255*v);if(0<v){var k=a(v)?s:l;0<v&&(v=v*S+_),x[b++]=k[C],x[b++]=k[1+C],x[b++]=k[2+C],x[b++]=k[3+C]*v*256}else b+=4}return d.putImageData(y,0,0),u},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=w()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},_getGradient:function(t,e,n){for(var i=this._gradientPixels,r=i[n]||(i[n]=new Uint8ClampedArray(1024)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[n](s/255,!0,a),r[o++]=a[0],r[o++]=a[1],r[o++]=a[2],r[o++]=a[3];return r}},tf({type:"heatmap",render:function(t,e,n){var i;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(i=e)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}(r)&&this._renderOnGeo(r,t,i,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,i){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,i,r){var a,o,s=t.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),c=s.getAxis("y");a=l.getBandWidth(),o=c.getBandWidth()}for(var u=this.group,d=t.getData(),h="emphasis.itemStyle",f="emphasis.label",g=t.getModel("itemStyle").getItemStyle(["color"]),p=t.getModel(h).getItemStyle(),m=t.getModel("label"),v=t.getModel(f),y=s.type,b="cartesian2d"===y?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],w=n;w<i;w++){var _;if("cartesian2d"===y){if(isNaN(d.get(b[2],w)))continue;var S=s.dataToPoint([d.get(b[0],w),d.get(b[1],w)]);_=new Vo({shape:{x:Math.floor(S[0]-a/2),y:Math.floor(S[1]-o/2),width:Math.ceil(a),height:Math.ceil(o)},style:{fill:d.getItemVisual(w,"color"),opacity:d.getItemVisual(w,"opacity")}})}else{if(isNaN(d.get(b[1],w)))continue;_=new Vo({z2:1,shape:s.dataToRect([d.get(b[0],w)]).contentShape,style:{fill:d.getItemVisual(w,"color"),opacity:d.getItemVisual(w,"opacity")}})}var C=d.getItemModel(w);d.hasItemOption&&(g=C.getModel("itemStyle").getItemStyle(["color"]),p=C.getModel(h).getItemStyle(),m=C.getModel("label"),v=C.getModel(f));var k=t.getRawValue(w),A="-";k&&null!=k[2]&&(A=k[2]),Ns(g,p,m,v,{labelFetcher:t,labelDataIndex:w,defaultText:A,isRectText:!0}),_.setStyle(g),Ds(_,d.hasItemOption?p:x({},p)),(_.incremental=r)&&(_.useHoverLayer=!0),u.add(_),d.setItemGraphicEl(w,_)}},_renderOnGeo:function(t,e,n,i){var r=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,o=e.getData(),s=this._hmLayer||this._hmLayer||new IS;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),c=t.getRoamTransform();l.applyTransform(c);var u=Math.max(l.x,0),d=Math.max(l.y,0),h=Math.min(l.width+l.x,i.getWidth()),f=Math.min(l.height+l.y,i.getHeight()),g=h-u,p=f-d,m=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],v=o.mapArray(m,(function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=u,r[1]-=d,r.push(i),r})),y=n.getExtent(),x="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(y,n.option.range):function(t,e,n){var i=t[1]-t[0],r=(e=T(e,(function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}}))).length,a=0;return function(t){for(var i=a;i<r;i++)if((o=e[i].interval)[0]<=t&&t<=o[1]){a=i;break}if(i===r)for(i=a-1;0<=i;i--){var o;if((o=e[i].interval)[0]<=t&&t<=o[1]){a=i;break}}return 0<=i&&i<r&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,g,p,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:a.color.getColorMapper()},x);var b=new Vi({style:{width:g,height:p,x:u,y:d,image:s.canvas},silent:!0});this.group.add(b)},dispose:function(){}});var DS=Xm.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,DS.superApply(this,"getInitialData",arguments)}}),PS=["itemStyle","borderWidth"],LS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],ES=new To;function NS(t,e,n,i){var r=t.getItemLayout(e),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,u=n.isAnimationEnabled(),d={dataIndex:e,layout:r,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:l,animationModel:u?n:null,hoverAnimation:u&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(t,e,n,i,r){var a,o=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(n[o.wh]<=0);if(N(s)){var d=[RS(l,s[0])-c,RS(l,s[1])-c];d[1]<d[0]&&d.reverse(),a=d[u]}else a=null!=s?RS(l,s)-c:e?i.coordSysExtent[o.index][u]-c:n[o.wh];r.boundingLength=a,e&&(r.repeatCutLength=n[o.wh]),r.pxSign=0<a?1:a<0?-1:0}(n,a,r,i,d),function(t,e,n,i,r,a,o,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(n[d.wh]),f=t.getItemVisual(e,"symbolSize");(f=N(f)?f.slice():(null==f&&(f="100%"),[f,f]))[d.index]=gl(f[d.index],h),f[u.index]=gl(f[u.index],i?h:Math.abs(a)),c.symbolSize=f,(c.symbolScale=[f[0]/s,f[1]/s])[u.index]*=(l.isHorizontal?-1:1)*o}(t,e,r,a,0,d.boundingLength,d.pxSign,c,i,d),function(t,e,n,i,r){var a=t.get(PS)||0;a&&(ES.attr({scale:e.slice(),rotation:n}),ES.updateTransform(),a/=ES.getLineScale(),a*=e[i.valueDim.index]),r.valueLineWidth=a}(n,d.symbolScale,l,i,d);var h=d.symbolSize,f=n.get("symbolOffset");return N(f)&&(f=[gl(f[0],h[0]),gl(f[1],h[1])]),function(t,e,n,i,r,a,o,s,l,c,u,d){var h=u.categoryDim,f=u.valueDim,g=d.pxSign,p=Math.max(e[f.index]+s,0),m=p;if(i){var v=Math.abs(l),y=W(t.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1)),y=gl(y,e[f.index]);var w=Math.max(p+2*y,0),_=b?0:2*y,S=Dl(i),C=S?i:KS((v+_)/w);w=p+2*(y=(v-C*p)/2/(b?C:C-1)),_=b?0:2*y,S||"fixed"===i||(C=c?KS((Math.abs(c)+_)/w):0),m=C*w-_,d.repeatTimes=C,d.symbolMargin=y}var k=g*(m/2),A=d.pathPosition=[];A[h.index]=n[h.wh]/2,A[f.index]="start"===o?k:"end"===o?l-k:l/2,a&&(A[0]+=a[0],A[1]+=a[1]);var M=d.bundlePosition=[];M[h.index]=n[h.xy],M[f.index]=n[f.xy];var T=d.barRectShape=x({},n);T[f.wh]=g*Math.max(Math.abs(n[f.wh]),Math.abs(A[f.index]+k)),T[h.wh]=n[h.wh];var I=d.clipShape={};I[h.xy]=-n[h.xy],I[h.wh]=u.ecSize[h.wh],I[f.xy]=0,I[f.wh]=n[f.wh]}(n,h,r,a,0,f,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function RS(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function OS(t){var e=t.symbolPatternSize,n=Gg(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function zS(t,e,n,i){var r=t.__pictorialBundle,a=n.pathPosition,o=e.valueDim,s=n.repeatTimes||0,l=0,c=n.symbolSize[e.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(qS(t,(function(t){t.__pictorialAnimationIndex=l,t.__pictorialRepeatTimes=s,l<s?ZS(t,null,h(l),n,i):ZS(t,null,{scale:[0,0]},n,i,(function(){r.remove(t)})),YS(t,n),l++}));l<s;l++){var u=OS(n);u.__pictorialAnimationIndex=l,u.__pictorialRepeatTimes=s,r.add(u);var d=h(l);ZS(u,{position:d.position,scale:[0,0]},{scale:d.scale,rotation:d.rotation},n,i),u.on("mouseover",f).on("mouseout",g),YS(u,n)}function h(t){var e=a.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?0<i:i<0)&&(r=s-1-t),e[o.index]=c*(r-s/2+.5)+a[o.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}function f(){qS(t,(function(t){t.trigger("emphasis")}))}function g(){qS(t,(function(t){t.trigger("normal")}))}}function BS(t,e,n,i){var r=t.__pictorialBundle,a=t.__pictorialMainPath;a?ZS(a,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(a=t.__pictorialMainPath=OS(n),r.add(a),ZS(a,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),a.on("mouseover",(function(){this.trigger("emphasis")})).on("mouseout",(function(){this.trigger("normal")}))),YS(a,n)}function FS(t,e,n){var i=x({},e.barRectShape),r=t.__pictorialBarRect;r?ZS(r,null,{shape:i},e,n):(r=t.__pictorialBarRect=new Vo({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(r))}function HS(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,a=x({},n.clipShape),o=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)Ys(r,{shape:a},s,l);else{a[o.wh]=0,r=new Vo({shape:a}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var c={};c[o.wh]=n.clipShape[o.wh],el[i?"updateProps":"initProps"](r,{shape:c},s,l)}}}function VS(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=WS,n.isAnimationEnabled=XS,n}function WS(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function XS(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function YS(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",(function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")})).on("normal",(function(){this.animateTo({scale:n.slice()},400,"elasticOut")}))}function GS(t,e,n,i){var r=new Sn,a=new Sn;return r.add(a),(r.__pictorialBundle=a).attr("position",n.bundlePosition.slice()),n.symbolRepeat?zS(r,e,n):BS(r,0,n),FS(r,n,i),HS(r,e,n,i),r.__pictorialShapeStr=jS(t,n),r.__pictorialSymbolMeta=n,r}function US(t,e,n,i){var r=i.__pictorialBarRect;r&&(r.style.text=null);var a=[];qS(i,(function(t){a.push(t)})),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),M(a,(function(t){Ys(t,{scale:[0,0]},n,e,(function(){i.parent&&i.parent.remove(i)}))})),t.setItemGraphicEl(e,null)}function jS(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function qS(t,e,n){M(t.__pictorialBundle.children(),(function(i){i!==t.__pictorialBarRect&&e.call(n,i)}))}function ZS(t,e,n,i,r,a){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&el[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,a)}function $S(t,e,n){var i=n.color,r=n.dataIndex,a=n.itemModel,o=a.getModel("itemStyle").getItemStyle(["color"]),s=a.getModel("emphasis.itemStyle").getItemStyle(),l=a.getShallow("cursor");qS(t,(function(t){t.setColor(i),t.setStyle(b({fill:i,opacity:n.opacity},o)),Ds(t,s),l&&(t.cursor=l),t.z2=n.z2}));var c={},u=t.__pictorialBarRect;Ym(u.style,c,a,i,e.seriesModel,r),Ds(u,c)}function KS(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function JS(t,e,n,i,r){op.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom",this.orient=null}function QS(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(t,e,n),this.model=t}function tC(t,e){e=e||{};var n=t.axis,i={},r=n.position,a=n.orient,o=t.coordinateSystem.getRect(),s=[o.x,o.x+o.width,o.y,o.y+o.height],l={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};i.position=["vertical"===a?l.vertical[r]:s[0],"horizontal"===a?l.horizontal[r]:s[3]],i.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[r],t.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),W(e.labelInside,t.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var c=e.rotate;return null==c&&(c=t.get("axisLabel.rotate")),i.labelRotation="top"===r?-c:c,i.z2=1,i}tf({type:"pictorialBar",render:function(t,e,n){var i=this.group,r=t.getData(),a=this._data,o=t.coordinateSystem,s=!!o.getBaseAxis().isHorizontal(),l=o.grid.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:o,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:LS[+s],categoryDim:LS[1-s]};return r.diff(a).add((function(t){if(r.hasValue(t)){var e=VS(r,t),n=NS(r,t,e,c),a=GS(r,c,n);r.setItemGraphicEl(t,a),i.add(a),$S(a,c,n)}})).update((function(t,e){var n=a.getItemGraphicEl(e);if(r.hasValue(t)){var o=VS(r,t),s=NS(r,t,o,c),l=jS(r,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),r.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var i=n.animationModel,r=n.dataIndex;Ys(t.__pictorialBundle,{position:n.bundlePosition.slice()},i,r),n.symbolRepeat?zS(t,e,n,!0):BS(t,0,n,!0),FS(t,n,!0),HS(t,e,n,!0)}(n,c,s):n=GS(r,c,s,!0),r.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),$S(n,c,s)}else i.remove(n)})).remove((function(t){var e=a.getItemGraphicEl(t);e&&US(a,t,e.__pictorialSymbolMeta.animationModel,e)})).execute(),this._data=r,this.group},dispose:et,remove:function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl((function(e){US(i,e.dataIndex,t,e)})):n.removeAll()}}),jh(E(lg,"pictorialBar")),qh(qp("pictorialBar","roundRect")),JS.prototype={constructor:JS,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},C(JS,op),Oc.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",(function(i,r){var a=new QS(i,t,e);a.name="single_"+r,a.resize(i,e),i.coordinateSystem=a,n.push(a)})),t.eachSeries((function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}})),n},dimensions:(QS.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:QS,_init:function(t,e,n){var i=new JS(this.dimension,Pg(t),[0,0],t.get("type"),t.get("position"));i.onBand="category"===i.type&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),(t.axis=i).model=t,(i.coordinateSystem=this)._axis=i},update:function(t,e){t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();M(e.mapDimension(this.dimension,!0),(function(t){this._axis.scale.unionExtentFromData(e,t)}),this),Dg(this._axis.scale,this._axis.model)}}),this)},resize:function(t,e){this._rect=Ql({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.reverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0==r?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var eC=["axisLine","axisTickLabel","axisName"],nC=["splitArea","splitLine"],iC=Em.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,i){var r=this.group;r.removeAll();var a=this._axisGroup;this._axisGroup=new Sn;var o=tC(t),s=new vm(t,o);M(eC,s.add,s),r.add(this._axisGroup),r.add(s.getGroup()),M(nC,(function(e){t.get(e+".show")&&this["_"+e](t)}),this),Zs(a,this._axisGroup,t),iC.superCall(this,"render",t,e,n,i)},remove:function(){Fm(this)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),i=n.getModel("lineStyle"),r=i.get("width"),a=i.get("color");a=a instanceof Array?a:[a];for(var o=t.coordinateSystem.getRect(),s=e.isHorizontal(),l=[],c=0,u=e.getTicksCoords({tickModel:n}),d=[],h=[],f=0;f<u.length;++f){var g=e.toGlobalCoord(u[f].coord);s?(d[0]=g,d[1]=o.y,h[0]=g,h[1]=o.y+o.height):(d[0]=o.x,d[1]=g,h[0]=o.x+o.width,h[1]=g);var p=c++%a.length;l[p]=l[p]||[],l[p].push(new Xo({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:{lineWidth:r},silent:!0}))}for(f=0;f<l.length;++f)this.group.add(gs(l[f],{style:{stroke:a[f%a.length],lineDash:i.getLineDash(r),lineWidth:r},silent:!0}))}},_splitArea:function(t){Bm(this,this._axisGroup,t,t)}}),rC=lc.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function aC(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var a=n.getData(),o=Er(a,t);if(null==o||o<0||N(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(a.getValues(T(l.dimensions,(function(t){return a.mapDimension(t)})),o,!0))||[];else if(s){var c=s.getBoundingRect().clone();c.applyTransform(s.transform),i=[c.x+c.width/2,c.y+c.height/2]}return{point:i,el:s}}v(rC.prototype,Og),rm("single",rC,(function(t,e){return e.type||(e.data?"category":"value")}),{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var oC=M,sC=E,lC=Nr();function cC(t,e,n,i,r){var a=t.axis;if(!a.scale.isBlank()&&a.containData(e))if(t.involveSeries){var o=function(t,e){var n=e.axis,i=n.dim,r=t,a=[],o=Number.MAX_VALUE,s=-1;return oC(e.seriesModels,(function(e,l){var c,u,d=e.getData().mapDimension(i,!0);if(e.getAxisTooltipData){var h=e.getAxisTooltipData(d,t,n);u=h.dataIndices,c=h.nestestValue}else{if(!(u=e.getData().indicesOfNearest(d[0],t,"category"===n.type?.5:null)).length)return;c=e.getData().get(d[0],u[0])}if(null!=c&&isFinite(c)){var f=t-c,g=Math.abs(f);g<=o&&((g<o||0<=f&&s<0)&&(o=g,s=f,r=c,a.length=0),oC(u,(function(t){a.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})))}})),{payloadBatch:a,snapToValue:r}}(e,t),s=o.payloadBatch,l=o.snapToValue;s[0]&&null==r.seriesIndex&&x(r,s[0]),!i&&t.snap&&a.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,s,r),n.showTooltip(t,o,l)}else n.showPointer(t,e)}function uC(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function dC(t,e,n,i){var r=n.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,c=Lm(l),u=t.map[c];u||(u=t.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function hC(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function fC(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}Kh({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var gC=Nr(),pC=M;function mC(t,e,n){if(!r.node){var i=e.getZr();gC(i).records||(gC(i).records={}),function(t,e){function n(n,i){t.on(n,(function(n){var r=function(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);pC(gC(t).records,(function(t){t&&i(t,n,r.dispatchAction)})),function(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(r.pendings,e)}))}gC(t).initialized||(gC(t).initialized=!0,n("click",E(yC,"click")),n("mousemove",E(yC,"mousemove")),n("globalout",vC))}(i,e),(gC(i).records[t]||(gC(i).records[t]={})).handler=n}}function vC(t,e,n){t.handler("leave",null,n)}function yC(t,e,n,i){e.handler(t,n,i)}function xC(t,e){if(!r.node){var n=e.getZr();(gC(n).records||{})[t]&&(gC(n).records[t]=null)}}var bC=Jh({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";mC("axisPointer",n,(function(t,e,n){"none"!==r&&("leave"===t||0<=r.indexOf(t))&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}))},remove:function(t,e){xC(e.getZr(),"axisPointer"),bC.superApply(this._model,"remove",arguments)},dispose:function(t,e){xC("axisPointer",e),bC.superApply(this._model,"dispose",arguments)}}),wC=Nr(),_C=m,SC=L;function CC(){}function kC(t,e,n,i){!function t(e,n){if(z(e)&&z(n)){var i=!0;return M(n,(function(n,r){i=i&&t(e[r],n)})),!!i}return e===n}(wC(n).lastProp,i)&&(wC(n).lastProp=i,e?Ys(n,i,t):(n.stopAnimation(),n.attr(i)))}function AC(t,e){t[e.get("label.show")?"show":"hide"]()}function MC(t){return{position:t.position.slice(),rotation:t.rotation||0}}function TC(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse((function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)}))}function IC(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}function DC(t,e,n,i,r){var a=PC(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),o=n.getModel("label"),s=Nl(o.get("padding")||0),l=o.getFont(),c=ii(a,l),u=r.position,d=c.width+s[1]+s[3],h=c.height+s[0]+s[2],f=r.align;"right"===f&&(u[0]-=d),"center"===f&&(u[0]-=d/2);var g=r.verticalAlign;"bottom"===g&&(u[1]-=h),"middle"===g&&(u[1]-=h/2),function(t,e,n,i){var r=i.getWidth(),a=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(u,d,h,i);var p=o.get("backgroundColor");p&&"auto"!==p||(p=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:d,height:h,r:o.get("borderRadius")},position:u.slice(),style:{text:a,textFont:l,textFill:o.getTextColor(),textPosition:"inside",textPadding:s,fill:p,stroke:o.get("borderColor")||"transparent",lineWidth:o.get("borderWidth")||0,shadowBlur:o.get("shadowBlur"),shadowColor:o.get("shadowColor"),shadowOffsetX:o.get("shadowOffsetX"),shadowOffsetY:o.get("shadowOffsetY")},z2:10}}function PC(t,e,n,i,r){t=e.scale.parse(t);var a=e.scale.getLabel(t,{precision:r.precision}),o=r.formatter;if(o){var s={value:Eg(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};M(i,(function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=e&&e.getDataParams(t.dataIndexInside);i&&s.seriesData.push(i)})),O(o)?a=o.replace("{value}",a):R(o)&&(a=o(s))}return a}function LC(t,e,n){var i=ne();return se(i,i,n.rotation),oe(i,i,n.position),js([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function EC(t,e,n,i,r,a){var o=vm.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get("label.margin"),DC(e,i,r,a,{position:LC(i.axis,t,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function NC(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function RC(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function OC(t,e,n,i,r,a){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:a,clockwise:!0}}Xr((CC.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var r=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==a){this._lastValue=r,this._lastStatus=a;var o=this._group,s=this._handle;if(!a||"hide"===a)return o&&o.hide(),void(s&&s.hide());o&&o.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,n);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var u=this._moveAnimation=this.determineAnimation(t,e);if(o){var d=E(kC,e,u);this.updatePointerEl(o,l,d,e),this.updateLabelEl(o,l,d,e)}else o=this._group=new Sn,this.createPointerEl(o,l,t,e),this.createLabelEl(o,l,t,e),n.getZr().add(o);TC(o,e,!0),this._renderHandle(r)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,a=e.get("snap");if(!a&&!r)return!1;if("auto"!==n&&null!=n)return!0===n;var o=this.animationThreshold;if(r&&i.getBandWidth()>o)return!0;if(a){var s=Dm(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>o}return!1},makeElOption:function(t,e,n,i,r){},createPointerEl:function(t,e,n,i){var r=e.pointer;if(r){var a=wC(t).pointerEl=new el[r.type](_C(e.pointer));t.add(a)}},createLabelEl:function(t,e,n,i){if(e.label){var r=wC(t).labelEl=new Vo(_C(e.label));t.add(r),AC(r,i)}},updatePointerEl:function(t,e,n){var i=wC(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var r=wC(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{shape:e.label.shape,position:e.label.position}),AC(r,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||"hide"===o)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=Ks(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){Yt(t.event)},onmousedown:SC(this._onHandleDragMove,this,0,0),drift:SC(this._onHandleDragMove,this),ondragend:SC(this._onHandleDragEnd,this)}),i.add(r)),TC(r,n,!1),r.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=a.get("size");N(s)||(s=[s,s]),r.attr("scale",[s[0]/2,s[1]/2]),rd(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){kC(this._axisPointerModel,!e&&this._moveAnimation,this._handle,MC(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(MC(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(MC(i)),wC(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=CC);var zC=CC.extend({makeElOption:function(t,e,n,i,r){var a=n.axis,o=a.grid,s=i.get("type"),l=BC(o,a).getOtherAxis(a).getGlobalExtent(),c=a.toGlobalCoord(a.dataToCoord(e,!0));if(s&&"none"!==s){var u=IC(i),d=FC[s](a,c,l);d.style=u,t.graphicKey=d.type,t.pointer=d}EC(e,t,zm(o.model,n),n,i,r)},getHandleTransform:function(t,e,n){var i=zm(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:LC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var r=n.axis,a=r.grid,o=r.getGlobalExtent(!0),s=BC(a,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,c=t.position;c[l]+=e[l],c[l]=Math.min(o[1],c[l]),c[l]=Math.max(o[0],c[l]);var u=(s[1]+s[0])/2,d=[u,u];return d[l]=c[l],{position:c,rotation:t.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function BC(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var FC={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:NC([e,n[0]],[e,n[1]],HC(t))}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth());return{type:"Rect",shape:RC([e-i/2,n[0]],[i,n[1]-n[0]],HC(t))}}};function HC(t){return"x"===t.dim?0:1}Em.registerAxisPointerClass("CartesianAxisPointer",zC),Xh((function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var e=t.axisPointer.link;e&&!N(e)&&(t.axisPointer.link=[e])}})),Yh(nh.PROCESSOR.STATISTIC,(function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),a=r.get("link",!0)||[],o=[];Mm(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var s=Lm(n.model),l=t.coordSysAxesInfo[s]={},c=(t.coordSysMap[s]=n).model.getModel("tooltip",i);if(Mm(n.getAxes(),Tm(f,!1,null)),n.getTooltipAxes&&i&&c.get("show")){var u="axis"===c.get("trigger"),d="cross"===c.get("axisPointer.type"),h=n.getTooltipAxes(c.get("axisPointer.axis"));(u||d)&&Mm(h.baseAxes,Tm(f,!d||"cross",u)),d&&Mm(h.otherAxes,Tm(f,"cross",!1))}}function f(i,s,u){var d=u.model.getModel("axisPointer",r),h=d.get("show");if(h&&("auto"!==h||i||Pm(d))){null==s&&(s=d.get("triggerTooltip"));var f=(d=i?function(t,e,n,i,r,a){var o=e.getModel("axisPointer"),s={};Mm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(t){s[t]=m(o.get(t))})),s.snap="category"!==t.type&&!!a,"cross"===o.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r){var c=o.get("label.show");if(l.show=null==c||c,!a){var u=s.lineStyle=o.get("crossStyle");u&&b(l,u.textStyle)}}return t.model.getModel("axisPointer",new ll(s,n,i))}(u,c,r,e,i,s):d).get("snap"),g=Lm(u.model),p=s||f||"category"===u.type,v=t.axesInfo[g]={key:g,axis:u,coordSys:n,axisPointerModel:d,triggerTooltip:s,involveSeries:p,snap:f,useHandle:Pm(d),seriesModels:[]};l[g]=v,t.seriesInvolved|=p;var y=function(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var a=t[r]||{};if(Im(a[i+"AxisId"],n.id)||Im(a[i+"AxisIndex"],n.componentIndex)||Im(a[i+"AxisName"],n.name))return r}}(a,u);if(null!=y){var x=o[y]||(o[y]={axesInfo:{}});x.axesInfo[g]=v,x.mapper=a[y].mapper,v.linkGroup=x}}}}))}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries((function(e){var n=e.coordinateSystem,i=e.get("tooltip.trigger",!0),r=e.get("tooltip.show",!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get("axisPointer.show",!0)&&Mm(t.coordSysAxesInfo[Lm(n.model)],(function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())}))}),this)}(n,t),n}(t,e)})),Gh({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},(function(t,e,n){var i=t.currTrigger,r=[t.x,t.y],a=t,o=t.dispatchAction||L(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){fC(r)&&(r=aC({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=fC(r),c=a.axesInfo,u=s.axesInfo,d="leave"===i||fC(r),h={},f={},g={list:[],map:{}},p={showPointer:sC(uC,f),showTooltip:sC(dC,g)};oC(s.coordSysMap,(function(t,e){var n=l||t.containPoint(r);oC(s.coordSysAxesInfo[e],(function(t,e){var i=t.axis,a=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(c,t);if(!d&&n&&(!c||a)){var o=a&&a.value;null!=o||l||(o=i.pointToData(r)),null!=o&&cC(t,o,p,!1,h)}}))}));var m={};return oC(u,(function(t,e){var n=t.linkGroup;n&&!f[e]&&oC(n.axesInfo,(function(e,i){var r=f[i];if(e!==t&&r){var a=r.value;n.mapper&&(a=t.axis.scale.parse(n.mapper(a,hC(e),hC(t)))),m[t.key]=a}}))})),oC(m,(function(t,e){cC(u[e],t,p,!0,h)})),function(t,e,n){var i=n.axesInfo=[];oC(e,(function(e,n){var r=e.axisPointerModel.option,a=t[n];a?(e.useHandle||(r.status="show"),r.value=a.value,r.seriesDataIndices=(a.payloadBatch||[]).slice()):e.useHandle||(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})}))}(f,u,h),function(t,e,n,i){if(fC(e)||!t.list.length)return i({type:"hideTip"});var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}(g,r,t,o),function(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",a=lC(i)[r]||{},o=lC(i)[r]={};oC(t,(function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&oC(n.seriesDataIndices,(function(t){o[t.seriesIndex+" | "+t.dataIndex]=t}))}));var s=[],l=[];M(a,(function(t,e){o[e]||l.push(t)})),M(o,(function(t,e){a[e]||s.push(t)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(u,0,n),h}}));var VC=["x","y"],WC=["width","height"],XC=CC.extend({makeElOption:function(t,e,n,i,r){var a=n.axis,o=a.coordinateSystem,s=UC(o,1-GC(a)),l=o.dataToPoint(e)[0],c=i.get("type");if(c&&"none"!==c){var u=IC(i),d=YC[c](a,l,s);d.style=u,t.graphicKey=d.type,t.pointer=d}EC(e,t,tC(n),n,i,r)},getHandleTransform:function(t,e,n){var i=tC(e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:LC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var r=n.axis,a=r.coordinateSystem,o=GC(r),s=UC(a,o),l=t.position;l[o]+=e[o],l[o]=Math.min(s[1],l[o]),l[o]=Math.max(s[0],l[o]);var c=UC(a,1-o),u=(c[1]+c[0])/2,d=[u,u];return d[o]=l[o],{position:l,rotation:t.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}}}),YC={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:NC([e,n[0]],[e,n[1]],GC(t))}},shadow:function(t,e,n){var i=t.getBandWidth();return{type:"Rect",shape:RC([e-i/2,n[0]],[i,n[1]-n[0]],GC(t))}}};function GC(t){return t.isHorizontal()?0:1}function UC(t,e){var n=t.getRect();return[n[VC[e]],n[VC[e]]+n[WC[e]]]}Em.registerAxisPointerClass("SingleAxisPointer",XC),Jh({type:"single"});var jC=Nu.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){jC.superApply(this,"init",arguments),this.legendVisualProvider=new hv(L(this.getData,this),L(this.getRawData,this))},fixData:function(t){var e=t.length,n=Hr(t,(function(t){return t[2]})),i=[];n.buckets.each((function(t,e){i.push({name:e,dataList:t})}));for(var r=i.length,a=-1,o=-1,s=0;s<r;++s){var l=i[s].dataList.length;a<l&&(a=l,o=s)}for(var c=0;c<r;++c)if(c!==o)for(var u=i[c].name,d=0;d<a;++d){for(var h=i[o].dataList[d][0],f=i[c].dataList.length,g=-1,p=0;p<f;++p)if(i[c].dataList[p][0]===h){g=p;break}-1===g&&(t[e]=[],t[e][0]=h,t[e][1]=0,t[e][2]=u,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=D(t.data,(function(t){return void 0!==t[2]})),r=this.fixData(i||[]),a=[],o=this.nameMap=Q(),s=0,l=0;l<r.length;++l)a.push(r[l][2]),o.get(r[l][2])||(o.set(r[l][2],s),s++);var c=Ef(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:sf(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),u=new xf(c,this);return u.initData(r),u},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var r=t.mapDimension("single"),a=Hr(n,(function(e){return t.get("name",e)})),o=[];return a.buckets.each((function(e,n){e.sort((function(e,n){return t.get(r,e)-t.get(r,n)})),o.push({name:n,indices:e})})),o},getAxisTooltipData:function(t,e,n){N(t)||(t=t?[t]:[]);for(var i,r=this.getData(),a=this.getLayerSeries(),o=[],s=a.length,l=0;l<s;++l){for(var c=Number.MAX_VALUE,u=-1,d=a[l].indices.length,h=0;h<d;++h){var f=r.get(t[0],a[l].indices[h]),g=Math.abs(f-e);g<=c&&(i=f,c=g,u=a[l].indices[h])}o.push(u)}return{dataIndices:o,nestestValue:i}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),i=e.get(e.mapDimension("value"),t);return!isNaN(i)&&null!=i||(i="-"),zl(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function qC(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,a=e.getLayerSeries(),o=t.mapDimension("single"),s=t.mapDimension("value"),l=T(a,(function(e){return T(e.indices,(function(e){var n=r.dataToPoint(t.get(o,e));return n[1]=t.get(s,e),n}))})),c=function(t){for(var e=t.length,n=t[0].length,i=[],r=[],a=0,o={},s=0;s<n;++s){for(var l=0,c=0;l<e;++l)c+=t[l][s][1];a<c&&(a=c),i.push(c)}for(var u=0;u<n;++u)r[u]=(a-i[u])/2;for(var d=a=0;d<n;++d){var h=i[d]+r[d];a<h&&(a=h)}return o.y0=r,o.max=a,o}(l),u=c.y0,d=n/c.max,h=a.length,f=a[0].indices.length,g=0;g<f;++g){t.setItemLayout(a[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:i=u[g]*d,y:l[0][g][1]*d});for(var p=1;p<h;++p)t.setItemLayout(a[p].indices[g],{layerIndex:p,x:l[p][g][0],y0:i+=l[p-1][g][1]*d,y:l[p][g][1]*d})}}function ZC(t,e,n){Sn.call(this);var i=new Do({z2:2});i.seriesIndex=e.seriesIndex;var r=new Ao({z2:4,silent:t.getModel("label").get("silent")});function a(){r.ignore=r.hoverIgnore}function o(){r.ignore=r.normalIgnore}this.add(i),this.add(r),this.updateData(!0,t,"normal",e,n),this.on("emphasis",a).on("normal",o).on("mouseover",a).on("mouseout",o)}tf({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){var i=t.getData(),r=this.group,a=t.getLayerSeries(),o=i.getLayout("layoutInfo");function s(t){return t.name}r.attr("position",[0,o.rect.y+o.boundaryGap[0]]);var l=new nf(this._layersSeries||[],a,s,s),c={};function u(e,n,o){var s=this._layers;if("remove"!==e){for(var l,u,d,h=[],f=[],g=a[n].indices,p=0;p<g.length;p++){var m=i.getItemLayout(g[p]),v=m.x,y=m.y0,b=m.y;h.push([v,y]),f.push([v,y+b]),l=i.getItemVisual(g[p],"color")}var w=i.getItemLayout(g[0]),_=i.getItemModel(g[p-1]),S=_.getModel("label"),C=S.get("margin");if("add"===e){var k=c[n]=new Sn;u=new Hp({shape:{points:h,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),d=new Ao({style:{x:w.x-C,y:w.y0+w.y/2}}),k.add(u),k.add(d),r.add(k),u.setClipPath(function(t,e,n){var i=new Vo({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Gs(i,{shape:{width:t.width+20,height:t.height+20}},e,(function(){u.removeClipPath()})),i}(u.getBoundingRect(),t))}else u=(k=s[o]).childAt(0),d=k.childAt(1),r.add(k),c[n]=k,Ys(u,{shape:{points:h,stackedOnPoints:f}},t),Ys(d,{style:{x:w.x-C,y:w.y0+w.y/2}},t);var A=_.getModel("emphasis.itemStyle"),M=_.getModel("itemStyle");Os(d.style,S,{text:S.get("show")?t.getFormattedLabel(g[p-1],"normal")||i.getName(g[p-1]):null,textVerticalAlign:"middle"}),u.setStyle(x({fill:l},M.getItemStyle(["color"]))),Ds(u,A.getItemStyle())}else r.remove(s[n])}l.add(L(u,this,"add")).update(L(u,this,"update")).remove(L(u,this,"remove")).execute(),this._layersSeries=a,this._layers=c},dispose:function(){}}),jh((function(t,e){t.eachSeriesByType("themeRiver",(function(t){var e=t.getData(),n=t.coordinateSystem,i={},r=n.getRect();i.rect=r;var a=t.get("boundaryGap"),o=n.getAxis();i.boundaryGap=a,"horizontal"===o.orient?(a[0]=gl(a[0],r.height),a[1]=gl(a[1],r.height),qC(e,t,r.height-a[0]-a[1])):(a[0]=gl(a[0],r.width),a[1]=gl(a[1],r.width),qC(e,t,r.width-a[0]-a[1])),e.setLayout("layoutInfo",i)}))})),qh((function(t){t.eachSeriesByType("themeRiver",(function(t){var e=t.getData(),n=t.getRawData(),i=t.get("color"),r=Q();e.each((function(t){r.set(e.getRawIndex(t),t)})),n.each((function(a){var o=n.getName(a),s=i[(t.nameMap.get(o)-1)%i.length];n.setItemVisual(a,"color",s);var l=r.get(a);null!=l&&e.setItemVisual(l,"color",s)}))}))})),Yh(kv("themeRiver")),Nu.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;M(e.children,(function(e){t(e);var i=e.value;N(i)&&(i=i[0]),n+=i}));var i=e.value;N(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),N(e.value)?e.value[0]=i:e.value=i}(n);var i={};return i.levels=t.levels||[],Wy.createTree(n,this,i).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=Nu.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=sx(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var $C=ZC.prototype;$C.updateData=function(t,e,n,i,r){(this.node=e).piece=this,i=i||this._seriesModel,r=r||this._ecModel;var a=this.childAt(0);a.dataIndex=e.dataIndex;var o=e.getModel(),s=e.getLayout(),l=x({},s);l.label=null;var c=function(t,e,n){var i=t.getVisual("color"),r=t.getVisual("visualMeta");r&&0!==r.length||(i=null);var a=t.getModel("itemStyle").get("color");if(a)return a;if(i)return i;if(0===t.depth)return n.option.color[0];var o=n.option.color.length;return n.option.color[function(t){for(var e=t;1<e.depth;)e=e.parentNode;return S(t.getAncestors()[0].children,e)}(t)%o]}(e,0,r);!function(t,e,n){e.getData().setItemVisual(t.dataIndex,"color",n)}(e,i,c);var u,d=o.getModel("itemStyle").getItemStyle();u=b({lineJoin:"bevel",fill:(u="normal"===n?d:v(o.getModel(n+".itemStyle").getItemStyle(),d)).fill||c},u),t?(a.setShape(l),a.shape.r=s.r0,Ys(a,{shape:{r:s.r}},i,e.dataIndex),a.useStyle(u)):"object"==typeof u.fill&&u.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(Ys(a,{shape:l},i),a.useStyle(u)):Ys(a,{shape:l,style:u},i),this._updateLabel(i,c,n);var h=o.getShallow("cursor");if(h&&a.attr("cursor",h),t){var f=i.getShallow("highlightPolicy");this._initEvents(a,e,i,f)}this._seriesModel=i||this._seriesModel,this._ecModel=r||this._ecModel},$C.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode((function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(t,e,n){return"none"!==n&&("self"===n?t===e:"ancestor"===n?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):"none"!==t&&n.piece.childAt(0).trigger("downplay"))}))},$C.onNormal=function(){this.node.hostTree.root.eachNode((function(t){t.piece&&t.piece.updateData(!1,t,"normal")}))},$C.onHighlight=function(){this.updateData(!1,this.node,"highlight")},$C.onDownplay=function(){this.updateData(!1,this.node,"downplay")},$C._updateLabel=function(t,e,n){var i=this.node.getModel(),r=i.getModel("label"),a="normal"===n||"emphasis"===n?r:i.getModel(n+".label"),o=i.getModel("emphasis.label"),s=W(t.getFormattedLabel(this.node.dataIndex,n,null,null,"label"),this.node.name);!1===b("show")&&(s="");var l=this.node.getLayout(),c=a.get("minAngle");null==c&&(c=r.get("minAngle")),null!=(c=c/180*Math.PI)&&Math.abs(l.endAngle-l.startAngle)<c&&(s="");var u=this.childAt(1);Ns(u.style,u.hoverStyle||{},r,o,{defaultText:a.getShallow("show")?s:null,autoColor:e,useInsideStyle:!0});var d,h=(l.startAngle+l.endAngle)/2,f=Math.cos(h),g=Math.sin(h),p=b("position"),m=b("distance")||0,v=b("align");"outside"===p?(d=l.r+m,v=h>Math.PI/2?"right":"left"):v&&"center"!==v?"left"===v?(d=l.r0+m,h>Math.PI/2&&(v="right")):"right"===v&&(d=l.r-m,h>Math.PI/2&&(v="left")):(d=(l.r+l.r0)/2,v="center"),u.attr("style",{text:s,textAlign:v,textVerticalAlign:b("verticalAlign")||"middle",opacity:b("opacity")}),u.attr("position",[d*f+l.cx,d*g+l.cy]);var y=b("rotate"),x=0;function b(t){var e=a.get(t);return null==e?r.get(t):e}"radial"===y?(x=-h)<-Math.PI/2&&(x+=Math.PI):"tangential"===y?(x=Math.PI/2-h)>Math.PI/2?x-=Math.PI:x<-Math.PI/2&&(x+=Math.PI):"number"==typeof y&&(x=y*Math.PI/180),u.attr("rotation",x)},$C._initEvents=function(t,e,n,i){function r(){o.onEmphasis(i)}function a(){o.onNormal()}t.off("mouseover").off("mouseout").off("emphasis").off("normal");var o=this;n.isAnimationEnabled()&&t.on("mouseover",r).on("mouseout",a).on("emphasis",r).on("normal",a).on("downplay",(function(){o.onDownplay()})).on("highlight",(function(){o.onHighlight()}))},C(ZC,Sn),ju.extend({type:"sunburst",init:function(){},render:function(t,e,n,i){var r=this;this.seriesModel=t,this.api=n,this.ecModel=e;var a=t.getData(),o=a.tree.root,s=t.getViewRoot(),l=this.group,c=t.get("renderLabelForZeroData"),u=[];if(s.eachNode((function(t){u.push(t)})),function(n,i){function r(t){return t.getId()}function s(r,s){!function(n,i){if(c||!n||n.getValue()||(n=null),n!==o&&i!==o)if(i&&i.piece)n?(i.piece.updateData(!1,n,"normal",t,e),a.setItemGraphicEl(n.dataIndex,i.piece)):function(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}(i);else if(n){var r=new ZC(n,t,e);l.add(r),a.setItemGraphicEl(n.dataIndex,r)}}(null==r?null:n[r],null==s?null:i[s])}0===n.length&&0===i.length||new nf(i,n,r,r).add(s).update(s).remove(E(s,null)).execute()}(u,this._oldChildren||[]),function(n,i){if(0<i.depth){r.virtualPiece?r.virtualPiece.updateData(!1,n,"normal",t,e):(r.virtualPiece=new ZC(n,t,e),l.add(r.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var a=function(t){r._rootToNode(i.parentNode)};i.piece._onclickEvent=a,r.virtualPiece.on("click",a)}else r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null)}(o,s),i&&i.highlight&&i.highlight.piece){var d=t.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(d)}else if(i&&i.unhighlight){var h=this.virtualPiece;!h&&o.children.length&&(h=o.children[0].piece),h&&h.onNormal()}this._initEvents(),this._oldChildren=u},dispose:function(){},_initEvents:function(){function t(t){var n=!1;e.seriesModel.getViewRoot().eachNode((function(i){if(!n&&i.piece&&i.piece.childAt(0)===t.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)e._rootToNode(i);else if("link"===r){var a=i.getModel(),o=a.get("link");if(o){var s=a.get("target",!0)||"_blank";window.open(o,s)}}n=!0}}))}var e=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}}});var KC="sunburstRootToNode";Gh({type:KC,update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){var i=rx(t,[KC],e);if(i){var r=e.getViewRoot();r&&(t.direction=ox(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))}));var JC="sunburstHighlight";Gh({type:JC,update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){var i=rx(t,[JC],e);i&&(t.highlight=i.node)}))})),Gh({type:"sunburstUnhighlight",update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){t.unhighlight=!0}))}));var QC=Math.PI/180;function tk(t,e){return e=e||[0,0],T(["x","y"],(function(n,i){var r=this.getAxis(n),a=e[i],o=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(a-o)-r.dataToCoord(a+o))}),this)}function ek(t,e){return e=e||[0,0],T([0,1],(function(n){var i=e[n],r=t[n]/2,a=[],o=[];return a[n]=i-r,o[n]=i+r,a[1-n]=o[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(o)[n])}),this)}function nk(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function ik(t,e){return T(["Radius","Angle"],(function(n,i){var r=this["get"+n+"Axis"](),a=e[i],o=t[i]/2,s="dataTo"+n,l="category"===r.type?r.getBandWidth():Math.abs(r[s](a-o)-r[s](a+o));return"Angle"===n&&(l=l*Math.PI/180),l}),this)}qh(E(xv,"sunburst")),jh(E((function(t,e,n,i){e.eachSeriesByType(t,(function(t){var e=t.get("center"),i=t.get("radius");N(i)||(i=[0,i]),N(e)||(e=[e,e]);var r=n.getWidth(),a=n.getHeight(),o=Math.min(r,a),s=gl(e[0],r),l=gl(e[1],a),c=gl(i[0],o/2),u=gl(i[1],o/2),d=-t.get("startAngle")*QC,h=t.get("minAngle")*QC,f=t.getData().tree.root,g=t.getViewRoot(),p=g.depth,m=t.get("sort");null!=m&&function t(e,n){var i=e.children||[];e.children=function(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort((function(t,e){var i=(t.getValue()-e.getValue())*(n?1:-1);return 0==i?(t.dataIndex-e.dataIndex)*(n?-1:1):i}))}(i,n),i.length&&M(e.children,(function(e){t(e,n)}))}(g,m);var v=0;M(g.children,(function(t){isNaN(t.getValue())||v++}));var y=g.getValue(),x=Math.PI/(y||v)*2,b=0<g.depth,w=(u-c)/(g.height-(b?-1:1)||1),_=t.get("clockwise"),S=t.get("stillShowZeroSum"),C=_?1:-1,k=function(t,e){if(t){var n=e;if(t!==f){var i=t.getValue(),r=0===y&&S?x:i*x;r<h&&(r=h),n=e+C*r;var a=t.depth-p-(b?-1:1),u=c+w*a,d=c+w*(1+a),g=t.getModel();null!=g.get("r0")&&(u=gl(g.get("r0"),o/2)),null!=g.get("r")&&(d=gl(g.get("r"),o/2)),t.setLayout({angle:r,startAngle:e,endAngle:n,clockwise:_,cx:s,cy:l,r0:u,r:d})}if(t.children&&t.children.length){var m=0;M(t.children,(function(t){m+=k(t,e+m)}))}return n-e}};if(b){var A=2*Math.PI;f.setLayout({angle:A,startAngle:d,endAngle:d+A,clockwise:_,cx:s,cy:l,r0:c,r:c+w})}k(g,d)}))}),"sunburst")),Yh(E(kv,"sunburst"));var rk=is,ak=["itemStyle"],ok=["emphasis","itemStyle"],sk=["label"],lk=["emphasis","label"],ck={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:L(tk,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:L(ek,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:L(nk,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:L((function(i){var r=e.dataToRadius(i[0]),a=n.dataToAngle(i[1]),o=t.coordToPoint([r,a]);return o.push(r,a*Math.PI/180),o})),size:L(ik,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};function uk(t,e,n,i,r){null==n[t]||r||(e[t]=n[t],n[t]=i[t])}function dk(t,e,n,i){var r=t.get("renderItem"),a=t.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms():ck[a.type](a));var s,l,c,u,d,h=b({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(t,n){return null==n&&(n=s),e.get(e.getDimension(t||0),n)},style:function(n,i){null==i&&(i=s),p(i);var r=l.getModel(ak).getItemStyle();null!=d&&(r.fill=d);var a=e.getItemVisual(i,"opacity");null!=a&&(r.opacity=a);var o=n?mk(n,c):c;return Os(r,o,null,{autoColor:d,isRectText:!0}),r.text=o.getShallow("show")?X(t.getFormattedLabel(i,"normal"),dp(e,i)):null,n&&vk(r,n),r},styleEmphasis:function(n,i){null==i&&(i=s),p(i);var r=l.getModel(ok).getItemStyle(),a=n?mk(n,u):u;return Os(r,a,null,{isRectText:!0},!0),r.text=a.getShallow("show")?Y(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),dp(e,i)):null,n&&vk(r,n),r},visual:function(t,n){return null==n&&(n=s),e.getItemVisual(n,t)},barLayout:function(t){if(a.getBaseAxis)return function(t){var e=[],n=t.axis;if("category"===n.type){for(var i=n.getBandWidth(),r=0;r<t.count;r++)e.push(b({bandWidth:i,axisKey:"axis0",stackId:tg+r},t));var a=og(e),o=[];for(r=0;r<t.count;r++){var s=a.axis0[tg+r];s.offsetCenter=s.offset+s.width/2,o.push(s)}return o}}(b({axis:a.getBaseAxis()},t))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return Ws(t,n)}},o.api||{}),f={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:function(t){var e={};return M(t.dimensions,(function(n,i){var r=t.getDimensionInfo(n);if(!r.isExtraCoord){var a=r.coordDim;(e[a]=e[a]||[])[r.coordDimIndex]=i}})),e}(t.getData())},g=!0;return function(t,n){return s=t,g=!0,r&&r(b({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},f),h)};function p(t){null==t&&(t=s),g&&(l=e.getItemModel(t),c=l.getModel(sk),u=l.getModel(lk),d=e.getItemVisual(t,"color"),g=!1)}}function hk(t,e,n,i,r,a){return(t=fk(t,e,n,i,r,a,!0))&&a.setItemGraphicEl(e,t),t}function fk(t,e,n,i,r,a,o){var s=!n,l=(n=n||{}).type,c=n.shape,u=n.style;if(t&&(s||null!=l&&l!==t.__customGraphicType||"path"===l&&function(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}(c)&&xk(c)!==t.__customPathData||"image"===l&&bk(u,"image")&&u.image!==t.__customImagePath||"text"===l&&bk(c,"text")&&u.text!==t.__customText)&&(r.remove(t),t=null),!s){var d=!t;return function(t,e,n,i,r,a,o){var s={},l=n.style||{};if(n.shape&&(s.shape=m(n.shape)),n.position&&(s.position=n.position.slice()),n.scale&&(s.scale=n.scale.slice()),n.origin&&(s.origin=n.origin.slice()),n.rotation&&(s.rotation=n.rotation),"image"===t.type&&n.style){var c=s.style={};M(["x","y","width","height"],(function(e){uk(e,c,l,t.style,a)}))}if("text"===t.type&&n.style&&(c=s.style={},M(["x","y"],(function(e){uk(e,c,l,t.style,a)})),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)),"group"!==t.type&&(t.useStyle(l),a)){t.style.opacity=0;var u=l.opacity;null==u&&(u=1),Gs(t,{style:{opacity:u}},i,e)}a?t.attr(s):Ys(t,s,i,e),n.hasOwnProperty("z2")&&t.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&t.attr("silent",n.silent),n.hasOwnProperty("invisible")&&t.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&t.attr("ignore",n.ignore),n.hasOwnProperty("info")&&t.attr("info",n.info);var d=n.styleEmphasis;Cs(t,d),o&&Ps(t,!1!==d)}(t=t||function(t){var e,n=t.type;if("path"===n){var i=t.shape,r=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,a=xk(i);(e=ds(a,null,r,i.layout||"center")).__customPathData=a}else if("image"===n)(e=new Vi({})).__customImagePath=t.style.image;else if("text"===n)(e=new Ao({})).__customText=t.style.text;else if("group"===n)e=new Sn;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');e=new(us(n))}return e.__customGraphicType=n,e.name=t.name,e}(n),e,n,i,0,d,o),"group"===l&&function(t,e,n,i,r){var a=n.children,o=a?a.length:0,s=n.$mergeChildren,l="byName"===s||n.diffChildrenByName,c=!1===s;if(o||l||c){if(l)return function(t){new nf(t.oldChildren,t.newChildren,gk,gk,t).add(pk).update(pk).remove(yk).execute()}({oldChildren:t.children()||[],newChildren:a||[],dataIndex:e,animatableModel:i,group:t,data:r});c&&t.removeAll();for(var u=0;u<o;u++)a[u]&&fk(t.childAt(u),e,a[u],i,t,r)}}(t,e,n,i,a),r.add(t),t}}function gk(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function pk(t,e){var n=this.context;fk(null!=e?n.oldChildren[e]:null,n.dataIndex,null!=t?n.newChildren[t]:null,n.animatableModel,n.group,n.data)}function mk(t,e){var n=new ll({},e);return M(rk,(function(e,i){t.hasOwnProperty(e)&&(n.option[i]=t[e])})),n}function vk(t,e){for(var n in e)!e.hasOwnProperty(n)&&rk.hasOwnProperty(n)||(t[n]=e[n])}function yk(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function xk(t){return t&&(t.pathData||t.d)}function bk(t,e){return t&&t.hasOwnProperty(e)}function wk(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function _k(t,e){return e.dim+t.model.componentIndex}function Sk(t,e){op.call(this,"radius",t,e),this.type="category"}Nu.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(t,e){return Hf(this.getSource(),this)},getDataParams:function(t,e,n){var i=Nu.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),ju.extend({type:"custom",_data:null,render:function(t,e,n,i){var r=this._data,a=t.getData(),o=this.group,s=dk(t,a,e,n);a.diff(r).add((function(e){hk(null,e,s(e,i),t,o,a)})).update((function(e,n){hk(r.getItemGraphicEl(n),e,s(e,i),t,o,a)})).remove((function(t){var e=r.getItemGraphicEl(t);e&&o.remove(e)})).execute();var l=t.get("clip",!0)?Xp(t.coordinateSystem,!1,t):null;l?o.setClipPath(l):o.removeClipPath(),this._data=a},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,i,r){var a=e.getData(),o=dk(e,a,n,i);function s(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)}for(var l=t.start;l<t.end;l++)hk(null,l,o(l,r),e,this.group,a).traverse(s)},dispose:et,filterForExposedEvent:function(t,e,n,i){var r=e.element;if(null==r||n.name===r)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===r)return!0;return!1}}),Sk.prototype={constructor:Sk,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:op.prototype.dataToCoord,radiusToData:op.prototype.coordToData},C(Sk,op);var Ck=Nr();function kk(t,e){op.call(this,"angle",t,e=e||[0,360]),this.type="category"}function Ak(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new Sk,this._angleAxis=new kk,this._radiusAxis.polar=this._angleAxis.polar=this}kk.prototype={constructor:kk,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:op.prototype.dataToCoord,angleToData:op.prototype.coordToData,calculateCategoryInterval:function(){var t=this.getLabelModel(),e=this.scale,n=e.getExtent(),i=e.count();if(n[1]-n[0]<1)return 0;var r=n[0],a=this.dataToCoord(r+1)-this.dataToCoord(r),o=Math.abs(a),s=ii(r,t.getFont(),"center","top"),l=Math.max(s.height,7)/o;isNaN(l)&&(l=1/0);var c=Math.max(0,Math.floor(l)),u=Ck(this.model),d=u.lastAutoInterval,h=u.lastTickCount;return null!=d&&null!=h&&Math.abs(d-c)<=1&&Math.abs(h-i)<=1&&c<d?c=d:(u.lastTickCount=i,u.lastAutoInterval=c),c}},C(kk,op),Ak.prototype={type:"polar",axisPointerEnabled:!0,constructor:Ak,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),a=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);i.inverse?a=o-360:o=a+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,c=l<a?1:-1;l<a||o<l;)l+=360*c;return[s,l]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},getArea:function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,r=n*n+i*i,a=this.r,o=this.r0;return r<=a*a&&o*o<=r}}}};var Mk=lc.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function Tk(t,e){return e.type||(e.data?"category":"value")}function Ik(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries((function(t){if(t.coordinateSystem===n){var e=t.getData();M(e.mapDimension("radius",!0),(function(t){r.scale.unionExtentFromData(e,Ff(e,t))})),M(e.mapDimension("angle",!0),(function(t){i.scale.unionExtentFromData(e,Ff(e,t))}))}})),Dg(i.scale,i.model),Dg(r.scale,r.model),"category"===i.type&&!i.onBand){var a=i.getExtent(),o=360/i.scale.count();i.inverse?a[1]+=o:a[1]-=o,i.setExtent(a[0],a[1])}}function Dk(t,e){if(t.type=e.get("type"),t.scale=Pg(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}(e.axis=t).model=e}v(Mk.prototype,Og),rm("angle",Mk,Tk,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),rm("radius",Mk,Tk,{splitNumber:5}),Kh({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,(function(t){t.getCoordSysModel()===this&&(e=t)}),this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),Oc.register("polar",{dimensions:Ak.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",(function(t,i){var r=new Ak(i);r.update=Ik;var a=r.getRadiusAxis(),o=r.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");Dk(a,s),Dk(o,l),function(t,e,n){var i=e.get("center"),r=n.getWidth(),a=n.getHeight();t.cx=gl(i[0],r),t.cy=gl(i[1],a);var o=t.getRadiusAxis(),s=Math.min(r,a)/2,l=e.get("radius");null==l?l=[0,"100%"]:N(l)||(l=[0,l]),l=[gl(l[0],s),gl(l[1],s)],o.inverse?o.setExtent(l[1],l[0]):o.setExtent(l[0],l[1])}(r,t,e),n.push(r),(t.coordinateSystem=r).model=t})),t.eachSeries((function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}})),n}});var Pk=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Lk(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function Ek(t){return t.getRadiusAxis().inverse?0:1}function Nk(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}Em.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),a=n.getTicksCoords(),o=n.getMinorTicksCoords(),s=T(n.getViewLabels(),(function(t){return(t=m(t)).coord=n.dataToCoord(t.tickValue),t}));Nk(s),Nk(a),M(Pk,(function(e){!t.get(e+".show")||n.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,i,a,o,r,s)}),this)}},_axisLine:function(t,e,n,i,r){var a,o=t.getModel("axisLine.lineStyle"),s=Ek(e),l=s?0:1;(a=0===r[l]?new To({shape:{cx:e.cx,cy:e.cy,r:r[s]},style:o.getLineStyle(),z2:1,silent:!0}):new Po({shape:{cx:e.cx,cy:e.cy,r:r[s],r0:r[l]},style:o.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(a)},_axisTick:function(t,e,n,i,r){var a=t.getModel("axisTick"),o=(a.get("inside")?-1:1)*a.get("length"),s=r[Ek(e)],l=T(n,(function(t){return new Xo({shape:Lk(e,[s,s+o],t.coord)})}));this.group.add(gs(l,{style:b(a.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_minorTick:function(t,e,n,i,r){if(i.length){for(var a=t.getModel("axisTick"),o=t.getModel("minorTick"),s=(a.get("inside")?-1:1)*o.get("length"),l=r[Ek(e)],c=[],u=0;u<i.length;u++)for(var d=0;d<i[u].length;d++)c.push(new Xo({shape:Lk(e,[l,l+s],i[u][d].coord)}));this.group.add(gs(c,{style:b(o.getModel("lineStyle").getLineStyle(),b(a.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(t,e,n,i,r,a){var o=t.getCategories(!0),s=t.getModel("axisLabel"),l=s.get("margin"),c=t.get("triggerEvent");M(a,(function(n,i){var a=s,u=n.tickValue,d=r[Ek(e)],h=e.coordToPoint([d+l,n.coord]),f=e.cx,g=e.cy,p=Math.abs(h[0]-f)/d<.3?"center":h[0]>f?"left":"right",m=Math.abs(h[1]-g)/d<.3?"middle":h[1]>g?"top":"bottom";o&&o[u]&&o[u].textStyle&&(a=new ll(o[u].textStyle,s,s.ecModel));var v=new Ao({silent:vm.isLabelSilent(t)});this.group.add(v),Os(v.style,a,{x:h[0],y:h[1],textFill:a.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:p,textVerticalAlign:m}),c&&(v.eventData=vm.makeAxisEventDataBase(t),v.eventData.targetType="axisLabel",v.eventData.value=n.rawLabel)}),this)},_splitLine:function(t,e,n,i,r){var a=t.getModel("splitLine").getModel("lineStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],c=0;c<n.length;c++){var u=s++%o.length;l[u]=l[u]||[],l[u].push(new Xo({shape:Lk(e,r,n[c].coord)}))}for(c=0;c<l.length;c++)this.group.add(gs(l[c],{style:b({stroke:o[c%o.length]},a.getLineStyle()),silent:!0,z:t.get("z")}))},_minorSplitLine:function(t,e,n,i,r){if(i.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),o=[],s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)o.push(new Xo({shape:Lk(e,r,i[s][l].coord)}));this.group.add(gs(o,{style:a.getLineStyle(),silent:!0,z:t.get("z")}))}},_splitArea:function(t,e,n,i,r){if(n.length){var a=t.getModel("splitArea").getModel("areaStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],c=Math.PI/180,u=-n[0].coord*c,d=Math.min(r[0],r[1]),h=Math.max(r[0],r[1]),f=t.get("clockwise"),g=1;g<n.length;g++){var p=s++%o.length;l[p]=l[p]||[],l[p].push(new Do({shape:{cx:e.cx,cy:e.cy,r0:d,r:h,startAngle:u,endAngle:-n[g].coord*c,clockwise:f},silent:!0})),u=-n[g].coord*c}for(g=0;g<l.length;g++)this.group.add(gs(l[g],{style:b({fill:o[g%o.length]},a.getAreaStyle()),silent:!0}))}}});var Rk=["axisLine","axisTickLabel","axisName"],Ok=["splitLine","splitArea","minorSplitLine"];Em.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getAngleAxis(),a=n.getTicksCoords(),o=n.getMinorTicksCoords(),s=r.getExtent()[0],l=n.getExtent(),c=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(i,t,s),u=new vm(t,c);M(Rk,u.add,u),this.group.add(u.getGroup()),M(Ok,(function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,i,s,l,a,o)}),this)}},_splitLine:function(t,e,n,i,r){var a=t.getModel("splitLine").getModel("lineStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],c=0;c<r.length;c++){var u=s++%o.length;l[u]=l[u]||[],l[u].push(new To({shape:{cx:e.cx,cy:e.cy,r:r[c].coord}}))}for(c=0;c<l.length;c++)this.group.add(gs(l[c],{style:b({stroke:o[c%o.length],fill:null},a.getLineStyle()),silent:!0}))},_minorSplitLine:function(t,e,n,i,r,a){if(a.length){for(var o=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<a.length;l++)for(var c=0;c<a[l].length;c++)s.push(new To({shape:{cx:e.cx,cy:e.cy,r:a[l][c].coord}}));this.group.add(gs(s,{style:b({fill:null},o.getLineStyle()),silent:!0}))}},_splitArea:function(t,e,n,i,r){if(r.length){var a=t.getModel("splitArea").getModel("areaStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],c=r[0].coord,u=1;u<r.length;u++){var d=s++%o.length;l[d]=l[d]||[],l[d].push(new Do({shape:{cx:e.cx,cy:e.cy,r0:c,r:r[u].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=r[u].coord}for(u=0;u<l.length;u++)this.group.add(gs(l[u],{style:b({fill:o[u%o.length]},a.getAreaStyle()),silent:!0}))}}});var zk=CC.extend({makeElOption:function(t,e,n,i,r){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var o,s=a.polar,l=s.getOtherAxis(a).getExtent();o=a["dataTo"+Gl(a.dim)](e);var c=i.get("type");if(c&&"none"!==c){var u=IC(i),d=Bk[c](a,s,o,l,u);d.style=u,t.graphicKey=d.type,t.pointer=d}var h=i.get("label.margin");DC(t,n,i,r,function(t,e,n,i,r){var a=e.axis,o=a.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,c,u,d=i.getRadiusAxis().getExtent();if("radius"===a.dim){var h=ne();se(h,h,s),oe(h,h,[i.cx,i.cy]),l=js([o,-r],h);var f=e.getModel("axisLabel").get("rotate")||0,g=vm.innerTextLayout(s,f*Math.PI/180,-1);c=g.textAlign,u=g.textVerticalAlign}else{var p=d[1];l=i.coordToPoint([p+r,o]);var m=i.cx,v=i.cy;c=Math.abs(l[0]-m)/p<.3?"center":l[0]>m?"left":"right",u=Math.abs(l[1]-v)/p<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:c,verticalAlign:u}}(e,n,0,s,h))}}),Bk={line:function(t,e,n,i,r){return"angle"===t.dim?{type:"Line",shape:NC(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i,r){var a=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:OC(e.cx,e.cy,i[0],i[1],(-n-a/2)*o,(a/2-n)*o)}:{type:"Sector",shape:OC(e.cx,e.cy,n-a/2,n+a/2,0,2*Math.PI)}}};function Fk(t,e){e.update="updateView",Gh(e,(function(e,n){var i={};return n.eachComponent({mainType:"geo",query:e},(function(n){n[t](e.name),M(n.coordinateSystem.regions,(function(t){i[t.name]=n.isSelected(t.name)||!1}))})),{selected:i,name:e.name}}))}function Hk(t,e,n){this._model=t}function Vk(t,e,n,i){var r=n.calendarModel,a=n.seriesModel,o=r?r.coordinateSystem:a?a.coordinateSystem:null;return o===this?o[t](i):null}Em.registerAxisPointerClass("PolarAxisPointer",zk),jh(E((function(t,e,n){var i={},r=function(t){var e={};M(t,(function(t,n){var i=t.getData(),r=t.coordinateSystem,a=r.getBaseAxis(),o=_k(r,a),s=a.getExtent(),l="category"===a.type?a.getBandWidth():Math.abs(s[1]-s[0])/i.count(),c=e[o]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=c.stacks;e[o]=c;var d=wk(t);u[d]||c.autoWidthCount++,u[d]=u[d]||{width:0,maxWidth:0};var h=gl(t.get("barWidth"),l),f=gl(t.get("barMaxWidth"),l),g=t.get("barGap"),p=t.get("barCategoryGap");h&&!u[d].width&&(h=Math.min(c.remainedWidth,h),u[d].width=h,c.remainedWidth-=h),f&&(u[d].maxWidth=f),null!=g&&(c.gap=g),null!=p&&(c.categoryGap=p)}));var n={};return M(e,(function(t,e){n[e]={};var i=t.stacks,r=gl(t.categoryGap,t.bandWidth),a=gl(t.gap,1),o=t.remainedWidth,s=t.autoWidthCount,l=(o-r)/(s+(s-1)*a);l=Math.max(l,0),M(i,(function(t,e){var n=t.maxWidth;n&&n<l&&(n=Math.min(n,o),t.width&&(n=Math.min(n,t.width)),o-=n,t.width=n,s--)})),l=(o-r)/(s+(s-1)*a),l=Math.max(l,0);var c,u=0;M(i,(function(t,e){t.width||(t.width=l),u+=(c=t).width*(1+a)})),c&&(u-=c.width*a);var d=-u/2;M(i,(function(t,i){n[e][i]=n[e][i]||{offset:d,width:t.width},d+=t.width*(1+a)}))})),n}(D(e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type})));e.eachSeriesByType(t,(function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),o=_k(n,a),s=wk(t),l=r[o][s],c=l.offset,u=l.width,d=n.getOtherAxis(a),h=t.coordinateSystem.cx,f=t.coordinateSystem.cy,g=t.get("barMinHeight")||0,p=t.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=e.mapDimension(d.dim),v=e.mapDimension(a.dim),y=Bf(e,m),x="radius"!==a.dim||!t.get("roundCap",!0),b=d.getExtent()[0],w=0,_=e.count();w<_;w++){var S,C,k,A,M=e.get(m,w),T=e.get(v,w),I=0<=M?"p":"n",D=b;if(y&&(i[s][T]||(i[s][T]={p:b,n:b}),D=i[s][T][I]),"radius"===d.dim){var P=d.dataToRadius(M)-b,L=a.dataToAngle(T);Math.abs(P)<g&&(P=(P<0?-1:1)*g),C=(S=D)+P,A=(k=L-c)-u,y&&(i[s][T][I]=C)}else{var E=d.dataToAngle(M,x)-b,N=a.dataToRadius(T);Math.abs(E)<p&&(E=(E<0?-1:1)*p),C=(S=N+c)+u,A=(k=D)+E,y&&(i[s][T][I]=A)}e.setItemLayout(w,{cx:h,cy:f,r0:S,r:C,startAngle:-k*Math.PI/180,endAngle:-A*Math.PI/180})}}}),this)}),"bar")),Jh({type:"polar"}),k(lc.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){lc.prototype.init.apply(this,arguments),Ar(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=Dy.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=I(t.regions||[],(function(t,n){return n.name&&t.set(n.name,new ll(n,e)),t}),Q()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new ll(null,this,this.ecModel)},getFormattedLabel:function(t,e){var n=this.getRegionModel(t).get("label"+("normal"===e?".":e+".")+"formatter"),i={name:t};return"function"==typeof n?(i.status=e,n(i)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}}),dv),Jh({type:"geo",init:function(t,e){var n=new my(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var r=this._mapDraw;t.get("show")?r.draw(t,e,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),Fk("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),Fk("select",{type:"geoSelect",event:"geoselected"}),Fk("unSelect",{type:"geoUnSelect",event:"geounselected"}),Hk.prototype={constructor:Hk,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=kl(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var r=t.getDay();return{y:e,m:n,d:i,day:r=Math.abs((r+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],r=this._model.get("cellSize").slice(),a=this._model.getBoxLayoutParams(),o="horizontal"===this._orient?[n,7]:[7,n];M([0,1],(function(t){c(r,t)&&(a[i[t]]=r[t]*o[t])}));var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=Ql(a,s);function c(t,e){return null!=t[e]&&"auto"!==t[e]}M([0,1],(function(t){c(r,t)||(r[t]=l[i[t]]/o[t])})),this._sw=r[0],this._sh=r[1]},dataToPoint:function(t,e){N(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var r=n.day,a=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},convertToPixel:E(Vk,"dataToPoint"),convertFromPixel:E(Vk,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(N(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);t=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,i=new Date(t[0].time),r=i.getDate(),a=t[1].date.getDate();if(i.setDate(r+n-1),i.getDate()!==a)for(var o=0<i.getTime()-t[1].time?1:-1;i.getDate()!==a&&0<(i.getTime()-t[1].time)*o;)i.setDate(r+(n-=o)-1);var s=Math.floor((n+t[0].day+6)/7),l=e?1-s:s-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:s,nthWeek:l,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return!1;var r=7*(t-1)-i.fweek+e,a=new Date(i.start.time);return a.setDate(i.start.d+r),this.getDateInfo(a)}},Hk.dimensions=Hk.prototype.dimensions,Hk.getDimensionsInfo=Hk.prototype.getDimensionsInfo,Hk.create=function(t,e){var n=[];return t.eachComponent("calendar",(function(i){var r=new Hk(i,t,e);n.push(r),i.coordinateSystem=r})),t.eachSeries((function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])})),n},Oc.register("calendar",Hk);var Wk=lc.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,i){var r=nc(t);Wk.superApply(this,"init",arguments),Xk(t,r)},mergeOption:function(t,e){Wk.superApply(this,"mergeOption",arguments),Xk(this.option,t)}});function Xk(t,e){var n=t.cellSize;N(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var i=T([0,1],(function(t){return function(t,e){return null!=t[$l[e][0]]||null!=t[$l[e][1]]&&null!=t[$l[e][2]]}(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]}));ec(t,e,{type:"box",ignoreSize:i})}var Yk={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["","","","","","","","","","","",""]},Gk={EN:["S","M","T","W","T","F","S"],CN:["","","","","","",""]};Jh({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,a=r.getRangeInfo(),o=r.getOrient();this._renderDayRect(t,a,i),this._renderLines(t,a,o,i),this._renderYearText(t,a,o,i),this._renderMonthText(t,o,i),this._renderWeekText(t,a,o,i)},_renderDayRect:function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),o=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,c=new Vo({shape:{x:l[0],y:l[1],width:a,height:o},cursor:"default",style:r});n.add(c)}},_renderLines:function(t,e,n,i){var r=this,a=t.coordinateSystem,o=t.getModel("splitLine.lineStyle").getLineStyle(),s=t.get("splitLine.show"),l=o.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){h(c.formatedDate),0===u&&(c=a.getDateInfo(e.start.y+"-"+e.start.m));var d=c.date;d.setMonth(d.getMonth()+1),c=a.getDateInfo(d)}function h(e){r._firstDayOfMonth.push(a.getDateInfo(e)),r._firstDayPoints.push(a.dataToRect([e],!1).tl);var l=r._getLinePointsOfOneWeek(t,e,n);r._tlpoints.push(l[0]),r._blpoints.push(l[l.length-1]),s&&r._drawSplitline(l,o,i)}h(a.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,n),o,i),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,n),o,i)},_getEdgesPoints:function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},_drawSplitline:function(t,e,n){var i=new Ro({z2:20,shape:{points:t},style:e});n.add(i)},_getLinePointsOfOneWeek:function(t,e,n){var i=t.coordinateSystem;e=i.getDateInfo(e);for(var r=[],a=0;a<7;a++){var o=i.getNextNDay(e.time,a),s=i.dataToRect([o.time],!1);r[2*o.day]=s.tl,r[2*o.day+1]=s["horizontal"===n?"bl":"tr"]}return r},_formatterLabel:function(t,e){return"string"==typeof t&&t?Vl(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,i,r){e=e.slice();var a=["center","bottom"];"bottom"===i?(e[1]+=r,a=["center","top"]):"left"===i?e[0]-=r:"right"===i?(e[0]+=r,a=["center","top"]):e[1]-=r;var o=0;return"left"!==i&&"right"!==i||(o=Math.PI/2),{rotation:o,position:e,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var a=r.get("margin"),o=r.get("position");o=o||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===n?0:1,d={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},h=e.start.y;+e.end.y>+e.start.y&&(h=h+"-"+e.end.y);var f=r.get("formatter"),g=this._formatterLabel(f,{start:e.start.y,end:e.end.y,nameMap:h}),p=new Ao({z2:30});Os(p.style,r,{text:g}),p.attr(this._yearTextPositionControl(p,d[o],n,o,a)),i.add(p)}},_monthTextPositionControl:function(t,e,n,i,r){var a="left",o="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(a="center"),"start"===i&&(o="bottom")):(s+=r,e&&(o="middle"),"start"===i&&(a="right")),{x:s,y:l,textAlign:a,textVerticalAlign:o}},_renderMonthText:function(t,e,n){var i=t.getModel("monthLabel");if(i.get("show")){var r=i.get("nameMap"),a=i.get("margin"),o=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];O(r)&&(r=Yk[r.toUpperCase()]||[]);var c="start"===o?0:1,u="horizontal"===e?0:1;a="start"===o?-a:a;for(var d="center"===s,h=0;h<l[c].length-1;h++){var f=l[c][h].slice(),g=this._firstDayOfMonth[h];d&&(f[u]=(this._firstDayPoints[h][u]+l[0][h+1][u])/2);var p=i.get("formatter"),m=r[+g.m-1],v={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:m},y=this._formatterLabel(p,v),b=new Ao({z2:30});x(Os(b.style,i,{text:y}),this._monthTextPositionControl(f,d,e,o,a)),n.add(b)}}},_weekTextPositionControl:function(t,e,n,i,r){var a="center",o="middle",s=t[0],l=t[1],c="start"===n;return"horizontal"===e?(s=s+i+(c?1:-1)*r[0]/2,a=c?"right":"left"):(l=l+i+(c?1:-1)*r[1]/2,o=c?"bottom":"top"),{x:s,y:l,textAlign:a,textVerticalAlign:o}},_renderWeekText:function(t,e,n,i){var r=t.getModel("dayLabel");if(r.get("show")){var a=t.coordinateSystem,o=r.get("position"),s=r.get("nameMap"),l=r.get("margin"),c=a.getFirstDayOfWeek();O(s)&&(s=Gk[s.toUpperCase()]||[]);var u=a.getNextNDay(e.end.time,7-e.lweek).time,d=[a.getCellWidth(),a.getCellHeight()];l=gl(l,d["horizontal"===n?0:1]),"start"===o&&(u=a.getNextNDay(e.start.time,-(7+e.fweek)).time,l=-l);for(var h=0;h<7;h++){var f,g=a.getNextNDay(u,h),p=a.dataToRect([g.time],!1).center;f=Math.abs((h+c)%7);var m=new Ao({z2:30});x(Os(m.style,r,{text:s[f]}),this._weekTextPositionControl(p,n,o,l,d)),i.add(m)}}}});var Uk={path:null,compoundPath:null,group:Sn,image:Vi,text:Ao};Xh((function(t){var e=t.graphic;N(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])}));var jk=Kh({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,jk.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,a=[];this._flatten(i,a);var o=Ir(r,a);Dr(o);var s=this._elOptionsToUpdate=[];M(o,(function(t,e){var n=t.option;n&&(s.push(n),function(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=x({},n),r=t[e],a=n.$action||"merge";"merge"===a?r?(v(r,i,!0),ec(r,i,{ignoreSize:!0}),ic(n,r)):t[e]=i:"replace"===a?t[e]=i:"remove"===a&&r&&(t[e]=null)}(r,e,n),function(t,e){t&&(t.hv=e.hv=[$k(e,["left","right"]),$k(e,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}(r[e],n))}),this);for(var l=r.length-1;0<=l;l--)null==r[l]?r.splice(l,1):delete r[l].$action},_flatten:function(t,e,n){M(t,(function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;"group"===t.type&&i&&this._flatten(i,e,t),delete t.children}}),this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});function qk(t,e,n,i){var r=n.type,a=new(Uk.hasOwnProperty(r)?Uk[r]:us(r))(n);e.add(a),i.set(t,a),a.__ecGraphicId=t}function Zk(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse((function(t){Zk(t,e)})),e.removeKey(t.__ecGraphicId),n.remove(t))}function $k(t,e){var n;return M(e,(function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)})),n}Jh({type:"graphic",init:function(t,e){this._elMap=Q()},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group;M(e,(function(e){var r=e.$action,a=e.id,o=n.get(a),s=e.parentId,l=null!=s?n.get(s):i,c=e.style;"text"===e.type&&c&&(e.hv&&e.hv[1]&&(c.textVerticalAlign=c.textBaseline=null),!c.hasOwnProperty("textFill")&&c.fill&&(c.textFill=c.fill),!c.hasOwnProperty("textStroke")&&c.stroke&&(c.textStroke=c.stroke));var u=function(t){return t=x({},t),M(["id","parentId","$action","hv","bounding"].concat(Zl),(function(e){delete t[e]})),t}(e);r&&"merge"!==r?"replace"===r?(Zk(o,n),qk(a,l,u,n)):"remove"===r&&Zk(o,n):o?o.attr(u):qk(a,l,u,n);var d=n.get(a);d&&(d.__ecGraphicWidthOption=e.width,d.__ecGraphicHeightOption=e.height,function(t,e){var n=t.eventData;t.silent||t.ignore||n||(n=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=t.info)}(d,t))}))}},_relocate:function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,a=e.getWidth(),o=e.getHeight(),s=0;s<n.length;s++){var l=n[s];if((u=r.get(l.id))&&u.isGroup){var c=(d=u.parent)===i;u.__ecGraphicWidth=gl(u.__ecGraphicWidthOption,c?a:d.__ecGraphicWidth)||0,u.__ecGraphicHeight=gl(u.__ecGraphicHeightOption,c?o:d.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var u,d;(u=r.get((l=n[s]).id))&&tc(u,l,(d=u.parent)===i?{width:a,height:o}:{width:d.__ecGraphicWidth,height:d.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var t=this._elMap;t.each((function(e){Zk(e,t)})),this._elMap=Q()},dispose:function(){this._clear()}});var Kk={};function Jk(t,e){Kk[t]=e}function Qk(t){return Kk[t]}var tA=Kh({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){tA.superApply(this,"optionUpdated",arguments),M(this.option.feature,(function(t,e){var n=Qk(e);n&&v(t,n.defaultOption)}))},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function eA(t,e){var n=Nl(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new Vo({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}Jh({type:"toolbox",render:function(t,e,n,i){var r=this.group;if(r.removeAll(),t.get("show")){var a=+t.get("itemSize"),o=t.get("feature")||{},s=this._features||(this._features={}),l=[];M(o,(function(t,e){l.push(e)})),new nf(this._featureNames||[],l).add(c).update(c).remove(E(c,null)).execute(),this._featureNames=l,function(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=Ql(i,a,r);Jl(e.get("orient"),t,e.get("itemGap"),o.width,o.height),tc(t,i,a,r)}(r,t,n),r.add(eA(r.getBoundingRect(),t)),r.eachChild((function(t){var e=t.__title,i=t.hoverStyle;if(i&&e){var o=ii(e,pi(i)),s=t.position[0]+r.position[0],l=!1;t.position[1]+r.position[1]+a+o.height>n.getHeight()&&(i.textPosition="top",l=!0);var c=l?-5-o.height:a+8;s+o.width/2>n.getWidth()?(i.textPosition=["100%",c],i.textAlign="right"):s-o.width/2<0&&(i.textPosition=[0,c],i.textAlign="left")}}))}function c(c,u){var d,h=l[c],f=l[u],g=o[h],p=new ll(g,t,t.ecModel);if(i&&null!=i.newTitle&&(g.title=i.newTitle),h&&!f){if(function(t){return 0===t.indexOf("my")}(h))d={model:p,onclick:p.option.onclick,featureName:h};else{var m=Qk(h);if(!m)return;d=new m(p,e,n)}s[h]=d}else{if(!(d=s[f]))return;d.model=p,d.ecModel=e,d.api=n}h||!f?p.get("show")&&!d.unusable?(function(i,o,s){var l=i.getModel("iconStyle"),c=i.getModel("emphasis.iconStyle"),u=o.getIcons?o.getIcons():i.get("icon"),d=i.get("title")||{};if("string"==typeof u){var h=u,f=d;d={},(u={})[s]=h,d[s]=f}var g=i.iconPaths={};M(u,(function(s,u){var h=Ks(s,{},{x:-a/2,y:-a/2,width:a,height:a});h.setStyle(l.getItemStyle()),h.hoverStyle=c.getItemStyle(),h.setStyle({text:d[u],textAlign:c.get("textAlign"),textBorderRadius:c.get("textBorderRadius"),textPadding:c.get("textPadding"),textFill:null});var f=t.getModel("tooltip");f&&f.get("show")&&h.attr("tooltip",x({content:d[u],formatter:f.get("formatter",!0)||function(){return d[u]},formatterParams:{componentType:"toolbox",name:u,title:d[u],$vars:["name","title"]},position:f.get("position",!0)||"bottom"},f.option)),Ds(h),t.get("showTitle")&&(h.__title=d[u],h.on("mouseover",(function(){var e=c.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";h.setStyle({textFill:c.get("textFill")||e.fill||e.stroke||"#000",textBackgroundColor:c.get("textBackgroundColor"),textPosition:c.get("textPosition")||n})})).on("mouseout",(function(){h.setStyle({textFill:null,textBackgroundColor:null})}))),h.trigger(i.get("iconStatus."+u)||"normal"),r.add(h),h.on("click",L(o.onclick,o,e,n,u)),g[u]=h}))}(p,d,h),p.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&i[t].trigger(e)},d.render&&d.render(p,e,n,i)):d.remove&&d.remove(e,n):d.dispose&&d.dispose(e,n)}},updateView:function(t,e,n,i){M(this._features,(function(t){t.updateView&&t.updateView(t.model,e,n,i)}))},remove:function(t,e){M(this._features,(function(n){n.remove&&n.remove(t,e)})),this.group.removeAll()},dispose:function(t,e){M(this._features,(function(n){n.dispose&&n.dispose(t,e)}))}});var nA=sd.toolbox.saveAsImage;function iA(t){this.model=t}iA.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:nA.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:nA.lang.slice()},iA.prototype.unusable=!r.canvasSupported,iA.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",a=n.get("type",!0)||"png",o=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||r.browser.ie||r.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(o.split(",")[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);var u=new Blob([c]);window.navigator.msSaveOrOpenBlob(u,i+"."+a)}else{var d=n.get("lang"),h='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(d&&d[0]||"")+'" /></body>';window.open().document.write(h)}else{var f=document.createElement("a");f.download=i+"."+a,f.target="_blank",f.href=o;var g=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});f.dispatchEvent(g)}},Jk("saveAsImage",iA);var rA=sd.toolbox.magicType,aA="__ec_magicType_stack__";function oA(t){this.model=t}oA.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:m(rA.title),option:{},seriesIndex:{}};var sA=oA.prototype;sA.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return M(t.get("type"),(function(t){e[t]&&(n[t]=e[t])})),n};var lA={line:function(t,e,n,i){if("bar"===t)return v({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return v({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){var r=n.get("stack")===aA;if("line"===t||"bar"===t)return i.setIconStatus("stack",r?"normal":"emphasis"),v({id:e,stack:r?"":aA},i.get("option.stack")||{},!0)}},cA=[["line","bar"],["stack"]];sA.onclick=function(t,e,n){var i=this.model,r=i.get("seriesIndex."+n);if(lA[n]){var a,o={series:[]};M(cA,(function(t){0<=S(t,n)&&M(t,(function(t){i.setIconStatus(t,"normal")}))})),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(e){var r=lA[n](e.subType,e.id,e,i);r&&(b(r,e.option),o.series.push(r));var a=e.coordinateSystem;if(a&&"cartesian2d"===a.type&&("line"===n||"bar"===n)){var s=a.getAxesByScale("ordinal")[0];if(s){var l=s.dim+"Axis",c=t.queryComponents({mainType:l,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;o[l]=o[l]||[];for(var u=0;u<=c;u++)o[l][c]=o[l][c]||{};o[l][c].boundaryGap="bar"===n}}})),"stack"===n&&(a=o.series&&o.series[0]&&o.series[0].stack===aA?v({stack:rA.title.tiled},rA.title):m(rA.title)),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:o,newTitle:a})}},Gh({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)})),Jk("magicType",oA);var uA=sd.toolbox.dataView,dA=new Array(60).join("-");function hA(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var fA=new RegExp("[\t]+","g");function gA(t){this._dom=null,this.model=t}gA.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:m(uA.title),lang:m(uA.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},gA.prototype.onclick=function(t,e){var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),o=i.get("lang")||[];a.innerHTML=o[0]||i.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var c=i.get("optionToContent"),u=i.get("contentToOption"),d=function(t){var e=function(t){var e={},n=[],i=[];return t.eachRawSeries((function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var a=r.getBaseAxis();if("category"===a.type){var o=a.dim+"_"+a.index;e[o]||(e[o]={categoryAxis:a,valueAxis:r.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),e[o].series.push(t)}else n.push(t)}})),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:D([function(t){var e=[];return M(t,(function(t,n){var i=t.categoryAxis,r=t.valueAxis.dim,a=[" "].concat(T(t.series,(function(t){return t.name}))),o=[i.model.getCategories()];M(t.series,(function(t){o.push(t.getRawData().mapArray(r,(function(t){return t})))}));for(var s=[a.join("\t")],l=0;l<o[0].length;l++){for(var c=[],u=0;u<o.length;u++)c.push(o[u][l]);s.push(c.join("\t"))}e.push(s.join("\n"))})),e.join("\n\n"+dA+"\n\n")}(e.seriesGroupByCategoryAxis),function(t){return T(t,(function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,r=arguments[t-1],a=e.getName(r),o=0;o<t-1;o++)i[o]=arguments[o];n.push((a?a+"\t":"")+i.join("\t"))})),n.join("\n")})).join("\n\n"+dA+"\n\n")}(e.other)],(function(t){return t.replace(/[\n\t\s]/g,"")})).join("\n\n"+dA+"\n\n"),meta:e.meta}}(t);if("function"==typeof c){var h=c(e.getOption());"string"==typeof h?s.innerHTML=h:H(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=d.value;var f=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var p="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),v=document.createElement("div");p+=";background-color:"+i.get("buttonColor"),p+=";color:"+i.get("buttonTextColor");var y=this;function x(){n.removeChild(r),y._dom=null}Xt(m,"click",x),Xt(v,"click",(function(){var t;try{t="function"==typeof u?u(s,e.getOption()):function(t,e){var n=t.split(new RegExp("\n*"+dA+"\n*","g")),i={series:[]};return M(n,(function(t,n){if(function(t){if(0<=t.slice(0,t.indexOf("\n")).indexOf("\t"))return!0}(t)){var r=function(t){for(var e=t.split(/\n+/g),n=[],i=T(hA(e.shift()).split(fA),(function(t){return{name:t,data:[]}})),r=0;r<e.length;r++){var a=hA(e[r]).split(fA);n.push(a.shift());for(var o=0;o<a.length;o++)i[o]&&(i[o].data[r]=a[o])}return{series:i,categories:n}}(t),a=e[n],o=a.axisDim+"Axis";a&&(i[o]=i[o]||[],i[o][a.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else r=function(t){for(var e=t.split(/\n+/g),n=hA(e.shift()),i=[],r=0;r<e.length;r++){var a,o=hA(e[r]).split(fA),s="",l=!1;a=isNaN(o[0])?(l=!0,s=o[0],o=o.slice(1),i[r]={name:s,value:[]},i[r].value):i[r]=[];for(var c=0;c<o.length;c++)a.push(+o[c]);1===a.length&&(l?i[r].value=a[0]:i[r]=a[0])}return{name:n,data:i}}(t),i.series.push(r)})),i}(l.value,f)}catch(t){throw x(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),x()})),m.innerHTML=o[1],v.innerHTML=o[2],v.style.cssText=p,m.style.cssText=p,i.get("readOnly")||g.appendChild(v),g.appendChild(m),r.appendChild(a),r.appendChild(s),r.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},gA.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},gA.prototype.dispose=function(t,e){this.remove(t,e)},Jk("dataView",gA),Gh({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var n=[];M(t.newOption.series,(function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:function(t,e){return T(t,(function(t,n){var i=e&&e[n];return z(i)&&!N(i)?(z(t)&&!N(t)&&(t=t.value),b({value:t},i)):t}))}(t.data,r)})}else n.push(x({type:"scatter"},t))})),e.mergeOption(b({series:n},t.newOption))}));var pA=M,mA=S,vA=E,yA=["dataToPoint","pointToData"],xA=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function bA(t,e,n){var i=this._targetInfoList=[],r={},a=SA(e,t);pA(CA,(function(t,e){n&&n.include&&!(0<=mA(n.include,e))||t(a,i,r)}))}var wA=bA.prototype;function _A(t){return t[0]>t[1]&&t.reverse(),t}function SA(t,e){return Or(t,e,{includeMainTypes:xA})}wA.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,(function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=MA[t.brushType](0,n,e);t.__rangeOffset={offset:IA[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}}))},wA.matchOutputRanges=function(t,e,n){pA(t,(function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&M(i.coordSyses,(function(i){var r=MA[t.brushType](1,i,t.range);n(t,r.values,i,e)}))}),this)},wA.setInputRanges=function(t,e){pA(t,(function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var i=MA[t.brushType](0,n.coordSys,t.coordRange),r=t.__rangeOffset;t.range=r?IA[t.brushType](i.values,r.offset,function(t,e){var n=PA(t),i=PA(e),r=[n[0]/i[0],n[1]/i[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}(i.xyMinMax,r.xyMinMax)):i.values}}),this)},wA.makePanelOpts=function(t,e){return T(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:o_(i),isTargetByCursor:l_(i,t,n.coordSysModel),getLinearBrushOtherExtent:s_(i)}}))},wA.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&0<=mA(i.coordSyses,e.coordinateSystem)},wA.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=SA(e,t),r=0;r<n.length;r++){var a=n[r],o=t.panelId;if(o){if(a.panelId===o)return a}else for(r=0;r<kA.length;r++)if(kA[r](i,a))return a}return!0};var CA={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,a=Q(),o={},s={};(n||i||r)&&(pA(n,(function(t){var e=t.axis.grid.model;a.set(e.id,e),o[e.id]=!0})),pA(i,(function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0})),pA(r,(function(t){a.set(t.id,t),o[t.id]=!0,s[t.id]=!0})),a.each((function(t){var r=[];pA(t.coordinateSystem.getCartesians(),(function(t,e){(0<=mA(n,t.getAxis("x").model)||0<=mA(i,t.getAxis("y").model))&&r.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:r[0],coordSyses:r,getPanelRect:AA.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){pA(t.geoModels,(function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:AA.geo})}))}},kA=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],AA={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Us(t)),e}},MA={lineX:vA(TA,0),lineY:vA(TA,1),rect:function(t,e,n){var i=e[yA[t]]([n[0][0],n[1][0]]),r=e[yA[t]]([n[0][1],n[1][1]]),a=[_A([i[0],r[0]]),_A([i[1],r[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:T(n,(function(n){var r=e[yA[t]](n);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r})),xyMinMax:i}}};function TA(t,e,n,i){var r=n.getAxis(["x","y"][t]),a=_A(T([0,1],(function(t){return e?r.coordToData(r.toLocalCoord(i[t])):r.toGlobalCoord(r.dataToCoord(i[t]))}))),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var IA={lineX:vA(DA,0),lineY:vA(DA,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return T(t,(function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]}))}};function DA(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function PA(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var LA=M,EA="\0_ec_hist_store";function NA(t){return t[EA]||(t[EA]=[{}])}lc.registerSubTypeDefaulter("dataZoom",(function(){return"slider"}));var RA,OA,zA,BA,FA=["cartesian2d","polar","singleAxis"],HA=(OA=["axisIndex","axis","index","id"],zA=T(RA=(RA=["x","y","z","radius","angle","single"]).slice(),Gl),BA=T(OA=(OA||[]).slice(),Gl),function(t,e){M(RA,(function(n,i){for(var r={name:n,capital:zA[i]},a=0;a<OA.length;a++)r[OA[a]]=n+BA[a];t.call(e,r)}))});function VA(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}var WA=M,XA=ml;function YA(t,e){var n=t.getAxisModel(),i=t._percentWindow,r=t._valueWindow;if(i){var a=xl(r,[0,500]);a=Math.min(a,20);var o=e||0===i[0]&&100===i[1];n.setRange(o?null:+r[0].toFixed(a),o?null:+r[1].toFixed(a))}}VA.prototype={constructor:VA,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries((function(n){if(function(t){return 0<=S(FA,t)}(n.get("coordinateSystem"))){var i=this._dimName,r=e.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(r&&r.componentIndex)&&t.push(n)}}),this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,i=this._dimName,r=this.ecModel,a=this.getAxisModel();return t="x"===i||"y"===i?(e="gridIndex","x"===i?"y":"x"):(e="polarIndex","angle"===i?"radius":"angle"),r.eachComponent(t+"Axis",(function(t){(t.get(e)||0)===(a.get(e)||0)&&(n=t)})),n},getMinMaxSpan:function(){return m(this._minMaxSpan)},calculateDataWindow:function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),a=[0,100],o=[],s=[];WA(["start","end"],(function(l,c){var u=t[l],d=t[l+"Value"];"percent"===r[c]?(null==u&&(u=a[c]),d=i.parse(fl(u,a,n))):(e=!0,u=fl(d=null==d?n[c]:i.parse(d),n,a)),s[c]=d,o[c]=u})),XA(s),XA(o);var l=this._minMaxSpan;function c(t,e,n,r,a){var o=a?"Span":"ValueSpan";sw(0,t,n,"all",l["min"+o],l["max"+o]);for(var s=0;s<2;s++)e[s]=fl(t[s],n,r,!0),a&&(e[s]=i.parse(e[s]))}return e?c(s,o,n,a,!1):c(o,s,a,n,!0),{valueWindow:s,percentWindow:o}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];return WA(n,(function(t){var n=t.getData();n&&WA(n.mapDimension(e,!0),(function(t){var e=n.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])}))})),i[1]<i[0]&&(i=[NaN,NaN]),function(t,e){var n=t.getAxisModel(),i=n.getMin(!0),r="category"===n.get("type"),a=r&&n.getCategories().length;null!=i&&"dataMin"!==i&&"function"!=typeof i?e[0]=i:r&&(e[0]=0<a?0:NaN);var o=n.getMax(!0);null!=o&&"dataMax"!==o&&"function"!=typeof o?e[1]=o:r&&(e[1]=0<a?a-1:NaN),n.get("scale",!0)||(0<e[0]&&(e[0]=0),e[1]<0&&(e[1]=0))}(t,i),i}(this,this._dimName,e),function(t){var e=t._minMaxSpan={},n=t._dataZoomModel,i=t._dataExtent;WA(["min","max"],(function(r){var a=n.get(r+"Span"),o=n.get(r+"ValueSpan");null!=o&&(o=t.getAxisModel().axis.scale.parse(o)),null!=o?a=fl(i[0]+o,i,[0,100],!0):null!=a&&(o=fl(a,[0,100],i,!0)-i[0]),e[r+"Span"]=a,e[r+"ValueSpan"]=o}))}(this);var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,YA(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,YA(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=t.get("filterMode"),a=this._valueWindow;"none"!==r&&WA(i,(function(t){var e=t.getData(),i=e.mapDimension(n,!0);i.length&&("weakFilter"===r?e.filterSelf((function(t){for(var n,r,o,s=0;s<i.length;s++){var l=e.get(i[s],t),c=!isNaN(l),u=l<a[0],d=l>a[1];if(c&&!u&&!d)return!0;c&&(o=!0),u&&(n=!0),d&&(r=!0)}return o&&n&&r})):WA(i,(function(n){if("empty"===r)t.setData(e=e.map(n,(function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN})));else{var i={};i[n]=a,e.selectRange(i)}})),WA(i,(function(t){e.setApproximateExtent(a,t)})))}))}}};var GA=M,UA=HA,jA=Kh({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=qA(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this.doInit(i)},mergeOption:function(t){var e=qA(t);v(this.option,t,!0),v(this.settledOption,e,!0),this.doInit(e)},doInit:function(t){var e=this.option;r.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),ZA(this,t);var n=this.settledOption;GA([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)}),this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis((function(e,n,i,r){var a=this.dependentModels[e.axis][n],o=a.__dzAxisProxy||(a.__dzAxisProxy=new VA(e.name,n,this,r));t[e.name+"_"+n]=o}),this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();UA((function(e){var n=e.axisIndex;t[n]=kr(t[n])}),this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;UA((function(n){null!=t[n.axisIndex]&&(e=!0)}),this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,i=this.dependentModels;if(t){var r="vertical"===e?"y":"x";i[r+"Axis"].length?(n[r+"AxisIndex"]=[0],t=!1):GA(i.singleAxis,(function(i){t&&i.get("orient",!0)===e&&(n.singleAxisIndex=[i.componentIndex],t=!1)}))}t&&UA((function(e){if(t){var i=[],r=this.dependentModels[e.axis];if(r.length&&!i.length)for(var a=0,o=r.length;a<o;a++)"category"===r[a].get("type")&&i.push(a);(n[e.axisIndex]=i).length&&(t=!1)}}),this),t&&this.ecModel.eachSeries((function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&UA((function(e){var i=n[e.axisIndex],r=t.get(e.axisIndex),a=t.get(e.axisId);S(i,r=t.ecModel.queryComponents({mainType:e.axis,index:r,id:a})[0].componentIndex)<0&&i.push(r)}))}),this)},_autoSetOrient:function(){var t;this.eachTargetAxis((function(e){t=t||e.name}),this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return UA((function(i){var r=t.get(i.axisIndex),a=this.dependentModels[i.axis][r];a&&a.get("type")===e||(n=!1)}),this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&0<e.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var t;return UA((function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}}),this),t},eachTargetAxis:function(t,e){var n=this.ecModel;UA((function(i){GA(this.get(i.axisIndex),(function(r){t.call(e,i,r,this,n)}),this)}),this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t){var e=this.option,n=this.settledOption;GA([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])}),this),ZA(this,t)},setCalculatedRange:function(t){var e=this.option;GA(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function qA(t){var e={};return GA(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}function ZA(t,e){var n=t._rangePropMode,i=t.get("rangeMode");GA([["start","startValue"],["end","endValue"]],(function(t,r){var a=null!=e[t[0]],o=null!=e[t[1]];a&&!o?n[r]="percent":!a&&o?n[r]="value":i?n[r]=i[r]:a&&(n[r]="percent")}))}var $A=Wu.extend({type:"dataZoom",render:function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,e={};return this.dataZoomModel.eachTargetAxis((function(n,i){var r=t.getComponent(n.axis,i);if(r){var a=r.getCoordSysModel();a&&function(t,e,n,i){for(var r,a=0;a<n.length;a++)if(n[a].model===t){r=n[a];break}r||n.push(r={model:t,axisModels:[],coordIndex:i}),r.axisModels.push(e)}(a,r,e[a.mainType]||(e[a.mainType]=[]),a.componentIndex)}}),this),e}});jA.extend({type:"dataZoom.select"}),$A.extend({type:"dataZoom.select"}),Yh({getTargetSeries:function(t){var e=Q();return t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(t,n,i){M(i.getAxisProxy(t.name,n).getTargetSeriesModels(),(function(t){e.set(t.uid,t)}))}))})),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(t,n,i){i.getAxisProxy(t.name,n).reset(i,e)})),t.eachTargetAxis((function(t,n,i){i.getAxisProxy(t.name,n).filterData(i,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}))}}),Gh("dataZoom",(function(t,e){var n=function(t,e,n){return function(r){var a,o={nodes:[],records:{}};if(e((function(t){o.records[t.name]={}})),!r)return o;for(i(r,o);a=!1,t(s),a;);function s(t){!function(t,e){return 0<=S(e.nodes,t)}(t,o)&&function(t,i){var r=!1;return e((function(e){M(n(t,e)||[],(function(t){i.records[e.name][t]&&(r=!0)}))})),r}(t,o)&&(i(t,o),a=!0)}return o};function i(t,i){i.nodes.push(t),e((function(e){M(n(t,e)||[],(function(t){i.records[e.name][t]=!0}))}))}}(L(e.eachComponent,e,"dataZoom"),HA,(function(t,e){return t.get(e.axisIndex)})),i=[];e.eachComponent({mainType:"dataZoom",query:t},(function(t,e){i.push.apply(i,n(t).nodes)})),M(i,(function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}));var KA=M;function JA(t,e,n){(this._brushController=new Dw(n.getZr())).on("brush",L(this._onBrush,this)).mount()}JA.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:m(sd.toolbox.dataZoom.title)};var QA=JA.prototype;QA.render=function(t,e,n,i){this.model=t,this.ecModel=e,this.api=n,function(t,e,n,i,r){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new bA(eM(t.option),e,{include:["grid"]});n._brushController.setPanels(o.makePanelOpts(r,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}))).enableBrush(!!a&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",1<function(t){return NA(t).length}(e)?"emphasis":"normal")}(t,e)},QA.onclick=function(t,e,n){tM[n].call(this)},QA.remove=function(t,e){this._brushController.unmount()},QA.dispose=function(t,e){this._brushController.dispose()};var tM={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(t){var e=NA(t),n=e[e.length-1];1<e.length&&e.pop();var i={};return LA(n,(function(t,n){for(var r=e.length-1;0<=r;r--)if(t=e[r][n]){i[n]=t;break}})),i}(this.ecModel))}};function eM(t){var e={};return M(["xAxisIndex","yAxisIndex"],(function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),!1!==e[n]&&"none"!==e[n]||(e[n]=[])})),e}function nM(t){this.model=t}QA._onBrush=function(t,e){if(e.isEnd&&t.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new bA(eM(this.model.option),i,{include:["grid"]}).matchOutputRanges(t,i,(function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(r("x",n,e[0]),r("y",n,e[1])):r({lineX:"x",lineY:"y"}[i],n,e)}})),function(t,e){var n=NA(t);LA(e,(function(e,i){for(var r=n.length-1;0<=r&&!n[r][i];r--);if(r<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var o=a.getPercentRange();n[0][i]={dataZoomId:i,start:o[0],end:o[1]}}}})),n.push(e)}(i,n),this._dispatchZoomAction(n)}function r(t,e,r){var a=e.getAxis(t),o=a.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)})),i}(t,o,i),l=s.findRepresentativeAxisProxy(o).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(r=sw(0,r.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:r[0],endValue:r[1]})}},QA._dispatchZoomAction=function(t){var e=[];KA(t,(function(t,n){e.push(m(t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},Jk("dataZoom",JA),Xh((function(t){if(t){var e=t.dataZoom||(t.dataZoom=[]);N(e)||(t.dataZoom=e=[e]);var n=t.toolbox;if(n&&(N(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;r("xAxis",i),r("yAxis",i)}}function r(n,i){if(i){var r=n+"Index",a=i[r];null==a||"all"===a||N(a)||(a=!1===a||"none"===a?[]:[a]),function(o,s){var l=t[o];N(l)||(l=l?[l]:[]),KA(l,(function(t,o){if(null==a||"all"===a||-1!==S(a,o)){var s={type:"select",$fromToolbox:!0,filterMode:i.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+n+o};s[r]=o,e.push(s)}}))}(n)}}})),nM.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:sd.toolbox.restore.title},nM.prototype.onclick=function(t,e,n){!function(t){t[EA]=null}(t),e.dispatchAction({type:"restore",from:this.uid})},Jk("restore",nM),Gh({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")})),Kh({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var iM=M,rM=El,aM=["","-webkit-","-moz-","-o-"];function oM(t,e,n,i,r){var a=e&&e.painter;if(n){var o=a&&a.getViewportRoot();o&&function(t,e,n,i,r){Nt(Et,e,i,r,!0)&&Nt(t,n,Et[0],Et[1])}(t,o,document.body,i,r)}else{t[0]=i,t[1]=r;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}}function sM(t,e,n){if(r.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=e.getZr(),o=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0],oM(this._styleCoord,a,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t,this._show=!1;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=a.handler;Wt(a.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function lM(t){this._zr=t.getZr(),this._show=!1}sM.prototype={constructor:sM,_enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),n=t.style;"absolute"!==n.position&&"absolute"!==e.position&&(n.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,n=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(t){var e=[],n=t.get("transitionDuration"),i=t.get("backgroundColor"),a=t.getModel("textStyle"),o=t.get("padding");return n&&e.push(function(t){var e="cubic-bezier(0.23, 1, 0.32, 1)",n="left "+t+"s "+e+",top "+t+"s "+e;return T(aM,(function(t){return t+"transition:"+n})).join(";")}(n)),i&&(r.canvasSupported?e.push("background-Color:"+i):(e.push("background-Color:#"+Ve(i)),e.push("filter:alpha(opacity=70)"))),iM(["width","color","radius"],(function(n){var i="border-"+n,r=rM(i),a=t.get(r);null!=a&&e.push(i+":"+a+("color"===n?"":"px"))})),e.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();return i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px"),iM(["decoration","align"],(function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)})),e.join(";")}(a)),null!=o&&e.push("padding:"+Nl(o).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n=this._styleCoord;oM(n,this._zr,this._appendToBody,t,e);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(L(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}},lM.prototype={constructor:lM,_enterable:!0,update:function(){},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var i={},r=t,a="{marker",o=r.indexOf(a);0<=o;){var s=r.indexOf("|}"),l=r.substr(o+a.length,s-o-a.length);i["marker"+l]=-1<l.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[l],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[l]},o=(r=r.substr(s+1)).indexOf("{marker")}this.el=new Ao({style:{rich:i,text:t,textLineHeight:20,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding")},z:n.get("z")}),this._zr.add(this.el);var c=this;this.el.on("mouseover",(function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0})),this.el.on("mouseout",(function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1}))},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){this.el&&this.el.attr("position",[t,e])},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(L(this.hide,this),t)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var cM=L,uM=M,dM=gl,hM=new Vo({shape:{x:-1,y:-1,width:2,height:2}});function fM(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(ll.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new ll(n,e,e.ecModel))}return e}function gM(t,e){return t.dispatchAction||L(e.dispatchAction,e)}function pM(t){return"center"===t||"middle"===t}Jh({type:"tooltip",init:function(t,e){if(!r.node){var n,i=t.getComponent("tooltip"),a=i.get("renderMode");this._renderMode=Fr(a),"html"===this._renderMode?(n=new sM(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new lM(e),this._newLine="\n"),this._tooltipContent=n}},render:function(t,e,n){if(!r.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");mC("itemTooltip",this._api,cM((function(e,n,i){"none"!==t&&(0<=t.indexOf(e)?this._tryShow(n,i):"leave"===e&&this._hide(i))}),this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){n.isDisposed()||i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})}))}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!r.node){var a=gM(i,n);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=hM;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},a)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},a);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var l=aC(i,e),c=l.point[0],u=l.point[1];null!=c&&null!=u&&this._tryShow({offsetX:c,offsetY:u,position:i.position,target:l.el},a)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},a))}},manuallyHideTip:function(t,e,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(gM(i,n))},_manuallyAxisShowTip:function(t,e,n,i){var r=i.seriesIndex,a=i.dataIndex,o=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=a&&null!=o){var s=e.getSeriesByIndex(r);if(s&&"axis"===(t=fM([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:a,position:i.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=L(e,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,i=[e.offsetX,e.offsetY],r=[],a=[],o=fM([e.tooltipOption,this._tooltipModel]),s=this._renderMode,l=this._newLine,c={};uM(t,(function(t){uM(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,o=[];if(e&&null!=i){var u=PC(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);M(t.seriesDataIndices,(function(r){var l=n.getSeriesByIndex(r.seriesIndex),d=r.dataIndexInside,h=l&&l.getDataParams(d);if(h.axisDim=t.axisDim,h.axisIndex=t.axisIndex,h.axisType=t.axisType,h.axisId=t.axisId,h.axisValue=Eg(e.axis,i),h.axisValueLabel=u,h){a.push(h);var f,g=l.formatTooltip(d,!0,null,s);z(g)?(f=g.html,v(c,g.markers)):f=g,o.push(f)}}));var d=u;r.push("html"!==s?o.join(l):(d?zl(d)+l:"")+o.join(l))}}))}),this),r.reverse(),r=r.join(this._newLine+this._newLine);var u=e.position;this._showOrMove(o,(function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(o,u,i[0],i[1],this._tooltipContent,a):this._showTooltipContent(o,r,a,Math.random(),i[0],i[1],u,void 0,c)}))},_showSeriesItemTooltip:function(t,e,n){var i=e.seriesIndex,r=this._ecModel.getSeriesByIndex(i),a=e.dataModel||r,o=e.dataIndex,s=e.dataType,l=a.getData(),c=fM([l.getItemModel(o),a,r&&(r.coordinateSystem||{}).model,this._tooltipModel]),u=c.get("trigger");if(null==u||"item"===u){var d,h,f=a.getDataParams(o,s),g=a.formatTooltip(o,!1,s,this._renderMode);h=z(g)?(d=g.html,g.markers):(d=g,null);var p="item_"+a.name+"_"+o;this._showOrMove(c,(function(){this._showTooltipContent(c,d,f,p,t.offsetX,t.offsetY,t.position,t.target,h)})),n({type:"showTip",dataIndexInside:o,dataIndex:l.getRawIndex(o),seriesIndex:i,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var r=new ll(i,this._tooltipModel,this._ecModel),a=r.get("content"),o=Math.random();this._showOrMove(r,(function(){this._showTooltipContent(r,a,r.get("formatterParams")||{},o,t.offsetX,t.offsetY,t.position,e)})),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,i,r,a,o,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var c=this._tooltipContent,u=t.get("formatter");o=o||t.get("position");var d=e;if(u&&"string"==typeof u)d=Hl(u,n,!0);else if("function"==typeof u){var h=cM((function(e,i){e===this._ticket&&(c.setContent(i,l,t),this._updatePosition(t,o,r,a,c,n,s))}),this);this._ticket=i,d=u(n,i,h)}c.setContent(d,l,t),c.show(t),this._updatePosition(t,o,r,a,c,n,s)}},_updatePosition:function(t,e,n,i,r,a,o){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var c=r.getSize(),u=t.get("align"),d=t.get("verticalAlign"),h=o&&o.getBoundingRect().clone();if(o&&h.applyTransform(o.transform),"function"==typeof e&&(e=e([n,i],a,r.el,h,{viewSize:[s,l],contentSize:c.slice()})),N(e))n=dM(e[0],s),i=dM(e[1],l);else if(z(e)){e.width=c[0],e.height=c[1];var f=Ql(e,{width:s,height:l});n=f.x,i=f.y,d=u=null}else if("string"==typeof e&&o)n=(g=function(t,e,n){var i=n[0],r=n[1],a=0,o=0,s=e.width,l=e.height;switch(t){case"inside":a=e.x+s/2-i/2,o=e.y+l/2-r/2;break;case"top":a=e.x+s/2-i/2,o=e.y-r-5;break;case"bottom":a=e.x+s/2-i/2,o=e.y+l+5;break;case"left":a=e.x-i-5,o=e.y+l/2-r/2;break;case"right":a=e.x+s+5,o=e.y+l/2-r/2}return[a,o]}(e,h,c))[0],i=g[1];else{var g;n=(g=function(t,e,n,i,r,a,o){var s=n.getOuterSize(),l=s.width,c=s.height;return null!=a&&(i<t+l+a?t-=l+a:t+=a),null!=o&&(r<e+c+o?e-=c+o:e+=o),[t,e]}(n,i,r,s,l,u?null:20,d?null:20))[0],i=g[1]}u&&(n-=pM(u)?c[0]/2:"right"===u?c[0]:0),d&&(i-=pM(d)?c[1]/2:"bottom"===d?c[1]:0),t.get("confine")&&(n=(g=function(t,e,n,i,r){var a=n.getOuterSize(),o=a.width,s=a.height;return t=Math.min(t+o,i)-o,e=Math.min(e+s,r)-s,[t=Math.max(t,0),e=Math.max(e,0)]}(n,i,r,s,l))[0],i=g[1]),r.moveTo(n,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&uM(e,(function(e,i){var r=e.dataByAxis||{},a=(t[i]||{}).dataByAxis||[];(n&=r.length===a.length)&&uM(r,(function(t,e){var i=a[e]||{},r=t.seriesDataIndices||[],o=i.seriesDataIndices||[];(n&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&r.length===o.length)&&uM(r,(function(t,e){var i=o[e];n&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex}))}))})),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){r.node||(this._tooltipContent.dispose(),xC("itemTooltip",e))}}),Gh({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),Gh({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}));var mM=["rect","polygon","keep","clear"],vM=M;function yM(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function xM(t,e,n){var i={};return vM(e,(function(e){var r=i[e]=function(){function t(){}return t.prototype.__hidden=t.prototype,new t}();vM(t[e],(function(t,i){if(Mx.isValidType(i)){var a={type:i,visual:t};n&&n(a,e),r[i]=new Mx(a),"opacity"===i&&((a=m(a)).type="colorAlpha",r.__hidden.__alphaForOpacity=new Mx(a))}}))})),i}function bM(t,e,n){var i;M(n,(function(t){e.hasOwnProperty(t)&&yM(e[t])&&(i=!0)})),i&&M(n,(function(n){e.hasOwnProperty(n)&&yM(e[n])?t[n]=m(e[n]):delete t[n]}))}var wM={lineX:_M(0),lineY:_M(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&qg(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,a=t.y,o=t.width,s=t.height,l=i[0];return!!(qg(i,r,a)||qg(i,r+o,a)||qg(i,r,a+s)||qg(i,r+o,a+s)||_n.create(t).contain(l[0],l[1])||Js(r,a,r+o,a,i)||Js(r,a,r,a+s,i)||Js(r+o,a,r+o,a+s,i)||Js(r,a+s,r+o,a+s,i))||void 0}}};function _M(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e)return SM(e[t],i.range)},rect:function(i,r,a){if(i){var o=a.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),SM(s[0],o)||SM(s[1],o)||SM(o[0],s)||SM(o[1],s)}}}}function SM(t,e){return e[0]<=t&&t<=e[1]}var CM=["inBrush","outOfBrush"],kM="__ecBrushSelect",AM="__ecInBrushSelectEvent",MM=nh.VISUAL.BRUSH;function TM(t){t.eachComponent({mainType:"brush"},(function(e){(e.brushTargetManager=new bA(e.option,t)).setInputRanges(e.areas,t)}))}function IM(t,e){if(!t.isDisposed()){var n=t.getZr();n[AM]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[AM]=!1}}function DM(t,e,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t[o.brushType](i,n,o.selectors,o))return!0}}function PM(t){var e=t.brushSelector;if(O(e)){var n=[];return M(wM,(function(t,i){n[i]=function(n,i,r,a){var o=i.getItemLayout(n);return t[e](o,r,a)}})),n}if(R(e)){var i={};return M(wM,(function(t,n){i[n]=e})),i}return e}jh(MM,(function(t,e,n){t.eachComponent({mainType:"brush"},(function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})})),TM(t)})),qh(MM,(function(t,e,n){var i,r,a=[];t.eachComponent({mainType:"brush"},(function(e,n){var o={brushId:e.id,brushIndex:n,brushName:e.name,areas:m(e.areas),selected:[]};a.push(o);var s=e.option,l=s.brushLink,c=[],u=[],d=[],h=0;n||(i=s.throttleType,r=s.throttleDelay);var f=T(e.areas,(function(t){return function(t){var e=t.selectors={};return M(wM[t.brushType],(function(n,i){e[i]=function(i){return n(i,e,t)}})),t}(b({boundingRect:LM[t.brushType](t)},t))})),g=xM(e.option,CM,(function(t){t.mappingMethod="fixed"}));function p(t){return"all"===l||c[t]}function v(t){return!!t.length}N(l)&&M(l,(function(t){c[t]=1})),t.eachSeries((function(n,i){var r=d[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;h|=n.hasAxisBrushed(),p(e)&&n.eachActiveState(t.getData(),(function(t,e){"active"===t&&(u[e]=1)}))}(n,i):function(n,i,r){var a=PM(n);if(a&&!function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(N(n)?S(n,e)<0:e!==n)}(e,i)&&(M(f,(function(i){a[i.brushType]&&e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),h|=v(r)})),p(i)&&v(r))){var o=n.getData();o.each((function(t){DM(a,r,o,t)&&(u[t]=1)}))}}(n,i,r)})),t.eachSeries((function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};o.selected.push(n);var i=PM(t),r=d[e],a=t.getData(),s=p(e)?function(t){return u[t]?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return DM(i,r,a,t)?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"};(p(e)?h:v(r))&&function(t,e,n,i,r,a){var o,s={};function l(t){return n.getItemVisual(o,t)}function c(t,e){n.setItemVisual(o,t,e)}M(t,(function(t){var n=Mx.prepareVisualTypes(e[t]);s[t]=n})),n.each((function(t,r){var a=n.getRawDataItem(o=t);if(!a||!1!==a.visualMap)for(var u=i.call(void 0,t),d=e[u],h=s[u],f=0,g=h.length;f<g;f++){var p=h[f];d[p]&&d[p].applyVisual(t,l,c)}}))}(CM,g,a,s)}))})),function(t,e,n,i,r){if(r){var a=t.getZr();a[AM]||(a[kM]||(a[kM]=IM),rd(a,kM,n,e)(t,i))}}(e,i,r,a,n)}));var LM={lineX:et,lineY:et,rect:function(t){return EM(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){var a=n[i];a[0]<(e=e||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&EM(e)}};function EM(t){return new _n(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var NM=["#ddd"];function RM(t,e){return v({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new ll(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function OM(t,e,n,i){i&&i.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function zM(t,e,n){this.model=t,this.ecModel=e,this.api=n}Kh({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;e||bM(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:NM},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(t){t&&(this.areas=T(t,(function(t){return RM(this.option,t)}),this))},setBrushOption:function(t){this.brushOption=RM(this.option,t),this.brushType=this.brushOption.brushType}}),Jh({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,(this._brushController=new Dw(e.getZr())).on("brush",L(this._onBrush,this)).mount()},render:function(t){return this.model=t,OM.apply(this,arguments)},updateTransform:function(t,e){return TM(e),OM.apply(this,arguments)},updateView:OM,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:m(t),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:m(t),$from:n})}}),Gh({type:"brush",event:"brush"},(function(t,e){e.eachComponent({mainType:"brush",query:t},(function(e){e.setAreas(t.areas)}))})),Gh({type:"brushSelect",event:"brushSelected",update:"none"},(function(){})),Gh({type:"brushEnd",event:"brushEnd",update:"none"},(function(){})),zM.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:m(sd.toolbox.brush.title)};var BM=zM.prototype;function FM(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),a={normal:1,emphasis:1};M(i,(function(t,e){a[e]||HM(r,e)||(r[e]=t)})),n.label&&!HM(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function HM(t,e){return t.hasOwnProperty(e)}BM.render=BM.updateView=function(t,e,n){var i,r,a;e.eachComponent({mainType:"brush"},(function(t){i=t.brushType,r=t.brushOption.brushMode||"single",a|=t.areas.length})),this._brushType=i,this._brushMode=r,M(t.get("type",!0),(function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?a:e===i)?"emphasis":"normal")}))},BM.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return M(t.get("type",!0),(function(t){e[t]&&(n[t]=e[t])})),n},BM.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},Jk("brush",zM),Xh((function(t,e){var n=t&&t.brush;if(N(n)||(n=n?[n]:[]),n.length){var i=[];M(n,(function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))}));var r=t&&t.toolbox;N(r)&&(r=r[0]),r||(t.toolbox=[r={feature:{}}]);var a=r.feature||(r.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,i),function(t){var e={};M(t,(function(t){e[t]=1})),t.length=0,M(e,(function(e,n){t.push(n)}))}(s),e&&!s.length&&s.push.apply(s,mM)}})),Kh({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),Jh({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),a=t.getModel("subtextStyle"),o=t.get("textAlign"),s=X(t.get("textBaseline"),t.get("textVerticalAlign")),l=new Ao({style:Os({},r,{text:t.get("text"),textFill:r.getTextColor()},{disableBox:!0}),z2:10}),c=l.getBoundingRect(),u=t.get("subtext"),d=new Ao({style:Os({},a,{text:u,textFill:a.getTextColor(),y:c.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),h=t.get("link"),f=t.get("sublink"),g=t.get("triggerEvent",!0);l.silent=!h&&!g,d.silent=!f&&!g,h&&l.on("click",(function(){window.open(h,"_"+t.get("target"))})),f&&d.on("click",(function(){window.open(f,"_"+t.get("subtarget"))})),l.eventData=d.eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),u&&i.add(d);var p=i.getBoundingRect(),m=t.getBoxLayoutParams();m.width=p.width,m.height=p.height;var v=Ql(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));o||("middle"===(o=t.get("left")||t.get("right"))&&(o="center"),"right"===o?v.x+=v.width:"center"===o&&(v.x+=v.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.attr("position",[v.x,v.y]);var y={textAlign:o,textVerticalAlign:s};l.setStyle(y),d.setStyle(y),p=i.getBoundingRect();var x=v.margin,b=t.getItemStyle(["color","opacity"]);b.fill=t.get("backgroundColor");var w=new Vo({shape:{x:p.x-x[3],y:p.y-x[0],width:p.width+x[1]+x[3],height:p.height+x[0]+x[2],r:t.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});i.add(w)}}}),lc.registerSubTypeDefaulter("timeline",(function(){return"slider"})),Gh({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),b({currentIndex:n.option.currentIndex},t)})),Gh({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)}));var VM=lc.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){VM.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(e<=t&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,i=this._names=[];if("category"===n){var r=[];M(e,(function(t,e){var n,a=Tr(t);z(t)?(n=m(t)).value=e:n=e,r.push(n),O(a)||null!=a&&!isNaN(a)||(a=""),i.push(a+"")})),e=r}(this._data=new xf([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(e,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function WM(t,e,n,i){op.call(this,t,e,n),this.type=i||"value",this.model=null}k(VM.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),xu);var XM=Wu.extend({type:"timeline"});WM.prototype={constructor:WM,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},C(WM,op);var YM=L,GM=M,UM=Math.PI;function jM(t,e,n,i,r,a){var o=e.get("color");r?(r.setColor(o),n.add(r),a&&a.onUpdate(r)):((r=Gg(t.get("symbol"),-1,-1,2,2,o)).setStyle("strokeNoScale",!0),n.add(r),a&&a.onCreate(r));var s=e.getItemStyle(["color","symbol","symbolSize"]);r.setStyle(s),i=v({rectHover:!0,z2:100},i,!0);var l=t.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var c=t.get("symbolOffset");if(c){var u=i.position=i.position||[0,0];u[0]+=gl(c[0],l[0]),u[1]+=gl(c[1],l[1])}var d=t.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function qM(t,e,n,i,r){if(!t.dragging){var a=i.getModel("checkpointStyle"),o=n.dataToCoord(i.getData().get(["value"],e));r||!a.get("animation",!0)?t.attr({position:[o,0]}):(t.stopAnimation(!0),t.animateTo({position:[o,0]},a.get("animationDuration",!0),a.get("animationEasing",!0)))}}XM.extend({type:"timeline.slider",init:function(t,e){this.api=e},render:function(t,e,n,i){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,n),a=this._createGroup("mainGroup"),o=this._createGroup("labelGroup"),s=this._axis=this._createAxis(r,t);t.formatTooltip=function(t){return zl(s.scale.getLabel(t))},GM(["AxisLine","AxisTick","Control","CurrentPointer"],(function(e){this["_render"+e](r,a,s,t)}),this),this._renderAxisLabel(r,o,s,t),this._position(r,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),i=t.get("orient"),r=function(t,e){return Ql(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e);null==n||"auto"===n?n="horizontal"===i?r.y+r.height/2<e.getHeight()/2?"-":"+":r.x+r.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var a,o,s,l,c={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},u={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:UM/2},h="vertical"===i?r.height:r.width,f=t.getModel("controlStyle"),g=f.get("show",!0),p=g?f.get("itemSize"):0,m=g?f.get("itemGap"):0,v=p+m,y=t.get("label.rotate")||0;y=y*UM/180;var x=f.get("position",!0),b=g&&f.get("showPlayBtn",!0),w=g&&f.get("showPrevBtn",!0),_=0,S=h;return"left"===x||"bottom"===x?(b&&(a=[0,0],_+=v),w&&(o=[_,0],_+=v)):(b&&(a=[S-p,0],S-=v),w&&(o=[0,0],_+=v)),g&&f.get("showNextBtn",!0)&&(s=[S-p,0],S-=v),l=[_,S],t.get("inverse")&&l.reverse(),{viewRect:r,mainLength:h,orient:i,rotation:d[i],labelRotation:y,labelPosOpt:n,labelAlign:t.get("label.align")||c[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||u[i],playPosition:a,prevBtnPosition:o,nextBtnPosition:s,axisExtent:l,controlSize:p,controlGap:m}},_position:function(t,e){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var a=ne(),o=r.x,s=r.y+r.height;oe(a,a,[-o,-s]),se(a,a,-UM/2),oe(a,a,[o,s]),(r=r.clone()).applyTransform(a)}var l=m(r),c=m(n.getBoundingRect()),u=m(i.getBoundingRect()),d=n.position,h=i.position;h[0]=d[0]=l[0][0];var f,g=t.labelPosOpt;function p(t){var e=t.position;t.origin=[l[0][0]-e[0],l[1][0]-e[1]]}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}isNaN(g)?(v(d,c,l,1,f="+"===g?0:1),v(h,u,l,1,1-f)):(v(d,c,l,1,f=0<=g?0:1),h[1]=d[1]+g),n.attr("position",d),i.attr("position",h),n.rotation=i.rotation=t.rotation,p(n),p(i)},_createAxis:function(t,e){var n=e.getData(),i=e.get("axisType"),r=Pg(e,i);r.getTicks=function(){return n.mapArray(["value"],(function(t){return t}))};var a=n.getDataExtent("value");r.setExtent(a[0],a[1]),r.niceTicks();var o=new WM("value",r,t.axisExtent,i);return o.model=e,o},_createGroup:function(t){var e=this["_"+t]=new Sn;return this.group.add(e),e},_renderAxisLine:function(t,e,n,i){var r=n.getExtent();i.get("lineStyle.show")&&e.add(new Xo({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:x({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,i){var r=i.getData(),a=n.scale.getTicks();GM(a,(function(t){var a=n.dataToCoord(t),o=r.getItemModel(t),s=o.getModel("itemStyle"),l=o.getModel("emphasis.itemStyle"),c={position:[a,0],onclick:YM(this._changeTimeline,this,t)},u=jM(o,s,e,c);Ds(u,l.getItemStyle()),o.get("tooltip")?(u.dataIndex=t,u.dataModel=i):u.dataIndex=u.dataModel=null}),this)},_renderAxisLabel:function(t,e,n,i){if(n.getLabelModel().get("show")){var r=i.getData(),a=n.getViewLabels();GM(a,(function(i){var a=i.tickValue,o=r.getItemModel(a),s=o.getModel("label"),l=o.getModel("emphasis.label"),c=n.dataToCoord(i.tickValue),u=new Ao({position:[c,0],rotation:t.labelRotation-t.rotation,onclick:YM(this._changeTimeline,this,a),silent:!1});Os(u.style,s,{text:i.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(u),Ds(u,Os({},l))}),this)}},_renderControl:function(t,e,n,i){var r=t.controlSize,a=t.rotation,o=i.getModel("controlStyle").getItemStyle(),s=i.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-r/2,r,r],c=i.getPlayState(),u=i.get("inverse",!0);function d(t,n,c,u){if(t){var d=function(t,e,n,i){return ds(t.get(e).replace(/^path:\/\//,""),m(i||{}),new _n(n[0],n[1],n[2],n[3]),"center")}(i,n,l,{position:t,origin:[r/2,0],rotation:u?-a:0,rectHover:!0,style:o,onclick:c});e.add(d),Ds(d,s)}}d(t.nextBtnPosition,"controlStyle.nextIcon",YM(this._changeTimeline,this,u?"-":"+")),d(t.prevBtnPosition,"controlStyle.prevIcon",YM(this._changeTimeline,this,u?"+":"-")),d(t.playPosition,"controlStyle."+(c?"stopIcon":"playIcon"),YM(this._handlePlayClick,this,!c),!0)},_renderCurrentPointer:function(t,e,n,i){var r=i.getData(),a=i.getCurrentIndex(),o=r.getItemModel(a).getModel("checkpointStyle"),s=this;this._currentPointer=jM(o,o,this._mainGroup,{},this._currentPointer,{onCreate:function(t){t.draggable=!0,t.drift=YM(s._handlePointerDrag,s),t.ondragend=YM(s._handlePointerDragend,s),qM(t,a,n,i,!0)},onUpdate:function(t){qM(t,a,n,i)}})},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],i=ml(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var r=this._findNearestTick(n),a=this.model;(e||r!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(r)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(YM((function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))}),this),this.model.get("playInterval")))},_toAxisCoord:function(t){return js(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],(function(n,a){var o=r.dataToCoord(n),s=Math.abs(o-t);s<i&&(i=s,e=a)})),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),Xh((function(t){var e=t&&t.timeline;N(e)||(e=e?[e]:[]),M(e,(function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),FM(t),HM(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});HM(i,"position")||(i.position=t.controlPosition),"none"!==i.position||HM(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}M(t.data||[],(function(t){z(t)&&!N(t)&&(!HM(t,"value")&&HM(t,"name")&&(t.value=t.name),FM(t))}))}(t)}))}));var ZM=Ll,$M=zl;function KM(t){Ar(t,"label",["show"])}var JM=Kh({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},isAnimationEnabled:function(){if(r.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e){this._mergeOption(t,e,!1,!1)},_mergeOption:function(t,e,n,i){var r=this.constructor,a=this.mainType+"Model";n||e.eachSeries((function(t){var n=t.get(this.mainType,!0),o=t[a];n&&n.data?(o?o._mergeOption(n,e,!0):(i&&KM(n),M(n.data,(function(t){t instanceof Array?(KM(t[0]),KM(t[1])):KM(t)})),x(o=new r(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),t[a]=o):t[a]=null}),this)},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=N(n)?T(n,ZM).join(", "):ZM(n),r=e.getName(t),a=$M(this.name);return null==n&&!r||(a+="<br />"),r&&(a+=$M(r),null!=n&&(a+=" : ")),null!=n&&(a+=$M(i)),a},getData:function(){return this._data},setData:function(t){this._data=t}});k(JM,xu),JM.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var QM=S;function tT(t,e,n,i,r,a){var o=[],s=Bf(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=sT(e,s,t),c=e.indicesOfNearest(s,l)[0];o[r]=e.get(n,c),o[a]=e.get(s,c);var u=e.get(i,c),d=vl(e.get(i,c));return 0<=(d=Math.min(d,20))&&(o[a]=+o[a].toFixed(d)),[o,u]}var eT=E,nT={min:eT(tT,"min"),max:eT(tT,"max"),average:eT(tT,"average")};function iT(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!N(e.coord)&&i){var r=i.dimensions,a=rT(e,n,i,t);if((e=m(e)).type&&nT[e.type]&&a.baseAxis&&a.valueAxis){var o=QM(r,a.baseAxis.dim),s=QM(r,a.valueAxis.dim),l=nT[e.type](n,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else{for(var c=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],u=0;u<2;u++)nT[c[u]]&&(c[u]=sT(n,n.mapDimension(r[u]),c[u]));e.coord=c}}return e}function rT(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(function(t,e){var n=t.getData(),i=n.dimensions;e=n.getDimension(e);for(var r=0;r<i.length;r++){var a=n.getDimensionInfo(i[r]);if(a.name===e)return a.coordDim}}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function aT(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function oT(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value}function sT(t,e,n){if("average"!==n)return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0];var i=0,r=0;return t.each(e,(function(t,e){isNaN(t)||(i+=t,r++)})),i/r}var lT=Jh({type:"marker",init:function(){this.markerGroupMap=Q()},render:function(t,e,n){var i=this.markerGroupMap;i.each((function(t){t.__keep=!1}));var r=this.type+"Model";e.eachSeries((function(t){var i=t[r];i&&this.renderSeries(t,i,e,n)}),this),i.each((function(t){t.__keep||this.group.remove(t.group)}),this)},renderSeries:function(){}});function cT(t,e,n){var i=e.coordinateSystem;t.each((function(r){var a,o=t.getItemModel(r),s=gl(o.get("x"),n.getWidth()),l=gl(o.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var c=t.get(i.dimensions[0],r),u=t.get(i.dimensions[1],r);a=i.dataToPoint([c,u])}}else a=[s,l];isNaN(s)||(a[0]=s),isNaN(l)||(a[1]=l),t.setItemLayout(r,a)}))}function uT(t,e,n,i){var r=t.getData(),a=i.type;if(!N(i)&&("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis)){var o,s;if(null!=i.yAxis||null!=i.xAxis)o=e.getAxis(null!=i.yAxis?"y":"x"),s=W(i.yAxis,i.xAxis);else{var l=rT(i,r,e,t);o=l.valueAxis,s=sT(r,Ff(r,l.valueDataDim),a)}var c="x"===o.dim?0:1,u=1-c,d=m(i),h={};d.type=null,d.coord=[],h.coord=[],d.coord[u]=-1/0,h.coord[u]=1/0;var f=n.get("precision");0<=f&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),d.coord[c]=h.coord[c]=s,i=[d,h,{type:a,valueIndex:i.valueIndex,value:s}]}return(i=[iT(t,i[0]),iT(t,i[1]),x({},i[2])])[2].type=i[2].type||"",v(i[2],i[0]),v(i[2],i[1]),i}function dT(t){return!isNaN(t)&&!isFinite(t)}function hT(t,e,n,i){var r=1-t,a=i.dimensions[t];return dT(e[r])&&dT(n[r])&&e[t]===n[t]&&i.getAxis(a).containData(e[t])}function fT(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(hT(1,n,i,t)||hT(0,n,i,t)))return!0}return aT(t,e[0])&&aT(t,e[1])}function gT(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=gl(s.get("x"),r.getWidth()),c=gl(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=o.dimensions,d=t.get(u[0],e),h=t.get(u[1],e);a=o.dataToPoint([d,h])}if("cartesian2d"===o.type){var f=o.getAxis("x"),g=o.getAxis("y");dT(t.get((u=o.dimensions)[0],e))?a[0]=f.toGlobalCoord(f.getExtent()[n?0:1]):dT(t.get(u[1],e))&&(a[1]=g.toGlobalCoord(g.getExtent()[n?0:1]))}isNaN(l)||(a[0]=l),isNaN(c)||(a[1]=c)}else a=[l,c];t.setItemLayout(e,a)}function pT(t,e,n,i){var r=iT(t,i[0]),a=iT(t,i[1]),o=W,s=r.coord,l=a.coord;s[0]=o(s[0],-1/0),s[1]=o(s[1],-1/0),l[0]=o(l[0],1/0),l[1]=o(l[1],1/0);var c=y([{},r,a]);return c.coord=[r.coord,a.coord],c.x0=r.x,c.y0=r.y,c.x1=a.x,c.y1=a.y,c}function mT(t){return!isNaN(t)&&!isFinite(t)}function vT(t,e,n){var i=1-t;return mT(e[i])&&mT(n[i])}function yT(t,e){var n=e.coord[0],i=e.coord[1];return!("cartesian2d"!==t.type||!n||!i||!vT(1,n,i)&&!vT(0,n,i))||aT(t,{coord:n,x:e.x0,y:e.y0})||aT(t,{coord:i,x:e.x1,y:e.y1})}function xT(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=gl(s.get(n[0]),r.getWidth()),c=gl(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(n,e));else{var u=[f=t.get(n[0],e),g=t.get(n[1],e)];o.clampData&&o.clampData(u,u),a=o.dataToPoint(u,!0)}if("cartesian2d"===o.type){var d=o.getAxis("x"),h=o.getAxis("y"),f=t.get(n[0],e),g=t.get(n[1],e);mT(f)?a[0]=d.toGlobalCoord(d.getExtent()["x0"===n[0]?0:1]):mT(g)&&(a[1]=h.toGlobalCoord(h.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(a[0]=l),isNaN(c)||(a[1]=c)}else a=[l,c];return a}lT.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries((function(t){var e=t.markPointModel;e&&(cT(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))}),this)},renderSeries:function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new _p),c=function(t,e,n){var i;i=t?T(t&&t.dimensions,(function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})})):[{name:"value",type:"float"}];var r=new xf(i,n),a=T(n.get("data"),E(iT,e));return t&&(a=D(a,E(aT,t))),r.initData(a,null,t?oT:function(t){return t.value}),r}(r,t,e);e.setData(c),cT(e.getData(),t,i),c.each((function(t){var n=c.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),a=R(i),s=R(r);if(a||s){var l=e.getRawValue(t),u=e.getDataParams(t);a&&(i=i(l,u)),s&&(r=r(l,u))}c.setItemVisual(t,{symbol:i,symbolSize:r,color:n.get("itemStyle.color")||o.getVisual("color")})})),l.updateData(c),this.group.add(l.group),c.eachItemGraphicEl((function(t){t.traverse((function(t){t.dataModel=e}))})),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),Xh((function(t){t.markPoint=t.markPoint||{}})),JM.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),lT.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries((function(t){var e=t.markLineModel;if(e){var i=e.getData(),r=e.__from,a=e.__to;r.each((function(e){gT(r,e,!0,t,n),gT(a,e,!1,t,n)})),i.each((function(t){i.setItemLayout(t,[r.getItemLayout(t),a.getItemLayout(t)])})),this.markerGroupMap.get(t.id).updateLayout()}}),this)},renderSeries:function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new Sb);this.group.add(l.group);var c=function(t,e,n){var i;i=t?T(t&&t.dimensions,(function(t){return b({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})})):[{name:"value",type:"float"}];var r=new xf(i,n),a=new xf(i,n),o=new xf([],n),s=T(n.get("data"),E(uT,e,t,n));t&&(s=D(s,E(fT,t)));var l=t?oT:function(t){return t.value};return r.initData(T(s,(function(t){return t[0]})),null,l),a.initData(T(s,(function(t){return t[1]})),null,l),o.initData(T(s,(function(t){return t[2]}))),o.hasItemOption=!0,{from:r,to:a,line:o}}(r,t,e),u=c.from,d=c.to,h=c.line;e.__from=u,e.__to=d,e.setData(h);var f=e.get("symbol"),g=e.get("symbolSize");function p(e,n,r){var a=e.getItemModel(n);gT(e,n,r,t,i),e.setItemVisual(n,{symbolSize:a.get("symbolSize")||g[r?0:1],symbol:a.get("symbol",!0)||f[r?0:1],color:a.get("itemStyle.color")||o.getVisual("color")})}N(f)||(f=[f,f]),"number"==typeof g&&(g=[g,g]),c.from.each((function(t){p(u,t,!0),p(d,t,!1)})),h.each((function(t){var e=h.getItemModel(t).get("lineStyle.color");h.setItemVisual(t,{color:e||u.getItemVisual(t,"color")}),h.setItemLayout(t,[u.getItemLayout(t),d.getItemLayout(t)]),h.setItemVisual(t,{fromSymbolSize:u.getItemVisual(t,"symbolSize"),fromSymbol:u.getItemVisual(t,"symbol"),toSymbolSize:d.getItemVisual(t,"symbolSize"),toSymbol:d.getItemVisual(t,"symbol")})})),l.updateData(h),c.line.eachItemGraphicEl((function(t,n){t.traverse((function(t){t.dataModel=e}))})),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),Xh((function(t){t.markLine=t.markLine||{}})),JM.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var bT=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];lT.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries((function(t){var e=t.markAreaModel;if(e){var i=e.getData();i.each((function(e){var r=T(bT,(function(r){return xT(i,e,r,t,n)}));i.setItemLayout(e,r),i.getItemGraphicEl(e).setShape("points",r)}))}}),this)},renderSeries:function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,{group:new Sn});this.group.add(l.group),l.__keep=!0;var c=function(t,e,n){var i,r;r=t?(i=T(t&&t.dimensions,(function(t){var n=e.getData();return b({name:t},n.getDimensionInfo(n.mapDimension(t))||{})})),new xf(T(["x0","y0","x1","y1"],(function(t,e){return{name:t,type:i[e%2].type}})),n)):new xf(i=[{name:"value",type:"float"}],n);var a=T(n.get("data"),E(pT,e,t,n));return t&&(a=D(a,E(yT,t))),r.initData(a,null,t?function(t,e,n,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value}),r.hasItemOption=!0,r}(r,t,e);e.setData(c),c.each((function(e){c.setItemLayout(e,T(bT,(function(n){return xT(c,e,n,t,i)}))),c.setItemVisual(e,{color:o.getVisual("color")})})),c.diff(l.__data).add((function(t){var e=new No({shape:{points:c.getItemLayout(t)}});c.setItemGraphicEl(t,e),l.group.add(e)})).update((function(t,n){var i=l.__data.getItemGraphicEl(n);Ys(i,{shape:{points:c.getItemLayout(t)}},e,t),l.group.add(i),c.setItemGraphicEl(t,i)})).remove((function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)})).execute(),c.eachItemGraphicEl((function(t,n){var i=c.getItemModel(n),r=i.getModel("label"),a=i.getModel("emphasis.label"),o=c.getItemVisual(n,"color");t.useStyle(b(i.getModel("itemStyle").getItemStyle(),{fill:Ge(o,.4),stroke:o})),t.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),Ns(t.style,t.hoverStyle,r,a,{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",isRectText:!0,autoColor:o}),Ds(t,{}),t.dataModel=e})),l.__data=c,l.group.silent=e.get("silent")||t.get("silent")}}),Xh((function(t){t.markArea=t.markArea||{}}));var wT=sd.legend.selector,_T={all:{type:"all",title:m(wT.all)},inverse:{type:"inverse",title:m(wT.inverse)}},ST=Kh({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){ST.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;!0===e&&(e=t.selector=["all","inverse"]),N(e)&&M(e,(function(t,n){O(t)&&(t={type:t}),e[n]=v(t,_T[t.type])}))},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}e||this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries((function(i){var r;if(n.push(i.name),i.legendVisualProvider){var a=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(a)),a.length?e=e.concat(a):r=!0}else r=!0;r&&Pr(i)&&e.push(i.name)})),this._availableNames=n;var i=T(this.get("data")||e,(function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new ll(t,this,this.ecModel)}),this);this._data=i},getData:function(){return this._data},select:function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&M(this._data,(function(t){e[t.get("name")]=!1})),e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var t=this.option.selected;M(this._data,(function(e){t[e.get("name",!0)]=!0}))},inverseSelect:function(){var t=this.option.selected;M(this._data,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=S(this._availableNames,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function CT(t,e,n){var i,r={},a="toggleSelected"===t;return n.eachComponent("legend",(function(n){a&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name)),M(n.getData(),(function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r[e]=r.hasOwnProperty(e)?r[e]&&i:i}}))})),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}Gh("legendToggleSelect","legendselectchanged",E(CT,"toggleSelected")),Gh("legendAllSelect","legendselectall",E(CT,"allSelect")),Gh("legendInverseSelect","legendinverseselect",E(CT,"inverseSelect")),Gh("legendSelect","legendselected",E(CT,"select")),Gh("legendUnSelect","legendunselected",E(CT,"unSelect"));var kT=E,AT=M,MT=Sn,TT=Jh({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new MT),this.group.add(this._selectorGroup=new MT),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),a=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===a?"right":"left");var o=t.get("selector",!0),s=t.get("selectorPosition",!0);!o||s&&"auto"!==s||(s="horizontal"===a?"end":"start"),this.renderInner(r,t,e,n,o,a,s);var l=t.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},u=t.get("padding"),d=Ql(l,c,u),h=this.layoutInner(t,r,d,i,o,s),f=Ql(b({width:h.width,height:h.height},l),c,u);this.group.attr("position",[f.x-h.x,f.y-h.y]),this.group.add(this._backgroundEl=eA(h,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,n,i,r,a,o){var s=this.getContentGroup(),l=Q(),c=e.get("selectedMode"),u=[];n.eachRawSeries((function(t){t.get("legendHoverLink")||u.push(t.id)})),AT(e.getData(),(function(r,a){var o=r.get("name");if(this.newlineDisabled||""!==o&&"\n"!==o){var d=n.getSeriesByName(o)[0];if(!l.get(o))if(d){var h=d.getData(),f=h.getVisual("color"),g=h.getVisual("borderColor");"function"==typeof f&&(f=f(d.getDataParams(0))),"function"==typeof g&&(g=g(d.getDataParams(0)));var p=h.getVisual("legendSymbol")||"roundRect",m=h.getVisual("symbol");this._createItem(o,a,r,e,p,m,t,f,g,c).on("click",kT(DT,o,null,i,u)).on("mouseover",kT(PT,d.name,null,i,u)).on("mouseout",kT(LT,d.name,null,i,u)),l.set(o,!0)}else n.eachRawSeries((function(n){if(!l.get(o)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(o))return;var d=s.indexOfName(o),h=s.getItemVisual(d,"color"),f=s.getItemVisual(d,"borderColor");this._createItem(o,a,r,e,"roundRect",null,t,h,f,c).on("click",kT(DT,null,o,i,u)).on("mouseover",kT(PT,null,o,i,u)).on("mouseout",kT(LT,null,o,i,u)),l.set(o,!0)}}),this)}else s.add(new MT({newline:!0}))}),this),r&&this._createSelector(r,e,i,a,o)},_createSelector:function(t,e,n,i,r){var a=this.getSelectorGroup();AT(t,(function(t){!function(t){var i=t.type,r=new Ao({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});a.add(r);var o=e.getModel("selectorLabel"),s=e.getModel("emphasis.selectorLabel");Ns(r.style,r.hoverStyle={},o,s,{defaultText:t.title,isRectText:!1}),Ds(r)}(t)}))},_createItem:function(t,e,n,i,r,a,o,s,l,c){var u=i.get("itemWidth"),d=i.get("itemHeight"),h=i.get("inactiveColor"),f=i.get("inactiveBorderColor"),g=i.get("symbolKeepAspect"),p=i.getModel("itemStyle"),m=i.isSelected(t),v=new MT,y=n.getModel("textStyle"),b=n.get("icon"),w=n.getModel("tooltip"),_=w.parentModel,S=Gg(r=b||r,0,0,u,d,m?s:h,null==g||g);if(v.add(IT(S,r,p,l,f,m)),!b&&a&&(a!==r||"none"===a)){var C=.8*d;"none"===a&&(a="circle");var k=Gg(a,(u-C)/2,(d-C)/2,C,C,m?s:h,null==g||g);v.add(IT(k,a,p,l,f,m))}var A="left"===o?u+5:-5,M=o,T=i.get("formatter"),I=t;"string"==typeof T&&T?I=T.replace("{name}",null!=t?t:""):"function"==typeof T&&(I=T(t)),v.add(new Ao({style:Os({},y,{text:I,x:A,y:d/2,textFill:m?y.getTextColor():h,textAlign:M,textVerticalAlign:"middle"})}));var D=new Vo({shape:v.getBoundingRect(),invisible:!0,tooltip:w.get("show")?x({content:t,formatter:_.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},w.option):null});return v.add(D),v.eachChild((function(t){t.silent=!0})),D.silent=!c,this.getContentGroup().add(v),Ds(v),v.__legendDataIndex=e,v},layoutInner:function(t,e,n,i,r,a){var o=this.getContentGroup(),s=this.getSelectorGroup();Jl(t.get("orient"),o,t.get("itemGap"),n.width,n.height);var l=o.getBoundingRect(),c=[-l.x,-l.y];if(r){Jl("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),d=[-u.x,-u.y],h=t.get("selectorButtonGap",!0),f=t.getOrient().index,g=0===f?"width":"height",p=0===f?"height":"width",m=0===f?"y":"x";"end"===a?d[f]+=l[g]+h:c[f]+=u[g]+h,d[1-f]+=l[p]/2-u[p]/2,s.attr("position",d),o.attr("position",c);var v={x:0,y:0};return v[g]=l[g]+h+u[g],v[p]=Math.max(l[p],u[p]),v[m]=Math.min(0,u[m]+d[1-f]),v}return o.attr("position",c),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function IT(t,e,n,i,r,a){var o;return"line"!==e&&e.indexOf("empty")<0?(o=n.getItemStyle(),t.style.stroke=i,a||(o.stroke=r)):o=n.getItemStyle(["borderWidth","borderColor"]),t.setStyle(o)}function DT(t,e,n,i){LT(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),PT(t,e,n,i)}function PT(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function LT(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}Yh(nh.PROCESSOR.SERIES_FILTER,(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0}))})),lc.registerSubTypeDefaulter("legend",(function(){return"plain"}));var ET=ST.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,i){var r=nc(t);ET.superCall(this,"init",t,e,n,i),NT(this,t,r)},mergeOption:function(t,e){ET.superCall(this,"mergeOption",t,e),NT(this,this.option,t)}});function NT(t,e,n){var i=[1,1];i[t.getOrient().index]=0,ec(e,n,{type:"box",ignoreSize:i})}var RT=Sn,OT=["width","height"],zT=["x","y"],BT=TT.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){BT.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new RT),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new RT)},resetInner:function(){BT.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,i,r,a,o){var s=this;BT.superCall(this,"renderInner",t,e,n,i,r,a,o);var l=this._controllerGroup,c=e.get("pageIconSize",!0);N(c)||(c=[c,c]),d("pagePrev",0);var u=e.getModel("pageTextStyle");function d(t,n){var r=t+"DataIndex",a=Ks(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:L(s._pageGo,s,r,e,i)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});a.name=t,l.add(a)}l.add(new Ao({name:"pageText",style:{textFill:u.getTextColor(),font:u.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),d("pageNext",1)},layoutInner:function(t,e,n,i,r,a){var o=this.getSelectorGroup(),s=t.getOrient().index,l=OT[s],c=zT[s],u=OT[1-s],d=zT[1-s];r&&Jl("horizontal",o,t.get("selectorItemGap",!0));var h=t.get("selectorButtonGap",!0),f=o.getBoundingRect(),g=[-f.x,-f.y],p=m(n);r&&(p[l]=n[l]-f[l]-h);var v=this._layoutContentAndController(t,i,p,s,l,u,d);if(r){if("end"===a)g[s]+=v[l]+h;else{var y=f[l]+h;g[s]-=y,v[c]-=y}v[l]+=f[l]+h,g[1-s]+=v[d]+v[u]/2-f[u]/2,v[u]=Math.max(v[u],f[u]),v[d]=Math.min(v[d],f[d]+g[1-s]),o.attr("position",g)}return v},_layoutContentAndController:function(t,e,n,i,r,a,o){var s=this.getContentGroup(),l=this._containerGroup,c=this._controllerGroup;Jl(t.get("orient"),s,t.get("itemGap"),i?n.width:null,i?null:n.height),Jl("horizontal",c,t.get("pageButtonItemGap",!0));var u=s.getBoundingRect(),d=c.getBoundingRect(),h=this._showController=u[r]>n[r],f=[-u.x,-u.y];e||(f[i]=s.position[i]);var g=[0,0],p=[-d.x,-d.y],m=X(t.get("pageButtonGap",!0),t.get("itemGap",!0));h&&("end"===t.get("pageButtonPosition",!0)?p[i]+=n[r]-d[r]:g[i]+=d[r]+m),p[1-i]+=u[a]/2-d[a]/2,s.attr("position",f),l.attr("position",g),c.attr("position",p);var v={x:0,y:0};if(v[r]=h?n[r]:u[r],v[a]=Math.max(u[a],d[a]),v[o]=Math.min(0,d[o]+p[1-i]),l.__rectSize=n[r],h){var y={x:0,y:0};y[r]=Math.max(n[r]-d[r]-m,0),y[a]=v[a],l.setClipPath(new Vo({shape:y})),l.__rectSize=y[r]}else c.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var x=this._getPageInfo(t);return null!=x.pageIndex&&Ys(s,{position:x.contentPosition},h&&t),this._updatePageInfoView(t,x),v},_pageGo:function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;M(["pagePrev","pageNext"],(function(i){var r=null!=e[i+"DataIndex"],a=n.childOfName(i);a&&(a.setStyle("fill",t.get(r?"pageIconColor":"pageIconInactiveColor",!0)),a.cursor=r?"pointer":"default")}));var i=n.childOfName("pageText"),r=t.get("pageFormatter"),a=e.pageIndex,o=null!=a?a+1:0,s=e.pageCount;i&&r&&i.setStyle("text",O(r)?r.replace("{current}",o).replace("{total}",s):r({current:o,total:s}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=t.getOrient().index,a=OT[r],o=zT[r],s=this._findTargetItemIndex(e),l=n.children(),c=l[s],u=l.length,d=u?1:0,h={contentPosition:n.position.slice(),pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return h;var f=y(c);h.contentPosition[r]=-f.s;for(var g=s+1,p=f,m=f,v=null;g<=u;++g)(!(v=y(l[g]))&&m.e>p.s+i||v&&!x(v,p.s))&&(p=m.i>p.i?m:v)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=p.i),++h.pageCount),m=v;for(g=s-1,p=f,m=f,v=null;-1<=g;--g)(v=y(l[g]))&&x(m,v.s)||!(p.i<m.i)||(m=p,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=p.i),++h.pageCount,++h.pageIndex),p=v;return h;function y(t){if(t){var e=t.getBoundingRect(),n=e[o]+t.position[r];return{s:n,e:n+e[a],i:t.__legendDataIndex}}}function x(t,e){return t.e>=e&&t.s<=e+i}},_findTargetItemIndex:function(t){return this._showController?(this.getContentGroup().eachChild((function(i,r){var a=i.__legendDataIndex;null==n&&null!=a&&(n=r),a===t&&(e=r)})),null!=e?e:n):0;var e,n}});Gh("legendScroll","legendscroll",(function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(n)}))})),jA.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var FT=Vo,HT=fl,VT=ml,WT=L,XT=M,YT="horizontal",GT="vertical",UT=["line","bar","candlestick","scatter"],jT=$A.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this.api=e},render:function(t,e,n,i){jT.superApply(this,"render",arguments),rd(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){jT.superApply(this,"remove",arguments),ad(this,"_dispatchZoomAction")},dispose:function(){jT.superApply(this,"dispose",arguments),ad(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new Sn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},r=this._orient===YT?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},a=nc(t.option);M(["right","top","width","height"],(function(t){"ph"===a[t]&&(a[t]=r[t])}));var o=Ql(a,i,t.padding);this._location={x:o.x,y:o.y},this._size=[o.width,o.height],this._orient===GT&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),a=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==YT||r?n===YT&&r?{scale:o?[-1,1]:[-1,-1]}:n!==GT||r?{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[1,1]:[1,-1]});var s=t.getBoundingRect([a]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,e=this._displayables.barGroup;e.add(new FT({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),e.add(new FT({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:L(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=r){var a=i.getDataExtent(r),o=.3*(a[1]-a[0]);a=[a[0]-o,a[1]+o];var s,l=[0,e[1]],c=[[e[0],0],[0,0]],u=[],d=e[0]/(i.count()-1),h=0,f=Math.round(i.count()/e[0]);i.each([r],(function(t,e){if(0<f&&e%f)h+=d;else{var n=null==t||isNaN(t)||""===t,i=n?0:HT(t,a,l,!0);n&&!s&&e?(c.push([c[c.length-1][0],0]),u.push([u[u.length-1][0],0])):!n&&s&&(c.push([h,0]),u.push([h,0])),c.push([h,i]),u.push([h,i]),h+=d,s=n}}));var g=this.dataZoomModel;this._displayables.barGroup.add(new No({shape:{points:c},style:b({fill:g.get("dataBackgroundColor")},g.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Ro({shape:{points:u},style:g.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis((function(r,a){M(t.getAxisProxy(r.name,a).getTargetSeriesModels(),(function(t){if(!(n||!0!==e&&S(UT,t.get("type"))<0)){var o,s=i.getComponent(r.axis,a).axis,l=function(t){return{x:"y",y:"x",radius:"angle",angle:"radius"}[t]}(r.name),c=t.coordinateSystem;null!=l&&c.getOtherAxis&&(o=c.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r.name,otherDim:l,otherAxisInverse:o}}}),this)}),this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],i=this._displayables.barGroup,r=this._size,a=this.dataZoomModel;i.add(t.filler=new FT({draggable:!0,cursor:qT(this._orient),drift:WT(this._onDragMove,this,"all"),ondragstart:WT(this._showDataInfo,this,!0),ondragend:WT(this._onDragEnd,this),onmouseover:WT(this._showDataInfo,this,!0),onmouseout:WT(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),i.add(new FT({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),XT([0,1],(function(t){var r=Ks(a.get("handleIcon"),{cursor:qT(this._orient),draggable:!0,drift:WT(this._onDragMove,this,t),ondragend:WT(this._onDragEnd,this),onmouseover:WT(this._showDataInfo,this,!0),onmouseout:WT(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),o=r.getBoundingRect();this._handleHeight=gl(a.get("handleSize"),this._size[1]),this._handleWidth=o.width/o.height*this._handleHeight,r.setStyle(a.getModel("handleStyle").getItemStyle());var s=a.get("handleColor");null!=s&&(r.style.fill=s),i.add(e[t]=r);var l=a.textStyleModel;this.group.add(n[t]=new Ao({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))}),this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[HT(t[0],[0,100],e,!0),HT(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];sw(e,i,r,n.get("zoomLock")?"all":t,null!=a.minSpan?HT(a.minSpan,o,r,!0):null,null!=a.maxSpan?HT(a.maxSpan,o,r,!0):null);var s=this._range,l=this._range=VT([HT(i[0],r,o,!0),HT(i[1],r,o,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,i=VT(n.slice()),r=this._size;XT([0,1],(function(t){var i=this._handleHeight;e.handles[t].attr({scale:[i/2,i/2],position:[n[t],r[1]/2-i/2]})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,a=["",""];if(e.get("showDetail")){var o=e.findRepresentativeAxisProxy();if(o){var s=o.getAxisModel().axis,l=this._range,c=t?o.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:o.getDataValueWindow();a=[this._formatLabel(c[0],s),this._formatLabel(c[1],s)]}}var u=VT(this._handleEnds.slice());function d(t){var e=Us(n.handles[t].parent,this.group),o=qs(0===t?"right":"left",e),s=this._handleWidth/2+5,l=js([u[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],textVerticalAlign:r===YT?"middle":o,textAlign:r===YT?o:"center",text:a[t]})}d.call(this,0),d.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(r,20));return R(i)?i(t,a):O(i)?i.replace("{value}",a):a},_showDataInfo:function(t){var e=this._displayables.handleLabels;e[0].attr("invisible",!(t=this._dragging||t)),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n,i){this._dragging=!0,Yt(i.event);var r=js([e,n],this._displayables.barGroup.getLocalTransform(),!0),a=this._updateInterval(t,r[0]),o=this.dataZoomModel.get("realtime");this._updateView(!o),a&&o&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),r&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(XT(this.getTargetCoordInfo(),(function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}})),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}});function qT(t){return"vertical"===t?"ns-resize":"ew-resize"}jA.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var ZT="\0_ec_dataZoom_roams";function $T(t,e){var n=JT(t),i=e.dataZoomId,r=e.coordId;M(n,(function(t,n){var a=t.dataZoomInfos;a[i]&&S(e.allCoordIds,r)<0&&(delete a[i],t.count--)})),QT(n);var a=n[r];a||((a=n[r]={coordId:r,dataZoomInfos:{},count:0}).controller=function(t,e){var n=new ey(t.getZr());return M(["pan","zoom","scrollMove"],(function(t){n.on(t,(function(n){var i=[];M(e.dataZoomInfos,(function(r){if(n.isAvailableBehavior(r.dataZoomModel.option)){var a=(r.getRange||{})[t],o=a&&a(e.controller,n);!r.dataZoomModel.get("disabled",!0)&&o&&i.push({dataZoomId:r.dataZoomId,start:o[0],end:o[1]})}})),i.length&&e.dispatchAction(i)}))})),n}(t,a),a.dispatchAction=E(tI,t)),a.dataZoomInfos[i]||a.count++,a.dataZoomInfos[i]=e;var o=function(t){var e,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return M(t,(function(t){var r=t.dataZoomModel,a=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");n["type_"+e]<n["type_"+a]&&(e=a),i&=r.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(a.dataZoomInfos);a.controller.enable(o.controlType,o.opt),a.controller.setPointerChecker(e.containsPoint),rd(a,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}function KT(t){return t.type+"\0_"+t.id}function JT(t){var e=t.getZr();return e[ZT]||(e[ZT]={})}function QT(t){M(t,(function(e,n){e.count||(e.controller.dispose(),delete t[n])}))}function tI(t,e){t.dispatchAction({type:"dataZoom",batch:e})}var eI=L,nI=$A.extend({type:"dataZoom.inside",init:function(t,e){},render:function(t,e,n,i){nI.superApply(this,"render",arguments),this._range=t.getPercentRange(),M(this.getTargetCoordInfo(),(function(e,i){var r=T(e,(function(t){return KT(t.model)}));M(e,(function(e){var a=e.model,o={};M(["pan","zoom","scrollMove"],(function(t){o[t]=eI(iI[t],this,e,i)}),this),$T(n,{coordId:KT(a),allCoordIds:r,containsPoint:function(t,e,n){return a.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,dataZoomModel:t,getRange:o})}),this)}),this)},dispose:function(){!function(t,e){var n=JT(t);M(n,(function(t){t.controller.dispose();var n=t.dataZoomInfos;n[e]&&(delete n[e],t.count--)})),QT(n)}(this.api,this.dataZoomModel.id),nI.superApply(this,"dispose",arguments),this._range=null}}),iI={zoom:function(t,e,n,i){var r=this._range,a=r.slice(),o=t.axisModels[0];if(o){var s=oI[e](null,[i.originX,i.originY],o,n,t),l=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/i.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return sw(0,a,[0,100],0,u.minSpan,u.maxSpan),this._range=a,r[0]!==a[0]||r[1]!==a[1]?a:void 0}},pan:rI((function(t,e,n,i,r,a){var o=oI[i]([a.oldX,a.oldY],[a.newX,a.newY],e,r,n);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength})),scrollMove:rI((function(t,e,n,i,r,a){return oI[i]([0,0],[a.scrollDelta,a.scrollDelta],e,r,n).signal*(t[1]-t[0])*a.scrollDelta}))};function rI(t){return function(e,n,i,r){var a=this._range,o=a.slice(),s=e.axisModels[0];if(s)return sw(t(o,s,e,n,i,r),o,[0,100],"all"),this._range=o,a[0]!==o[0]||a[1]!==o[1]?o:void 0}}function aI(t){var e=t&&t.visualMap;N(e)||(e=e?[e]:[]),sI(e,(function(t){if(t){lI(t,"splitList")&&!lI(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&N(e)&&sI(e,(function(t){z(t)&&(lI(t,"start")&&!lI(t,"min")&&(t.min=t.start),lI(t,"end")&&!lI(t,"max")&&(t.max=t.end))}))}}))}var oI={grid:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(o.pixel=e[0]-t[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,n,i,r){var a=n.axis,o=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}},sI=M;function lI(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}lc.registerSubTypeDefaulter("visualMap",(function(t){return t.categories||(t.pieces?0<t.pieces.length:0<t.splitNumber)&&!t.calculable?"piecewise":"continuous"}));var cI=nh.VISUAL.COMPONENT;function uI(t,e,n,i){for(var r=e.targetVisuals[i],a=Mx.prepareVisualTypes(r),o={color:t.getData().getVisual("color")},s=0,l=a.length;s<l;s++){var c=a[s],u=r["opacity"===c?"__alphaForOpacity":c];u&&u.applyVisual(n,d,h)}return o.color;function d(t){return o[t]}function h(t,e){o[t]=e}}qh(cI,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(function(t,e,n,i){var r={};return M(t,(function(t){var n=Mx.prepareVisualTypes(e[t]);r[t]=n})),{progress:function(t,a){function o(t){return a.getItemVisual(l,t)}function s(t,e){a.setItemVisual(l,t,e)}var l;for(null!=i&&(i=a.getDimension(i));null!=(l=t.next());){var c=a.getRawDataItem(l);if(!c||!1!==c.visualMap)for(var u=null!=i?a.get(i,l,!0):l,d=n(u),h=e[d],f=r[d],g=0,p=f.length;g<p;g++){var m=f[g];h[m]&&h[m].applyVisual(u,o,s)}}}}}(e.stateList,e.targetVisuals,L(e.getValueState,e),e.getDataDimension(t.getData())))})),n}}),qh(cI,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(L(uI,null,t,e))||{stops:[],outerColors:[]},a=e.getDataDimension(n),o=n.getDimensionInfo(a);null!=o&&(r.dimension=o.index,i.push(r))}})),t.getData().setVisual("visualMeta",i)}});var dI=function(t,e,n){var i=m((hI[t]||{})[e]);return n&&N(i)?i[i.length-1]:i},hI={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},fI=Mx.mapVisual,gI=Mx.eachVisual,pI=N,mI=M,vI=ml,yI=fl,xI=Kh({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;r.canvasSupported||(n.realtime=!1),e||bM(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=L(t,this),this.controllerVisuals=xM(this.option.controller,e,t),this.targetVisuals=xM(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=kr(t),e},eachTargetSeries:function(t,e){M(this.getTargetSeriesIndices(),(function(n){t.call(e,this.ecModel.getSeriesByIndex(n))}),this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},formatValueText:function(t,e,n){var i,r,a=this.option,o=a.precision,s=this.dataBound,l=a.formatter;return n=n||["<",">"],N(t)&&(t=t.slice(),i=!0),r=e?t:i?[c(t[0]),c(t[1])]:c(t),O(l)?l.replace("{value}",i?r[0]:r).replace("{value2}",i?r[1]:r):R(l)?i?l(t[0],t[1]):l(t):i?t[0]===s[0]?n[0]+" "+r[1]:t[1]===s[1]?n[1]+" "+r[0]:r[0]+" - "+r[1]:r;function c(t){return t===s[0]?"min":t===s[1]?"max":(+t).toFixed(Math.min(o,20))}},resetExtent:function(){var t=this.option,e=vI([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;if(null!=e||t.dimensions.length){if(null!=e)return t.getDimension(e);for(var n=t.dimensions,i=n.length-1;0<=i;i--){var r=n[i];if(!t.getDimensionInfo(r).isCalculationCoord)return r}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),r=e.controller||(e.controller={});v(i,n),v(r,n);var a=this.isCategory();function o(n){pI(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")},mI(this.stateList,(function(t){var e=n[t];if(O(e)){var i=dI(e,"active",a);i?(n[t]={},n[t][e]=i):delete n[t]}}),this)}o.call(this,i),o.call(this,r),(function(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},mI(i,(function(t,e){if(Mx.isValidType(e)){var n=dI(e,"inactive",a);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}})))}).call(this,i,"inRange","outOfRange"),(function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor");mI(this.stateList,(function(r){var o=this.itemSize,s=t[r];null==(s=s||(t[r]={color:a?i:[i]})).symbol&&(s.symbol=e&&m(e)||(a?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&m(n)||(a?o[0]:[o[0],o[0]])),s.symbol=fI(s.symbol,(function(t){return"none"===t||"square"===t?"roundRect":t}));var l=s.symbolSize;if(null!=l){var c=-1/0;gI(l,(function(t){c<t&&(c=t)})),s.symbolSize=fI(l,(function(t){return yI(t,[0,c],[0,o[0]],!0)}))}}),this)}).call(this,r)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:et,getValueState:et,getVisualMeta:et}),bI=[20,140],wI=xI.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){wI.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},resetItemSize:function(){wI.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),null!=t[0]&&!isNaN(t[0])||(t[0]=bI[0]),null!=t[1]&&!isNaN(t[1])||(t[1]=bI[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):N(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){xI.prototype.completeVisualOption.apply(this,arguments),M(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)}),this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=ml((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries((function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),(function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)}),this),e.push({seriesId:n.id,dataIndex:i})}),this),e},getVisualMeta:function(t){var e=_I(0,0,this.getExtent()),n=_I(0,0,this.option.range.slice()),i=[];function r(e,n){i.push({value:e,color:t(e,n)})}for(var a=0,o=0,s=n.length,l=e.length;o<l&&(!n.length||e[o]<=n[0]);o++)e[o]<n[a]&&r(e[o],"outOfRange");for(var c=1;a<s;a++,c=0)c&&i.length&&r(n[a],"outOfRange"),r(n[a],"inRange");for(c=1;o<l;o++)(!n.length||n[n.length-1]<e[o])&&(c&&(i.length&&r(i[i.length-1].value,"outOfRange"),c=0),r(e[o],"outOfRange"));var u=i.length;return{stops:i,outerColors:[u?i[0].color:"transparent",u?i[u-1].color:"transparent"]}}});function _I(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],a=[],o=0;o<=200&&r<n[1];o++)a.push(r),r+=i;return a.push(n[1]),a}var SI=Jh({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e},render:function(t,e,n,i){!1!==(this.visualMapModel=t).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=Nl(e.get("padding")||0),i=t.getBoundingRect();t.add(new Vo({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){var i=(n=n||{}).forceState,r=this.visualMapModel,a={};if("symbol"===e&&(a.symbol=r.get("itemSymbol")),"color"===e){var o=r.get("contentColor");a.color=o}function s(t){return a[t]}function l(t,e){a[t]=e}var c=r.controllerVisuals[i||r.getValueState(t)];return M(Mx.prepareVisualTypes(c),(function(i){var r=c[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=c.__alphaForOpacity),Mx.dependsOn(i,e)&&r&&r.applyVisual(t,s,l)})),a[e]},positionGroup:function(t){var e=this.api;tc(t,this.visualMapModel.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})},doRender:et});function CI(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var a={width:e.getWidth(),height:e.getHeight()},o="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[o],c=[0,null,10],u={},d=0;d<3;d++)u[s[1-o][d]]=c[d],u[l[d]]=2===d?n[0]:i[l[d]];var h=[["x","width",3],["y","height",0]][o],f=Ql(u,a,i.padding);return l[(f.margin[h[2]]||0)+f[h[0]]+.5*f[h[1]]<.5*a[h[1]]?0:1]}function kI(t,e){return M(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var AI=fl,MI=M,TI=Math.min,II=Math.max,DI=SI.extend({type:"visualMap.continuous",init:function(){DI.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,a=r.get("textGap"),o=r.itemSize,s=this._shapes.barGroup,l=this._applyTransform([o[0]/2,0===n?-a:o[1]+a],s),c=this._applyTransform(0===n?"bottom":"top",s),u=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Ao({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===u?"middle":c,textAlign:"horizontal"===u?c:"center",text:i,textFont:d.getFont(),textFill:d.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,a=this._useHandle,o=CI(e,this.api,i),s=n.barGroup=this._createBarGroup(o);s.add(n.outOfRange=PI()),s.add(n.inRange=PI(null,a?EI(this._orient):null,L(this._dragHandle,this,"all",!1),L(this._dragHandle,this,"all",!0)));var l=e.textStyleModel.getTextRect(""),c=II(l.width,l.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,c,r,o),this._createHandle(s,1,i,c,r,o)),this._createIndicator(s,i,c,r),t.add(s)},_createHandle:function(t,e,n,i,r){var a=L(this._dragHandle,this,e,!1),o=L(this._dragHandle,this,e,!0),s=PI(function(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}(e,i),EI(this._orient),a,o);s.position[0]=n[0],t.add(s);var l=this.visualMapModel.textStyleModel,c=new Ao({draggable:!0,drift:a,onmousemove:function(t){Yt(t.event)},ondragend:o,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(c);var u=["horizontal"===r?i/2:1.5*i,"horizontal"===r?0===e?-1.5*i:1.5*i:0===e?-i/2:i/2],d=this._shapes;d.handleThumbs[e]=s,d.handleLabelPoints[e]=u,d.handleLabels[e]=c},_createIndicator:function(t,e,n,i){var r=PI([[0,0]],"move");r.position[0]=e[0],r.attr({invisible:!0,silent:!0}),t.add(r);var a=this.visualMapModel.textStyleModel,o=new Ao({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(o);var s=["horizontal"===i?n/2:9,0],l=this._shapes;l.indicator=r,l.indicatorLabel=o,l.indicatorLabelPoint=s},_dragHandle:function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(t,r[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?this._hovering||this._clearHoverLinkToSeries():LI(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[AI(e[0],n,i,!0),AI(e[1],n,i,!0)]},_updateInterval:function(t,e){var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];sw(e=e||0,i,r,t,0);var a=n.getExtent();this._dataInterval=[AI(i[0],r,a,!0),AI(i[1],r,a,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],a=t?r:this._handleEnds,o=this._createBarVisual(this._dataInterval,n,a,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:o.barColor,opacity:o.opacity}).setShape("points",o.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(a,o)},_createBarVisual:function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,r),o=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,o);return{barColor:new $o(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var a=t[0]+i*r;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:r/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Sn("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,a=n.handleLabels;MI([0,1],(function(o){var s=r[o];s.setStyle("fill",e.handlesColor[o]),s.position[1]=t[o];var l=js(n.handleLabelPoints[o],Us(s,this.group));a[o].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[o]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===o?"bottom":"top":"left",n.barGroup)})}),this)}},_showIndicator:function(t,e,n,i){var r=this.visualMapModel,a=r.getExtent(),o=r.itemSize,s=AI(t,a,[0,o[1]],!0),l=this._shapes,c=l.indicator;if(c){c.position[1]=s,c.attr("invisible",!1),c.setShape("points",function(t,e,n,i){return t?[[0,-TI(e,II(n,0))],[6,0],[0,TI(e,II(i-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,i,s,o[1]));var u=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",u);var d=js(l.indicatorLabelPoint,Us(c,this.group)),h=l.indicatorLabel;h.attr("invisible",!1);var f=this._applyTransform("left",l.barGroup),g=this._orient;h.setStyle({text:(n||"")+r.formatValueText(e),textVerticalAlign:"horizontal"===g?f:"middle",textAlign:"horizontal"===g?"center":f,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);i[1]=TI(II(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()}))},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel;if(n.option.hoverLink){var i=[0,n.itemSize[1]],r=n.getExtent();t=TI(II(i[0],t),i[1]);var a=function(t,e,n){var i=6,r=t.get("hoverLinkDataSize");return r&&(i=AI(r,e,n,!0)/2),i}(n,r,i),o=[t-a,t+a],s=AI(t,i,r,!0),l=[AI(o[0],i,r,!0),AI(o[1],i,r,!0)];o[0]<i[0]&&(l[0]=-1/0),i[1]<o[1]&&(l[1]=1/0),e&&(l[0]===-1/0?this._showIndicator(s,l[1],"< ",a):l[1]===1/0?this._showIndicator(s,l[0],"> ",a):this._showIndicator(s,s," ",a));var c=this._hoverLinkDataIndices,u=[];(e||LI(n))&&(u=this._hoverLinkDataIndices=n.findTargetDataIndices(l));var d=function(t,e){var n={},i={};return r(t||[],n),r(e||[],i,n),[a(n),a(i)];function r(t,e,n){for(var i=0,r=t.length;i<r;i++)for(var a=t[i].seriesId,o=kr(t[i].dataIndex),s=n&&n[a],l=0,c=o.length;l<c;l++){var u=o[l];s&&s[u]?s[u]=null:(e[a]||(e[a]={}))[u]=1}}function a(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var r=a(t[i],!0);r.length&&n.push({seriesId:i,dataIndex:r})}return n}}(c,u);this._dispatchHighDown("downplay",kI(d[0],n)),this._dispatchHighDown("highlight",kI(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(i)){var r=i.getData(e.dataType),a=r.get(n.getDataDimension(r),e.dataIndex,!0);isNaN(a)||this._showIndicator(a,a)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",kI(t,this.visualMapModel)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,i){var r=Us(e,i?null:this.group);return el[N(t)?"applyTransform":"transformDirection"](t,r,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function PI(t,e,n,i){return new No({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){Yt(t.event)},ondragend:i})}function LI(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function EI(t){return"vertical"===t?"ns-resize":"ew-resize"}Gh({type:"selectDataRange",event:"dataRangeSelected",update:"update"},(function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))})),Xh(aI);var NI=xI.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){NI.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();RI[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual((function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=m(i)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=T(this._pieceList,(function(t){return t=m(t),"inRange"!==e&&(t.visual=null),t})))}))},completeVisualOption:function(){var t=this.option,e={},n=Mx.listVisualTypes(),i=this.isCategory();function r(t,e,n){return t&&t[e]&&(z(t[e])?t[e].hasOwnProperty(n):t[e]===n)}M(t.pieces,(function(t){M(n,(function(n){t.hasOwnProperty(n)&&(e[n]=1)}))})),M(e,(function(e,n){var a=0;M(this.stateList,(function(e){a|=r(t,e,n)||r(t.target,e,n)}),this),a||M(this.stateList,(function(e){(t[e]||(t[e]={}))[n]=dI(n,"inRange"===e?"active":"inactive",i)}))}),this),xI.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,M(i,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var a=!1;M(i,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(a?r[n]=!1:a=!0)}),this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&0<t.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=m(t)},getValueState:function(t){var e=Mx.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries((function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),(function(e,n){Mx.findPieceIndex(e,this._pieceList)===t&&i.push(n)}),this),e.push({seriesId:n.id,dataIndex:i})}),this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){if(!this.isCategory()){var e=[],n=[],i=this,r=this._pieceList.slice();if(r.length){var a=r[0].interval[0];a!==-1/0&&r.unshift({interval:[-1/0,a]}),(a=r[r.length-1].interval[1])!==1/0&&r.push({interval:[a,1/0]})}else r.push({interval:[-1/0,1/0]});var o=-1/0;return M(r,(function(t){var e=t.interval;e&&(e[0]>o&&s([o,e[0]],"outOfRange"),s(e.slice()),o=e[1])}),this),{stops:e,outerColors:n}}function s(r,a){var o=i.getRepresentValue({interval:r});a=a||i.getValueState(o);var s=t(o,a);r[0]===-1/0?n[0]=s:r[1]===1/0?n[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}}}),RI={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),i=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var a=(i[1]-i[0])/r;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n);var o=0;t.minOpen&&e.push({index:o++,interval:[-1/0,i[0]],close:[0,0]});for(var s=i[0],l=o+r;o<l;s+=a){var c=o===r-1?i[1]:s+a;e.push({index:o++,interval:[s,c],close:[1,1]})}t.maxOpen&&e.push({index:o++,interval:[i[1],1/0],close:[0,0]}),Il(e),M(e,(function(t){t.text=this.formatValueText(t.interval)}),this)},categories:function(){var t=this.option;M(t.categories,(function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})}),this),OI(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;M(t.pieces,(function(t,n){z(t)||(t={value:t});var i={text:"",index:n};if(null!=t.label&&(i.text=t.label),t.hasOwnProperty("value")){var r=i.value=t.value;i.interval=[r,r],i.close=[1,1]}else{for(var a=i.interval=[],o=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],c=[],u=0;u<2;u++){for(var d=[["gte","gt","min"],["lte","lt","max"]][u],h=0;h<3&&null==a[u];h++)a[u]=t[d[h]],o[u]=s[h],c[u]=2===h;null==a[u]&&(a[u]=l[u])}c[0]&&a[1]===1/0&&(o[0]=0),c[1]&&a[0]===-1/0&&(o[1]=0),a[0]===a[1]&&o[0]&&o[1]&&(i.value=a[0])}i.visual=Mx.retrieveVisuals(t),e.push(i)}),this),OI(t,e),Il(e),M(e,(function(t){var e=t.close;t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,[["<",""][e[1]],[">",""][e[0]]])}),this)}};function OI(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}SI.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),a=i.getTextColor(),o=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),c=l.endsText,u=W(e.get("showLabel",!0),!c);c&&this._renderEndsText(t,c[0],s,u,o),M(l.viewPieceList,(function(i){var l=i.piece,c=new Sn;c.onclick=L(this._onItemClick,this,l),this._enableHoverLink(c,i.indexInModelPieceList);var d=e.getRepresentValue(l);if(this._createItemSymbol(c,d,[0,0,s[0],s[1]]),u){var h=this.visualMapModel.getValueState(d);c.add(new Ao({style:{x:"right"===o?-n:s[0]+n,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:o,textFont:r,textFill:a,opacity:"outOfRange"===h?.5:1}}))}t.add(c)}),this),c&&this._renderEndsText(t,c[1],s,u,o),Jl(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:kI(n.findTargetDataIndices(e),n)})}t.on("mouseover",L(n,this,"highlight")).on("mouseout",L(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return CI(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,i,r){if(e){var a=new Sn,o=this.visualMapModel.textStyleModel;a.add(new Ao({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?r:"center",text:e,textFont:o.getFont(),textFill:o.getTextColor()}})),t.add(a)}},_getViewData:function(){var t=this.visualMapModel,e=T(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n=n&&n.slice().reverse(),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(Gg(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,i=m(n.selected),r=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[r]=!0,M(i,(function(t,e){i[e]=e===r}))):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),Xh(aI);var zI,BI="urn:schemas-microsoft-com:vml",FI="undefined"==typeof window?null:window,HI=!1,VI=FI&&FI.document;function WI(t){return zI(t)}if(VI&&!r.canvasSupported)try{VI.namespaces.zrvml||VI.namespaces.add("zrvml",BI),zI=function(t){return VI.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){zI=function(t){return VI.createElement("<"+t+' xmlns="'+BI+'" class="zrvml">')}}var XI=Wa.CMD,YI=Math.round,GI=Math.sqrt,UI=Math.abs,jI=Math.cos,qI=Math.sin,ZI=Math.max;if(!r.canvasSupported){var $I=",",KI="progid:DXImageTransform.Microsoft",JI=21600,QI=JI/2,tD=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=JI+","+JI,t.coordorigin="0,0"},eD=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},nD=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},iD=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},rD=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},aD=Ri,oD=function(t,e,n){var i=Be(e);n=+n,isNaN(n)&&(n=1),i&&(t.color=eD(i[0],i[1],i[2]),t.opacity=n*i[3])},sD=function(t,e,n,i){var r="fill"===e,a=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(r||!r&&n.lineWidth)?(t[r?"filled":"stroked"]="true",n[e]instanceof Uo&&iD(t,a),a=a||WI(e),r?function(t,e,n){var i,r=e.fill;if(null!=r)if(r instanceof Uo){var a,o=0,s=[0,0],l=0,c=1,u=n.getBoundingRect(),d=u.width,h=u.height;if("linear"===r.type){a="gradient";var f=n.transform,g=[r.x*d,r.y*h],p=[r.x2*d,r.y2*h];f&&(bt(g,g,f),bt(p,p,f)),(o=180*Math.atan2(p[0]-g[0],p[1]-g[1])/Math.PI)<0&&(o+=360),o<1e-6&&(o=0)}else{a="gradientradial";var m=n.scale,v=d,y=h;s=[((g=[r.x*d,r.y*h])[0]-u.x)/v,(g[1]-u.y)/y],(f=n.transform)&&bt(g,g,f);var x=ZI(v/=m[0]*JI,y/=m[1]*JI);c=2*r.r/x-(l=0/x)}var b=r.colorStops.slice();b.sort((function(t,e){return t.offset-e.offset}));for(var w=b.length,_=[],S=[],C=0;C<w;C++){var k=b[C],A=(i=Be(k.color),[eD(i[0],i[1],i[2]),i[3]]);S.push(k.offset*c+l+" "+A[0]),0!==C&&C!==w-1||_.push(A)}if(2<=w){var M=_[0][0],T=_[1][0],I=_[0][1]*e.opacity,D=_[1][1]*e.opacity;t.type=a,t.method="none",t.focus="100%",t.angle=o,t.color=M,t.color2=T,t.colors=S.join(","),t.opacity=D,t.opacity2=I}"radial"===a&&(t.focusposition=s.join(","))}else oD(t,r,e.opacity)}(a,n,i):function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Uo||oD(t,e.stroke,e.opacity)}(a,n),nD(t,a)):(t[r?"filled":"stroked"]="false",iD(t,a))},lD=[[],[],[]];lo.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=WI("shape"),tD(n),this._vmlEl=n),sD(n,"fill",e,this),sD(n,"stroke",e,this);var i=this.transform,r=null!=i,a=n.getElementsByTagName("stroke")[0];if(a){var o=e.lineWidth;r&&!e.strokeNoScale&&(o*=GI(UI(i[0]*i[3]-i[1]*i[2]))),a.weight=o+"px"}var s=this.path||(this.path=new Wa);this.__dirtyPath&&(s.beginPath(),s.subPixelOptimize=!1,this.buildPath(s,this.shape),s.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,i,r,a,o,s,l=XI.M,c=XI.C,u=XI.L,d=XI.A,h=XI.Q,f=[],g=t.data,p=t.len();for(a=0;a<p;){switch(i="",n=0,r=g[a++]){case l:i=" m ",n=1,o=g[a++],s=g[a++],lD[0][0]=o,lD[0][1]=s;break;case u:i=" l ",n=1,o=g[a++],s=g[a++],lD[0][0]=o,lD[0][1]=s;break;case h:case c:i=" c ",n=3;var m,v,y=g[a++],x=g[a++],b=g[a++],w=g[a++];r===h?(b=((m=b)+2*y)/3,w=((v=w)+2*x)/3,y=(o+2*y)/3,x=(s+2*x)/3):(m=g[a++],v=g[a++]),lD[0][0]=y,lD[0][1]=x,lD[1][0]=b,lD[1][1]=w,o=lD[2][0]=m,s=lD[2][1]=v;break;case d:var _=0,S=0,C=1,k=1,A=0;e&&(_=e[4],S=e[5],C=GI(e[0]*e[0]+e[1]*e[1]),k=GI(e[2]*e[2]+e[3]*e[3]),A=Math.atan2(-e[1]/k,e[0]/C));var M=g[a++],T=g[a++],I=g[a++],D=g[a++],P=g[a++]+A,L=g[a++]+P+A;a++;var E=g[a++],N=M+jI(P)*I,R=T+qI(P)*D,O=(y=M+jI(L)*I,x=T+qI(L)*D,E?" wa ":" at ");Math.abs(N-y)<1e-4&&(.01<Math.abs(L-P)?E&&(N+=.0125):Math.abs(R-T)<1e-4?E&&N<M||!E&&M<N?x-=.0125:x+=.0125:E&&R<T||!E&&T<R?y+=.0125:y-=.0125),f.push(O,YI(((M-I)*C+_)*JI-QI),$I,YI(((T-D)*k+S)*JI-QI),$I,YI(((M+I)*C+_)*JI-QI),$I,YI(((T+D)*k+S)*JI-QI),$I,YI((N*C+_)*JI-QI),$I,YI((R*k+S)*JI-QI),$I,YI((y*C+_)*JI-QI),$I,YI((x*k+S)*JI-QI)),o=y,s=x;break;case XI.R:var z=lD[0],B=lD[1];z[0]=g[a++],z[1]=g[a++],B[0]=z[0]+g[a++],B[1]=z[1]+g[a++],e&&(bt(z,z,e),bt(B,B,e)),z[0]=YI(z[0]*JI-QI),B[0]=YI(B[0]*JI-QI),z[1]=YI(z[1]*JI-QI),B[1]=YI(B[1]*JI-QI),f.push(" m ",z[0],$I,z[1]," l ",B[0],$I,z[1]," l ",B[0],$I,B[1]," l ",z[0],$I,B[1]);break;case XI.Z:f.push(" x ")}if(0<n){f.push(i);for(var F=0;F<n;F++){var H=lD[F];e&&bt(H,H,e),f.push(YI(H[0]*JI-QI),$I,YI(H[1]*JI-QI),F<n-1?$I:"")}}}return f.join("")}(s,this.transform),n.style.zIndex=rD(this.zlevel,this.z,this.z2),nD(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},lo.prototype.onRemove=function(t){iD(t,this._vmlEl),this.removeRectText(t)},lo.prototype.onAdd=function(t){nD(t,this._vmlEl),this.appendRectText(t)},Vi.prototype.brushVML=function(t){var e,n,i=this.style,r=i.image;if(function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()}(r)){var a=r.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var o=r.runtimeStyle,s=o.width,l=o.height;o.width="auto",o.height="auto",e=r.width,n=r.height,o.width=s,o.height=l,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}r=a}else r===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(r){var c=i.x||0,u=i.y||0,d=i.width,h=i.height,f=i.sWidth,g=i.sHeight,p=i.sx||0,m=i.sy||0,v=f&&g,y=this._vmlEl;y||(y=VI.createElement("div"),tD(y),this._vmlEl=y);var x,b=y.style,w=!1,_=1,S=1;if(this.transform&&(_=GI((x=this.transform)[0]*x[0]+x[1]*x[1]),S=GI(x[2]*x[2]+x[3]*x[3]),w=x[1]||x[2]),w){var C=[c,u],k=[c+d,u],A=[c,u+h],M=[c+d,u+h];bt(C,C,x),bt(k,k,x),bt(A,A,x),bt(M,M,x);var T=ZI(C[0],k[0],A[0],M[0]),I=ZI(C[1],k[1],A[1],M[1]),D=[];D.push("M11=",x[0]/_,$I,"M12=",x[2]/S,$I,"M21=",x[1]/_,$I,"M22=",x[3]/S,$I,"Dx=",YI(c*_+x[4]),$I,"Dy=",YI(u*S+x[5])),b.padding="0 "+YI(T)+"px "+YI(I)+"px 0",b.filter=KI+".Matrix("+D.join("")+", SizingMethod=clip)"}else x&&(c=c*_+x[4],u=u*S+x[5]),b.filter="",b.left=YI(c)+"px",b.top=YI(u)+"px";var P=this._imageEl,L=this._cropEl;P||(P=VI.createElement("div"),this._imageEl=P);var E=P.style;if(v){if(e&&n)E.width=YI(_*e*d/f)+"px",E.height=YI(S*n*h/g)+"px";else{var N=new Image,R=this;N.onload=function(){N.onload=null,n=N.height,E.width=YI(_*(e=N.width)*d/f)+"px",E.height=YI(S*n*h/g)+"px",R._imageWidth=e,R._imageHeight=n,R._imageSrc=r},N.src=r}L||((L=VI.createElement("div")).style.overflow="hidden",this._cropEl=L);var O=L.style;O.width=YI((d+p*d/f)*_),O.height=YI((h+m*h/g)*S),O.filter=KI+".Matrix(Dx="+-p*d/f*_+",Dy="+-m*h/g*S+")",L.parentNode||y.appendChild(L),P.parentNode!==L&&L.appendChild(P)}else E.width=YI(_*d)+"px",E.height=YI(S*h)+"px",y.appendChild(P),L&&L.parentNode&&(y.removeChild(L),this._cropEl=null);var z="",B=i.opacity;B<1&&(z+=".Alpha(opacity="+YI(100*B)+") "),E.filter=z+=KI+".AlphaImageLoader(src="+r+", SizingMethod=scale)",y.style.zIndex=rD(this.zlevel,this.z,this.z2),nD(t,y),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},Vi.prototype.onRemove=function(t){iD(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Vi.prototype.onAdd=function(t){nD(t,this._vmlEl),this.appendRectText(t)};var cD,uD="normal",dD={},hD=0,fD=document.createElement("div");ei.measureText=function(t,e){var n=VI;cD||((cD=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",VI.body.appendChild(cD));try{cD.style.font=e}catch(t){}return cD.innerHTML="",cD.appendChild(n.createTextNode(t)),{width:cD.offsetWidth}};for(var gD=new _n,pD=function(t,e,n,i){var r=this.style;this.__dirty&&Si(r);var a=r.text;if(null!=a&&(a+=""),a){if(r.rich){var o=fi(a,r);a=[];for(var s=0;s<o.lines.length;s++){for(var l=o.lines[s].tokens,c=[],u=0;u<l.length;u++)c.push(l[u].text);a.push(c.join(""))}a=a.join("\n")}var d,h,f=r.textAlign,g=r.textVerticalAlign,p=function(t){var e=dD[t];if(!e){100<hD&&(hD=0,dD={});var n,i=fD.style;try{i.font=t,n=i.fontFamily.split(",")[0]}catch(t){}e={style:i.fontStyle||uD,variant:i.fontVariant||uD,weight:i.fontWeight||uD,size:0|parseFloat(i.fontSize||12),family:n||"Microsoft YaHei"},dD[t]=e,hD++}return e}(r.font),m=p.style+" "+p.variant+" "+p.weight+" "+p.size+'px "'+p.family+'"';n=n||ii(a,m,f,g,r.textPadding,r.textLineHeight);var v=this.transform;if(v&&!i&&(gD.copy(e),gD.applyTransform(v),e=gD),i)d=e.x,h=e.y;else{var y=r.textPosition;if(y instanceof Array)d=e.x+aD(y[0],e.width),h=e.y+aD(y[1],e.height),f=f||"left";else{var x=this.calculateTextPosition?this.calculateTextPosition({},r,e):oi({},r,e);d=x.x,h=x.y,f=f||x.textAlign,g=g||x.textVerticalAlign}}d=ri(d,n.width,f),h=ai(h,n.height,g),h+=n.height/2;var b,w,_,S=WI,C=this._textVmlEl;C?w=(b=(_=C.firstChild).nextSibling).nextSibling:(C=S("line"),b=S("path"),w=S("textpath"),_=S("skew"),w.style["v-text-align"]="left",tD(C),b.textpathok=!0,w.on=!0,C.from="0 0",C.to="1000 0.05",nD(C,_),nD(C,b),nD(C,w),this._textVmlEl=C);var k=[d,h],A=C.style;v&&i?(bt(k,k,v),_.on=!0,_.matrix=v[0].toFixed(3)+$I+v[2].toFixed(3)+$I+v[1].toFixed(3)+$I+v[3].toFixed(3)+",0,0",_.offset=(YI(k[0])||0)+","+(YI(k[1])||0),_.origin="0 0",A.left="0px",A.top="0px"):(_.on=!1,A.left=YI(d)+"px",A.top=YI(h)+"px"),w.string=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(a);try{w.style.font=m}catch(t){}sD(C,"fill",{fill:r.textFill,opacity:r.opacity},this),sD(C,"stroke",{stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash||null},this),C.style.zIndex=rD(this.zlevel,this.z,this.z2),nD(t,C)}},mD=function(t){iD(t,this._textVmlEl),this._textVmlEl=null},vD=function(t){nD(t,this._textVmlEl)},yD=[Bi,Hi,Vi,lo,Ao],xD=0;xD<yD.length;xD++){var bD=yD[xD].prototype;bD.drawRectText=pD,bD.removeRectText=mD,bD.appendRectText=vD}Ao.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},Ao.prototype.onRemove=function(t){this.removeRectText(t)},Ao.prototype.onAdd=function(t){this.appendRectText(t)}}function wD(t){return parseInt(t,10)}function _D(t,e){!function(){if(!HI&&VI){HI=!0;var t=VI.styleSheets;t.length<31?VI.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=t,this.storage=e;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var r=e.delFromStorage,a=e.addToStorage;e.delFromStorage=function(t){r.call(e,t),t&&t.onRemove&&t.onRemove(i)},e.addToStorage=function(t){t.onAdd&&t.onAdd(i),a.call(e,t)},this._firstPaint=!0}function SD(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}_D.prototype={constructor:_D,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var i=t[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(e),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(e),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,e),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||wD(e.width))-wD(e.paddingLeft)-wD(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||wD(e.height))-wD(e.paddingTop)-wD(e.paddingBottom)|0}},M(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){_D.prototype[t]=function(){}})),yr("vml",_D);var CD=Wa.CMD,kD=Array.prototype.join,AD="none",MD=Math.round,TD=Math.sin,ID=Math.cos,DD=Math.PI,PD=2*Math.PI,LD=180/DD;function ED(t){return MD(1e4*t)/1e4}function ND(t){return t<1e-4&&-1e-4<t}function RD(t,e){e&&OD(t,"transform","matrix("+kD.call(e,",")+")")}function OD(t,e,n){n&&("linear"===n.type||"radial"===n.type)||t.setAttribute(e,n)}function zD(t,e,n,i){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==AD}(e,n)){var r=n?e.textFill:e.fill;OD(t,"fill",r="transparent"===r?AD:r),OD(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else OD(t,"fill",AD);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==AD}(e,n)){var a=n?e.textStroke:e.stroke;OD(t,"stroke",a="transparent"===a?AD:a),OD(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?i.getLineScale():1)),OD(t,"paint-order",n?"stroke":"fill"),OD(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(OD(t,"stroke-dasharray",e.lineDash.join(",")),OD(t,"stroke-dashoffset",MD(e.lineDashOffset||0))):OD(t,"stroke-dasharray",""),e.lineCap&&OD(t,"stroke-linecap",e.lineCap),e.lineJoin&&OD(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&OD(t,"stroke-miterlimit",e.miterLimit)}else OD(t,"stroke",AD)}var BD={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=SD("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;if(t.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,t.buildPath(i,t.shape),t.__dirtyPath=!1;var r=function(t){for(var e=[],n=t.data,i=t.len(),r=0;r<i;){var a="",o=0;switch(n[r++]){case CD.M:a="M",o=2;break;case CD.L:a="L",o=2;break;case CD.Q:a="Q",o=4;break;case CD.C:a="C",o=6;break;case CD.A:var s=n[r++],l=n[r++],c=n[r++],u=n[r++],d=n[r++],h=n[r++],f=n[r++],g=n[r++],p=Math.abs(h),m=ND(p-PD)||(g?PD<=h:PD<=-h),v=0<h?h%PD:h%PD+PD,y=!1;y=!!m||!ND(p)&&DD<=v==!!g;var x=ED(s+c*ID(d)),b=ED(l+u*TD(d));m&&(h=g?PD-1e-4:1e-4-PD,y=!0,9===r&&e.push("M",x,b));var w=ED(s+c*ID(d+h)),_=ED(l+u*TD(d+h));e.push("A",ED(c),ED(u),MD(f*LD),+y,+g,w,_);break;case CD.Z:a="Z";break;case CD.R:w=ED(n[r++]),_=ED(n[r++]);var S=ED(n[r++]),C=ED(n[r++]);e.push("M",w,_,"L",w+S,_,"L",w+S,_+C,"L",w,_+C,"L",w,_)}a&&e.push(a);for(var k=0;k<o;k++)e.push(ED(n[r++]))}return e.join(" ")}(i);r.indexOf("NaN")<0&&OD(n,"d",r)}zD(n,e,!1,t),RD(n,t.transform),null!=e.text?GD(t,t.getBoundingRect()):jD(t)}},FD={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=e.x||0,r=e.y||0,a=e.width,o=e.height,s=t.__svgEl;s||(s=SD("image"),t.__svgEl=s),n!==t.__imageSrc&&(function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink","href",n)}(s,0,n),t.__imageSrc=n),OD(s,"width",a),OD(s,"height",o),OD(s,"x",i),OD(s,"y",r),RD(s,t.transform),null!=e.text?GD(t,t.getBoundingRect()):jD(t)}}},HD={},VD=new _n,WD={},XD=[],YD={left:"start",right:"end",center:"middle",middle:"middle"},GD=function(t,e){var n=t.style,i=t.transform,r=t instanceof Ao||n.transformText;t.__dirty&&Si(n);var a=n.text;if(null!=a&&(a+=""),zi(a,n)){null==a&&(a=""),!r&&i&&(VD.copy(e),VD.applyTransform(i),e=VD);var o=t.__textSvgEl;o||(o=SD("text"),t.__textSvgEl=o);var s=o.style,l=n.font||ti,c=o.__computedFont;l!==o.__styleFont&&(s.font=o.__styleFont=l,c=o.__computedFont=s.font);var u=n.textPadding,d=t.__textCotentBlock;d&&!t.__dirtyText||(d=t.__textCotentBlock=hi(a,c,u,n.textLineHeight,n.truncate));var h=d.outerHeight,f=d.lineHeight;Pi(WD,t,n,e);var g=WD.baseX,p=WD.baseY,m=WD.textAlign||"left",v=WD.textVerticalAlign;!function(t,e,n,i,r,a,o){ie(XD),e&&n&&re(XD,n);var s=i.textRotation;if(r&&s){var l=i.textOrigin;"center"===l?(a=r.width/2+r.x,o=r.height/2+r.y):l&&(a=l[0]+r.x,o=l[1]+r.y),XD[4]-=a,XD[5]-=o,se(XD,XD,s),XD[4]+=a,XD[5]+=o}RD(t,XD)}(o,r,i,n,e,g,p);var y=g,x=ai(p,h,v);u&&(y=function(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}(g,m,u),x+=u[0]),x+=f/2,zD(o,n,!0,t);var b=d.canCacheByTextString,w=t.__tspanList||(t.__tspanList=[]),_=w.length;if(b&&t.__canCacheByTextString&&t.__text===a){if(t.__dirtyText&&_)for(var S=0;S<_;++S)UD(w[S],m,y,x+S*f)}else{t.__text=a,t.__canCacheByTextString=b;var C=d.lines,k=C.length;for(S=0;S<k;S++){var A=w[S],M=C[S];A?A.__zrText!==M&&(A.innerHTML="",A.appendChild(document.createTextNode(M))):(A=w[S]=SD("tspan"),o.appendChild(A),A.appendChild(document.createTextNode(M))),UD(A,m,y,x+S*f)}if(k<_){for(;S<_;S++)o.removeChild(w[S]);w.length=k}}}};function UD(t,e,n,i){OD(t,"dominant-baseline","middle"),OD(t,"text-anchor",YD[e]),OD(t,"x",n),OD(t,"y",i)}function jD(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}function qD(){}function ZD(t,e){for(var n=0,i=e.length,r=0,a=0;n<i;n++){var o=e[n];if(o.removed){for(s=[],l=a;l<a+o.count;l++)s.push(l);o.indices=s,a+=o.count}else{for(var s=[],l=r;l<r+o.count;l++)s.push(l);o.indices=s,r+=o.count,o.added||(a+=o.count)}}return e}HD.drawRectText=GD,HD.brush=function(t){null!=t.style.text?GD(t,!1):jD(t)},qD.prototype={diff:function(t,e,n){this.equals=n=n||function(t,e){return t===e};var i=this;t=t.slice();var r=(e=e.slice()).length,a=t.length,o=1,s=r+a,l=[{newPos:-1,components:[]}],c=this.extractCommon(l[0],e,t,0);if(l[0].newPos+1>=r&&a<=c+1){for(var u=[],d=0;d<e.length;d++)u.push(d);return[{indices:u,count:e.length}]}function h(){for(var n=-1*o;n<=o;n+=2){var s,c=l[n-1],u=l[n+1],d=(u?u.newPos:0)-n;c&&(l[n-1]=void 0);var h=c&&c.newPos+1<r,f=u&&0<=d&&d<a;if(h||f){if(!h||f&&c.newPos<u.newPos?(s={newPos:(g=u).newPos,components:g.components.slice(0)},i.pushComponent(s.components,void 0,!0)):((s=c).newPos++,i.pushComponent(s.components,!0,void 0)),d=i.extractCommon(s,e,t,n),s.newPos+1>=r&&a<=d+1)return ZD(0,s.components);l[n]=s}else l[n]=void 0}var g;o++}for(;o<=s;){var f=h();if(f)return f}},pushComponent:function(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,i){for(var r=e.length,a=n.length,o=t.newPos,s=o-i,l=0;o+1<r&&s+1<a&&this.equals(e[o+1],n[s+1]);)o++,s++,l++;return l&&t.components.push({count:l}),t.newPos=o,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var $D=new qD;function KD(t,e,n,i,r){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=r||"_dom",this.nextId=0}function JD(t,e){KD.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function QD(t,e){KD.call(this,t,e,"clipPath","__clippath_in_use__")}function tP(t,e){KD.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function eP(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function nP(t){return parseInt(t,10)}function iP(t,e){return e&&t&&e.parentNode!==t}function rP(t,e,n){if(iP(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function aP(t,e){if(iP(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function oP(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function sP(t){return t.__textSvgEl}function lP(t){return t.__svgEl}function cP(t,e,n,i){this.root=t,this.storage=e,this._opts=n=x({},n||{});var r=SD("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new JD(i,r),this.clipPathManager=new QD(i,r),this.shadowManager=new tP(i,r);var a=document.createElement("div");a.style.cssText="overflow:hidden;position:relative",this._svgRoot=r,this._viewport=a,t.appendChild(a),a.appendChild(r),this.resize(n.width,n.height),this._visibleList=[]}KD.prototype.createElement=SD,KD.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;0<=i;--i)if(e[i]===t)return!0;return!1}),n):null:n[0]},KD.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},KD.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},KD.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},KD.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return M(this._tagNames,(function(n){var i=t.getElementsByTagName(n);e=e.concat([].slice.call(i))})),e},KD.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;M(t,(function(t){t[e._markLabel]="0"}))},KD.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},KD.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;M(e,(function(e){"1"!==e[n._markLabel]&&t.removeChild(e)}))}},KD.prototype.getSvgProxy=function(t){return t instanceof lo?BD:t instanceof Vi?FD:t instanceof Ao?HD:BD},KD.prototype.getTextSvgElement=function(t){return t.__textSvgEl},KD.prototype.getSvgElement=function(t){return t.__svgEl},C(JD,KD),JD.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;M(["fill","stroke"],(function(i){if(e.style[i]&&("linear"===e.style[i].type||"radial"===e.style[i].type)){var r,a=e.style[i],o=n.getDefs(!0);a._dom?(r=a._dom,o.contains(a._dom)||n.addDom(r)):r=n.add(a),n.markUsed(e);var s=r.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}}))}},JD.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},JD.prototype.update=function(t){var e=this;KD.prototype.update.call(this,t,(function(){var n=t.type,i=t._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))}))},JD.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}e.setAttribute("gradientUnits",t.global?"userSpaceOnUse":"objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var a=this.createElement("stop");a.setAttribute("offset",100*n[i].offset+"%");var o=n[i].color;if(o.indexOf(!1)){var s=Be(o)[3],l=Ve(o);a.setAttribute("stop-color","#"+l),a.setAttribute("stop-opacity",s)}else a.setAttribute("stop-color",n[i].color);e.appendChild(a)}t._dom=e},JD.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&KD.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&KD.prototype.markUsed.call(this,e._dom)}},C(QD,KD),QD.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},QD.prototype.updateDom=function(t,e,n){if(e&&0<e.length){var i,r,a=this.getDefs(!0),o=e[0],s=n?"_textDom":"_dom";o[s]?(r=o[s].getAttribute("id"),a.contains(i=o[s])||a.appendChild(i)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",r),a.appendChild(i),o[s]=i);var l=this.getSvgProxy(o);if(o.transform&&o.parent.invTransform&&!n){var c=Array.prototype.slice.call(o.transform);ae(o.transform,o.parent.invTransform,o.transform),l.brush(o),o.transform=c}else l.brush(o);var u=this.getSvgElement(o);i.innerHTML="",i.appendChild(u.cloneNode()),t.setAttribute("clip-path","url(#"+r+")"),1<e.length&&this.updateDom(i,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},QD.prototype.markUsed=function(t){var e=this;t.__clipPaths&&M(t.__clipPaths,(function(t){t._dom&&KD.prototype.markUsed.call(e,t._dom),t._textDom&&KD.prototype.markUsed.call(e,t._textDom)}))},C(tP,KD),tP.prototype.addWithoutUpdate=function(t,e){if(e&&eP(e.style)){var n;e._shadowDom?(n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var i=n.getAttribute("id");t.style.filter="url(#"+i+")"}},tP.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},tP.prototype.update=function(t,e){if(eP(e.style)){var n=this;KD.prototype.update.call(this,e,(function(){n.updateDom(e,e._shadowDom)}))}else this.remove(t,e)},tP.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},tP.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,r,a,o,s=t.style,l=t.scale&&t.scale[0]||1,c=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,r=s.shadowOffsetY||0,a=s.shadowBlur,o=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);i=s.textShadowOffsetX||0,r=s.textShadowOffsetY||0,a=s.textShadowBlur,o=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",r/c),n.setAttribute("flood-color",o),n.setAttribute("stdDeviation",a/2/l+" "+a/2/c),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(a/2*200)+"%"),e.setAttribute("height",Math.ceil(a/2*200)+"%"),e.appendChild(n),t._shadowDom=e},tP.prototype.markUsed=function(t){t._shadowDom&&KD.prototype.markUsed.call(this,t._shadowDom)},cP.prototype={constructor:cP,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,i=this._svgRoot,r=this._visibleList,a=t.length,o=[];for(e=0;e<a;e++){var s=t[e],l=(n=s)instanceof lo?BD:n instanceof Vi?FD:n instanceof Ao?HD:BD,c=lP(s)||sP(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(c,s)),s.__dirty=!1),o.push(s))}var u,d=function(t,e,n){return $D.diff(t,e,void 0)}(r,o);for(e=0;e<d.length;e++)if((g=d[e]).removed)for(var h=0;h<g.count;h++){c=lP(s=r[g.indices[h]]);var f=sP(s);oP(i,c),oP(i,f)}for(e=0;e<d.length;e++){var g;if((g=d[e]).added)for(h=0;h<g.count;h++)c=lP(s=o[g.indices[h]]),f=sP(s),u?rP(i,c,u):aP(i,c),c?rP(i,f,c):u?rP(i,f,u):aP(i,f),rP(i,f,c),u=f||c||u,this.gradientManager.addWithoutUpdate(c||f,s),this.shadowManager.addWithoutUpdate(c||f,s),this.clipPathManager.markUsed(s);else if(!g.removed)for(h=0;h<g.count;h++)c=lP(s=o[g.indices[h]]),f=sP(s),c=lP(s),f=sP(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(c||f,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(c||f,s),this.clipPathManager.markUsed(s),f&&rP(i,f,c),u=c||f||u}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=o},_getDefs:function(t){var e,n=this._svgRoot;return 0!==(e=this._svgRoot.getElementsByTagName("defs")).length?e[0]:t?((e=n.insertBefore(SD("defs"),n.firstChild)).contains||(e.contains=function(t){var n=e.children;if(!n)return!1;for(var i=n.length-1;0<=i;--i)if(n[i]===t)return!0;return!1}),e):null},resize:function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var a=this._svgRoot;a.setAttribute("width",t),a.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[i]||nP(s[n])||nP(o.style[n]))-(nP(s[r])||0)-(nP(s[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},M(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(t){cP.prototype[t]=function(){}})),yr("svg",cP),t.version="4.7.0",t.dependencies={zrender:"4.3.0"},t.PRIORITY=nh,t.init=function(t,e,n){var i=Vh(t);if(i)return i;var r=new lh(t,e,n);return r.id="ec_"+Oh++,Nh[r.id]=r,Br(t,Bh,r.id),function(t){var e="__connectUpdateStatus";function n(t,n){for(var i=0;i<t.length;i++)t[i][e]=n}Jd(Mh,(function(i,r){t._messageCenter.on(r,(function(i){if(Rh[t.group]&&0!==t[e]){if(i&&i.escapeConnect)return;var r=t.makeActionFromEvent(i),a=[];Jd(Nh,(function(e){e!==t&&e.group===t.group&&a.push(e)})),n(a,0),Jd(a,(function(t){1!==t[e]&&t.dispatchAction(r)})),n(a,2)}}))}))}(r),r},t.connect=function(t){if(N(t)){var e=t;t=null,Jd(e,(function(e){null!=e.group&&(t=e.group)})),t=t||"g_"+zh++,Jd(e,(function(e){e.group=t}))}return Rh[t]=!0,t},t.disConnect=Fh,t.disconnect=Hh,t.dispose=function(t){"string"==typeof t?t=Nh[t]:t instanceof lh||(t=Vh(t)),t instanceof lh&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=Vh,t.getInstanceById=function(t){return Nh[t]},t.registerTheme=Wh,t.registerPreprocessor=Xh,t.registerProcessor=Yh,t.registerPostUpdate=function(t){Dh.push(t)},t.registerAction=Gh,t.registerCoordinateSystem=Uh,t.getCoordinateSystemDimensions=function(t){var e=Oc.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},t.registerLayout=jh,t.registerVisual=qh,t.registerLoading=$h,t.extendComponentModel=Kh,t.extendComponentView=Jh,t.extendSeriesModel=Qh,t.extendChartView=tf,t.setCanvasCreator=function(t){p("createCanvas",t)},t.registerMap=function(t,e,n){!function(t,e,n){var i;M(i=N(e)?e:e.svg?[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),[{type:"geoJSON",source:e,specialAreas:n}]),(function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,$d[e])(t)})),qd.set(t,i)}(t,e,n)},t.getMap=function(t){var e=Zd(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},t.dataTool={},t.zrender=br,t.number=Pl,t.format=jl,t.throttle=id,t.helper=Ug,t.matrix=de,t.vector=St,t.color=je,t.parseGeoJSON=Kg,t.parseGeoJson=lp,t.util=cp,t.graphic=up,t.List=xf,t.Model=ll,t.Axis=op,t.env=r})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],e):e(t.bmap={},t.echarts)}(this,(function(t,e){"use strict";function n(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function i(t,n){return n=n||[0,0],e.util.map([0,1],(function(e){var i=n[e],r=t[e]/2,a=[],o=[];return a[e]=i-r,o[e]=i+r,a[1-e]=o[1-e]=n[1-e],Math.abs(this.dataToPoint(a)[e]-this.dataToPoint(o)[e])}),this)}var r;n.prototype.dimensions=["lng","lat"],n.prototype.setZoom=function(t){this._zoom=t},n.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},n.prototype.setMapOffset=function(t){this._mapOffset=t},n.prototype.getBMap=function(){return this._bmap},n.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),n=this._bmap.pointToOverlayPixel(e),i=this._mapOffset;return[n.x-i[0],n.y-i[1]]},n.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},n.prototype.getViewRect=function(){var t=this._api;return new e.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},n.prototype.getRoamTransform=function(){return e.matrix.create()},n.prototype.prepareCustoms=function(t){var n=this.getViewRect();return{coordSys:{type:"bmap",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:e.util.bind(this.dataToPoint,this),size:e.util.bind(i,this)}}},n.dimensions=n.prototype.dimensions,n.create=function(t,e){var i,a=e.getDom();t.eachComponent("bmap",(function(t){var o=e.getZr().painter,s=o.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(r=r||function(){function t(t){this._root=t}return(t.prototype=new BMap.Overlay).initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),i)throw new Error("Only one bmap component can exist");if(!t.__bmap){var l=a.querySelector(".ec-extension-bmap");l&&(s.style.left="0px",s.style.top="0px",a.removeChild(l)),(l=document.createElement("div")).style.cssText="width:100%;height:100%",l.classList.add("ec-extension-bmap"),a.appendChild(l);var c=t.__bmap=new BMap.Map(l),u=new r(s);c.addOverlay(u),o.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}c=t.__bmap;var d=t.get("center"),h=t.get("zoom");if(d&&h){var f=new BMap.Point(d[0],d[1]);c.centerAndZoom(f,h)}(i=new n(c,e)).setMapOffset(t.__mapOffset||[0,0]),i.setZoom(h),i.setCenter(d),t.coordinateSystem=i})),t.eachSeries((function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=i)}))},e.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var n=this.option;return!(function(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}(t,n.center)&&e===n.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},roam:!1}}),e.extendComponentView({type:"bmap",render:function(t,e,n){function i(e,i){if(!r){var a=o.parentNode.parentNode.parentNode,l=[-parseInt(a.style.left,10)||0,-parseInt(a.style.top,10)||0];o.style.left=l[0]+"px",o.style.top=l[1]+"px",s.setMapOffset(l),t.__mapOffset=l,n.dispatchAction({type:"bmapRoam"})}}var r=!0,a=t.getBMap(),o=n.getZr().painter.getViewportRoot(),s=t.coordinateSystem;function l(){r||n.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",i),a.addEventListener("zoomend",l),this._oldMoveHandler=i,this._oldZoomEndHandler=l;var c=t.get("roam");c&&"scale"!==c?a.enableDragging():a.disableDragging(),c&&"move"!==c?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var u=t.__mapStyle,d=t.get("mapStyle")||{},h=JSON.stringify(d);JSON.stringify(u)!==h&&(Object.keys(d).length&&a.setMapStyle(d),t.__mapStyle=JSON.parse(h));var f=t.__mapStyle2,g=t.get("mapStyleV2")||{},p=JSON.stringify(g);JSON.stringify(f)!==p&&(Object.keys(g).length&&a.setMapStyleV2(g),t.__mapStyle2=JSON.parse(p)),r=!1}}),e.registerCoordinateSystem("bmap",n),e.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},(function(t,e){e.eachComponent("bmap",(function(t){var e=t.getBMap(),n=e.getCenter();t.setCenterAndZoom([n.lng,n.lat],e.getZoom())}))})),t.version="1.0.0"})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],(function(t){return e(function(){try{return t("moment")}catch(t){}}())})):(t=t||self).Chart=e(t.moment)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(t,e){return t(e={exports:{}}),e.exports}((function(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[e[i]]=i);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in r)if(r.hasOwnProperty(a)){if(!("channels"in r[a]))throw new Error("missing channels property: "+a);if(!("labels"in r[a]))throw new Error("missing channel labels property: "+a);if(r[a].labels.length!==r[a].channels)throw new Error("channel and label counts mismatch: "+a);var o=r[a].channels,s=r[a].labels;delete r[a].channels,delete r[a].labels,Object.defineProperty(r[a],"channels",{value:o}),Object.defineProperty(r[a],"labels",{value:s})}r.rgb.hsl=function(t){var e,n,i=t[0]/255,r=t[1]/255,a=t[2]/255,o=Math.min(i,r,a),s=Math.max(i,r,a),l=s-o;return s===o?e=0:i===s?e=(r-a)/l:r===s?e=2+(a-i)/l:a===s&&(e=4+(i-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]},r.rgb.hsv=function(t){var e,n,i,r,a,o=t[0]/255,s=t[1]/255,l=t[2]/255,c=Math.max(o,s,l),u=c-Math.min(o,s,l),d=function(t){return(c-t)/6/u+.5};return 0===u?r=a=0:(a=u/c,e=d(o),n=d(s),i=d(l),o===c?r=i-n:s===c?r=1/3+e-i:l===c&&(r=2/3+n-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*a,100*c]},r.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[r.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,i))*100,100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},r.rgb.cmyk=function(t){var e,n=t[0]/255,i=t[1]/255,r=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-i,1-r)))/(1-e)||0),100*((1-i-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},r.rgb.keyword=function(t){var i=n[t];if(i)return i;var r,a,o,s=1/0;for(var l in e)if(e.hasOwnProperty(l)){var c=(a=t,o=e[l],Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)+Math.pow(a[2]-o[2],2));c<s&&(s=c,r=l)}return r},r.keyword.rgb=function(t){return e[t]},r.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]},r.rgb.lab=function(t){var e=r.rgb.xyz(t),n=e[0],i=e[1],a=e[2];return i/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},r.hsl.rgb=function(t){var e,n,i,r,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];for(var c=0;c<3;c++)(i=o+1/3*-(c-1))<0&&i++,i>1&&i--,r[c]=255*(a=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e);return r},r.hsl.hsv=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,r=n,a=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,r*=a<=1?a:2-a,[e,100*(0===i?2*r/(a+r):2*n/(i+n)),(i+n)/2*100]},r.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,r=Math.floor(e)%6,a=e-Math.floor(e),o=255*i*(1-n),s=255*i*(1-n*a),l=255*i*(1-n*(1-a));switch(i*=255,r){case 0:return[i,l,o];case 1:return[s,i,o];case 2:return[o,i,l];case 3:return[o,s,i];case 4:return[l,o,i];case 5:return[i,o,s]}},r.hsv.hsl=function(t){var e,n,i,r=t[0],a=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return i=(2-a)*o,n=a*s,[r,100*(n=(n/=(e=(2-a)*s)<=1?e:2-e)||0),100*(i/=2)]},r.hwb.rgb=function(t){var e,n,i,r,a,o,s,l=t[0]/360,c=t[1]/100,u=t[2]/100,d=c+u;switch(d>1&&(c/=d,u/=d),i=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(i=1-i),r=c+i*((n=1-u)-c),e){default:case 6:case 0:a=n,o=r,s=c;break;case 1:a=r,o=n,s=c;break;case 2:a=c,o=n,s=r;break;case 3:a=c,o=r,s=n;break;case 4:a=r,o=c,s=n;break;case 5:a=n,o=c,s=r}return[255*a,255*o,255*s]},r.cmyk.rgb=function(t){var e=t[1]/100,n=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-i)+i)),255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},r.xyz.rgb=function(t){var e,n,i,r=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*r+1.8758*a+.0415*o,i=.0557*r+-.204*a+1.057*o,e=(e=3.2406*r+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},r.xyz.lab=function(t){var e=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},r.lab.xyz=function(t){var e,n,i;e=t[1]/500+(n=(t[0]+16)/116),i=n-t[2]/200;var r=Math.pow(n,3),a=Math.pow(e,3),o=Math.pow(i,3);return n=r>.008856?r:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,i=o>.008856?o:(i-16/116)/7.787,[e*=95.047,n*=100,i*=108.883]},r.lab.lch=function(t){var e,n=t[0],i=t[1],r=t[2];return(e=360*Math.atan2(r,i)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(i*i+r*r),e]},r.lch.lab=function(t){var e,n=t[1];return e=t[2]/360*2*Math.PI,[t[0],n*Math.cos(e),n*Math.sin(e)]},r.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],a=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var e=t[0],n=t[1],i=t[2];return e===n&&n===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},r.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},r.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},r.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},r.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},r.rgb.hcg=function(t){var e,n=t[0]/255,i=t[1]/255,r=t[2]/255,a=Math.max(Math.max(n,i),r),o=Math.min(Math.min(n,i),r),s=a-o;return e=s<=0?0:a===n?(i-r)/s%6:a===i?2+(r-n)/s:4+(n-i)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},r.hsl.hcg=function(t){var e,n=t[1]/100,i=t[2]/100,r=0;return(e=i<.5?2*n*i:2*n*(1-i))<1&&(r=(i-.5*e)/(1-e)),[t[0],100*e,100*r]},r.hsv.hcg=function(t){var e=t[2]/100,n=t[1]/100*e,i=0;return n<1&&(i=(e-n)/(1-n)),[t[0],100*n,100*i]},r.hcg.rgb=function(t){var e=t[1]/100,n=t[2]/100;if(0===e)return[255*n,255*n,255*n];var i,r=[0,0,0],a=t[0]/360%1*6,o=a%1,s=1-o;switch(Math.floor(a)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=s,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=s,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=s}return[255*(e*r[0]+(i=(1-e)*n)),255*(e*r[1]+i),255*(e*r[2]+i)]},r.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),i=0;return n>0&&(i=e/n),[t[0],100*i,100*n]},r.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],100*i,100*n]},r.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},r.hwb.hcg=function(t){var e=1-t[2]/100,n=e-t[1]/100,i=0;return n<1&&(i=(e-n)/(1-n)),[t[0],100*n,100*i]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function i(t){var e=function(){for(var t={},e=Object.keys(n),i=e.length,r=0;r<i;r++)t[e[r]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var r=i.pop(),a=Object.keys(n[r]),o=a.length,s=0;s<o;s++){var l=a[s],c=e[l];-1===c.distance&&(c.distance=e[r].distance+1,c.parent=r,i.unshift(l))}return e}function r(t,e){return function(n){return e(t(n))}}function a(t,e){for(var i=[e[t].parent,t],a=n[e[t].parent][t],o=e[t].parent;e[o].parent;)i.unshift(e[o].parent),a=r(n[e[o].parent][o],a),o=e[o].parent;return a.conversion=i,a}var o={};Object.keys(n).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:n[t].channels}),Object.defineProperty(o[t],"labels",{value:n[t].labels});var e=function(t){for(var e=i(t),n={},r=Object.keys(e),o=r.length,s=0;s<o;s++){var l=r[s];null!==e[l].parent&&(n[l]=a(l,e))}return n}(t);Object.keys(e).forEach((function(n){var i=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var i=n.length,r=0;r<i;r++)n[r]=Math.round(n[r]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(i),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(i)}))}));var s=o,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c={getRgba:u,getHsla:d,getRgb:function(t){var e=u(t);return e&&e.slice(0,3)},getHsl:function(t){var e=d(t);return e&&e.slice(0,3)},getHwb:h,getAlpha:function(t){var e=u(t);return e||(e=d(t))||(e=h(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+v(t[0])+v(t[1])+v(t[2])+(e>=0&&e<1?v(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?f(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:f,percentString:function(t,e){return e<1||t[3]&&t[3]<1?g(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:g,hslString:function(t,e){return e<1||t[3]&&t[3]<1?p(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:p,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return y[t.slice(0,3)]}};function u(t){if(t){var e=[0,0,0],n=1,i=t.match(/^#([a-fA-F0-9]{3,4})$/i),r="";if(i){r=(i=i[1])[3];for(var a=0;a<e.length;a++)e[a]=parseInt(i[a]+i[a],16);r&&(n=Math.round(parseInt(r+r,16)/255*100)/100)}else if(i=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(r=i[2],i=i[1],a=0;a<e.length;a++)e[a]=parseInt(i.slice(2*a,2*a+2),16);r&&(n=Math.round(parseInt(r,16)/255*100)/100)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(i[a+1]);n=parseFloat(i[4])}else if(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(i[a+1]));n=parseFloat(i[4])}else if(i=t.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(e=l[i[1]]))return}for(a=0;a<e.length;a++)e[a]=m(e[a],0,255);return n=n||0==n?m(n,0,1):1,e[3]=n,e}}function d(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function h(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function f(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function g(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function m(t,e,n){return Math.min(Math.max(e,t),n)}function v(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var y={};for(var x in l)y[l[x]]=x;var b=function(t){return t instanceof b?t:this instanceof b?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=c.getRgba(t))?this.setValues("rgb",e):(e=c.getHsla(t))?this.setValues("hsl",e):(e=c.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new b(t);var e};b.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return c.hexString(this.values.rgb)},rgbString:function(){return c.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return c.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return c.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return c.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return c.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return c.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return c.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=t,i=void 0===e?.5:e,r=2*i-1,a=this.alpha()-n.alpha(),o=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,s=1-o;return this.rgb(o*this.red()+s*n.red(),o*this.green()+s*n.green(),o*this.blue()+s*n.blue()).alpha(this.alpha()*i+n.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new b,i=this.values,r=n.values;for(var a in i)i.hasOwnProperty(a)&&("[object Array]"===(e={}.toString.call(t=i[a]))?r[a]=t.slice(0):"[object Number]"===e?r[a]=t:console.error("unexpected color value:",t));return n}},b.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},b.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},b.prototype.getValues=function(t){for(var e=this.values,n={},i=0;i<t.length;i++)n[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(n.a=e.alpha),n},b.prototype.setValues=function(t,e){var n,i,r=this.values,a=this.spaces,o=this.maxes,l=1;if(this.valid=!0,"alpha"===t)l=e;else if(e.length)r[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)r[t][n]=e[t.charAt(n)];l=e.a}else if(void 0!==e[a[t][0]]){var c=a[t];for(n=0;n<t.length;n++)r[t][n]=e[c[n]];l=e.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===l?r.alpha:l)),"alpha"===t)return!1;for(n=0;n<t.length;n++)i=Math.max(0,Math.min(o[t][n],r[t][n])),r[t][n]=Math.round(i);for(var u in a)u!==t&&(r[u]=s[t][u](r[t]));return!0},b.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},b.prototype.setChannel=function(t,e,n){var i=this.values[t];return void 0===n?i[e]:(n===i[e]||(i[e]=n,this.setValues(t,i)),this)},"undefined"!=typeof window&&(window.Color=b);var w,_=b,S={noop:function(){},uid:(w=0,function(){return w++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,n){return S.valueOrDefault(S.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)},each:function(t,e,n,i){var r,a,o;if(S.isArray(t))if(a=t.length,i)for(r=a-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<a;r++)e.call(n,t[r],r);else if(S.isObject(t))for(a=(o=Object.keys(t)).length,r=0;r<a;r++)e.call(n,t[o[r]],o[r])},arrayEquals:function(t,e){var n,i,r,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=e[n],(r=t[n])instanceof Array&&a instanceof Array){if(!S.arrayEquals(r,a))return!1}else if(r!==a)return!1;return!0},clone:function(t){if(S.isArray(t))return t.map(S.clone);if(S.isObject(t)){for(var e={},n=Object.keys(t),i=n.length,r=0;r<i;++r)e[n[r]]=S.clone(t[n[r]]);return e}return t},_merger:function(t,e,n,i){var r=e[t],a=n[t];S.isObject(r)&&S.isObject(a)?S.merge(r,a,i):e[t]=S.clone(a)},_mergerIf:function(t,e,n){var i=e[t],r=n[t];S.isObject(i)&&S.isObject(r)?S.mergeIf(i,r):e.hasOwnProperty(t)||(e[t]=S.clone(r))},merge:function(t,e,n){var i,r,a,o,s,l=S.isArray(e)?e:[e],c=l.length;if(!S.isObject(t))return t;for(i=(n=n||{}).merger||S._merger,r=0;r<c;++r)if(S.isObject(e=l[r]))for(s=0,o=(a=Object.keys(e)).length;s<o;++s)i(a[s],t,e,n);return t},mergeIf:function(t,e){return S.merge(t,e,{merger:S._mergerIf})},extend:Object.assign||function(t){return S.merge(t,[].slice.call(arguments,1),{merger:function(t,e,n){e[t]=n[t]}})},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=S.inherits,t&&S.extend(n.prototype,t),n.__super__=e.prototype,n},_deprecated:function(t,e,n,i){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+i+'" instead')}},C=S;S.callCallback=S.callback,S.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},S.getValueOrDefault=S.valueOrDefault,S.getValueAtIndexOrDefault=S.valueAtIndexOrDefault;var k={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.45),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-k.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*k.easeInBounce(2*t):.5*k.easeOutBounce(2*t-1)+.5}},A={effects:k};C.easingEffects=k;var M=Math.PI,T=M/180,I=2*M,D=M/2,P=M/4,L=2*M/3,E={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,i,r,a){if(a){var o=Math.min(a,r/2,i/2),s=e+o,l=n+o,c=e+i-o,u=n+r-o;t.moveTo(e,l),s<c&&l<u?(t.arc(s,l,o,-M,-D),t.arc(c,l,o,-D,0),t.arc(c,u,o,0,D),t.arc(s,u,o,D,M)):s<c?(t.moveTo(s,n),t.arc(c,l,o,-D,D),t.arc(s,l,o,D,M+D)):l<u?(t.arc(s,l,o,-M,0),t.arc(s,u,o,0,M)):t.arc(s,l,o,-M,M),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,i,r)},drawPoint:function(t,e,n,i,r,a){var o,s,l,c,u,d=(a||0)*T;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(o=e.toString())||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,r),t.rotate(d),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(n)||n<=0)){switch(t.beginPath(),e){default:t.arc(i,r,n,0,I),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(d)*n,r-Math.cos(d)*n),d+=L,t.lineTo(i+Math.sin(d)*n,r-Math.cos(d)*n),d+=L,t.lineTo(i+Math.sin(d)*n,r-Math.cos(d)*n),t.closePath();break;case"rectRounded":c=n-(u=.516*n),s=Math.cos(d+P)*c,l=Math.sin(d+P)*c,t.arc(i-s,r-l,u,d-M,d-D),t.arc(i+l,r-s,u,d-D,d),t.arc(i+s,r+l,u,d,d+D),t.arc(i-l,r+s,u,d+D,d+M),t.closePath();break;case"rect":if(!a){c=Math.SQRT1_2*n,t.rect(i-c,r-c,2*c,2*c);break}d+=P;case"rectRot":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(i-s,r-l),t.lineTo(i+l,r-s),t.lineTo(i+s,r+l),t.lineTo(i-l,r+s),t.closePath();break;case"crossRot":d+=P;case"cross":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(i-s,r-l),t.lineTo(i+s,r+l),t.moveTo(i+l,r-s),t.lineTo(i-l,r+s);break;case"star":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(i-s,r-l),t.lineTo(i+s,r+l),t.moveTo(i+l,r-s),t.lineTo(i-l,r+s),d+=P,s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(i-s,r-l),t.lineTo(i+s,r+l),t.moveTo(i+l,r-s),t.lineTo(i-l,r+s);break;case"line":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(i-s,r-l),t.lineTo(i+s,r+l);break;case"dash":t.moveTo(i,r),t.lineTo(i+Math.cos(d)*n,r+Math.sin(d)*n)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,i){var r=n.steppedLine;if(r){if("middle"===r){var a=(e.x+n.x)/2;t.lineTo(a,i?n.y:e.y),t.lineTo(a,i?e.y:n.y)}else"after"===r&&!i||"after"!==r&&i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}else n.tension?t.bezierCurveTo(i?e.controlPointPreviousX:e.controlPointNextX,i?e.controlPointPreviousY:e.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}},N=E;C.clear=E.clear,C.drawRoundedRectangle=function(t){t.beginPath(),E.roundedRect.apply(E,arguments)};var R={_set:function(t,e){return C.merge(this[t]||(this[t]={}),e)}};R._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var O=R,z=C.valueOrDefault,B={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,i,r;return C.isObject(t)?(e=+t.top||0,n=+t.right||0,i=+t.bottom||0,r=+t.left||0):e=n=i=r=+t||0,{top:e,right:n,bottom:i,left:r,height:e+i,width:r+n}},_parseFont:function(t){var e=O.global,n=z(t.fontSize,e.defaultFontSize),i={family:z(t.fontFamily,e.defaultFontFamily),lineHeight:C.options.toLineHeight(z(t.lineHeight,e.defaultLineHeight),n),size:n,style:z(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return i.string=function(t){return!t||C.isNullOrUndef(t.size)||C.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i},resolve:function(t,e,n,i){var r,a,o,s=!0;for(r=0,a=t.length;r<a;++r)if(void 0!==(o=t[r])&&(void 0!==e&&"function"==typeof o&&(o=o(e),s=!1),void 0!==n&&C.isArray(o)&&(o=o[n],s=!1),void 0!==o))return i&&!s&&(i.cacheable=!1),o}},F={_factorize:function(t){var e,n=[],i=Math.sqrt(t);for(e=1;e<i;e++)t%e==0&&(n.push(e),n.push(t/e));return i===(0|i)&&n.push(i),n.sort((function(t,e){return t-e})).pop(),n},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,n=Math.round(e);return t===Math.pow(10,n)?n:e}},H=F;C.log10=F.log10;var V=C,W=N,X=B,Y=H;V.easing=A,V.canvas=W,V.options=X,V.math=Y,V.rtl={getRtlAdapter:function(t,e,n){return t?function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,n):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},overrideTextDirection:function(t,e){var n,i;"ltr"!==e&&"rtl"!==e||(i=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};var G=function(t){V.extend(this,t),this.initialize.apply(this,arguments)};V.extend(G.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=V.extend({},t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,i=e._start,r=e._view;return n&&1!==t?(r||(r=e._view={}),i||(i=e._start={}),function(t,e,n,i){var r,a,o,s,l,c,u,d,h,f=Object.keys(n);for(r=0,a=f.length;r<a;++r)if(c=n[o=f[r]],e.hasOwnProperty(o)||(e[o]=c),(s=e[o])!==c&&"_"!==o[0]){if(t.hasOwnProperty(o)||(t[o]=s),(u=typeof c)==typeof(l=t[o]))if("string"===u){if((d=_(l)).valid&&(h=_(c)).valid){e[o]=h.mix(d,i).rgbString();continue}}else if(V.isFinite(l)&&V.isFinite(c)){e[o]=l+(c-l)*i;continue}e[o]=c}}(i,r,n,t),e):(e._view=V.extend({},n),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return V.isNumber(this._model.x)&&V.isNumber(this._model.y)}}),G.extend=V.inherits;var U=G,j=U.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),q=j;Object.defineProperty(j.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(j.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),O._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:V.noop,onComplete:V.noop}});var Z={animations:[],request:null,addAnimation:function(t,e,n,i){var r,a,o=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=n,i||(t.animating=!0),r=0,a=o.length;r<a;++r)if(o[r].chart===t)return void(o[r]=e);o.push(e),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=V.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=V.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,n,i,r=this.animations,a=0;a<r.length;)e=(t=r[a]).chart,n=t.numSteps,i=Math.floor((Date.now()-t.startTime)/t.duration*n)+1,t.currentStep=Math.min(i,n),V.callback(t.render,[e,t],e),V.callback(t.onAnimationProgress,[t],e),t.currentStep>=n?(V.callback(t.onAnimationComplete,[t],e),e.animating=!1,r.splice(a,1)):++a}},$=V.options.resolve,K=["push","pop","shift","splice","unshift"];function J(t,e){var n=t._chartjs;if(n){var i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(K.forEach((function(e){delete t[e]})),delete t._chartjs)}}var Q=function(t,e){this.initialize(t,e)};V.extend(Q.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,n=e.scales,i=this.getDataset(),r=e.options.scales;null!==t.xAxisID&&t.xAxisID in n&&!i.xAxisID||(t.xAxisID=i.xAxisID||r.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in n&&!i.yAxisID||(t.yAxisID=i.yAxisID||r.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&J(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,n=this.getMeta(),i=this.getDataset().data||[],r=n.data;for(t=0,e=i.length;t<e;++t)r[t]=r[t]||this.createMetaData(t);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,n=this,i=n.getDataset(),r=i.data||(i.data=[]);n._data!==r&&(n._data&&J(n._data,n),r&&Object.isExtensible(r)&&(e=n,(t=r)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),K.forEach((function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),r=i.apply(this,e);return V.each(t._chartjs.listeners,(function(t){"function"==typeof t[n]&&t[n].apply(t,e)})),r}})})))),n._data=r),n.resyncElements()},_configure:function(){this._config=V.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,n){"_meta"!==t&&"data"!==t&&V._merger(t,e,n)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:V.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],i=n.length,r=0;r<i;++r)n[r].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,i=0;for(t.dataset&&t.dataset.draw();i<n;++i)e[i].draw()},getStyle:function(t){var e,n=this.getMeta(),i=n.dataset;return this._configure(),!1!==(e=i&&void 0===t?this._resolveDatasetElementOptions(i||{}):this._resolveDataElementOptions(n.data[t=t||0]||{},t)).fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var n,i,r,a,o=this,s=o.chart,l=o._config,c=t.custom||{},u=s.options.elements[o.datasetElementType.prototype._type]||{},d=o._datasetElementOptions,h={},f={chart:s,dataset:o.getDataset(),datasetIndex:o.index,hover:e};for(n=0,i=d.length;n<i;++n)r=d[n],a=e?"hover"+r.charAt(0).toUpperCase()+r.slice(1):r,h[r]=$([c[a],l[a],u[a]],f);return h},_resolveDataElementOptions:function(t,e){var n=this,i=t&&t.custom,r=n._cachedDataOpts;if(r&&!i)return r;var a,o,s,l,c=n.chart,u=n._config,d=c.options.elements[n.dataElementType.prototype._type]||{},h=n._dataElementOptions,f={},g={chart:c,dataIndex:e,dataset:n.getDataset(),datasetIndex:n.index},p={cacheable:!i};if(i=i||{},V.isArray(h))for(o=0,s=h.length;o<s;++o)f[l=h[o]]=$([i[l],u[l],d[l]],g,e,p);else for(o=0,s=(a=Object.keys(h)).length;o<s;++o)f[l=a[o]]=$([i[l],u[h[l]],u[l],d[l]],g,e,p);return p.cacheable&&(n._cachedDataOpts=Object.freeze(f)),f},removeHoverStyle:function(t){V.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},r=t._model,a=V.getHoverColor;t.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=$([i.hoverBackgroundColor,e.hoverBackgroundColor,a(r.backgroundColor)],void 0,n),r.borderColor=$([i.hoverBorderColor,e.hoverBorderColor,a(r.borderColor)],void 0,n),r.borderWidth=$([i.hoverBorderWidth,e.hoverBorderWidth,r.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,n,i,r,a,o=this.getMeta().dataset,s={};if(o){for(a=o._model,r=this._resolveDatasetElementOptions(o,!0),t=0,e=(i=Object.keys(r)).length;t<e;++t)s[n=i[t]]=a[n],a[n]=r[n];o.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,n=t.data.length,i=e.length;i<n?t.data.splice(i,n-i):i>n&&this.insertElements(n,i-n)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Q.extend=V.inherits;var tt=Q,et=2*Math.PI;function nt(t,e){var n=e.startAngle,i=e.endAngle,r=e.pixelMargin,a=r/e.outerRadius,o=e.x,s=e.y;t.beginPath(),t.arc(o,s,e.outerRadius,n-a,i+a),e.innerRadius>r?t.arc(o,s,e.innerRadius-r,i+(a=r/e.innerRadius),n-a,!0):t.arc(o,s,r,i+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip()}O._set("global",{elements:{arc:{backgroundColor:O.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var it=U.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var i=V.getAngleFromPoint(n,{x:t,y:e}),r=i.angle,a=i.distance,o=n.startAngle,s=n.endAngle;s<o;)s+=et;for(;r>s;)r-=et;for(;r<o;)r+=et;return r>=o&&r<=s&&a>=n.innerRadius&&a<=n.outerRadius}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t,e=this._chart.ctx,n=this._view,i="inner"===n.borderAlign?.33:0,r={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-i,0),pixelMargin:i,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/et)};if(e.save(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,r.fullCircles){for(r.endAngle=r.startAngle+et,e.beginPath(),e.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),e.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),e.closePath(),t=0;t<r.fullCircles;++t)e.fill();r.endAngle=r.startAngle+n.circumference%et}e.beginPath(),e.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),e.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),e.closePath(),e.fill(),n.borderWidth&&function(t,e,n){var i="inner"===e.borderAlign;i?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),n.fullCircles&&function(t,e,n,i){var r,a=n.endAngle;for(i&&(n.endAngle=n.startAngle+et,nt(t,n),n.endAngle=a,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=et,n.fullCircles--)),t.beginPath(),t.arc(n.x,n.y,n.innerRadius,n.startAngle+et,n.startAngle,!0),r=0;r<n.fullCircles;++r)t.stroke();for(t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.startAngle+et),r=0;r<n.fullCircles;++r)t.stroke()}(t,e,n,i),i&&nt(t,n),t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.stroke()}(e,n,r),e.restore()}}),rt=V.valueOrDefault,at=O.global.defaultColor;O._set("global",{elements:{line:{tension:.4,backgroundColor:at,borderWidth:3,borderColor:at,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ot=U.extend({_type:"line",draw:function(){var t,e,n,i=this,r=i._view,a=i._chart.ctx,o=r.spanGaps,s=i._children.slice(),l=O.global,c=l.elements.line,u=-1,d=i._loop;if(s.length){if(i._loop){for(t=0;t<s.length;++t)if(e=V.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),d=o;break}d&&s.push(s[0])}for(a.save(),a.lineCap=r.borderCapStyle||c.borderCapStyle,a.setLineDash&&a.setLineDash(r.borderDash||c.borderDash),a.lineDashOffset=rt(r.borderDashOffset,c.borderDashOffset),a.lineJoin=r.borderJoinStyle||c.borderJoinStyle,a.lineWidth=rt(r.borderWidth,c.borderWidth),a.strokeStyle=r.borderColor||l.defaultColor,a.beginPath(),(n=s[0]._view).skip||(a.moveTo(n.x,n.y),u=0),t=1;t<s.length;++t)n=s[t]._view,e=-1===u?V.previousItem(s,t):s[u],n.skip||(u!==t-1&&!o||-1===u?a.moveTo(n.x,n.y):V.canvas.lineTo(a,e._view,n),u=t);d&&a.closePath(),a.stroke(),a.restore()}}}),st=V.valueOrDefault,lt=O.global.defaultColor;function ct(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}O._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:lt,borderColor:lt,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ut=U.extend({_type:"point",inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:ct,inXRange:ct,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._chart.ctx,i=e.pointStyle,r=e.rotation,a=e.radius,o=e.x,s=e.y,l=O.global,c=l.defaultColor;e.skip||(void 0===t||V.canvas._isPointInArea(e,t))&&(n.strokeStyle=e.borderColor||c,n.lineWidth=st(e.borderWidth,l.elements.point.borderWidth),n.fillStyle=e.backgroundColor||c,V.canvas.drawPoint(n,i,a,o,s,r))}}),dt=O.global.defaultColor;function ht(t){return t&&void 0!==t.width}function ft(t){var e,n,i,r,a;return ht(t)?(e=t.x-(a=t.width/2),n=t.x+a,i=Math.min(t.y,t.base),r=Math.max(t.y,t.base)):(a=t.height/2,e=Math.min(t.x,t.base),n=Math.max(t.x,t.base),i=t.y-a,r=t.y+a),{left:e,top:i,right:n,bottom:r}}function gt(t,e,n){return t===e?n:t===n?e:t}function pt(t,e,n){var i=null===e,r=null===n,a=!(!t||i&&r)&&ft(t);return a&&(i||e>=a.left&&e<=a.right)&&(r||n>=a.top&&n<=a.bottom)}O._set("global",{elements:{rectangle:{backgroundColor:dt,borderColor:dt,borderSkipped:"bottom",borderWidth:0}}});var mt=U.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,n=function(t){var e=ft(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){var i,r,a,o,s=t.borderWidth,l=function(t){var e=t.borderSkipped,n={};return e?(t.horizontal?t.base>t.x&&(e=gt(e,"left","right")):t.base<t.y&&(e=gt(e,"bottom","top")),n[e]=!0,n):n}(t);return V.isObject(s)?(i=+s.top||0,r=+s.right||0,a=+s.bottom||0,o=+s.left||0):i=r=a=o=+s||0,{t:l.top||i<0?0:i>n?n:i,r:l.right||r<0?0:r>e?e:r,b:l.bottom||a<0?0:a>n?n:a,l:l.left||o<0?0:o>e?e:o}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b}}}(e),i=n.outer,r=n.inner;t.fillStyle=e.backgroundColor,t.fillRect(i.x,i.y,i.w,i.h),i.w===r.w&&i.h===r.h||(t.save(),t.beginPath(),t.rect(i.x,i.y,i.w,i.h),t.clip(),t.fillStyle=e.borderColor,t.rect(r.x,r.y,r.w,r.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return pt(this._view,t,e)},inLabelRange:function(t,e){var n=this._view;return ht(n)?pt(n,t,null):pt(n,null,e)},inXRange:function(t){return pt(this._view,t,null)},inYRange:function(t){return pt(this._view,null,t)},getCenterPoint:function(){var t,e,n=this._view;return ht(n)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return ht(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),vt={},yt=ot,xt=ut,bt=mt;vt.Arc=it,vt.Line=yt,vt.Point=xt,vt.Rectangle=bt;var wt=V._deprecated,_t=V.valueOrDefault;O._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),O._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var St=tt.extend({dataElementType:vt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,n=this;tt.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0,e=n._getIndexScale().options,wt("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),wt("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),wt("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),wt("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),wt("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,n,i=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,n=i.length;e<n;++e)this.updateElement(i[e],e,t)},updateElement:function(t,e,n){var i=this,r=i.getMeta(),a=i.getDataset(),o=i._resolveDataElementOptions(t,e);t._xScale=i.getScaleForId(r.xAxisID),t._yScale=i.getScaleForId(r.yAxisID),t._datasetIndex=i.index,t._index=e,t._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:a.label,label:i.chart.data.labels[e]},V.isArray(a.data[e])&&(t._model.borderSkipped=null),i._updateElementGeometry(t,e,n,o),t.pivot()},_updateElementGeometry:function(t,e,n,i){var r=this,a=t._model,o=r._getValueScale(),s=o.getBasePixel(),l=o.isHorizontal(),c=r._ruler||r.getRuler(),u=r.calculateBarValuePixels(r.index,e,i),d=r.calculateBarIndexPixels(r.index,e,c,i);a.horizontal=l,a.base=n?s:u.base,a.x=l?n?s:u.head:d.center,a.y=l?d.center:n?s:u.head,a.height=l?d.size:void 0,a.width=l?void 0:d.size},_getStacks:function(t){var e,n,i=this._getIndexScale(),r=i._getMatchingVisibleMetas(this._type),a=i.options.stacked,o=r.length,s=[];for(e=0;e<o&&(n=r[e],(!1===a||-1===s.indexOf(n.stack)||void 0===a&&void 0===n.stack)&&s.push(n.stack),n.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var n=this._getStacks(t),i=void 0!==e?n.indexOf(e):-1;return-1===i?n.length-1:i},getRuler:function(){var t,e,n=this._getIndexScale(),i=[];for(t=0,e=this.getMeta().data.length;t<e;++t)i.push(n.getPixelForValue(null,t,this.index));return{pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(t,e,n){var i,r,a,o,s,l,c,u=this.chart,d=this._getValueScale(),h=d.isHorizontal(),f=u.data.datasets,g=d._getMatchingVisibleMetas(this._type),p=d._parseValue(f[t].data[e]),m=n.minBarLength,v=d.options.stacked,y=this.getMeta().stack,x=void 0===p.start?0:p.max>=0&&p.min>=0?p.min:p.max,b=void 0===p.start?p.end:p.max>=0&&p.min>=0?p.max-p.min:p.min-p.max,w=g.length;if(v||void 0===v&&void 0!==y)for(i=0;i<w&&(r=g[i]).index!==t;++i)r.stack===y&&(a=void 0===(c=d._parseValue(f[r.index].data[e])).start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(p.min<0&&a<0||p.max>=0&&a>0)&&(x+=a));return o=d.getPixelForValue(x),l=(s=d.getPixelForValue(x+b))-o,void 0!==m&&Math.abs(l)<m&&(l=m,s=b>=0&&!h||b<0&&h?o-m:o+m),{size:l,base:o,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,n,i){var r="flex"===i.barThickness?function(t,e,n){var i,r=e.pixels,a=r[t],o=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null,l=n.categoryPercentage;return null===o&&(o=a-(null===s?e.end-e.start:s-a)),null===s&&(s=a+a-o),i=a-(a-Math.min(o,s))/2*l,{chunk:Math.abs(s-o)/2*l/e.stackCount,ratio:n.barPercentage,start:i}}(e,n,i):function(t,e,n){var i,r,a=n.barThickness,o=e.stackCount,s=e.pixels[t],l=V.isNullOrUndef(a)?function(t,e){var n,i,r,a,o=t._length;for(r=1,a=e.length;r<a;++r)o=Math.min(o,Math.abs(e[r]-e[r-1]));for(r=0,a=t.getTicks().length;r<a;++r)i=t.getPixelForTick(r),o=r>0?Math.min(o,Math.abs(i-n)):o,n=i;return o}(e.scale,e.pixels):-1;return V.isNullOrUndef(a)?(i=l*n.categoryPercentage,r=n.barPercentage):(i=a*o,r=1),{chunk:i/o,ratio:r,start:s-i/2}}(e,n,i),a=this.getStackIndex(t,this.getMeta().stack),o=r.start+r.chunk*a+r.chunk/2,s=Math.min(_t(i.maxBarThickness,1/0),r.chunk*r.ratio);return{base:o-s/2,head:o+s/2,center:o,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),n=this.getMeta().data,i=this.getDataset(),r=n.length,a=0;for(V.canvas.clipArea(t.ctx,t.chartArea);a<r;++a){var o=e._parseValue(i.data[a]);isNaN(o.min)||isNaN(o.max)||n[a].draw()}V.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=this,e=V.extend({},tt.prototype._resolveDataElementOptions.apply(t,arguments)),n=t._getIndexScale().options,i=t._getValueScale().options;return e.barPercentage=_t(n.barPercentage,e.barPercentage),e.barThickness=_t(n.barThickness,e.barThickness),e.categoryPercentage=_t(n.categoryPercentage,e.categoryPercentage),e.maxBarThickness=_t(n.maxBarThickness,e.maxBarThickness),e.minBarLength=_t(i.minBarLength,e.minBarLength),e}}),Ct=V.valueOrDefault,kt=V.options.resolve;O._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": ("+t.xLabel+", "+t.yLabel+", "+e.datasets[t.datasetIndex].data[t.index].r+")"}}}});var At=tt.extend({dataElementType:vt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,n=e.getMeta().data;V.each(n,(function(n,i){e.updateElement(n,i,t)}))},updateElement:function(t,e,n){var i=this,r=i.getMeta(),a=t.custom||{},o=i.getScaleForId(r.xAxisID),s=i.getScaleForId(r.yAxisID),l=i._resolveDataElementOptions(t,e),c=i.getDataset().data[e],u=i.index,d=n?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof c?c:NaN,e,u),h=n?s.getBasePixel():s.getPixelForValue(c,e,u);t._xScale=o,t._yScale=s,t._options=l,t._datasetIndex=u,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:a.skip||isNaN(d)||isNaN(h),x:d,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ct(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Ct(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Ct(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(t,e){var n=this,i=n.chart,r=n.getDataset(),a=t.custom||{},o=r.data[e]||{},s=tt.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:i,dataIndex:e,dataset:r,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=V.extend({},s)),s.radius=kt([a.radius,o.r,n._config.radius,i.options.elements.point.radius],l,e),s}}),Mt=V.valueOrDefault,Tt=Math.PI,It=2*Tt,Dt=Tt/2;O._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,n,i,r=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(r.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return r.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,i){var r=t.getDatasetMeta(0),a=r.controller.getStyle(i);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[i])||r.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,i,r,a=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(r=o.getDatasetMeta(n)).data[a]&&(r.data[a].hidden=!r.data[a].hidden);o.update()}},cutoutPercentage:50,rotation:-Dt,circumference:It,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],i=": "+e.datasets[t.datasetIndex].data[t.index];return V.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}});var Pt=tt.extend({dataElementType:vt.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e,n,i=this,r=i.chart,a=r.chartArea,o=r.options,s=1,l=1,c=0,u=0,d=i.getMeta(),h=d.data,f=o.cutoutPercentage/100||0,g=o.circumference,p=i._getRingWeight(i.index);if(g<It){var m=o.rotation%It,v=(m+=m>=Tt?-It:m<-Tt?It:0)+g,y=Math.cos(m),x=Math.sin(m),b=Math.cos(v),w=Math.sin(v),_=m<=0&&v>=0||v>=It,S=m<=Dt&&v>=Dt||v>=It+Dt,C=m<=-Dt&&v>=-Dt||v>=Tt+Dt,k=m===-Tt||v>=Tt?-1:Math.min(y,y*f,b,b*f),A=C?-1:Math.min(x,x*f,w,w*f),M=_?1:Math.max(y,y*f,b,b*f),T=S?1:Math.max(x,x*f,w,w*f);s=(M-k)/2,l=(T-A)/2,c=-(M+k)/2,u=-(T+A)/2}for(e=0,n=h.length;e<n;++e)h[e]._options=i._resolveDataElementOptions(h[e],e);for(r.borderWidth=i.getMaxBorderWidth(),r.outerRadius=Math.max(Math.min((a.right-a.left-r.borderWidth)/s,(a.bottom-a.top-r.borderWidth)/l)/2,0),r.innerRadius=Math.max(r.outerRadius*f,0),r.radiusLength=(r.outerRadius-r.innerRadius)/(i._getVisibleDatasetWeightTotal()||1),r.offsetX=c*r.outerRadius,r.offsetY=u*r.outerRadius,d.total=i.calculateTotal(),i.outerRadius=r.outerRadius-r.radiusLength*i._getRingWeightOffset(i.index),i.innerRadius=Math.max(i.outerRadius-r.radiusLength*p,0),e=0,n=h.length;e<n;++e)i.updateElement(h[e],e,t)},updateElement:function(t,e,n){var i=this,r=i.chart,a=r.chartArea,o=r.options,s=o.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=o.rotation,d=o.rotation,h=i.getDataset(),f=n&&s.animateRotate||t.hidden?0:i.calculateCircumference(h.data[e])*(o.circumference/It),g=t._options||{};V.extend(t,{_datasetIndex:i.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+r.offsetX,y:c+r.offsetY,startAngle:u,endAngle:d,circumference:f,outerRadius:n&&s.animateScale?0:i.outerRadius,innerRadius:n&&s.animateScale?0:i.innerRadius,label:V.valueAtIndexOrDefault(h.label,e,r.data.labels[e])}});var p=t._model;n&&s.animateRotate||(p.startAngle=0===e?o.rotation:i.getMeta().data[e-1]._model.endAngle,p.endAngle=p.startAngle+p.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),n=this.getMeta(),i=0;return V.each(n.data,(function(n,r){t=e.data[r],isNaN(t)||n.hidden||(i+=Math.abs(t))})),i},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?It*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,n,i,r,a,o,s,l,c=0,u=this.chart;if(!t)for(e=0,n=u.data.datasets.length;e<n;++e)if(u.isDatasetVisible(e)){t=(i=u.getDatasetMeta(e)).data,e!==this.index&&(a=i.controller);break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)r=t[e],a?(a._configure(),o=a._resolveDataElementOptions(r,e)):o=r._options,"inner"!==o.borderAlign&&(c=(l=o.hoverBorderWidth)>(c=(s=o.borderWidth)>c?s:c)?l:c);return c},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Mt(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Mt(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Mt(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e},_getRingWeight:function(t){return Math.max(Mt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});O._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),O._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Lt=St.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Et=V.valueOrDefault,Nt=V.options.resolve,Rt=V.canvas._isPointInArea;function Ot(t,e){var n=t&&t.options.ticks||{},i=n.reverse,r=void 0===n.min?e:0,a=void 0===n.max?e:0;return{start:i?a:r,end:i?r:a}}function zt(t,e,n){var i=n/2,r=Ot(t,i),a=Ot(e,i);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}function Bt(t){var e,n,i,r;return V.isObject(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r}}O._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Ft=tt.extend({datasetElementType:vt.Line,dataElementType:vt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,n,i=this,r=i.getMeta(),a=r.dataset,o=r.data||[],s=i._config,l=i._showLine=Et(s.showLine,i.chart.options.showLines);for(i._xScale=i.getScaleForId(r.xAxisID),i._yScale=i.getScaleForId(r.yAxisID),l&&(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),a._scale=i._yScale,a._datasetIndex=i.index,a._children=o,a._model=i._resolveDatasetElementOptions(a),a.pivot()),e=0,n=o.length;e<n;++e)i.updateElement(o[e],e,t);for(l&&0!==a._model.tension&&i.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var i,r,a=this,o=a.getMeta(),s=t.custom||{},l=a.getDataset(),c=a.index,u=l.data[e],d=a._xScale,h=a._yScale,f=o.dataset._model,g=a._resolveDataElementOptions(t,e);i=d.getPixelForValue("object"==typeof u?u:NaN,e,c),r=n?h.getBasePixel():a.calculatePointY(u,e,c),t._xScale=d,t._yScale=h,t._options=g,t._datasetIndex=c,t._index=e,t._model={x:i,y:r,skip:s.skip||isNaN(i)||isNaN(r),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:Et(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,n=e._config,i=t.custom||{},r=e.chart.options,a=r.elements.line,o=tt.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Et(n.spanGaps,r.spanGaps),o.tension=Et(n.lineTension,a.tension),o.steppedLine=Nt([i.steppedLine,n.steppedLine,a.stepped]),o.clip=Bt(Et(n.clip,zt(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(t,e,n){var i,r,a,o,s,l,c=this.chart,u=this._yScale,d=0,h=0;if(u.options.stacked){for(o=+u.getRightValue(t),l=(s=c._getSortedVisibleDatasetMetas()).length,i=0;i<l&&(r=s[i]).index!==n;++i)"line"===r.type&&r.yAxisID===u.id&&((a=+u.getRightValue(c.data.datasets[r.index].data[e]))<0?h+=a||0:d+=a||0);return u.getPixelForValue(o<0?h+o:d+o)}return u.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,n,i,r=this.chart,a=this.getMeta(),o=a.dataset._model,s=r.chartArea,l=a.data||[];function c(t,e,n){return Math.max(Math.min(t,n),e)}if(o.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===o.cubicInterpolationMode)V.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)n=l[t]._model,i=V.splineCurve(V.previousItem(l,t)._model,n,V.nextItem(l,t)._model,o.tension),n.controlPointPreviousX=i.previous.x,n.controlPointPreviousY=i.previous.y,n.controlPointNextX=i.next.x,n.controlPointNextY=i.next.y;if(r.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)Rt(n=l[t]._model,s)&&(t>0&&Rt(l[t-1]._model,s)&&(n.controlPointPreviousX=c(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=c(n.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&Rt(l[t+1]._model,s)&&(n.controlPointNextX=c(n.controlPointNextX,s.left,s.right),n.controlPointNextY=c(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,n=this.getMeta(),i=n.data||[],r=e.chartArea,a=e.canvas,o=0,s=i.length;for(this._showLine&&(V.canvas.clipArea(e.ctx,{left:!1===(t=n.dataset._model.clip).left?0:r.left-t.left,right:!1===t.right?a.width:r.right+t.right,top:!1===t.top?0:r.top-t.top,bottom:!1===t.bottom?a.height:r.bottom+t.bottom}),n.dataset.draw(),V.canvas.unclipArea(e.ctx));o<s;++o)i[o].draw(r)},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Et(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Et(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Et(n.hoverBorderWidth,n.borderWidth),e.radius=Et(n.hoverRadius,n.radius)}}),Ht=V.options.resolve;O._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,n,i,r=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(r.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return r.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,i){var r=t.getDatasetMeta(0),a=r.controller.getStyle(i);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[i])||r.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,i,r,a=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(r=o.getDatasetMeta(n)).data[a].hidden=!r.data[a].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var Vt=tt.extend({dataElementType:vt.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i,r=this,a=r.getDataset(),o=r.getMeta(),s=r.chart.options.startAngle||0,l=r._starts=[],c=r._angles=[],u=o.data;for(r._updateRadius(),o.count=r.countVisibleElements(),e=0,n=a.data.length;e<n;e++)l[e]=s,i=r._computeAngle(e),c[e]=i,s+=i;for(e=0,n=u.length;e<n;++e)u[e]._options=r._resolveDataElementOptions(u[e],e),r.updateElement(u[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top);e.outerRadius=Math.max(r/2,0),e.innerRadius=Math.max(i.cutoutPercentage?e.outerRadius/100*i.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,n){var i=this,r=i.chart,a=i.getDataset(),o=r.options,s=o.animation,l=r.scale,c=r.data.labels,u=l.xCenter,d=l.yCenter,h=o.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(a.data[e]),g=i._starts[e],p=g+(t.hidden?0:i._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(a.data[e]),v=t._options||{};V.extend(t,{_datasetIndex:i.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:u,y:d,innerRadius:0,outerRadius:n?m:f,startAngle:n&&s.animateRotate?h:g,endAngle:n&&s.animateRotate?h:p,label:V.valueAtIndexOrDefault(c,e,c[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),n=0;return V.each(e.data,(function(e,i){isNaN(t.data[i])||e.hidden||n++})),n},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor,r=V.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=r(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=r(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=r(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(t){var e=this,n=this.getMeta().count,i=e.getDataset(),r=e.getMeta();return isNaN(i.data[t])||r.data[t].hidden?0:Ht([e.chart.options.elements.arc.angle,2*Math.PI/n],{chart:e.chart,dataIndex:t,dataset:i,datasetIndex:e.index},t)}});O._set("pie",V.clone(O.doughnut)),O._set("pie",{cutoutPercentage:0});var Wt=Pt,Xt=V.valueOrDefault;O._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Yt=tt.extend({datasetElementType:vt.Line,dataElementType:vt.Point,linkScales:V.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i=this,r=i.getMeta(),a=r.dataset,o=r.data||[],s=i.chart.scale,l=i._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=s,a._datasetIndex=i.index,a._children=o,a._loop=!0,a._model=i._resolveDatasetElementOptions(a),a.pivot(),e=0,n=o.length;e<n;++e)i.updateElement(o[e],e,t);for(i.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var i=this,r=t.custom||{},a=i.getDataset(),o=i.chart.scale,s=o.getPointPositionForValue(e,a.data[e]),l=i._resolveDataElementOptions(t,e),c=i.getMeta().dataset._model,u=n?o.xCenter:s.x,d=n?o.yCenter:s.y;t._scale=o,t._options=l,t._datasetIndex=i.index,t._index=e,t._model={x:u,y:d,skip:r.skip||isNaN(u)||isNaN(d),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Xt(r.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,n=t.chart.options,i=tt.prototype._resolveDatasetElementOptions.apply(t,arguments);return i.spanGaps=Xt(e.spanGaps,n.spanGaps),i.tension=Xt(e.lineTension,n.elements.line.tension),i},updateBezierControlPoints:function(){var t,e,n,i,r=this.getMeta(),a=this.chart.chartArea,o=r.data||[];function s(t,e,n){return Math.max(Math.min(t,n),e)}for(r.dataset._model.spanGaps&&(o=o.filter((function(t){return!t._model.skip}))),t=0,e=o.length;t<e;++t)n=o[t]._model,i=V.splineCurve(V.previousItem(o,t,!0)._model,n,V.nextItem(o,t,!0)._model,n.tension),n.controlPointPreviousX=s(i.previous.x,a.left,a.right),n.controlPointPreviousY=s(i.previous.y,a.top,a.bottom),n.controlPointNextX=s(i.next.x,a.left,a.right),n.controlPointNextY=s(i.next.y,a.top,a.bottom)},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Xt(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Xt(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Xt(n.hoverBorderWidth,n.borderWidth),e.radius=Xt(n.hoverRadius,n.radius)}});O._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),O._set("global",{datasets:{scatter:{showLine:!1}}});var Gt={bar:St,bubble:At,doughnut:Pt,horizontalBar:Lt,line:Ft,polarArea:Vt,pie:Wt,radar:Yt,scatter:Ft};function Ut(t,e){return t.native?{x:t.x,y:t.y}:V.getRelativePosition(t,e)}function jt(t,e){var n,i,r,a,o,s,l=t._getSortedVisibleDatasetMetas();for(i=0,a=l.length;i<a;++i)for(r=0,o=(n=l[i].data).length;r<o;++r)(s=n[r])._view.skip||e(s)}function qt(t,e){var n=[];return jt(t,(function(t){t.inRange(e.x,e.y)&&n.push(t)})),n}function Zt(t,e,n,i){var r=Number.POSITIVE_INFINITY,a=[];return jt(t,(function(t){if(!n||t.inRange(e.x,e.y)){var o=t.getCenterPoint(),s=i(e,o);s<r?(a=[t],r=s):s===r&&a.push(t)}})),a}function $t(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){var r=e?Math.abs(t.x-i.x):0,a=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function Kt(t,e,n){var i=Ut(e,t);n.axis=n.axis||"x";var r=$t(n.axis),a=n.intersect?qt(t,i):Zt(t,i,!1,r),o=[];return a.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[a[0]._index];e&&!e._view.skip&&o.push(e)})),o):[]}var Jt={modes:{single:function(t,e){var n=Ut(e,t),i=[];return jt(t,(function(t){if(t.inRange(n.x,n.y))return i.push(t),i})),i.slice(0,1)},label:Kt,index:Kt,dataset:function(t,e,n){var i=Ut(e,t);n.axis=n.axis||"xy";var r=$t(n.axis),a=n.intersect?qt(t,i):Zt(t,i,!1,r);return a.length>0&&(a=t.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(t,e){return Kt(t,e,{intersect:!1})},point:function(t,e){return qt(t,Ut(e,t))},nearest:function(t,e,n){var i=Ut(e,t);n.axis=n.axis||"xy";var r=$t(n.axis);return Zt(t,i,n.intersect,r)},x:function(t,e,n){var i=Ut(e,t),r=[],a=!1;return jt(t,(function(t){t.inXRange(i.x)&&r.push(t),t.inRange(i.x,i.y)&&(a=!0)})),n.intersect&&!a&&(r=[]),r},y:function(t,e,n){var i=Ut(e,t),r=[],a=!1;return jt(t,(function(t){t.inYRange(i.y)&&r.push(t),t.inRange(i.x,i.y)&&(a=!0)})),n.intersect&&!a&&(r=[]),r}}},Qt=V.extend;function te(t,e){return V.where(t,(function(t){return t.pos===e}))}function ee(t,e){return t.sort((function(t,n){var i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function ne(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ie(t,e,n){var i,r,a=n.box,o=t.maxPadding;if(n.size&&(t[n.pos]-=n.size),n.size=n.horizontal?a.height:a.width,t[n.pos]+=n.size,a.getPadding){var s=a.getPadding();o.top=Math.max(o.top,s.top),o.left=Math.max(o.left,s.left),o.bottom=Math.max(o.bottom,s.bottom),o.right=Math.max(o.right,s.right)}if(i=e.outerWidth-ne(o,t,"left","right"),r=e.outerHeight-ne(o,t,"top","bottom"),i!==t.w||r!==t.h)return t.w=i,t.h=r,n.horizontal?i!==t.w:r!==t.h}function re(t,e){var n=e.maxPadding;return function(t){var i={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function ae(t,e,n){var i,r,a,o,s,l,c=[];for(i=0,r=t.length;i<r;++i)(o=(a=t[i]).box).update(a.width||e.w,a.height||e.h,re(a.horizontal,e)),ie(e,n,a)&&(l=!0,c.length&&(s=!0)),o.fullWidth||c.push(a);return s&&ae(c,e,n)||l}function oe(t,e,n){var i,r,a,o,s=n.padding,l=e.x,c=e.y;for(i=0,r=t.length;i<r;++i)o=(a=t[i]).box,a.horizontal?(o.left=o.fullWidth?s.left:e.left,o.right=o.fullWidth?n.outerWidth-s.right:e.left+e.w,o.top=c,o.bottom=c+o.height,o.width=o.right-o.left,c=o.bottom):(o.left=l,o.right=l+o.width,o.top=e.top,o.bottom=e.top+e.h,o.height=o.bottom-o.top,l=o.right);e.x=l,e.y=c}O._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var se,le={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var i,r=["fullWidth","position","weight"],a=r.length,o=0;o<a;++o)n.hasOwnProperty(i=r[o])&&(e[i]=n[i])},update:function(t,e,n){if(t){var i=V.options.toPadding((t.options.layout||{}).padding),r=e-i.width,a=n-i.height,o=function(t){var e=function(t){var e,n,i,r=[];for(e=0,n=(t||[]).length;e<n;++e)r.push({index:e,box:i=t[e],pos:i.position,horizontal:i.isHorizontal(),weight:i.weight});return r}(t),n=ee(te(e,"left"),!0),i=ee(te(e,"right")),r=ee(te(e,"top"),!0),a=ee(te(e,"bottom"));return{leftAndTop:n.concat(r),rightAndBottom:i.concat(a),chartArea:te(e,"chartArea"),vertical:n.concat(i),horizontal:r.concat(a)}}(t.boxes),s=o.vertical,l=o.horizontal,c=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:r,vBoxMaxWidth:r/2/s.length,hBoxMaxHeight:a/2}),u=Qt({maxPadding:Qt({},i),w:r,h:a,x:i.left,y:i.top},i);!function(t,e){var n,i,r;for(n=0,i=t.length;n<i;++n)(r=t[n]).width=r.horizontal?r.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,r.height=r.horizontal&&e.hBoxMaxHeight}(s.concat(l),c),ae(s,u,c),ae(l,u,c)&&ae(s,u,c),function(t){var e=t.maxPadding;function n(n){var i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(u),oe(o.leftAndTop,u,c),u.x+=u.w,u.y+=u.h,oe(o.rightAndBottom,u,c),t.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},V.each(o.chartArea,(function(e){var n=e.box;Qt(n,t.chartArea),n.update(u.w,u.h)}))}}},ce=(se=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&se.default||se,ue="$chartjs",de="chartjs-size-monitor",he="chartjs-render-monitor",fe=["animationstart","webkitAnimationStart"],ge={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function pe(t,e){var n=V.getStyle(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}var me=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function ve(t,e,n){t.addEventListener(e,n,me)}function ye(t,e,n){t.removeEventListener(e,n,me)}function xe(t,e,n,i,r){return{type:t,chart:e,native:r||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}function be(t){var e=document.createElement("div");return e.className=t||"",e}var we={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var n=t[ue]||(t[ue]={});if(!n.containsStyles){n.containsStyles=!0,e="/* Chart.js */\n"+e;var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(e)),t.appendChild(i)}}(e.host?e:document.head,ce)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(this._ensureLoaded(t),function(t,e){var n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[ue]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===r||""===r){var a=pe(t,"width");void 0!==a&&(t.width=a)}if(null===i||""===i)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var o=pe(t,"height");void 0!==a&&(t.height=o)}}(t,e),n):null},releaseContext:function(t){var e=t.canvas;if(e[ue]){var n=e[ue].initial;["height","width"].forEach((function(t){var i=n[t];V.isNullOrUndef(i)?e.removeAttribute(t):e.setAttribute(t,i)})),V.each(n.style||{},(function(t,n){e.style[n]=t})),e.width=e.width,delete e[ue]}},addEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var r=n[ue]||(n[ue]={});ve(i,e,(r.proxies||(r.proxies={}))[t.id+"_"+e]=function(e){n(function(t,e){var n=ge[t.type]||t.type,i=V.getRelativePosition(t,e);return xe(n,e,i.x,i.y,t)}(e,t))})}else!function(t,e,n){var i,r,a,o,s=t[ue]||(t[ue]={}),l=s.resizer=function(t){var e=be(de),n=be(de+"-expand"),i=be(de+"-shrink");n.appendChild(be()),i.appendChild(be()),e.appendChild(n),e.appendChild(i),e._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,i.scrollLeft=1e6,i.scrollTop=1e6};var r=function(){e._reset(),t()};return ve(n,"scroll",r.bind(n,"expand")),ve(i,"scroll",r.bind(i,"shrink")),e}((i=function(){if(s.resizer){var i=n.options.maintainAspectRatio&&t.parentNode,r=i?i.clientWidth:0;e(xe("resize",n)),i&&i.clientWidth<r&&n.canvas&&e(xe("resize",n))}},a=!1,o=[],function(){o=Array.prototype.slice.call(arguments),r=r||this,a||(a=!0,V.requestAnimFrame.call(window,(function(){a=!1,i.apply(r,o)})))}));!function(t,e){var n=t[ue]||(t[ue]={}),i=n.renderProxy=function(t){"chartjs-render-animation"===t.animationName&&e()};V.each(fe,(function(e){ve(t,e,i)})),n.reflow=!!t.offsetParent,t.classList.add(he)}(t,(function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}}))}(i,n,t)},removeEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var r=((n[ue]||{}).proxies||{})[t.id+"_"+e];r&&ye(i,e,r)}else!function(t){var e=t[ue]||{},n=e.resizer;delete e.resizer,function(t){var e=t[ue]||{},n=e.renderProxy;n&&(V.each(fe,(function(e){ye(t,e,n)})),delete e.renderProxy),t.classList.remove(he)}(t),n&&n.parentNode&&n.parentNode.removeChild(n)}(i)}};V.addEvent=ve,V.removeEvent=ye;var _e=V.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},we._enabled?we:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}});O._set("global",{plugins:{}});var Se={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var i,r,a,o,s,l=this.descriptors(t),c=l.length;for(i=0;i<c;++i)if("function"==typeof(s=(a=(r=l[i]).plugin)[e])&&((o=[t].concat(n||[])).push(r.options),!1===s.apply(a,o)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],i=[],r=t&&t.config||{},a=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach((function(t){if(-1===n.indexOf(t)){var e=t.id,r=a[e];!1!==r&&(!0===r&&(r=V.clone(O.global.plugins[e])),n.push(t),i.push({plugin:t,options:r||{}}))}})),e.descriptors=i,e.id=this._cacheId,i},_invalidate:function(t){delete t.$plugins}},Ce={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=V.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?V.merge({},[O.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=V.extend(this.defaults[t],e))},addScalesToLayout:function(t){V.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,le.addBox(t,e)}))}},ke=V.valueOrDefault,Ae=V.rtl.getRtlAdapter;O._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:V.noop,title:function(t,e){var n="",i=e.labels,r=i?i.length:0;if(t.length>0){var a=t[0];a.label?n=a.label:a.xLabel?n=a.xLabel:r>0&&a.index<r&&(n=i[a.index])}return n},afterTitle:V.noop,beforeBody:V.noop,beforeLabel:V.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),V.isNullOrUndef(t.value)?n+=t.yLabel:n+=t.value,n},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:V.noop,afterBody:V.noop,beforeFooter:V.noop,footer:V.noop,afterFooter:V.noop}}});var Me={average:function(t){if(!t.length)return!1;var e,n,i=0,r=0,a=0;for(e=0,n=t.length;e<n;++e){var o=t[e];if(o&&o.hasValue()){var s=o.tooltipPosition();i+=s.x,r+=s.y,++a}}return{x:i/a,y:r/a}},nearest:function(t,e){var n,i,r,a=e.x,o=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){var l=t[n];if(l&&l.hasValue()){var c=l.getCenterPoint(),u=V.distanceBetweenPoints(e,c);u<s&&(s=u,r=l)}}if(r){var d=r.tooltipPosition();a=d.x,o=d.y}return{x:a,y:o}}};function Te(t,e){return e&&(V.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ie(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function De(t){var e=O.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:ke(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:ke(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:ke(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:ke(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:ke(t.titleFontStyle,e.defaultFontStyle),titleFontSize:ke(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:ke(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:ke(t.footerFontStyle,e.defaultFontStyle),footerFontSize:ke(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Pe(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Le(t){return Te([],Ie(t))}var Ee=U.extend({initialize:function(){this._model=De(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options,n=e.callbacks,i=n.beforeTitle.apply(t,arguments),r=n.title.apply(t,arguments),a=n.afterTitle.apply(t,arguments),o=[];return o=Te(o,Ie(i)),o=Te(o,Ie(r)),Te(o,Ie(a))},getBeforeBody:function(){return Le(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var n=this,i=n._options.callbacks,r=[];return V.each(t,(function(t){var a={before:[],lines:[],after:[]};Te(a.before,Ie(i.beforeLabel.call(n,t,e))),Te(a.lines,i.label.call(n,t,e)),Te(a.after,Ie(i.afterLabel.call(n,t,e))),r.push(a)})),r},getAfterBody:function(){return Le(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,n=e.beforeFooter.apply(t,arguments),i=e.footer.apply(t,arguments),r=e.afterFooter.apply(t,arguments),a=[];return a=Te(a,Ie(n)),a=Te(a,Ie(i)),Te(a,Ie(r))},update:function(t){var e,n,i,r,a,o,s,l,c,u,d=this,h=d._options,f=d._model,g=d._model=De(h),p=d._active,m=d._data,v={xAlign:f.xAlign,yAlign:f.yAlign},y={x:f.x,y:f.y},x={width:f.width,height:f.height},b={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var w=[],_=[];b=Me[h.position].call(d,p,d._eventPosition);var S=[];for(e=0,n=p.length;e<n;++e)S.push((r=void 0,a=void 0,l=void 0,c=void 0,u=void 0,r=(i=p[e])._xScale,a=i._yScale||i._scale,o=i._index,c=(l=i._chart.getDatasetMeta(s=i._datasetIndex).controller)._getIndexScale(),u=l._getValueScale(),{xLabel:r?r.getLabelForIndex(o,s):"",yLabel:a?a.getLabelForIndex(o,s):"",label:c?""+c.getLabelForIndex(o,s):"",value:u?""+u.getLabelForIndex(o,s):"",index:o,datasetIndex:s,x:i._model.x,y:i._model.y}));h.filter&&(S=S.filter((function(t){return h.filter(t,m)}))),h.itemSort&&(S=S.sort((function(t,e){return h.itemSort(t,e,m)}))),V.each(S,(function(t){w.push(h.callbacks.labelColor.call(d,t,d._chart)),_.push(h.callbacks.labelTextColor.call(d,t,d._chart))})),g.title=d.getTitle(S,m),g.beforeBody=d.getBeforeBody(S,m),g.body=d.getBody(S,m),g.afterBody=d.getAfterBody(S,m),g.footer=d.getFooter(S,m),g.x=b.x,g.y=b.y,g.caretPadding=h.caretPadding,g.labelColors=w,g.labelTextColors=_,g.dataPoints=S,y=function(t,e,n,i){var r=t.x,a=t.y,o=t.caretPadding,s=n.xAlign,l=n.yAlign,c=t.caretSize+o,u=t.cornerRadius+o;return"right"===s?r-=e.width:"center"===s&&((r-=e.width/2)+e.width>i.width&&(r=i.width-e.width),r<0&&(r=0)),"top"===l?a+=c:a-="bottom"===l?e.height+c:e.height/2,"center"===l?"left"===s?r+=c:"right"===s&&(r-=c):"left"===s?r-=u:"right"===s&&(r+=u),{x:r,y:a}}(g,x=function(t,e){var n=t._chart.ctx,i=2*e.yPadding,r=0,a=e.body,o=a.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0),s=e.title.length,l=e.footer.length,c=e.titleFontSize,u=e.bodyFontSize,d=e.footerFontSize;i+=s*c,i+=s?(s-1)*e.titleSpacing:0,i+=s?e.titleMarginBottom:0,i+=(o+=e.beforeBody.length+e.afterBody.length)*u,i+=o?(o-1)*e.bodySpacing:0,i+=l?e.footerMarginTop:0,i+=l*d,i+=l?(l-1)*e.footerSpacing:0;var h=0,f=function(t){r=Math.max(r,n.measureText(t).width+h)};return n.font=V.fontString(c,e._titleFontStyle,e._titleFontFamily),V.each(e.title,f),n.font=V.fontString(u,e._bodyFontStyle,e._bodyFontFamily),V.each(e.beforeBody.concat(e.afterBody),f),h=e.displayColors?u+2:0,V.each(a,(function(t){V.each(t.before,f),V.each(t.lines,f),V.each(t.after,f)})),h=0,n.font=V.fontString(d,e._footerFontStyle,e._footerFontFamily),V.each(e.footer,f),{width:r+=2*e.xPadding,height:i}}(this,g),v=function(t,e){var n,i,r,a,o,s=t._model,l=t._chart,c=t._chart.chartArea,u="center",d="center";s.y<e.height?d="top":s.y>l.height-e.height&&(d="bottom");var h=(c.left+c.right)/2,f=(c.top+c.bottom)/2;"center"===d?(n=function(t){return t<=h},i=function(t){return t>h}):(n=function(t){return t<=e.width/2},i=function(t){return t>=l.width-e.width/2}),r=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},a=function(t){return t-e.width-s.caretSize-s.caretPadding<0},o=function(t){return t<=f?"top":"bottom"},n(s.x)?(u="left",r(s.x)&&(u="center",d=o(s.y))):i(s.x)&&(u="right",a(s.x)&&(u="center",d=o(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:u,yAlign:g.yAlign?g.yAlign:d}}(this,x),d._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=y.x,g.y=y.y,g.width=x.width,g.height=x.height,g.caretX=b.x,g.caretY=b.y,d._model=g,t&&h.custom&&h.custom.call(d,g),d},drawCaret:function(t,e){var n=this._chart.ctx,i=this.getCaretPosition(t,e,this._view);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(t,e,n){var i,r,a,o,s,l,c=n.caretSize,u=n.cornerRadius,d=n.xAlign,h=n.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===h)s=g+m/2,"left"===d?(r=(i=f)-c,a=i,o=s+c,l=s-c):(r=(i=f+p)+c,a=i,o=s-c,l=s+c);else if("left"===d?(i=(r=f+u+c)-c,a=r+c):"right"===d?(i=(r=f+p-u-c)-c,a=r+c):(i=(r=n.caretX)-c,a=r+c),"top"===h)s=(o=g)-c,l=o;else{s=(o=g+m)+c,l=o;var v=a;a=i,i=v}return{x1:i,x2:r,x3:a,y1:o,y2:s,y3:l}},drawTitle:function(t,e,n){var i,r,a,o=e.title,s=o.length;if(s){var l=Ae(e.rtl,e.x,e.width);for(t.x=Pe(e,e._titleAlign),n.textAlign=l.textAlign(e._titleAlign),n.textBaseline="middle",i=e.titleFontSize,r=e.titleSpacing,n.fillStyle=e.titleFontColor,n.font=V.fontString(i,e._titleFontStyle,e._titleFontFamily),a=0;a<s;++a)n.fillText(o[a],l.x(t.x),t.y+i/2),t.y+=i+r,a+1===s&&(t.y+=e.titleMarginBottom-r)}},drawBody:function(t,e,n){var i,r,a,o,s,l,c,u,d=e.bodyFontSize,h=e.bodySpacing,f=e._bodyAlign,g=e.body,p=e.displayColors,m=0,v=p?Pe(e,"left"):0,y=Ae(e.rtl,e.x,e.width),x=function(e){n.fillText(e,y.x(t.x+m),t.y+d/2),t.y+=d+h},b=y.textAlign(f);for(n.textAlign=f,n.textBaseline="middle",n.font=V.fontString(d,e._bodyFontStyle,e._bodyFontFamily),t.x=Pe(e,b),n.fillStyle=e.bodyFontColor,V.each(e.beforeBody,x),m=p&&"right"!==b?"center"===f?d/2+1:d+2:0,s=0,c=g.length;s<c;++s){for(i=g[s],a=e.labelColors[s],n.fillStyle=r=e.labelTextColors[s],V.each(i.before,x),l=0,u=(o=i.lines).length;l<u;++l){if(p){var w=y.x(v);n.fillStyle=e.legendColorBackground,n.fillRect(y.leftForLtr(w,d),t.y,d,d),n.lineWidth=1,n.strokeStyle=a.borderColor,n.strokeRect(y.leftForLtr(w,d),t.y,d,d),n.fillStyle=a.backgroundColor,n.fillRect(y.leftForLtr(y.xPlus(w,1),d-2),t.y+1,d-2,d-2),n.fillStyle=r}x(o[l])}V.each(i.after,x)}m=0,V.each(e.afterBody,x),t.y-=h},drawFooter:function(t,e,n){var i,r,a=e.footer,o=a.length;if(o){var s=Ae(e.rtl,e.x,e.width);for(t.x=Pe(e,e._footerAlign),t.y+=e.footerMarginTop,n.textAlign=s.textAlign(e._footerAlign),n.textBaseline="middle",i=e.footerFontSize,n.fillStyle=e.footerFontColor,n.font=V.fontString(i,e._footerFontStyle,e._footerFontFamily),r=0;r<o;++r)n.fillText(a[r],s.x(t.x),t.y+i/2),t.y+=i+e.footerSpacing}},drawBackground:function(t,e,n,i){n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth;var r=e.xAlign,a=e.yAlign,o=t.x,s=t.y,l=i.width,c=i.height,u=e.cornerRadius;n.beginPath(),n.moveTo(o+u,s),"top"===a&&this.drawCaret(t,i),n.lineTo(o+l-u,s),n.quadraticCurveTo(o+l,s,o+l,s+u),"center"===a&&"right"===r&&this.drawCaret(t,i),n.lineTo(o+l,s+c-u),n.quadraticCurveTo(o+l,s+c,o+l-u,s+c),"bottom"===a&&this.drawCaret(t,i),n.lineTo(o+u,s+c),n.quadraticCurveTo(o,s+c,o,s+c-u),"center"===a&&"left"===r&&this.drawCaret(t,i),n.lineTo(o,s+u),n.quadraticCurveTo(o,s,o+u,s),n.closePath(),n.fill(),e.borderWidth>0&&n.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},i={x:e.x,y:e.y},r=Math.abs(e.opacity<.001)?0:e.opacity;this._options.enabled&&(e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length)&&(t.save(),t.globalAlpha=r,this.drawBackground(i,e,t,n),i.y+=e.yPadding,V.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),V.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,n=this,i=n._options;return n._lastActive=n._lastActive||[],"mouseout"===t.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(t,i.mode,i),i.reverse&&n._active.reverse()),(e=!V.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(i.enabled||i.custom)&&(n._eventPosition={x:t.x,y:t.y},n.update(!0),n.pivot())),e}});Ee.positioners=Me;var Ne=V.valueOrDefault;function Re(){return V.merge({},[].slice.call(arguments),{merger:function(t,e,n,i){if("xAxes"===t||"yAxes"===t){var r,a,o,s=n[t].length;for(e[t]||(e[t]=[]),r=0;r<s;++r)a=Ne((o=n[t][r]).type,"xAxes"===t?"category":"linear"),r>=e[t].length&&e[t].push({}),V.merge(e[t][r],!e[t][r].type||o.type&&o.type!==e[t][r].type?[Ce.getScaleDefaults(a),o]:o)}else V._merger(t,e,n,i)}})}function Oe(){return V.merge({},[].slice.call(arguments),{merger:function(t,e,n,i){var r=e[t]||{},a=n[t];"scales"===t?e[t]=Re(r,a):"scale"===t?e[t]=V.merge(r,[Ce.getScaleDefaults(a.type),a]):V._merger(t,e,n,i)}})}function ze(t){var e=t.options;V.each(t.scales,(function(e){le.removeBox(t,e)})),e=Oe(O.global,O[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function Be(t,e,n){var i,r=function(t){return t.id===i};do{i=e+n++}while(V.findIndex(t,r)>=0);return i}function Fe(t){return"top"===t||"bottom"===t}function He(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}O._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Ve=function(t,e){return this.construct(t,e),this};V.extend(Ve.prototype,{construct:function(t,e){var n=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Oe(O.global,O[t.type],t.options||{}),t}(e);var i=_e.acquireContext(t,e),r=i&&i.canvas,a=r&&r.height,o=r&&r.width;n.id=V.uid(),n.ctx=i,n.canvas=r,n.config=e,n.width=o,n.height=a,n.aspectRatio=a?o/a:null,n.options=e.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Ve.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(t){n.config.data=t}}),i&&r?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Se.notify(t,"beforeInit"),V.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),Se.notify(t,"afterInit"),t},clear:function(){return V.canvas.clear(this),this},stop:function(){return Z.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,i=e.canvas,r=n.maintainAspectRatio&&e.aspectRatio||null,a=Math.max(0,Math.floor(V.getMaximumWidth(i))),o=Math.max(0,Math.floor(r?a/r:V.getMaximumHeight(i)));if((e.width!==a||e.height!==o)&&(i.width=e.width=a,i.height=e.height=o,i.style.width=a+"px",i.style.height=o+"px",V.retinaScale(e,n.devicePixelRatio),!t)){var s={width:a,height:o};Se.notify(e,"resize",[s]),n.onResize&&n.onResize(e,s),e.stop(),e.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;V.each(e.xAxes,(function(t,n){t.id||(t.id=Be(e.xAxes,"x-axis-",n))})),V.each(e.yAxes,(function(t,n){t.id||(t.id=Be(e.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,n=t.scales||{},i=[],r=Object.keys(n).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(i=i.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&i.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),V.each(i,(function(e){var i=e.options,a=i.id,o=Ne(i.type,e.dtype);Fe(i.position)!==Fe(e.dposition)&&(i.position=e.dposition),r[a]=!0;var s=null;if(a in n&&n[a].type===o)(s=n[a]).options=i,s.ctx=t.ctx,s.chart=t;else{var l=Ce.getScaleConstructor(o);if(!l)return;s=new l({id:a,type:o,options:i,ctx:t.ctx,chart:t}),n[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),V.each(r,(function(t,e){t||delete n[e]})),t.scales=n,Ce.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,n=this,i=[],r=n.data.datasets;for(t=0,e=r.length;t<e;t++){var a=r[t],o=n.getDatasetMeta(t),s=a.type||n.config.type;if(o.type&&o.type!==s&&(n.destroyDatasetMeta(t),o=n.getDatasetMeta(t)),o.type=s,o.order=a.order||0,o.index=t,o.controller)o.controller.updateIndex(t),o.controller.linkScales();else{var l=Gt[o.type];if(void 0===l)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new l(n,t),i.push(o.controller)}}return i},resetElements:function(){var t=this;V.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,n,i=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),ze(i),Se._invalidate(i),!1!==Se.notify(i,"beforeUpdate")){i.tooltip._data=i.data;var r=i.buildOrUpdateControllers();for(e=0,n=i.data.datasets.length;e<n;e++)i.getDatasetMeta(e).controller.buildOrUpdateElements();i.updateLayout(),i.options.animation&&i.options.animation.duration&&V.each(r,(function(t){t.reset()})),i.updateDatasets(),i.tooltip.initialize(),i.lastActive=[],Se.notify(i,"afterUpdate"),i._layers.sort(He("z","_idx")),i._bufferedRender?i._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:i.render(t)}},updateLayout:function(){var t=this;!1!==Se.notify(t,"beforeLayout")&&(le.update(this,this.width,this.height),t._layers=[],V.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),Se.notify(t,"afterScaleUpdate"),Se.notify(t,"afterLayout"))},updateDatasets:function(){if(!1!==Se.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);Se.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),n={meta:e,index:t};!1!==Se.notify(this,"beforeDatasetUpdate",[n])&&(e.controller._update(),Se.notify(this,"afterDatasetUpdate",[n]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var n=e.options.animation,i=Ne(t.duration,n&&n.duration),r=t.lazy;if(!1!==Se.notify(e,"beforeRender")){var a=function(t){Se.notify(e,"afterRender"),V.callback(n&&n.onComplete,[t],e)};if(n&&i){var o=new q({numSteps:i/16.66,easing:t.easing||n.easing,render:function(t,e){var n=e.currentStep,i=n/e.numSteps;t.draw((0,V.easing.effects[e.easing])(i),i,n)},onAnimationProgress:n.onProgress,onAnimationComplete:a});Z.addAnimation(e,o,i,r)}else e.draw(),a(new q({numSteps:0,chart:e}));return e}},draw:function(t){var e,n,i=this;if(i.clear(),V.isNullOrUndef(t)&&(t=1),i.transition(t),!(i.width<=0||i.height<=0)&&!1!==Se.notify(i,"beforeDraw",[t])){for(n=i._layers,e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(i.chartArea);for(i.drawDatasets(t);e<n.length;++e)n[e].draw(i.chartArea);i._drawTooltip(t),Se.notify(i,"afterDraw",[t])}},transition:function(t){for(var e=0,n=(this.data.datasets||[]).length;e<n;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,n,i=[];for(e=0,n=(this.data.datasets||[]).length;e<n;++e)t&&!this.isDatasetVisible(e)||i.push(this.getDatasetMeta(e));return i.sort(He("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,n;if(!1!==Se.notify(this,"beforeDatasetsDraw",[t])){for(n=(e=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(e[n],t);Se.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n={meta:t,index:t.index,easingValue:e};!1!==Se.notify(this,"beforeDatasetDraw",[n])&&(t.controller.draw(e),Se.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,n={tooltip:e,easingValue:t};!1!==Se.notify(this,"beforeTooltipDraw",[n])&&(e.draw(),Se.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(t){return Jt.modes.single(this,t)},getElementsAtEvent:function(t){return Jt.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return Jt.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var i=Jt.modes[e];return"function"==typeof i?i(this,t,n):[]},getDatasetAtEvent:function(t){return Jt.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var n=e._meta[this.id];return n||(n=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),n},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],i=n._meta&&n._meta[e];i&&(i.controller.destroy(),delete n._meta[e])},destroy:function(){var t,e,n=this,i=n.canvas;for(n.stop(),t=0,e=n.data.datasets.length;t<e;++t)n.destroyDatasetMeta(t);i&&(n.unbindEvents(),V.canvas.clear(n),_e.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Se.notify(n,"destroy"),delete Ve.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ee({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},n=function(){t.eventHandler.apply(t,arguments)};V.each(t.options.events,(function(i){_e.addEventListener(t,i,n),e[i]=n})),t.options.responsive&&(n=function(){t.resize()},_e.addEventListener(t,"resize",n),e.resize=n)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,V.each(e,(function(e,n){_e.removeEventListener(t,n,e)})))},updateHoverStyle:function(t,e,n){var i,r,a,o=n?"set":"remove";for(r=0,a=t.length;r<a;++r)(i=t[r])&&this.getDatasetMeta(i._datasetIndex).controller[o+"HoverStyle"](i);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==Se.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var i=e.handleEvent(t);n&&(i=n._start?n.handleEvent(t):i|n.handleEvent(t)),Se.notify(e,"afterEvent",[t]);var r=e._bufferedRequest;return r?e.render(r):i&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,n=this,i=n.options||{},r=i.hover;return n.lastActive=n.lastActive||[],n.active="mouseout"===t.type?[]:n.getElementsAtEventForMode(t,r.mode,r),V.callback(i.onHover||i.hover.onHover,[t.native,n.active],n),"mouseup"!==t.type&&"click"!==t.type||i.onClick&&i.onClick.call(n,t.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,r.mode,!1),n.active.length&&r.mode&&n.updateHoverStyle(n.active,r.mode,!0),e=!V.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,e}}),Ve.instances={};var We=Ve;function Xe(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Ye(t){this.options=t||{}}Ve.Controller=Ve,Ve.types={},V.configMerge=Oe,V.scaleMerge=Re,V.extend(Ye.prototype,{formats:Xe,parse:Xe,format:Xe,add:Xe,diff:Xe,startOf:Xe,endOf:Xe,_create:function(t){return t}}),Ye.override=function(t){V.extend(Ye.prototype,t)};var Ge={_date:Ye},Ue={formatters:{values:function(t){return V.isArray(t)?t:""+t},linear:function(t,e,n){var i=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(i)>1&&t!==Math.floor(t)&&(i=t-Math.floor(t));var r=V.log10(Math.abs(i)),a="";if(0!==t)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var o=V.log10(Math.abs(t)),s=Math.floor(o)-Math.floor(r);s=Math.max(Math.min(s,20),0),a=t.toExponential(s)}else{var l=-1*Math.floor(r);l=Math.max(Math.min(l,20),0),a=t.toFixed(l)}else a="0";return a},logarithmic:function(t,e,n){var i=t/Math.pow(10,Math.floor(V.log10(t)));return 0===t?"0":1===i||2===i||5===i||0===e||e===n.length-1?t.toExponential():""}}},je=V.isArray,qe=V.isNullOrUndef,Ze=V.valueOrDefault,$e=V.valueAtIndexOrDefault;function Ke(t,e,n){var i,r=t.getTicks().length,a=Math.min(e,r-1),o=t.getPixelForTick(a),s=t._startPixel,l=t._endPixel;if(!(n&&(i=1===r?Math.max(o-s,l-o):0===e?(t.getPixelForTick(1)-o)/2:(o-t.getPixelForTick(a-1))/2,(o+=a<e?i:-i)<s-1e-6||o>l+1e-6)))return o}function Je(t){return t.drawTicks?t.tickMarkLength:0}function Qe(t){var e,n;return t.display?(e=V.options._parseFont(t),n=V.options.toPadding(t.padding),e.lineHeight+n.height):0}function tn(t,e){return V.extend(V.options._parseFont({fontFamily:Ze(e.fontFamily,t.fontFamily),fontSize:Ze(e.fontSize,t.fontSize),fontStyle:Ze(e.fontStyle,t.fontStyle),lineHeight:Ze(e.lineHeight,t.lineHeight)}),{color:V.options.resolve([e.fontColor,t.fontColor,O.global.defaultFontColor])})}function en(t){var e=tn(t,t.minor);return{minor:e,major:t.major.enabled?tn(t,t.major):e}}function nn(t){var e,n,i,r=[];for(n=0,i=t.length;n<i;++n)void 0!==(e=t[n])._index&&r.push(e);return r}function rn(t,e,n,i){var r,a,o,s,l=Ze(n,0),c=Math.min(Ze(i,t.length),t.length),u=0;for(e=Math.ceil(e),i&&(e=(r=i-n)/Math.floor(r/e)),s=l;s<0;)u++,s=Math.round(l+u*e);for(a=Math.max(l,0);a<c;a++)o=t[a],a===s?(o._index=a,u++,s=Math.round(l+u*e)):delete o.label}O._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Ue.formatters.values,minor:{},major:{}}});var an=U.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){V.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var i,r,a,o,s,l=this,c=l.options.ticks,u=c.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=V.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),o=l.buildTicks()||[],(!(o=l.afterBuildTicks(o)||o)||!o.length)&&l.ticks)for(o=[],i=0,r=l.ticks.length;i<r;++i)o.push({value:l.ticks[i],major:!1});return l._ticks=o,a=l._convertTicksToLabels((s=u<o.length)?function(t,e){for(var n=[],i=t.length/e,r=0,a=t.length;r<a;r+=i)n.push(t[Math.floor(r)]);return n}(o,u):o),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=c.display&&(c.autoSkip||"auto"===c.source)?l._autoSkip(o):o,s&&(a=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=a,l.afterUpdate(),l.minSize},_configure:function(){var t,e,n=this,i=n.options.ticks.reverse;n.isHorizontal()?(t=n.left,e=n.right):(t=n.top,e=n.bottom,i=!i),n._startPixel=t,n._endPixel=e,n._reversePixels=i,n._length=e-t},afterUpdate:function(){V.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){V.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){V.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){V.callback(this.options.beforeDataLimits,[this])},determineDataLimits:V.noop,afterDataLimits:function(){V.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){V.callback(this.options.beforeBuildTicks,[this])},buildTicks:V.noop,afterBuildTicks:function(t){var e=this;return je(t)&&t.length?V.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=V.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){V.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){V.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){V.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,n,i,r,a,o,s=this,l=s.options,c=l.ticks,u=s.getTicks().length,d=c.minRotation||0,h=c.maxRotation,f=d;!s._isVisible()||!c.display||d>=h||u<=1||!s.isHorizontal()?s.labelRotation=d:(e=(t=s._getLabelSizes()).widest.width,n=t.highest.height-t.highest.offset,i=Math.min(s.maxWidth,s.chart.width-e),e+6>(r=l.offset?s.maxWidth/u:i/(u-1))&&(r=i/(u-(l.offset?.5:1)),a=s.maxHeight-Je(l.gridLines)-c.padding-Qe(l.scaleLabel),o=Math.sqrt(e*e+n*n),f=V.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/r,1)),Math.asin(Math.min(a/o,1))-Math.asin(n/o))),f=Math.max(d,Math.min(h,f))),s.labelRotation=f)},afterCalculateTickRotation:function(){V.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){V.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},n=t.chart,i=t.options,r=i.ticks,a=i.scaleLabel,o=i.gridLines,s=t._isVisible(),l="bottom"===i.position,c=t.isHorizontal();if(c?e.width=t.maxWidth:s&&(e.width=Je(o)+Qe(a)),c?s&&(e.height=Je(o)+Qe(a)):e.height=t.maxHeight,r.display&&s){var u=en(r),d=t._getLabelSizes(),h=d.first,f=d.last,g=d.widest,p=d.highest,m=.4*u.minor.lineHeight,v=r.padding;if(c){var y=0!==t.labelRotation,x=V.toRadians(t.labelRotation),b=Math.cos(x),w=Math.sin(x);e.height=Math.min(t.maxHeight,e.height+(w*g.width+b*(p.height-(y?p.offset:0))+(y?0:m))+v);var _,S,C=t.getPixelForTick(0)-t.left,k=t.right-t.getPixelForTick(t.getTicks().length-1);y?(_=l?b*h.width+w*h.offset:w*(h.height-h.offset),S=l?w*(f.height-f.offset):b*f.width+w*f.offset):(_=h.width/2,S=f.width/2),t.paddingLeft=Math.max((_-C)*t.width/(t.width-C),0)+3,t.paddingRight=Math.max((S-k)*t.width/(t.width-k),0)+3}else e.width=Math.min(t.maxWidth,e.width+(r.mirror?0:g.width+v+m)),t.paddingTop=h.height/2,t.paddingBottom=f.height/2}t.handleMargins(),c?(t.width=t._length=n.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){V.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(qe(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,n,i,r=this;for(r.ticks=t.map((function(t){return t.value})),r.beforeTickToLabelConversion(),e=r.convertTicksToLabels(t)||r.ticks,r.afterTickToLabelConversion(),n=0,i=t.length;n<i;++n)t[n].label=e[n];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=function(t,e,n,i){var r,a,o,s,l,c,u,d,h,f,g,p,m,v=n.length,y=[],x=[],b=[];for(r=0;r<v;++r){if(s=n[r].label,t.font=c=(l=n[r].major?e.major:e.minor).string,u=i[c]=i[c]||{data:{},gc:[]},d=l.lineHeight,h=f=0,qe(s)||je(s)){if(je(s))for(a=0,o=s.length;a<o;++a)qe(g=s[a])||je(g)||(h=V.measureText(t,u.data,u.gc,h,g),f+=d)}else h=V.measureText(t,u.data,u.gc,h,s),f=d;y.push(h),x.push(f),b.push(d/2)}function w(t){return{width:y[t]||0,height:x[t]||0,offset:b[t]||0}}return function(t,e){V.each(t,(function(t){var n,i=t.gc,r=i.length/2;if(r>e){for(n=0;n<r;++n)delete t.data[i[n]];i.splice(0,r)}}))}(i,v),p=y.indexOf(Math.max.apply(null,y)),m=x.indexOf(Math.max.apply(null,x)),{first:w(0),last:w(v-1),widest:w(p),highest:w(m)}}(t.ctx,en(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,n,i,r;return je(t)?(e=+this.getRightValue(t[0]),n=+this.getRightValue(t[1]),i=Math.min(e,n),r=Math.max(e,n)):(e=void 0,n=t=+this.getRightValue(t),i=t,r=t),{min:i,max:r,start:e,end:n}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:V.noop,getPixelForValue:V.noop,getValueForPixel:V.noop,getPixelForTick:function(t){var e=this.options.offset,n=this._ticks.length,i=1/Math.max(n-(e?0:1),1);return t<0||t>n-1?null:this.getPixelForDecimal(t*i+(e?i/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,n,i,r,a=this.options.ticks,o=a.maxTicksLimit||this._length/this._tickSize()+1,s=a.major.enabled?function(t){var e,n,i=[];for(e=0,n=t.length;e<n;e++)t[e].major&&i.push(e);return i}(t):[],l=s.length,c=s[0],u=s[l-1];if(l>o)return function(t,e,n){var i,r,a=0,o=e[0];for(n=Math.ceil(n),i=0;i<t.length;i++)r=t[i],i===o?(r._index=i,o=e[++a*n]):delete r.label}(t,s,l/o),nn(t);if(i=function(t,e,n,i){var r,a,o,s,l=function(t){var e,n,i=t.length;if(i<2)return!1;for(n=t[0],e=1;e<i;++e)if(t[e]-t[e-1]!==n)return!1;return n}(t),c=(e.length-1)/i;if(!l)return Math.max(c,1);for(o=0,s=(r=V.math._factorize(l)).length-1;o<s;o++)if((a=r[o])>c)return a;return Math.max(c,1)}(s,t,0,o),l>0){for(e=0,n=l-1;e<n;e++)rn(t,i,s[e],s[e+1]);return rn(t,i,V.isNullOrUndef(r=l>1?(u-c)/(l-1):null)?0:c-r,c),rn(t,i,u,V.isNullOrUndef(r)?t.length:u+r),nn(t)}return rn(t,i),nn(t)},_tickSize:function(){var t=this.options.ticks,e=V.toRadians(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,o=r?r.widest.width+a:0,s=r?r.highest.height+a:0;return this.isHorizontal()?s*n>o*i?o/n:s/i:s*i<o*n?s/n:o/i},_isVisible:function(){var t,e,n,i=this.chart,r=this.options.display;if("auto"!==r)return!!r;for(t=0,e=i.data.datasets.length;t<e;++t)if(i.isDatasetVisible(t)&&((n=i.getDatasetMeta(t)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y=this,x=y.chart,b=y.options,w=b.gridLines,_=b.position,S=w.offsetGridLines,C=y.isHorizontal(),k=y._ticksToDraw,A=k.length+(S?1:0),M=Je(w),T=[],I=w.drawBorder?$e(w.lineWidth,0,0):0,D=I/2,P=V._alignPixel,L=function(t){return P(x,t,I)};for("top"===_?(e=L(y.bottom),s=y.bottom-M,c=e-D,d=L(t.top)+D,f=t.bottom):"bottom"===_?(e=L(y.top),d=t.top,f=L(t.bottom)-D,s=e+D,c=y.top+M):"left"===_?(e=L(y.right),o=y.right-M,l=e-D,u=L(t.left)+D,h=t.right):(e=L(y.left),u=t.left,h=L(t.right)-D,o=e+D,l=y.left+M),n=0;n<A;++n)qe((i=k[n]||{}).label)&&n<k.length||(n===y.zeroLineIndex&&b.offset===S?(g=w.zeroLineWidth,p=w.zeroLineColor,m=w.zeroLineBorderDash||[],v=w.zeroLineBorderDashOffset||0):(g=$e(w.lineWidth,n,1),p=$e(w.color,n,"rgba(0,0,0,0.1)"),m=w.borderDash||[],v=w.borderDashOffset||0),void 0!==(r=Ke(y,i._index||n,S))&&(a=P(x,r,g),C?o=l=u=h=a:s=c=d=f=a,T.push({tx1:o,ty1:s,tx2:l,ty2:c,x1:u,y1:d,x2:h,y2:f,width:g,color:p,borderDash:m,borderDashOffset:v})));return T.ticksLength=A,T.borderValue=e,T},_computeLabelItems:function(){var t,e,n,i,r,a,o,s,l,c,u,d,h=this,f=h.options,g=f.ticks,p=f.position,m=g.mirror,v=h.isHorizontal(),y=h._ticksToDraw,x=en(g),b=g.padding,w=Je(f.gridLines),_=-V.toRadians(h.labelRotation),S=[];for("top"===p?(a=h.bottom-w-b,o=_?"left":"center"):"bottom"===p?(a=h.top+w+b,o=_?"right":"center"):"left"===p?(r=h.right-(m?0:w)-b,o=m?"left":"right"):(r=h.left+(m?0:w)+b,o=m?"right":"left"),t=0,e=y.length;t<e;++t)i=(n=y[t]).label,qe(i)||(s=h.getPixelForTick(n._index||t)+g.labelOffset,c=(l=n.major?x.major:x.minor).lineHeight,u=je(i)?i.length:1,v?(r=s,d="top"===p?((_?1:.5)-u)*c:(_?0:.5)*c):(a=s,d=(1-u)*c/2),S.push({x:r,y:a,rotation:_,label:i,font:l,textOffset:d,textAlign:o}));return S},_drawGrid:function(t){var e=this,n=e.options.gridLines;if(n.display){var i,r,a,o,s,l=e.ctx,c=e.chart,u=V._alignPixel,d=n.drawBorder?$e(n.lineWidth,0,0):0,h=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(a=0,o=h.length;a<o;++a)i=(s=h[a]).width,r=s.color,i&&r&&(l.save(),l.lineWidth=i,l.strokeStyle=r,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(d){var f,g,p,m,v=d,y=$e(n.lineWidth,h.ticksLength-1,1),x=h.borderValue;e.isHorizontal()?(f=u(c,e.left,v)-v/2,g=u(c,e.right,y)+y/2,p=m=x):(p=u(c,e.top,v)-v/2,m=u(c,e.bottom,y)+y/2,f=g=x),l.lineWidth=d,l.strokeStyle=$e(n.color,0),l.beginPath(),l.moveTo(f,p),l.lineTo(g,m),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,n,i,r,a,o,s,l,c=t.ctx,u=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,i=u.length;e<i;++e){if(o=(a=u[e]).font,c.save(),c.translate(a.x,a.y),c.rotate(a.rotation),c.font=o.string,c.fillStyle=o.color,c.textBaseline="middle",c.textAlign=a.textAlign,l=a.textOffset,je(s=a.label))for(n=0,r=s.length;n<r;++n)c.fillText(""+s[n],0,l),l+=o.lineHeight;else c.fillText(s,0,l);c.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,n=t.options,i=n.scaleLabel;if(i.display){var r,a,o=Ze(i.fontColor,O.global.defaultFontColor),s=V.options._parseFont(i),l=V.options.toPadding(i.padding),c=s.lineHeight/2,u=n.position,d=0;if(t.isHorizontal())r=t.left+t.width/2,a="bottom"===u?t.bottom-c-l.bottom:t.top+c+l.top;else{var h="left"===u;r=h?t.left+c+l.top:t.right-c-l.top,a=t.top+t.height/2,d=h?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(r,a),e.rotate(d),e.textAlign="center",e.textBaseline="middle",e.fillStyle=o,e.font=s.string,e.fillText(i.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,n=e.ticks&&e.ticks.z||0,i=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&n!==i&&t.draw===t._draw?[{z:i,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:n,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:n,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,n=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(i){return(!t||i.type===t)&&(n?i.xAxisID===e.id:i.yAxisID===e.id)}))}});an.prototype._draw=an.prototype.draw;var on=an,sn=V.isNullOrUndef,ln=on.extend({determineDataLimits:function(){var t,e=this,n=e._getLabels(),i=e.options.ticks,r=i.min,a=i.max,o=0,s=n.length-1;void 0!==r&&(t=n.indexOf(r))>=0&&(o=t),void 0!==a&&(t=n.indexOf(a))>=0&&(s=t),e.minIndex=o,e.maxIndex=s,e.min=n[o],e.max=n[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,n=this.maxIndex;this.ticks=0===e&&n===t.length-1?t:t.slice(e,n+1)},getLabelForIndex:function(t,e){var n=this.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,n=t.ticks;on.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),n&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(n.length-(e?0:1),1))},getPixelForValue:function(t,e,n){var i,r,a,o=this;return sn(e)||sn(n)||(t=o.chart.data.datasets[n].data[e]),sn(t)||(i=o.isHorizontal()?t.x:t.y),(void 0!==i||void 0!==t&&isNaN(e))&&(r=o._getLabels(),t=V.valueOrDefault(i,t),e=-1!==(a=r.indexOf(t))?a:e,isNaN(e)&&(e=t)),o.getPixelForDecimal((e-o._startValue)/o._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});ln._defaults={position:"bottom"};var cn=V.isNullOrUndef,un=on.extend({getRightValue:function(t){return"string"==typeof t?+t:on.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=V.sign(t.min),i=V.sign(t.max);n<0&&i<0?t.max=0:n>0&&i>0&&(t.min=0)}var r=void 0!==e.min||void 0!==e.suggestedMin,a=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(t.min=null===t.min?e.suggestedMin:Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(t.max=null===t.max?e.suggestedMax:Math.max(t.max,e.suggestedMax)),r!==a&&t.min>=t.max&&(r?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,n=e.stepSize,i=e.maxTicksLimit;return n?t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(t=this._computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:V.noop,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),i={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,precision:e.precision,stepSize:V.valueOrDefault(e.fixedStepSize,e.stepSize)},r=t.ticks=function(t,e){var n,i,r,a,o=[],s=t.stepSize,l=s||1,c=t.maxTicks-1,u=t.min,d=t.max,h=t.precision,f=e.min,g=e.max,p=V.niceNum((g-f)/c/l)*l;if(p<1e-14&&cn(u)&&cn(d))return[f,g];(a=Math.ceil(g/p)-Math.floor(f/p))>c&&(p=V.niceNum(a*p/c/l)*l),s||cn(h)?n=Math.pow(10,V._decimalPlaces(p)):(n=Math.pow(10,h),p=Math.ceil(p*n)/n),i=Math.floor(f/p)*p,r=Math.ceil(g/p)*p,s&&(!cn(u)&&V.almostWhole(u/p,p/1e3)&&(i=u),!cn(d)&&V.almostWhole(d/p,p/1e3)&&(r=d)),a=V.almostEquals(a=(r-i)/p,Math.round(a),p/1e3)?Math.round(a):Math.ceil(a),i=Math.round(i*n)/n,r=Math.round(r*n)/n,o.push(cn(u)?i:u);for(var m=1;m<a;++m)o.push(Math.round((i+m*p)*n)/n);return o.push(cn(d)?r:d),o}(i,t);t.handleDirectionalChanges(),t.max=V.max(r),t.min=V.min(r),e.reverse?(r.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),on.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,n=e.getTicks(),i=e.min,r=e.max;on.prototype._configure.call(e),e.options.offset&&n.length&&(i-=t=(r-i)/Math.max(n.length-1,1)/2,r+=t),e._startValue=i,e._endValue=r,e._valueRange=r-i}}),dn={position:"left",ticks:{callback:Ue.formatters.linear}};function hn(t,e,n,i){var r,a,o=t.options,s=function(t,e,n){var i=[n.type,void 0===e&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===t[i]&&(t[i]={pos:[],neg:[]}),t[i]}(e,o.stacked,n),l=s.pos,c=s.neg,u=i.length;for(r=0;r<u;++r)a=t._parseValue(i[r]),isNaN(a.min)||isNaN(a.max)||n.data[r].hidden||(l[r]=l[r]||0,c[r]=c[r]||0,o.relativePoints?l[r]=100:a.min<0||a.max<0?c[r]+=a.min:l[r]+=a.max)}function fn(t,e,n){var i,r,a=n.length;for(i=0;i<a;++i)r=t._parseValue(n[i]),isNaN(r.min)||isNaN(r.max)||e.data[i].hidden||(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}var gn=un.extend({determineDataLimits:function(){var t,e,n,i,r=this,a=r.options,o=r.chart.data.datasets,s=r._getMatchingVisibleMetas(),l=a.stacked,c={},u=s.length;if(r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<u;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<u;++t)n=o[(e=s[t]).index].data,l?hn(r,c,e,n):fn(r,e,n);V.each(c,(function(t){i=t.pos.concat(t.neg),r.min=Math.min(r.min,V.min(i)),r.max=Math.max(r.max,V.max(i))})),r.min=V.isFinite(r.min)&&!isNaN(r.min)?r.min:0,r.max=V.isFinite(r.max)&&!isNaN(r.max)?r.max:1,r.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=V.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}});gn._defaults=dn;var pn=V.valueOrDefault,mn=V.math.log10,vn={position:"left",ticks:{callback:Ue.formatters.logarithmic}};function yn(t,e){return V.isFinite(t)&&t>=0?t:e}var xn=on.extend({determineDataLimits:function(){var t,e,n,i,r,a,o=this,s=o.options,l=o.chart,c=l.data.datasets,u=o.isHorizontal();function d(t){return u?t.xAxisID===o.id:t.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var h=s.stacked;if(void 0===h)for(t=0;t<c.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&d(e)&&void 0!==e.stack){h=!0;break}if(s.stacked||h){var f={};for(t=0;t<c.length;t++){var g=[(e=l.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(l.isDatasetVisible(t)&&d(e))for(void 0===f[g]&&(f[g]=[]),r=0,a=(i=c[t].data).length;r<a;r++){var p=f[g];n=o._parseValue(i[r]),isNaN(n.min)||isNaN(n.max)||e.data[r].hidden||n.min<0||n.max<0||(p[r]=p[r]||0,p[r]+=n.max)}}V.each(f,(function(t){if(t.length>0){var e=V.min(t),n=V.max(t);o.min=Math.min(o.min,e),o.max=Math.max(o.max,n)}}))}else for(t=0;t<c.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&d(e))for(r=0,a=(i=c[t].data).length;r<a;r++)n=o._parseValue(i[r]),isNaN(n.min)||isNaN(n.max)||e.data[r].hidden||n.min<0||n.max<0||(o.min=Math.min(n.min,o.min),o.max=Math.max(n.max,o.max),0!==n.min&&(o.minNotZero=Math.min(n.min,o.minNotZero)));o.min=V.isFinite(o.min)?o.min:null,o.max=V.isFinite(o.max)?o.max:null,o.minNotZero=V.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=yn(e.min,t.min),t.max=yn(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(mn(t.min))-1),t.max=Math.pow(10,Math.floor(mn(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(mn(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(mn(t.min))+1):10),null===t.minNotZero&&(t.minNotZero=t.min>0?t.min:t.max<1?Math.pow(10,Math.floor(mn(t.max))):1)},buildTicks:function(){var t=this,e=t.options.ticks,n=!t.isHorizontal(),i={min:yn(e.min),max:yn(e.max)},r=t.ticks=function(t,e){var n,i,r=[],a=pn(t.min,Math.pow(10,Math.floor(mn(e.min)))),o=Math.floor(mn(e.max)),s=Math.ceil(e.max/Math.pow(10,o));0===a?(n=Math.floor(mn(e.minNotZero)),i=Math.floor(e.minNotZero/Math.pow(10,n)),r.push(a),a=i*Math.pow(10,n)):(n=Math.floor(mn(a)),i=Math.floor(a/Math.pow(10,n)));var l=n<0?Math.pow(10,Math.abs(n)):1;do{r.push(a),10==++i&&(i=1,l=++n>=0?1:l),a=Math.round(i*Math.pow(10,n)*l)/l}while(n<o||n===o&&i<s);var c=pn(t.max,a);return r.push(c),r}(i,t);t.max=V.max(r),t.min=V.min(r),e.reverse?(n=!n,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),on.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(mn(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,n=0;on.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),n=pn(t.options.ticks.fontSize,O.global.defaultFontSize)/t._length),t._startValue=mn(e),t._valueOffset=n,t._valueRange=(mn(t.max)-mn(e))/(1-n)},getPixelForValue:function(t){var e=this,n=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(n=(mn(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(n)},getValueForPixel:function(t){var e=this,n=e.getDecimalForPixel(t);return 0===n&&0===e.min?0:Math.pow(10,e._startValue+(n-e._valueOffset)*e._valueRange)}});xn._defaults=vn;var bn=V.valueOrDefault,wn=V.valueAtIndexOrDefault,_n=V.options.resolve,Sn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Ue.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Cn(t){var e=t.ticks;return e.display&&t.display?bn(e.fontSize,O.global.defaultFontSize)+2*e.backdropPaddingY:0}function kn(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function An(t){return 0===t||180===t?"center":t<180?"left":"right"}function Mn(t,e,n,i){var r,a,o=n.y+i/2;if(V.isArray(e))for(r=0,a=e.length;r<a;++r)t.fillText(e[r],n.x,o),o+=i;else t.fillText(e,n.x,o)}function Tn(t,e,n){90===t||270===t?n.y-=e.h/2:(t>270||t<90)&&(n.y-=e.h)}function In(t){return V.isNumber(t)?t:0}var Dn=un.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Cn(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;V.each(e.data.datasets,(function(r,a){if(e.isDatasetVisible(a)){var o=e.getDatasetMeta(a);V.each(r.data,(function(e,r){var a=+t.getRightValue(e);isNaN(a)||o.data[r].hidden||(n=Math.min(a,n),i=Math.max(a,i))}))}})),t.min=n===Number.POSITIVE_INFINITY?0:n,t.max=i===Number.NEGATIVE_INFINITY?0:i,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Cn(this.options))},convertTicksToLabels:function(){var t=this;un.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=V.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,n,i,r=V.options._parseFont(t.options.pointLabels),a={l:0,r:t.width,t:0,b:t.height-t.paddingTop},o={};t.ctx.font=r.string,t._pointLabelSizes=[];var s,l,c,u=t.chart.data.labels.length;for(e=0;e<u;e++){i=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=r.lineHeight,n=V.isArray(c=t.pointLabels[e])?{w:V.longestText(s,s.font,c),h:c.length*l}:{w:s.measureText(c).width,h:l},t._pointLabelSizes[e]=n;var d=t.getIndexAngle(e),h=V.toDegrees(d)%360,f=kn(h,i.x,n.w,0,180),g=kn(h,i.y,n.h,90,270);f.start<a.l&&(a.l=f.start,o.l=d),f.end>a.r&&(a.r=f.end,o.r=d),g.start<a.t&&(a.t=g.start,o.t=d),g.end>a.b&&(a.b=g.end,o.b=d)}t.setReductions(t.drawingArea,a,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,n){var i=this,r=e.l/Math.sin(n.l),a=Math.max(e.r-i.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),s=-Math.max(e.b-(i.height-i.paddingTop),0)/Math.cos(n.b);r=In(r),a=In(a),o=In(o),s=In(s),i.drawingArea=Math.min(Math.floor(t-(r+a)/2),Math.floor(t-(o+s)/2)),i.setCenterPoint(r,a,o,s)},setCenterPoint:function(t,e,n,i){var r=this,a=n+r.drawingArea,o=r.height-r.paddingTop-i-r.drawingArea;r.xCenter=Math.floor((t+r.drawingArea+(r.width-e-r.drawingArea))/2+r.left),r.yCenter=Math.floor((a+o)/2+r.top+r.paddingTop)},getIndexAngle:function(t){var e=this.chart,n=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(V.isNullOrUndef(t))return NaN;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,n=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},_drawGrid:function(){var t,e,n,i=this,r=i.ctx,a=i.options,o=a.gridLines,s=a.angleLines,l=bn(s.lineWidth,o.lineWidth),c=bn(s.color,o.color);if(a.pointLabels.display&&function(t){var e=t.ctx,n=t.options,i=n.pointLabels,r=Cn(n),a=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),o=V.options._parseFont(i);e.save(),e.font=o.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=t.getPointPosition(s,a+(0===s?r/2:0)+5),c=wn(i.fontColor,s,O.global.defaultFontColor);e.fillStyle=c;var u=t.getIndexAngle(s),d=V.toDegrees(u);e.textAlign=An(d),Tn(d,t._pointLabelSizes[s],l),Mn(e,t.pointLabels[s],l,o.lineHeight)}e.restore()}(i),o.display&&V.each(i.ticks,(function(t,n){0!==n&&(e=i.getDistanceFromCenterForValue(i.ticksAsNumbers[n]),function(t,e,n,i){var r,a=t.ctx,o=e.circular,s=t.chart.data.labels.length,l=wn(e.color,i-1),c=wn(e.lineWidth,i-1);if((o||s)&&l&&c){if(a.save(),a.strokeStyle=l,a.lineWidth=c,a.setLineDash&&(a.setLineDash(e.borderDash||[]),a.lineDashOffset=e.borderDashOffset||0),a.beginPath(),o)a.arc(t.xCenter,t.yCenter,n,0,2*Math.PI);else{r=t.getPointPosition(0,n),a.moveTo(r.x,r.y);for(var u=1;u<s;u++)r=t.getPointPosition(u,n),a.lineTo(r.x,r.y)}a.closePath(),a.stroke(),a.restore()}}(i,o,e,n))})),s.display&&l&&c){for(r.save(),r.lineWidth=l,r.strokeStyle=c,r.setLineDash&&(r.setLineDash(_n([s.borderDash,o.borderDash,[]])),r.lineDashOffset=_n([s.borderDashOffset,o.borderDashOffset,0])),t=i.chart.data.labels.length-1;t>=0;t--)e=i.getDistanceFromCenterForValue(a.ticks.reverse?i.min:i.max),n=i.getPointPosition(t,e),r.beginPath(),r.moveTo(i.xCenter,i.yCenter),r.lineTo(n.x,n.y),r.stroke();r.restore()}},_drawLabels:function(){var t=this,e=t.ctx,n=t.options.ticks;if(n.display){var i,r,a=t.getIndexAngle(0),o=V.options._parseFont(n),s=bn(n.fontColor,O.global.defaultFontColor);e.save(),e.font=o.string,e.translate(t.xCenter,t.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",V.each(t.ticks,(function(a,l){(0!==l||n.reverse)&&(i=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),n.showLabelBackdrop&&(r=e.measureText(a).width,e.fillStyle=n.backdropColor,e.fillRect(-r/2-n.backdropPaddingX,-i-o.size/2-n.backdropPaddingY,r+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)),e.fillStyle=s,e.fillText(a,0,-i))})),e.restore()}},_drawTitle:V.noop});Dn._defaults=Sn;var Pn=V._deprecated,Ln=V.options.resolve,En=V.valueOrDefault,Nn=Number.MIN_SAFE_INTEGER||-9007199254740991,Rn=Number.MAX_SAFE_INTEGER||9007199254740991,On={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zn=Object.keys(On);function Bn(t,e){return t-e}function Fn(t){return V.valueOrDefault(t.time.min,t.ticks.min)}function Hn(t){return V.valueOrDefault(t.time.max,t.ticks.max)}function Vn(t,e,n,i){var r=function(t,e,n){for(var i,r,a,o=0,s=t.length-1;o>=0&&o<=s;){if(r=t[(i=o+s>>1)-1]||null,a=t[i],!r)return{lo:null,hi:a};if(a[e]<n)o=i+1;else{if(!(r[e]>n))return{lo:r,hi:a};s=i-1}}return{lo:a,hi:null}}(t,e,n),a=r.lo?r.hi?r.lo:t[t.length-2]:t[0],o=r.lo?r.hi?r.hi:t[t.length-1]:t[1],s=o[e]-a[e];return a[i]+(o[i]-a[i])*(s?(n-a[e])/s:0)}function Wn(t,e){var n=t._adapter,i=t.options.time,r=i.parser,a=r||i.format,o=e;return"function"==typeof r&&(o=r(o)),V.isFinite(o)||(o="string"==typeof a?n.parse(o,a):n.parse(o)),null!==o?+o:(r||"function"!=typeof a||(o=a(e),V.isFinite(o)||(o=n.parse(o))),o)}function Xn(t,e){if(V.isNullOrUndef(e))return null;var n=t.options.time,i=Wn(t,t.getRightValue(e));return null===i||n.round&&(i=+t._adapter.startOf(i,n.round)),i}function Yn(t,e,n,i){var r,a,o,s=zn.length;for(r=zn.indexOf(t);r<s-1;++r)if(o=(a=On[zn[r]]).steps?a.steps:Rn,a.common&&Math.ceil((n-e)/(o*a.size))<=i)return zn[r];return zn[s-1]}function Gn(t,e,n){var i,r,a=[],o={},s=e.length;for(i=0;i<s;++i)o[r=e[i]]=i,a.push({value:r,major:!1});return 0!==s&&n?function(t,e,n,i){var r,a,o=t._adapter,s=+o.startOf(e[0].value,i),l=e[e.length-1].value;for(r=s;r<=l;r=+o.add(r,1,i))(a=n[r])>=0&&(e[a].major=!0);return e}(t,a,o,n):a}var Un=on.extend({initialize:function(){this.mergeTicksOptions(),on.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,n=e.time||(e.time={}),i=t._adapter=new Ge._date(e.adapters.date);return Pn("time scale",n.format,"time.format","time.parser"),Pn("time scale",n.min,"time.min","ticks.min"),Pn("time scale",n.max,"time.max","ticks.max"),V.mergeIf(n.displayFormats,i.formats()),on.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),on.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,n,i,r,a,o,s=this,l=s.chart,c=s._adapter,u=s.options,d=u.time.unit||"day",h=Rn,f=Nn,g=[],p=[],m=[],v=s._getLabels();for(t=0,n=v.length;t<n;++t)m.push(Xn(s,v[t]));for(t=0,n=(l.data.datasets||[]).length;t<n;++t)if(l.isDatasetVisible(t))if(V.isObject((r=l.data.datasets[t].data)[0]))for(p[t]=[],e=0,i=r.length;e<i;++e)a=Xn(s,r[e]),g.push(a),p[t][e]=a;else p[t]=m.slice(0),o||(g=g.concat(m),o=!0);else p[t]=[];m.length&&(h=Math.min(h,m[0]),f=Math.max(f,m[m.length-1])),g.length&&(g=n>1?function(t){var e,n,i,r={},a=[];for(e=0,n=t.length;e<n;++e)r[i=t[e]]||(r[i]=!0,a.push(i));return a}(g).sort(Bn):g.sort(Bn),h=Math.min(h,g[0]),f=Math.max(f,g[g.length-1])),h=Xn(s,Fn(u))||h,f=Xn(s,Hn(u))||f,h=h===Rn?+c.startOf(Date.now(),d):h,f=f===Nn?+c.endOf(Date.now(),d)+1:f,s.min=Math.min(h,f),s.max=Math.max(h+1,f),s._table=[],s._timestamps={data:g,datasets:p,labels:m}},buildTicks:function(){var t,e,n,i=this,r=i.min,a=i.max,o=i.options,s=o.ticks,l=o.time,c=i._timestamps,u=[],d=i.getLabelCapacity(r),h=s.source,f=o.distribution;for(c="data"===h||"auto"===h&&"series"===f?c.data:"labels"===h?c.labels:function(t,e,n,i){var r,a=t._adapter,o=t.options,s=o.time,l=s.unit||Yn(s.minUnit,e,n,i),c=Ln([s.stepSize,s.unitStepSize,1]),u="week"===l&&s.isoWeekday,d=e,h=[];if(u&&(d=+a.startOf(d,"isoWeek",u)),d=+a.startOf(d,u?"day":l),a.diff(n,e,l)>1e5*c)throw e+" and "+n+" are too far apart with stepSize of "+c+" "+l;for(r=d;r<n;r=+a.add(r,c,l))h.push(r);return r!==n&&"ticks"!==o.bounds||h.push(r),h}(i,r,a,d),"ticks"===o.bounds&&c.length&&(r=c[0],a=c[c.length-1]),r=Xn(i,Fn(o))||r,a=Xn(i,Hn(o))||a,t=0,e=c.length;t<e;++t)(n=c[t])>=r&&n<=a&&u.push(n);return i.min=r,i.max=a,i._unit=l.unit||(s.autoSkip?Yn(l.minUnit,i.min,i.max,d):function(t,e,n,i,r){var a,o;for(a=zn.length-1;a>=zn.indexOf(n);a--)if(On[o=zn[a]].common&&t._adapter.diff(r,i,o)>=e-1)return o;return zn[n?zn.indexOf(n):0]}(i,u.length,l.minUnit,i.min,i.max)),i._majorUnit=s.major.enabled&&"year"!==i._unit?function(t){for(var e=zn.indexOf(t)+1,n=zn.length;e<n;++e)if(On[zn[e]].common)return zn[e]}(i._unit):void 0,i._table=function(t,e,n,i){if("linear"===i||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var r,a,o,s,l,c=[],u=[e];for(r=0,a=t.length;r<a;++r)(s=t[r])>e&&s<n&&u.push(s);for(u.push(n),r=0,a=u.length;r<a;++r)l=u[r+1],s=u[r],void 0!==(o=u[r-1])&&void 0!==l&&Math.round((l+o)/2)===s||c.push({time:s,pos:r/(a-1)});return c}(i._timestamps.data,r,a,f),i._offsets=function(t,e,n,i,r){var a,o,s=0,l=0;return r.offset&&e.length&&(a=Vn(t,"time",e[0],"pos"),s=1===e.length?1-a:(Vn(t,"time",e[1],"pos")-a)/2,o=Vn(t,"time",e[e.length-1],"pos"),l=1===e.length?o:(o-Vn(t,"time",e[e.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(i._table,u,0,0,o),s.reverse&&u.reverse(),Gn(i,u,i._majorUnit)},getLabelForIndex:function(t,e){var n=this,i=n._adapter,r=n.chart.data,a=n.options.time,o=r.labels&&t<r.labels.length?r.labels[t]:"",s=r.datasets[e].data[t];return V.isObject(s)&&(o=n.getRightValue(s)),a.tooltipFormat?i.format(Wn(n,o),a.tooltipFormat):"string"==typeof o?o:i.format(Wn(n,o),a.displayFormats.datetime)},tickFormatFunction:function(t,e,n,i){var r=this.options,a=r.time.displayFormats,o=this._majorUnit,s=a[o],l=n[e],c=r.ticks,u=o&&s&&l&&l.major,d=this._adapter.format(t,i||(u?s:a[this._unit])),h=u?c.major:c.minor,f=Ln([h.callback,h.userCallback,c.callback,c.userCallback]);return f?f(d,e,n):d},convertTicksToLabels:function(t){var e,n,i=[];for(e=0,n=t.length;e<n;++e)i.push(this.tickFormatFunction(t[e].value,e,t));return i},getPixelForOffset:function(t){var e=this._offsets,n=Vn(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+n)*e.factor)},getPixelForValue:function(t,e,n){var i=null;if(void 0!==e&&void 0!==n&&(i=this._timestamps.datasets[n][e]),null===i&&(i=Xn(this,t)),null!==i)return this.getPixelForOffset(i)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end,i=Vn(this._table,"pos",n,"time");return this._adapter._create(i)},_getLabelSize:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,i=V.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),a=Math.sin(i),o=En(e.fontSize,O.global.defaultFontSize);return{w:n*r+o*a,h:n*a+o*r}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,n=e.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=e.tickFormatFunction(t,0,Gn(e,[t],e._majorUnit),r),o=e._getLabelSize(a),s=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&s--,s>0?s:1}});Un._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var jn={category:ln,linear:gn,logarithmic:xn,radialLinear:Dn,time:Un},qn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ge._date.override("function"==typeof t?{_id:"moment",formats:function(){return qn},parse:function(e,n){return"string"==typeof e&&"string"==typeof n?e=t(e,n):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,n){return t(e).format(n)},add:function(e,n,i){return t(e).add(n,i).valueOf()},diff:function(e,n,i){return t(e).diff(t(n),i)},startOf:function(e,n,i){return e=t(e),"isoWeek"===n?e.isoWeekday(i).valueOf():e.startOf(n).valueOf()},endOf:function(e,n){return t(e).endOf(n).valueOf()},_create:function(e){return t(e)}}:{}),O._set("global",{plugins:{filler:{propagate:!0}}});var Zn={dataset:function(t){var e=t.fill,n=t.chart,i=n.getDatasetMeta(e),r=i&&n.isDatasetVisible(e)&&i.dataset._children||[],a=r.length||0;return a?function(t,e){return e<a&&r[e]._view||null}:null},boundary:function(t){var e=t.boundary,n=e?e.x:null,i=e?e.y:null;return V.isArray(e)?function(t,n){return e[n]}:function(t){return{x:null===n?t.x:n,y:null===i?t.y:i}}}};function $n(t,e,n){var i,r=t._model||{},a=r.fill;if(void 0===a&&(a=!!r.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(i=parseFloat(a,10),isFinite(i)&&Math.floor(i)===i)return"-"!==a[0]&&"+"!==a[0]||(i=e+i),!(i===e||i<0||i>=n)&&i;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function Kn(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,n,i,r,a,o=t.el._scale,s=o.options,l=o.chart.data.labels.length,c=t.fill,u=[];if(!l)return null;for(n=s.ticks.reverse?o.min:o.max,i=o.getPointPositionForValue(0,e=s.ticks.reverse?o.max:o.min),r=0;r<l;++r)a="start"===c||"end"===c?o.getPointPositionForValue(r,"start"===c?e:n):o.getBasePosition(r),s.gridLines.circular&&(a.cx=i.x,a.cy=i.y,a.angle=o.getIndexAngle(r)-Math.PI/2),u.push(a);return u}(t):function(t){var e,n=t.el._model||{},i=t.el._scale||{},r=t.fill,a=null;if(isFinite(r))return null;if("start"===r?a=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===r?a=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?a=n.scaleZero:i.getBasePixel&&(a=i.getBasePixel()),null!=a){if(void 0!==a.x&&void 0!==a.y)return a;if(V.isFinite(a))return{x:(e=i.isHorizontal())?a:null,y:e?null:a}}return null}(t)}function Jn(t,e,n){var i,r=t[e].fill,a=[e];if(!n)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!isFinite(r))return r;if(!(i=t[r]))return!1;if(i.visible)return r;a.push(r),r=i.fill}return!1}function Qn(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),Zn[n](t))}function ti(t){return t&&!t.skip}function ei(t,e,n,i,r){var a,o,s,l;if(i&&r){for(t.moveTo(e[0].x,e[0].y),a=1;a<i;++a)V.canvas.lineTo(t,e[a-1],e[a]);if(void 0===n[0].angle)for(t.lineTo(n[r-1].x,n[r-1].y),a=r-1;a>0;--a)V.canvas.lineTo(t,n[a],n[a-1],!0);else for(o=n[0].cx,s=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-o,2)+Math.pow(n[0].y-s,2)),a=r-1;a>0;--a)t.arc(o,s,l,n[a].angle,n[a-1].angle,!0)}}function ni(t,e,n,i,r,a){var o,s,l,c,u,d,h,f,g=e.length,p=i.spanGaps,m=[],v=[],y=0,x=0;for(t.beginPath(),o=0,s=g;o<s;++o)u=n(c=e[l=o%g]._view,l,i),d=ti(c),h=ti(u),a&&void 0===f&&d&&(s=g+(f=o+1)),d&&h?(y=m.push(c),x=v.push(u)):y&&x&&(p?(d&&m.push(c),h&&v.push(u)):(ei(t,m,v,y,x),y=x=0,m=[],v=[]));ei(t,m,v,y,x),t.closePath(),t.fillStyle=r,t.fill()}var ii={id:"filler",afterDatasetsUpdate:function(t,e){var n,i,r,a,o=(t.data.datasets||[]).length,s=e.propagate,l=[];for(i=0;i<o;++i)a=null,(r=(n=t.getDatasetMeta(i)).dataset)&&r._model&&r instanceof vt.Line&&(a={visible:t.isDatasetVisible(i),fill:$n(r,i,o),chart:t,el:r}),n.$filler=a,l.push(a);for(i=0;i<o;++i)(a=l[i])&&(a.fill=Jn(l,i,s),a.boundary=Kn(a),a.mapper=Qn(a))},beforeDatasetsDraw:function(t){var e,n,i,r,a,o,s,l=t._getSortedVisibleDatasetMetas(),c=t.ctx;for(n=l.length-1;n>=0;--n)(e=l[n].$filler)&&e.visible&&(r=(i=e.el)._view,a=i._children||[],s=r.backgroundColor||O.global.defaultColor,(o=e.mapper)&&s&&a.length&&(V.canvas.clipArea(c,t.chartArea),ni(c,a,o,r,s,i._loop),V.canvas.unclipArea(c)))}},ri=V.rtl.getRtlAdapter,ai=V.noop,oi=V.valueOrDefault;function si(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}O._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,i=this.chart,r=i.getDatasetMeta(n);r.hidden=null===r.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.options.legend||{},i=n.labels&&n.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(n){var r=n.controller.getStyle(i?0:void 0);return{text:e[n.index].label,fillStyle:r.backgroundColor,hidden:!t.isDatasetVisible(n.index),lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:r.borderWidth,strokeStyle:r.borderColor,pointStyle:r.pointStyle,rotation:r.rotation,datasetIndex:n.index}}),this)}}},legendCallback:function(t){var e,n,i,r=document.createElement("ul"),a=t.data.datasets;for(r.setAttribute("class",t.id+"-legend"),e=0,n=a.length;e<n;e++)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[e].backgroundColor,a[e].label&&i.appendChild(document.createTextNode(a[e].label));return r.outerHTML}});var li=U.extend({initialize:function(t){V.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:ai,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:ai,beforeSetDimensions:ai,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:ai,beforeBuildLabels:ai,buildLabels:function(){var t=this,e=t.options.labels||{},n=V.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),t.options.reverse&&n.reverse(),t.legendItems=n},afterBuildLabels:ai,beforeFit:ai,fit:function(){var t=this,e=t.options,n=e.labels,i=e.display,r=t.ctx,a=V.options._parseFont(n),o=a.size,s=t.legendHitBoxes=[],l=t.minSize,c=t.isHorizontal();if(c?(l.width=t.maxWidth,l.height=i?10:0):(l.width=i?10:0,l.height=t.maxHeight),i){if(r.font=a.string,c){var u=t.lineWidths=[0],d=0;r.textAlign="left",r.textBaseline="middle",V.each(t.legendItems,(function(t,e){var i=si(n,o)+o/2+r.measureText(t.text).width;(0===e||u[u.length-1]+i+2*n.padding>l.width)&&(d+=o+n.padding,u[u.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:i,height:o},u[u.length-1]+=i+n.padding})),l.height+=d}else{var h=n.padding,f=t.columnWidths=[],g=t.columnHeights=[],p=n.padding,m=0,v=0;V.each(t.legendItems,(function(t,e){var i=si(n,o)+o/2+r.measureText(t.text).width;e>0&&v+o+2*h>l.height&&(p+=m+n.padding,f.push(m),g.push(v),m=0,v=0),m=Math.max(m,i),v+=o+h,s[e]={left:0,top:0,width:i,height:o}})),p+=m,f.push(m),g.push(v),l.width+=p}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:ai,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,n=e.labels,i=O.global,r=i.defaultColor,a=i.elements.line,o=t.height,s=t.columnHeights,l=t.width,c=t.lineWidths;if(e.display){var u,d=ri(e.rtl,t.left,t.minSize.width),h=t.ctx,f=oi(n.fontColor,i.defaultFontColor),g=V.options._parseFont(n),p=g.size;h.textAlign=d.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=f,h.fillStyle=f,h.font=g.string;var m=si(n,p),v=t.legendHitBoxes,y=function(t,i){switch(e.align){case"start":return n.padding;case"end":return t-i;default:return(t-i+n.padding)/2}},x=t.isHorizontal();u=x?{x:t.left+y(l,c[0]),y:t.top+n.padding,line:0}:{x:t.left+n.padding,y:t.top+y(o,s[0]),line:0},V.rtl.overrideTextDirection(t.ctx,e.textDirection);var b=p+n.padding;V.each(t.legendItems,(function(e,i){var f=h.measureText(e.text).width,g=m+p/2+f,w=u.x,_=u.y;d.setWidth(t.minSize.width),x?i>0&&w+g+n.padding>t.left+t.minSize.width&&(_=u.y+=b,u.line++,w=u.x=t.left+y(l,c[u.line])):i>0&&_+b>t.top+t.minSize.height&&(w=u.x=w+t.columnWidths[u.line]+n.padding,u.line++,_=u.y=t.top+y(o,s[u.line]));var S=d.x(w);!function(t,e,i){if(!(isNaN(m)||m<=0)){h.save();var o=oi(i.lineWidth,a.borderWidth);if(h.fillStyle=oi(i.fillStyle,r),h.lineCap=oi(i.lineCap,a.borderCapStyle),h.lineDashOffset=oi(i.lineDashOffset,a.borderDashOffset),h.lineJoin=oi(i.lineJoin,a.borderJoinStyle),h.lineWidth=o,h.strokeStyle=oi(i.strokeStyle,r),h.setLineDash&&h.setLineDash(oi(i.lineDash,a.borderDash)),n&&n.usePointStyle){var s=m*Math.SQRT2/2,l=d.xPlus(t,m/2);V.canvas.drawPoint(h,i.pointStyle,s,l,e+p/2,i.rotation)}else h.fillRect(d.leftForLtr(t,m),e,m,p),0!==o&&h.strokeRect(d.leftForLtr(t,m),e,m,p);h.restore()}}(S,_,e),v[i].left=d.leftForLtr(S,v[i].width),v[i].top=_,function(t,e,n,i){var r=p/2,a=d.xPlus(t,m+r),o=e+r;h.fillText(n.text,a,o),n.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(a,o),h.lineTo(d.xPlus(a,i),o),h.stroke())}(S,_,e,f),x?u.x+=g+n.padding:u.y+=b})),V.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var n,i,r,a=this;if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)for(r=a.legendHitBoxes,n=0;n<r.length;++n)if(t>=(i=r[n]).left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height)return a.legendItems[n];return null},handleEvent:function(t){var e,n=this,i=n.options,r="mouseup"===t.type?"click":t.type;if("mousemove"===r){if(!i.onHover&&!i.onLeave)return}else{if("click"!==r)return;if(!i.onClick)return}e=n._getLegendItemAt(t.x,t.y),"click"===r?e&&i.onClick&&i.onClick.call(n,t.native,e):(i.onLeave&&e!==n._hoveredItem&&(n._hoveredItem&&i.onLeave.call(n,t.native,n._hoveredItem),n._hoveredItem=e),i.onHover&&e&&i.onHover.call(n,t.native,e))}});function ci(t,e){var n=new li({ctx:t.ctx,options:e,chart:t});le.configure(t,n,e),le.addBox(t,n),t.legend=n}var ui={id:"legend",_element:li,beforeInit:function(t){var e=t.options.legend;e&&ci(t,e)},beforeUpdate:function(t){var e=t.options.legend,n=t.legend;e?(V.mergeIf(e,O.global.legend),n?(le.configure(t,n,e),n.options=e):ci(t,e)):n&&(le.removeBox(t,n),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}},di=V.noop;O._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var hi=U.extend({initialize:function(t){V.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:di,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:di,beforeSetDimensions:di,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:di,beforeBuildLabels:di,buildLabels:di,afterBuildLabels:di,beforeFit:di,fit:function(){var t,e=this,n=e.options,i=e.minSize={},r=e.isHorizontal();n.display?(t=(V.isArray(n.text)?n.text.length:1)*V.options._parseFont(n).lineHeight+2*n.padding,e.width=i.width=r?e.maxWidth:t,e.height=i.height=r?t:e.maxHeight):e.width=i.width=e.height=i.height=0},afterFit:di,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=t.options;if(n.display){var i,r,a,o=V.options._parseFont(n),s=o.lineHeight,l=s/2+n.padding,c=0,u=t.top,d=t.left,h=t.bottom,f=t.right;e.fillStyle=V.valueOrDefault(n.fontColor,O.global.defaultFontColor),e.font=o.string,t.isHorizontal()?(r=d+(f-d)/2,a=u+l,i=f-d):(r="left"===n.position?d+l:f-l,a=u+(h-u)/2,i=h-u,c=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(r,a),e.rotate(c),e.textAlign="center",e.textBaseline="middle";var g=n.text;if(V.isArray(g))for(var p=0,m=0;m<g.length;++m)e.fillText(g[m],0,p,i),p+=s;else e.fillText(g,0,0,i);e.restore()}}});function fi(t,e){var n=new hi({ctx:t.ctx,options:e,chart:t});le.configure(t,n,e),le.addBox(t,n),t.titleBlock=n}var gi={},pi=ii,mi=ui,vi={id:"title",_element:hi,beforeInit:function(t){var e=t.options.title;e&&fi(t,e)},beforeUpdate:function(t){var e=t.options.title,n=t.titleBlock;e?(V.mergeIf(e,O.global.title),n?(le.configure(t,n,e),n.options=e):fi(t,e)):n&&(le.removeBox(t,n),delete t.titleBlock)}};for(var yi in gi.filler=pi,gi.legend=mi,gi.title=vi,We.helpers=V,function(){function t(t,e,n){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function e(t){return null!=t&&"none"!==t}function n(n,i,r){var a=document.defaultView,o=V._getParentNode(n),s=a.getComputedStyle(n)[i],l=a.getComputedStyle(o)[i],c=e(s),u=e(l),d=Number.POSITIVE_INFINITY;return c||u?Math.min(c?t(s,n,r):d,u?t(l,o,r):d):"none"}V.where=function(t,e){if(V.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return V.each(t,(function(t){e(t)&&n.push(t)})),n},V.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var i=0,r=t.length;i<r;++i)if(e.call(n,t[i],i,t))return i;return-1},V.findNextWhere=function(t,e,n){V.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},V.findPreviousWhere=function(t,e,n){V.isNullOrUndef(n)&&(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},V.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},V.almostEquals=function(t,e,n){return Math.abs(t-e)<n},V.almostWhole=function(t,e){var n=Math.round(t);return n-e<=t&&n+e>=t},V.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},V.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},V.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},V.toRadians=function(t){return t*(Math.PI/180)},V.toDegrees=function(t){return t*(180/Math.PI)},V._decimalPlaces=function(t){if(V.isFinite(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}},V.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),a=Math.atan2(i,n);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:r}},V.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},V.aliasPixel=function(t){return t%2==0?0:.5},V._alignPixel=function(t,e,n){var i=t.currentDevicePixelRatio,r=n/2;return Math.round((e-r)*i)/i+r},V.splineCurve=function(t,e,n,i){var r=t.skip?e:t,a=e,o=n.skip?e:n,s=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),c=s/(s+l),u=l/(s+l),d=i*(c=isNaN(c)?0:c),h=i*(u=isNaN(u)?0:u);return{previous:{x:a.x-d*(o.x-r.x),y:a.y-d*(o.y-r.y)},next:{x:a.x+h*(o.x-r.x),y:a.y+h*(o.y-r.y)}}},V.EPSILON=Number.EPSILON||1e-14,V.splineCurveMonotone=function(t){var e,n,i,r,a,o,s,l,c,u=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),d=u.length;for(e=0;e<d;++e)if(!(i=u[e]).model.skip){if(n=e>0?u[e-1]:null,(r=e<d-1?u[e+1]:null)&&!r.model.skip){var h=r.model.x-i.model.x;i.deltaK=0!==h?(r.model.y-i.model.y)/h:0}i.mK=!n||n.model.skip?i.deltaK:!r||r.model.skip?n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?0:(n.deltaK+i.deltaK)/2}for(e=0;e<d-1;++e)r=u[e+1],(i=u[e]).model.skip||r.model.skip||(V.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=r.mK=0:(a=i.mK/i.deltaK,o=r.mK/i.deltaK,(l=Math.pow(a,2)+Math.pow(o,2))<=9||(s=3/Math.sqrt(l),i.mK=a*s*i.deltaK,r.mK=o*s*i.deltaK)));for(e=0;e<d;++e)(i=u[e]).model.skip||(r=e<d-1?u[e+1]:null,(n=e>0?u[e-1]:null)&&!n.model.skip&&(i.model.controlPointPreviousX=i.model.x-(c=(i.model.x-n.model.x)/3),i.model.controlPointPreviousY=i.model.y-c*i.mK),r&&!r.model.skip&&(i.model.controlPointNextX=i.model.x+(c=(r.model.x-i.model.x)/3),i.model.controlPointNextY=i.model.y+c*i.mK))},V.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},V.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},V.niceNum=function(t,e){var n=Math.floor(V.log10(t)),i=t/Math.pow(10,n);return(e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},V.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},V.getRelativePosition=function(t,e){var n,i,r=t.originalEvent||t,a=t.target||t.srcElement,o=a.getBoundingClientRect(),s=r.touches;s&&s.length>0?(n=s[0].clientX,i=s[0].clientY):(n=r.clientX,i=r.clientY);var l=parseFloat(V.getStyle(a,"padding-left")),c=parseFloat(V.getStyle(a,"padding-top")),u=parseFloat(V.getStyle(a,"padding-right")),d=parseFloat(V.getStyle(a,"padding-bottom")),h=o.bottom-o.top-c-d;return{x:n=Math.round((n-o.left-l)/(o.right-o.left-l-u)*a.width/e.currentDevicePixelRatio),y:i=Math.round((i-o.top-c)/h*a.height/e.currentDevicePixelRatio)}},V.getConstraintWidth=function(t){return n(t,"max-width","clientWidth")},V.getConstraintHeight=function(t){return n(t,"max-height","clientHeight")},V._calculatePadding=function(t,e,n){return(e=V.getStyle(t,e)).indexOf("%")>-1?n*parseInt(e,10)/100:parseInt(e,10)},V._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},V.getMaximumWidth=function(t){var e=V._getParentNode(t);if(!e)return t.clientWidth;var n=e.clientWidth,i=n-V._calculatePadding(e,"padding-left",n)-V._calculatePadding(e,"padding-right",n),r=V.getConstraintWidth(t);return isNaN(r)?i:Math.min(i,r)},V.getMaximumHeight=function(t){var e=V._getParentNode(t);if(!e)return t.clientHeight;var n=e.clientHeight,i=n-V._calculatePadding(e,"padding-top",n)-V._calculatePadding(e,"padding-bottom",n),r=V.getConstraintHeight(t);return isNaN(r)?i:Math.min(i,r)},V.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},V.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var i=t.canvas,r=t.height,a=t.width;i.height=r*n,i.width=a*n,t.ctx.scale(n,n),i.style.height||i.style.width||(i.style.height=r+"px",i.style.width=a+"px")}},V.fontString=function(t,e,n){return e+" "+t+"px "+n},V.longestText=function(t,e,n,i){var r=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},a=i.garbageCollect=[],i.font=e),t.font=e;var o,s,l,c,u,d=0,h=n.length;for(o=0;o<h;o++)if(null!=(c=n[o])&&!0!==V.isArray(c))d=V.measureText(t,r,a,d,c);else if(V.isArray(c))for(s=0,l=c.length;s<l;s++)null==(u=c[s])||V.isArray(u)||(d=V.measureText(t,r,a,d,u));var f=a.length/2;if(f>n.length){for(o=0;o<f;o++)delete r[a[o]];a.splice(0,f)}return d},V.measureText=function(t,e,n,i,r){var a=e[r];return a||(a=e[r]=t.measureText(r).width,n.push(r)),a>i&&(i=a),i},V.numberOfLabelLines=function(t){var e=1;return V.each(t,(function(t){V.isArray(t)&&t.length>e&&(e=t.length)})),e},V.color=_?function(t){return t instanceof CanvasGradient&&(t=O.global.defaultColor),_(t)}:function(t){return console.error("Color.js not found!"),t},V.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:V.color(t).saturate(.5).darken(.1).rgbString()}}(),We._adapters=Ge,We.Animation=q,We.animationService=Z,We.controllers=Gt,We.DatasetController=tt,We.defaults=O,We.Element=U,We.elements=vt,We.Interaction=Jt,We.layouts=le,We.platform=_e,We.plugins=Se,We.Scale=on,We.scaleService=Ce,We.Ticks=Ue,We.Tooltip=Ee,We.helpers.each(jn,(function(t,e){We.scaleService.registerScaleType(e,t,t._defaults)})),gi)gi.hasOwnProperty(yi)&&We.plugins.register(gi[yi]);We.platform.initialize();var xi=We;return"undefined"!=typeof window&&(window.Chart=We),We.Chart=We,We.Legend=gi.legend._element,We.Title=gi.title._element,We.pluginService=We.plugins,We.PluginBase=We.Element.extend({}),We.canvasHelpers=We.helpers.canvas,We.layoutService=We.layouts,We.LinearScaleBase=un,We.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){We[t]=function(e,n){return new We(e,We.helpers.merge(n||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),xi})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ApexCharts=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f,g,p=function(){function n(){e(this,n)}return i(n,[{key:"shadeRGBColor",value:function(t,e){var n=e.split(","),i=t<0?0:255,r=t<0?-1*t:t,a=parseInt(n[0].slice(4),10),o=parseInt(n[1],10),s=parseInt(n[2],10);return"rgb("+(Math.round((i-a)*r)+a)+","+(Math.round((i-o)*r)+o)+","+(Math.round((i-s)*r)+s)+")"}},{key:"shadeHexColor",value:function(t,e){var n=parseInt(e.slice(1),16),i=t<0?0:255,r=t<0?-1*t:t,a=n>>16,o=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((i-a)*r)+a)+256*(Math.round((i-o)*r)+o)+(Math.round((i-s)*r)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,e){return n.isColorHex(e)?this.shadeHexColor(t,e):this.shadeRGBColor(t,e)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===t(e)&&!Array.isArray(e)&&null!=e}},{key:"listToArray",value:function(t){var e,n=[];for(e=0;e<t.length;e++)n[e]=t[e];return n}},{key:"extend",value:function(t,e){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e});var i=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(a){n.isObject(e[a])&&a in t?i[a]=n.extend(t[a],e[a]):Object.assign(i,r({},a,e[a]))})),i}},{key:"extendArray",value:function(t,e){var i=[];return t.map((function(t){i.push(n.extend(e,t))})),i}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var n=[],i=0;i<e.length;i++)n[i]=this.clone(e[i]);return n}if("[object Null]"===Object.prototype.toString.call(e))return null;if("[object Date]"===Object.prototype.toString.call(e))return e;if("object"===t(e)){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=this.clone(e[a]));return r}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var n="",i=t<0?"-":"",r=e[0].replace(".",""),a=Number(e[1])+1;if(a<0){for(n=i+"0.";a++;)n+="0";return n+r.replace(/^-/,"")}for(a-=r.length;a--;)n+="0";return r+n}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t),n=[],i=t.clientHeight,r=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),r-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),n.push(r),n.push(i),n}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce((function(t,e){return Array.isArray(e)&&(e=e.reduce((function(t,e){return t.length>e.length?t:e}))),t.length>e.length?t:e}),0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var n=t.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var i=0;i<n.length;i++)n[i]=parseInt(1===n[i].length?n[i]+n[i]:n[i],16);return void 0!==e&&n.push(e),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"polarToCartesian",value:function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=t.toString().slice();return n.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,n){if(n>=t.length)for(var i=n-t.length+1;i--;)t.push(void 0);return t.splice(n,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style.key=e[n])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}}]),n}(),m=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"getDefaultFilter",value:function(t,e){var n=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(t,e,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(t,n.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var n=this.w;n.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,n.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,n){var i=this,r=this.w,a=n.intensity;p.isFirefox()||(t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var n=r.config.chart.dropShadow;(n.enabled?i.addShadow(t,e,n):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:a}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node))}},{key:"addDarkenFilter",value:function(t,e,n){var i=this,r=this.w,a=n.intensity;p.isFirefox()||(t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var n=r.config.chart.dropShadow;(n.enabled?i.addShadow(t,e,n):t).componentTransfer({rgb:{type:"linear",slope:a}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node))}},{key:"applyFilter",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:i});break;case"darken":this.addDarkenFilter(t,e,{intensity:i})}}},{key:"addShadow",value:function(t,e,n){var i=n.blur,r=n.top,a=n.left,o=n.color,s=n.opacity,l=t.flood(Array.isArray(o)?o[e]:o,s).composite(t.sourceAlpha,"in").offset(a,r).gaussianBlur(i).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.top,r=e.left,a=e.blur,o=e.color,s=e.opacity,l=e.noUserSpaceOnUse,c=this.w;return t.unfilter(!0),p.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[n]:o,t.filter((function(t){var e;e=p.isSafari()||p.isFirefox()||p.isIE()?t.flood(o,s).composite(t.sourceAlpha,"in").offset(r,i).gaussianBlur(a):t.flood(o,s).composite(t.sourceAlpha,"in").offset(r,i).gaussianBlur(a).merge(t.source),t.blend(t.source,e)})),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,n){var i=this.w;if(void 0!==i.globals.selectedDataPoints[e]&&i.globals.selectedDataPoints[e].indexOf(n)>-1){t.node.setAttribute("selected",!0);var r=i.config.states.active.filter;"none"!==r&&this.applyFilter(t,e,r.type,r.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),v=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.setEasingFunctions()}return i(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};break;default:t="<>"}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,n,i){t.attr(e).animate(i).attr(n)}},{key:"animateCircleRadius",value:function(t,e,n,i,r,a){e||(e=0),t.attr({r:e}).animate(i,r).attr({r:n}).afterAll((function(){a()}))}},{key:"animateCircle",value:function(t,e,n,i,r){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(i,r).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(t,e,n,i,r){t.attr(e).animate(i).attr(n).afterAll((function(){return r()}))}},{key:"animatePathsGradually",value:function(t){var e=this.w,n=0;e.config.chart.animations.animateGradually.enabled&&(n=e.config.chart.animations.animateGradually.delay),e.config.chart.animations.dynamicAnimation.enabled&&e.globals.dataChanged&&"bar"!==e.config.chart.type&&(n=0),this.morphSVG(t.el,t.realIndex,t.j,"line"!==e.config.chart.type||e.globals.comboCharts?t.fill:"stroke",t.pathFrom,t.pathTo,t.speed,t.delay*n)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(t){t.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,n,i,r,a,o,s){var l=this,c=this.w;r||(r=t.attr("pathFrom")),a||(a=t.attr("pathTo"));var u=function(t){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=u()),(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=u()),c.globals.shouldAnimate||(o=1),t.plot(r).animate(1,c.globals.easing,s).plot(r).animate(o,c.globals.easing,s).plot(a).afterAll((function(){p.isNumber(n)?n===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(t):"none"!==i&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&e===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()}))}}]),t}(),y=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"drawLine",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=this.w,l=s.globals.dom.Paper.line().attr({x1:t,y1:e,x2:n,y2:i,stroke:r,"stroke-dasharray":a,"stroke-width":o});return l}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w,d=u.globals.dom.Paper.rect();return d.attr({x:t,y:e,width:n>0?n:0,height:i>0?i:0,rx:r,ry:r,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":c}),d.node.setAttribute("fill",a),d}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",r=this.w,a=r.globals.dom.Paper.polygon(t).attr({fill:i,stroke:e,"stroke-width":n});return a}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w,i=n.globals.dom.Paper.circle(2*t);return null!==e&&i.attr(e),i}},{key:"drawPath",value:function(t){var e=t.d,n=void 0===e?"":e,i=t.stroke,r=void 0===i?"#a8a8a8":i,a=t.strokeWidth,o=void 0===a?1:a,s=t.fill,l=t.fillOpacity,c=void 0===l?1:l,u=t.strokeOpacity,d=void 0===u?1:u,h=t.classes,f=t.strokeLinecap,g=void 0===f?null:f,p=t.strokeDashArray,m=void 0===p?0:p,v=this.w;return null===g&&(g=v.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(n).attr({fill:s,"fill-opacity":c,stroke:r,"stroke-opacity":d,"stroke-linecap":g,"stroke-width":o,"stroke-dasharray":m,class:h})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,n=e.globals.dom.Paper.group();return null!==t&&n.attr(t),n}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;return null===n?i=["L",t,e].join(" "):"H"===n?i=["H",t].join(" "):"V"===n&&(i=["V",e].join(" ")),i}},{key:"curve",value:function(t,e,n,i,r,a){return["C",t,e,n,i,r,a].join(" ")}},{key:"quadraticCurve",value:function(t,e,n,i){return["Q",t,e,n,i].join(" ")}},{key:"arc",value:function(t,e,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";s&&(l="a");var c=[l,t,e,n,i,r,a,o].join(" ");return c}},{key:"renderPaths",value:function(t){var e,n=t.j,i=t.realIndex,r=t.pathFrom,a=t.pathTo,s=t.stroke,l=t.strokeWidth,c=t.strokeLinecap,u=t.fill,d=t.animationDelay,h=t.initialSpeed,f=t.dataChangeSpeed,g=t.className,p=t.shouldClipToGrid,y=void 0===p||p,x=t.bindEventsOnPaths,b=void 0===x||x,w=t.drawShadow,_=void 0===w||w,S=this.w,C=new m(this.ctx),k=new v(this.ctx),A=this.w.config.chart.animations.enabled,M=A&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(A&&!S.globals.resized||M&&S.globals.dataChanged&&S.globals.shouldAnimate);T?e=r:(e=a,S.globals.animationEnded=!0);var I,D=S.config.stroke.dashArray;I=Array.isArray(D)?D[i]:S.config.stroke.dashArray;var P=this.drawPath({d:e,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:g,strokeLinecap:c,strokeDashArray:I});P.attr("index",i),y&&P.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type?C.getDefaultFilter(P,i):S.config.chart.dropShadow.enabled&&_&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(i))&&C.dropShadow(P,S.config.chart.dropShadow,i),b&&(P.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,P)),P.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,P)),P.node.addEventListener("mousedown",this.pathMouseDown.bind(this,P))),P.attr({pathTo:a,pathFrom:r});var L={el:P,j:n,realIndex:i,pathFrom:r,pathTo:a,fill:u,strokeWidth:l,delay:d};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||k.showDelayedElements():k.animatePathsGradually(o(o({},L),{},{speed:h})),S.globals.dataChanged&&M&&T&&k.animatePathsGradually(o(o({},L),{},{speed:f})),P}},{key:"drawPattern",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.w,o=a.globals.dom.Paper.pattern(e,n,(function(a){"horizontalLines"===t?a.line(0,0,n,0).stroke({color:i,width:r+1}):"verticalLines"===t?a.line(0,0,0,e).stroke({color:i,width:r+1}):"slantedLines"===t?a.line(0,0,e,n).stroke({color:i,width:r}):"squares"===t?a.rect(e,n).fill("none").stroke({color:i,width:r}):"circles"===t&&a.circle(e).fill("none").stroke({color:i,width:r})}));return o}},{key:"drawGradient",value:function(t,e,n,i,r){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;e.length<9&&0===e.indexOf("#")&&(e=p.hexToRgba(e,i)),n.length<9&&0===n.indexOf("#")&&(n=p.hexToRgba(n,r));var d=0,h=1,f=1,g=null;null!==s&&(d=void 0!==s[0]?s[0]/100:0,h=void 0!==s[1]?s[1]/100:1,f=void 0!==s[2]?s[2]/100:1,g=void 0!==s[3]?s[3]/100:null);var m=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"polarArea"!==u.config.chart.type&&"bubble"!==u.config.chart.type);if(a=u.globals.dom.Paper.gradient(m?"radial":"linear",null===l||0===l.length?function(t){t.at(d,e,i),t.at(h,n,r),t.at(f,n,r),null!==g&&t.at(g,e,i)}:function(t){(Array.isArray(l[c])?l[c]:l).forEach((function(e){t.at(e.offset/100,e.color,e.opacity)}))}),m){var v=u.globals.gridWidth/2,y=u.globals.gridHeight/2;a.attr("bubble"!==u.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:v,cy:y,r:o}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?a.from(0,0).to(0,1):"diagonal"===t?a.from(0,0).to(1,1):"horizontal"===t?a.from(0,1).to(1,1):"diagonal2"===t&&a.from(1,0).to(0,1);return a}},{key:"drawText",value:function(t){var e,n=t.x,i=t.y,r=t.text,a=t.textAnchor,o=t.fontSize,s=t.fontFamily,l=t.fontWeight,c=t.foreColor,u=t.opacity,d=t.cssClass,h=void 0===d?"":d,f=t.isPlainText,g=void 0===f||f,p=this.w;return void 0===r&&(r=""),a||(a="start"),c&&c.length||(c=p.config.chart.foreColor),s=s||p.config.chart.fontFamily,l=l||"regular",(e=Array.isArray(r)?p.globals.dom.Paper.text((function(t){for(var e=0;e<r.length;e++)0===e?t.tspan(r[e]):t.tspan(r[e]).newLine()})):g?p.globals.dom.Paper.plain(r):p.globals.dom.Paper.text((function(t){return t.tspan(r)}))).attr({x:n,y:i,"text-anchor":a,"dominant-baseline":"auto","font-size":o,"font-family":s,"font-weight":l,fill:c,class:"apexcharts-text "+h}),e.node.style.fontFamily=s,e.node.style.opacity=u,e}},{key:"drawMarker",value:function(t,e,n){t=t||0;var i=n.pSize||0,r=null;if("square"===n.shape){var a=void 0===n.pRadius?i/2:n.pRadius;null!==e&&i||(i=0,a=0);var o=1.2*i+a,s=this.drawRect(o,o,o,o,a);s.attr({x:t-o/2,y:e-o/2,cx:t,cy:e,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pWidth?n.pWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),r=s}else"circle"!==n.shape&&n.shape||(p.isNumber(e)||(i=0,e=0),r=this.drawCircle(i,{cx:t,cy:e,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pWidth?n.pWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return r}},{key:"pathMouseEnter",value:function(t,e){var n=this.w,i=new m(this.ctx),r=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:r,dataPointIndex:a,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:r,dataPointIndex:a,w:n}]),("none"===n.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&"none"!==n.config.states.active.filter.type&&!n.globals.isTouchDevice){var o=n.config.states.hover.filter;i.applyFilter(t,r,o.type,o.value)}}},{key:"pathMouseLeave",value:function(t,e){var n=this.w,i=new m(this.ctx),r=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:r,dataPointIndex:a,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:r,dataPointIndex:a,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&i.getDefaultFilter(t,r)}},{key:"pathMouseDown",value:function(t,e){var n=this.w,i=new m(this.ctx),r=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10),o="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),n.globals.selectedDataPoints[r].indexOf(a)>-1){var s=n.globals.selectedDataPoints[r].indexOf(a);n.globals.selectedDataPoints[r].splice(s,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var l=n.globals.dom.Paper.select(".apexcharts-series path").members,c=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(t){Array.prototype.forEach.call(t,(function(t){t.node.setAttribute("selected","false"),i.getDefaultFilter(t,r)}))};u(l),u(c)}t.node.setAttribute("selected","true"),o="true",void 0===n.globals.selectedDataPoints[r]&&(n.globals.selectedDataPoints[r]=[]),n.globals.selectedDataPoints[r].push(a)}if("true"===o){var d=n.config.states.active.filter;"none"!==d&&i.applyFilter(t,r,d.type,d.value)}else"none"!==n.config.states.active.filter.type&&i.getDefaultFilter(t,r);"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:a,w:n}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:a,w:n}])}},{key:"rotateAroundCenter",value:function(t){var e=t.getBBox();return{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w,o=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:n,foreColor:"#fff",opacity:0});i&&o.attr("transform",i),a.globals.dom.Paper.add(o);var s=o.bbox();return r||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(t,e,n){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=n/.8)){for(var i=e.length-3;i>0;i-=3)if(t.getSubStringLength(0,i)<=n/.8)return void(t.textContent=e.substring(0,i)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}}]),t}(),x=function(){function t(n){e(this,t),this.w=n.w,this.annoCtx=n}return i(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===t.label.orientation){var i=null!==e?e:0,r=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(i,"']"));if(null!==r){var a=r.getBoundingClientRect();r.setAttribute("x",parseFloat(r.getAttribute("x"))-a.height+4),r.setAttribute("y","top"===t.label.position?parseFloat(r.getAttribute("y"))+a.width:parseFloat(r.getAttribute("y"))-a.width);var o=this.annoCtx.graphics.rotateAroundCenter(r),s=o.x,l=o.y;r.setAttribute("transform","rotate(-90 ".concat(s," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var n=this.w;if(!e.label.text||e.label.text&&!e.label.text.trim())return null;var i=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=t.getBoundingClientRect(),a=e.label.style.padding.left,o=e.label.style.padding.right,s=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(s=e.label.style.padding.left,l=e.label.style.padding.right,a=e.label.style.padding.top,o=e.label.style.padding.bottom);var c=this.annoCtx.graphics.drawRect(r.left-i.left-a-n.globals.barPadForNumericAxis,r.top-i.top-s,r.width+a+o,r.height+s+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&c.node.classList.add(e.id),c}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,n=function(n,i,r){var a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(i,"']"));if(a){var o=a.parentNode,s=t.addBackgroundToAnno(a,n);s&&o.insertBefore(s.node,a)}};e.config.annotations.xaxis.map((function(t,e){n(t,e,"xaxis")})),e.config.annotations.yaxis.map((function(t,e){n(t,e,"yaxis")})),e.config.annotations.points.map((function(t,e){n(t,e,"point")}))}},{key:"getStringX",value:function(t){var e=this.w,n=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var i=e.globals.labels.indexOf(t),r=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(i+1)+")");return r&&(n=parseFloat(r.getAttribute("x"))),n}}]),t}(),b=function(){function t(n){e(this,t),this.w=n.w,this.annoCtx=n,this.invertAxis=this.annoCtx.invertAxis}return i(t,[{key:"addXaxisAnnotation",value:function(t,e,n){var i=this.w,r=this.invertAxis?i.globals.minY:i.globals.minX,a=this.invertAxis?i.globals.maxY:i.globals.maxX,o=this.invertAxis?i.globals.yRange[0]:i.globals.xRange,s=(t.x-r)/(o/i.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(s=(a-t.x)/(o/i.globals.gridWidth));var l=t.label.text;"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.invertAxis||i.globals.dataFormatXNumeric||(s=this.annoCtx.helpers.getStringX(t.x));var c=t.strokeDashArray;if(p.isNumber(s)){if(null==t.x2){var u=this.annoCtx.graphics.drawLine(s+t.offsetX,0+t.offsetY,s+t.offsetX,i.globals.gridHeight+t.offsetY,t.borderColor,c,t.borderWidth);e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}else{var d=(t.x2-r)/(o/i.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(d=(a-t.x2)/(o/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.invertAxis||i.globals.dataFormatXNumeric||(d=this.annoCtx.helpers.getStringX(t.x2)),d<s){var h=s;s=d,d=h}var f=this.annoCtx.graphics.drawRect(s+t.offsetX,0+t.offsetY,d-s,i.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,c);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}var g="top"===t.label.position?4:i.globals.gridHeight,m=this.annoCtx.graphics.getTextRects(l,parseFloat(t.label.style.fontSize)),v=this.annoCtx.graphics.drawText({x:s+t.label.offsetX,y:g+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?m.width/2-12:-m.width/2:0),text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});v.attr({rel:n}),e.appendChild(v.node),this.annoCtx.helpers.setOrientations(t,n)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((function(e,i){t.addXaxisAnnotation(e,n.node,i)})),n}}]),t}(),w=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var i=0,r=0;r<t.globals.series.length;r++)void 0!==t.globals.series[r][n]&&(i+=t.globals.series[r][n]);e.push(i)}return t.globals.stackedSeriesTotals=e,e}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce((function(t,e){return t+e}),0):this.w.globals.series[t].reduce((function(t,e){return t+e}),0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter((function(t){return null!==t})):this.w.config.series[t].data.filter((function(t){return null!==t}))).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every((function(t,e,n){return t===n[0]}))}},{key:"getCategoryLabels",value:function(t){var e=this.w,n=t.slice();return e.config.xaxis.convertedCatToNumeric&&(n=t.map((function(t){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)}))),n}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,t.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach((function(t){e=Math.max(e,t)})),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map((function(t,e){var n=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=t[i];else n+=t;return n}))}},{key:"getSeriesTotalsXRange",value:function(t,e){var n=this.w;return n.globals.series.map((function(i,r){for(var a=0,o=0;o<i.length;o++)n.globals.seriesX[r][o]>t&&n.globals.seriesX[r][o]<e&&(a+=i[o]);return a}))}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map((function(e,n){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var a=t.globals.stackedSeriesTotals[r],o=0;a&&(o=100*e[r]/a),i.push(o)}else{var s=100*e/t.globals.seriesTotals.reduce((function(t,e){return t+e}),0);i.push(s)}return i}))}},{key:"getCalculatedRatios",value:function(){var t,e,n,i,r=this.w.globals,a=[],o=0,s=[],l=.1,c=0;if(r.yRange=[],r.isMultipleYAxis)for(var u=0;u<r.minYArr.length;u++)r.yRange.push(Math.abs(r.minYArr[u]-r.maxYArr[u])),s.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var d=0;d<r.yRange.length;d++)a.push(r.yRange[d]/r.gridHeight);if(e=r.xRange/r.gridWidth,n=Math.abs(r.initialMaxX-r.initialMinX)/r.gridWidth,t=r.yRange/r.gridWidth,i=r.xRange/r.gridHeight,(o=r.zRange/r.gridHeight*16)||(o=1),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(r.hasNegs=!0),r.isMultipleYAxis){s=[];for(var h=0;h<a.length;h++)s.push(-r.minYArr[h]/a[h])}else s.push(-r.minY/a[0]),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(l=-r.minY/t,c=r.minX/e);return{yRatio:a,invertedYRatio:t,zRatio:o,xRatio:e,initialXRatio:n,invertedXRatio:i,baseLineInvertedY:l,baseLineY:s,baseLineX:c}}},{key:"getLogSeries",value:function(t){var e=this,n=this.w;return n.globals.seriesLog=t.map((function(t,i){return n.config.yaxis[i]&&n.config.yaxis[i].logarithmic?t.map((function(t){return null===t?null:e.getLogVal(t,i)})):t})),n.globals.invalidLogScale?t:n.globals.seriesLog}},{key:"getLogVal",value:function(t,e){var n=this.w;return(Math.log(t)-Math.log(n.globals.minYArr[e]))/(Math.log(n.globals.maxYArr[e])-Math.log(n.globals.minYArr[e]))}},{key:"getLogYRatios",value:function(t){var e=this,n=this.w,i=this.w.globals;return i.yLogRatio=t.slice(),i.logYRange=i.yRange.map((function(t,r){if(n.config.yaxis[r]&&e.w.config.yaxis[r].logarithmic){var a,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return i.seriesLog.forEach((function(t,e){t.forEach((function(t){n.config.yaxis[e]&&n.config.yaxis[e].logarithmic&&(o=Math.max(t,o),s=Math.min(t,s))}))})),a=Math.pow(i.yRange[r],Math.abs(s-o)/i.yRange[r]),i.yLogRatio[r]=a/i.gridHeight,a}})),i.invalidLogScale?t.slice():i.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,n=0;return t.length&&void 0!==t[0].type&&(e=!0,t.forEach((function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type||n++}))),{comboBarCount:n,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e,n){return e.yaxis&&(e=t.extendYAxis(e,n)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),_=function(){function t(n){e(this,t),this.w=n.w,this.annoCtx=n}return i(t,[{key:"addYaxisAnnotation",value:function(t,e,n){var i,r=this.w,a=t.strokeDashArray,o=this._getY1Y2("y1",t),s=t.label.text;if(null==t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,o+t.offsetY,r.globals.gridWidth+t.offsetX,o+t.offsetY,t.borderColor,a,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((i=this._getY1Y2("y2",t))>o){var c=o;o=i,i=c}var u=this.annoCtx.graphics.drawRect(0+t.offsetX,i+t.offsetY,r.globals.gridWidth+t.offsetX,o-i,0,t.fillColor,t.opacity,1,t.borderColor,a);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}var d=this.annoCtx.graphics.drawText({x:("right"===t.label.position?r.globals.gridWidth:0)+t.label.offsetX,y:(i||o)+t.label.offsetY-3,text:s,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});d.attr({rel:n}),e.appendChild(d.node)}},{key:"_getY1Y2",value:function(t,e){var n,i="y1"===t?e.y:e.y2,r=this.w;if(this.annoCtx.invertAxis){var a=r.globals.labels.indexOf(i);r.config.xaxis.convertedCatToNumeric&&(a=r.globals.categoryLabels.indexOf(i));var o=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(a+1)+")");o&&(n=parseFloat(o.getAttribute("y")))}else{var s;s=r.config.yaxis[e.yAxisIndex].logarithmic?(i=new w(this.annoCtx.ctx).getLogVal(i,e.yAxisIndex))/r.globals.yLogRatio[e.yAxisIndex]:(i-r.globals.minYArr[e.yAxisIndex])/(r.globals.yRange[e.yAxisIndex]/r.globals.gridHeight),n=r.globals.gridHeight-s,r.config.yaxis[e.yAxisIndex]&&r.config.yaxis[e.yAxisIndex].reversed&&(n=s)}return n}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map((function(e,i){t.addYaxisAnnotation(e,n.node,i)})),n}}]),t}(),S=function(){function t(n){e(this,t),this.w=n.w,this.annoCtx=n}return i(t,[{key:"addPointAnnotation",value:function(t,e,n){var i=this.w,r=0,a=0,o=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var s,l=parseFloat(t.y);if("string"==typeof t.x){var c=i.globals.labels.indexOf(t.x);i.config.xaxis.convertedCatToNumeric&&(c=i.globals.categoryLabels.indexOf(t.x)),r=this.annoCtx.helpers.getStringX(t.x),null===t.y&&(l=i.globals.series[t.seriesIndex][c])}else r=(t.x-i.globals.minX)/(i.globals.xRange/i.globals.gridWidth);if(s=i.config.yaxis[t.yAxisIndex].logarithmic?(l=new w(this.annoCtx.ctx).getLogVal(l,t.yAxisIndex))/i.globals.yLogRatio[t.yAxisIndex]:(l-i.globals.minYArr[t.yAxisIndex])/(i.globals.yRange[t.yAxisIndex]/i.globals.gridHeight),a=i.globals.gridHeight-s-parseFloat(t.label.style.fontSize)-t.marker.size,o=i.globals.gridHeight-s,i.config.yaxis[t.yAxisIndex]&&i.config.yaxis[t.yAxisIndex].reversed&&(a=s+parseFloat(t.label.style.fontSize)+t.marker.size,o=s),p.isNumber(r)){var u={pSize:t.marker.size,pWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},d=this.annoCtx.graphics.drawMarker(r+t.marker.offsetX,o+t.marker.offsetY,u);e.appendChild(d.node);var h=this.annoCtx.graphics.drawText({x:r+t.label.offsetX,y:a+t.label.offsetY,text:t.label.text?t.label.text:"",textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(h.attr({rel:n}),e.appendChild(h.node),t.customSVG.SVG){var f=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});f.attr({transform:"translate(".concat(r+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),f.node.innerHTML=t.customSVG.SVG,e.appendChild(f.node)}if(t.image.path){var g=t.image.width?t.image.width:20,m=t.image.height?t.image.height:20;this.annoCtx.addImage({x:r+t.image.offsetX-g/2,y:a+t.image.offsetY-m/2,width:g,height:m,path:t.image.path,appendTo:".apexcharts-point-annotations"})}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((function(e,i){t.addPointAnnotation(e,n.node,i)})),n}}]),t}(),C={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},k=function(){function t(){e(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return i(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[C],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,zoomed:void 0,scrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,startingShape:"flat",endingShape:"flat",rangeBarOverlap:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.15}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.65}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t+": "}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,sorted:!1,offsetX:0,offsetY:0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),A=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.graphics=new y(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new x(this),this.xAxisAnnotations=new b(this),this.yAxisAnnotations=new _(this),this.pointsAnnotations=new S(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return i(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),i=this.pointsAnnotations.drawPointAnnotations(),r=t.config.chart.animations.enabled,a=[e,n,i],o=[n.node,e.node,i.node],s=0;s<3;s++)t.globals.dom.elGraphical.add(a[s]),!r||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map((function(e,n){t.addImage(e,n)}))}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map((function(e,n){t.addText(e,n)}))}},{key:"addXaxisAnnotation",value:function(t,e,n){this.xAxisAnnotations.addXaxisAnnotation(t,e,n)}},{key:"addYaxisAnnotation",value:function(t,e,n){this.yAxisAnnotations.addYaxisAnnotation(t,e,n)}},{key:"addPointAnnotation",value:function(t,e,n){this.pointsAnnotations.addPointAnnotation(t,e,n)}},{key:"addText",value:function(t,e){var n=t.text,i=t.backgroundColor,r=t.borderWidth,a=t.strokeDashArray,o=t.borderRadius,s=t.borderColor,l=t.appendTo,c=void 0===l?".apexcharts-annotations":l,u=t.paddingLeft,d=void 0===u?4:u,h=t.paddingRight,f=void 0===h?4:h,g=t.paddingBottom,p=void 0===g?2:g,m=t.paddingTop,v=void 0===m?2:m,y=this.w,x=this.graphics.drawText({x:t.x,y:t.y,text:n,textAnchor:t.textAnchor||"start",fontSize:t.fontSize||"12px",fontWeight:t.fontWeight||"regular",fontFamily:t.fontFamily||y.config.chart.fontFamily,foreColor:t.foreColor||y.config.chart.foreColor,cssClass:t.cssClass}),b=y.globals.dom.baseEl.querySelector(c);b&&b.appendChild(x.node);var w=x.bbox();if(n){var _=this.graphics.drawRect(w.x-d,w.y-v,w.width+d+f,w.height+p+v,o,i||"transparent",1,r,s,a);b.insertBefore(_.node,x.node)}}},{key:"addImage",value:function(t,e){var n=this.w,i=t.x,r=void 0===i?0:i,a=t.y,o=void 0===a?0:a,s=t.width,l=void 0===s?20:s,c=t.height,u=void 0===c?20:c,d=t.appendTo,h=void 0===d?".apexcharts-annotations":d,f=n.globals.dom.Paper.image(t.path);f.size(l,u).move(r,o);var g=n.globals.dom.baseEl.querySelector(h);g&&g.appendChild(f.node)}},{key:"addXaxisAnnotationExternal",value:function(t,e,n){return this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(t,e,n){return this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(t,e,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(t){var e=t.params,n=t.pushToMemory,i=t.context,r=t.type,a=t.contextMethod,o=i,s=o.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),c=l.childNodes.length+1,u=new k,d=Object.assign({},"xaxis"===r?u.xAxisAnnotation:"yaxis"===r?u.yAxisAnnotation:u.pointAnnotation),h=p.extend(d,e);switch(r){case"xaxis":this.addXaxisAnnotation(h,l,c);break;case"yaxis":this.addYaxisAnnotation(h,l,c);break;case"point":this.addPointAnnotation(h,l,c)}var f=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(c,"']")),g=this.helpers.addBackgroundToAnno(f,h);return g&&l.insertBefore(g.node,f),n&&s.globals.memory.methodsToExec.push({context:o,id:h.id?h.id:p.randomId(),method:a,label:"addAnnotation",params:e}),i}},{key:"clearAnnotations",value:function(t){var e=t.w,n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map((function(t,n){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(n,1)})),n=p.listToArray(n),Array.prototype.forEach.call(n,(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))}},{key:"removeAnnotation",value:function(t,e){var n=t.w,i=n.globals.dom.baseEl.querySelectorAll(".".concat(e));i&&(n.globals.memory.methodsToExec.map((function(t,i){t.id===e&&n.globals.memory.methodsToExec.splice(i,1)})),Array.prototype.forEach.call(i,(function(t){t.parentElement.removeChild(t)})))}}]),t}(),M=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.opts=null,this.seriesIndex=0}return i(t,[{key:"clippedImgArea",value:function(t){var e=this.w,n=e.config,i=parseInt(e.globals.gridWidth,10),r=parseInt(e.globals.gridHeight,10),a=i>r?i:r,o=t.image,s=0,l=0;void 0===t.width&&void 0===t.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(s=n.fill.image.width+1,l=n.fill.image.height):(s=a+1,l=a):(s=t.width,l=t.height);var c=document.createElementNS(e.globals.SVGNS,"pattern");y.setAttrs(c,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(e.globals.SVGNS,"image");c.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",o),y.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return this.seriesIndex=("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type?t.seriesNumber:t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var n,i,r,a=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var o=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(o=e.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var s=this.getFillType(this.seriesIndex),l=Array.isArray(a.fill.opacity)?a.fill.opacity[this.seriesIndex]:a.fill.opacity,c=o;if(t.color&&(o=t.color),-1===o.indexOf("rgb")?o.length<9&&(c=p.hexToRgba(o,l)):o.indexOf("rgba")>-1&&(l=p.getOpacityFromRGBA(o)),t.opacity&&(l=t.opacity),"pattern"===s&&(i=this.handlePatternFill(i,o,l,c)),"gradient"===s&&(r=this.handleGradientFill(o,l,this.seriesIndex)),"image"===s){var u=a.fill.image.src,d=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?t.seriesNumber<u.length?u[t.seriesNumber]:u[0]:u,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d)}),n="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d,")")}else n="gradient"===s?r:"pattern"===s?i:c;return t.solid&&(n=c),n}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,n=this.opts,i=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?i=t.globals.stroke.colors:i.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?i=t.globals.fill.colors:i.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?i=t.globals.stroke.colors:i.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?i=t.globals.fill.colors:i.push(t.globals.fill.colors),void 0!==n.fillColors&&(i=[],Array.isArray(n.fillColors)?i=n.fillColors.slice():i.push(n.fillColors)),i}},{key:"handlePatternFill",value:function(t,e,n,i){var r=this.w.config,a=this.opts,o=new y(this.ctx),s=void 0===r.fill.pattern.strokeWidth?Array.isArray(r.stroke.width)?r.stroke.width[this.seriesIndex]:r.stroke.width:Array.isArray(r.fill.pattern.strokeWidth)?r.fill.pattern.strokeWidth[this.seriesIndex]:r.fill.pattern.strokeWidth,l=e;return Array.isArray(r.fill.pattern.style)?void 0!==r.fill.pattern.style[a.seriesNumber]?o.drawPattern(r.fill.pattern.style[a.seriesNumber],r.fill.pattern.width,r.fill.pattern.height,l,s,n):i:o.drawPattern(r.fill.pattern.style,r.fill.pattern.width,r.fill.pattern.height,l,s,n)}},{key:"handleGradientFill",value:function(t,e,n){var i,r=this.w.config,a=this.opts,o=new y(this.ctx),s=new p,l=r.fill.gradient.type,c=t,u=void 0===r.fill.gradient.opacityFrom?e:Array.isArray(r.fill.gradient.opacityFrom)?r.fill.gradient.opacityFrom[n]:r.fill.gradient.opacityFrom;c.indexOf("rgba")>-1&&(u=p.getOpacityFromRGBA(c));var d=void 0===r.fill.gradient.opacityTo?e:Array.isArray(r.fill.gradient.opacityTo)?r.fill.gradient.opacityTo[n]:r.fill.gradient.opacityTo;if(void 0===r.fill.gradient.gradientToColors||0===r.fill.gradient.gradientToColors.length)i=s.shadeColor("dark"===r.fill.gradient.shade?-1*parseFloat(r.fill.gradient.shadeIntensity):parseFloat(r.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?p.rgb2hex(t):t);else{var h=r.fill.gradient.gradientToColors[a.seriesNumber];i=h,h.indexOf("rgba")>-1&&(d=p.getOpacityFromRGBA(h))}if(r.fill.gradient.inverseColors){var f=c;c=i,i=f}return c.indexOf("rgb")>-1&&(c=p.rgb2hex(c)),i.indexOf("rgb")>-1&&(i=p.rgb2hex(i)),o.drawGradient(l,c,i,u,d,a.size,r.fill.gradient.stops,r.fill.gradient.colorStops,n)}}]),t}(),T=function(){function t(n,i){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map((function(e){return t.config.markers.size}))}},{key:"plotChartMarkers",value:function(t,e,n,i){var r,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=e,l=t,c=null,u=new y(this.ctx);if((o.globals.markers.size[e]>0||a)&&(c=u.group({class:a?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var h=n;1===n&&0===d&&(h=0),1===n&&1===d&&(h=1);var f="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(f+=" no-pointer-events");var g=Array.isArray(o.config.markers.size)?o.globals.markers.size[e]>0:o.config.markers.size>0;if(g||a){p.isNumber(l.y[d])?f+=" w".concat(p.randomId()):f="apexcharts-nullpoint";var v=this.getMarkerConfig(f,e,h);o.config.series[s].data[h]&&(o.config.series[s].data[h].fillColor&&(v.pointFillColor=o.config.series[s].data[h].fillColor),o.config.series[s].data[h].strokeColor&&(v.pointStrokeColor=o.config.series[s].data[h].strokeColor)),i&&(v.pSize=i),(r=u.drawMarker(l.x[d],l.y[d],v)).attr("rel",h),r.attr("j",h),r.attr("index",e),r.node.setAttribute("default-marker-size",v.pSize);var x=new m(this.ctx);x.setSelectionFilter(r,e,h),this.addEvents(r),c&&c.add(r)}else void 0===o.globals.pointsArray[e]&&(o.globals.pointsArray[e]=[]),o.globals.pointsArray[e].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.w,r=this.getMarkerStyle(e),a=i.globals.markers.size[e],o=i.config.markers;return null!==n&&o.discrete.length&&o.discrete.map((function(t){t.seriesIndex===e&&t.dataPointIndex===n&&(r.pointStrokeColor=t.strokeColor,r.pointFillColor=t.fillColor,a=t.size)})),{pSize:a,pRadius:o.radius,pWidth:Array.isArray(o.strokeWidth)?o.strokeWidth[e]:o.strokeWidth,pointStrokeColor:r.pointStrokeColor,pointFillColor:r.pointFillColor,shape:Array.isArray(o.shape)?o.shape[e]:o.shape,class:t,pointStrokeOpacity:Array.isArray(o.strokeOpacity)?o.strokeOpacity[e]:o.strokeOpacity,pointStrokeDashArray:Array.isArray(o.strokeDashArray)?o.strokeDashArray[e]:o.strokeDashArray,pointFillOpacity:Array.isArray(o.fillOpacity)?o.fillOpacity[e]:o.fillOpacity,seriesIndex:e}}},{key:"addEvents",value:function(t){var e=this.w,n=new y(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,n=e.globals.markers.colors,i=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(i)?i[t]:i,pointFillColor:Array.isArray(n)?n[t]:n}}}]),t}(),I=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return i(t,[{key:"draw",value:function(t,e,n){var i=this.w,r=new y(this.ctx),a=n.realIndex,o=n.pointsPos,s=n.zRatio,l=n.elParent,c=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(i.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(i.globals.cuid,")")),Array.isArray(o.x))for(var u=0;u<o.x.length;u++){var d=e+1,h=!0;0===e&&0===u&&(d=0),0===e&&1===u&&(d=1);var f=0,g=i.globals.markers.size[a];if(s!==1/0){g=i.globals.seriesZ[a][d]/s;var p=i.config.plotOptions.bubble;p.minBubbleRadius&&g<p.minBubbleRadius&&(g=p.minBubbleRadius),p.maxBubbleRadius&&g>p.maxBubbleRadius&&(g=p.maxBubbleRadius)}i.config.chart.animations.enabled||(f=g);var m=o.y[u];if(f=f||0,null!==m&&void 0!==i.globals.series[a][d]||(h=!1),h){var v=this.drawPoint(o.x[u],m,f,g,a,d,e);c.add(v)}l.add(c)}}},{key:"drawPoint",value:function(t,e,n,i,r,a,o){var s=this.w,l=r,c=new v(this.ctx),u=new m(this.ctx),d=new M(this.ctx),h=new T(this.ctx),f=new y(this.ctx),g=h.getMarkerConfig("apexcharts-marker",l),p=d.fillPath({seriesNumber:r,dataPointIndex:a,patternUnits:"objectBoundingBox",value:s.globals.series[r][o]}),x=f.drawCircle(n);if(s.config.series[l].data[a]&&s.config.series[l].data[a].fillColor&&(p=s.config.series[l].data[a].fillColor),x.attr({cx:t,cy:e,fill:p,stroke:g.pointStrokeColor,r:i,"stroke-width":g.pWidth,"stroke-dasharray":g.pointStrokeDashArray,"stroke-opacity":g.pointStrokeOpacity}),s.config.chart.dropShadow.enabled&&u.dropShadow(x,s.config.chart.dropShadow,r),!this.initialAnim||s.globals.dataChanged||s.globals.resized||c.animateCircleRadius(x,0,i,s.config.chart.animations.speed,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(x)}),100)})),s.globals.dataChanged)if(this.dynamicAnim){var b,w,_,S,C=s.config.chart.animations.dynamicAnimation.speed;null!=(S=s.globals.previousPaths[r]&&s.globals.previousPaths[r][o])&&(b=S.x,w=S.y,_=void 0!==S.r?S.r:i);for(var k=0;k<s.globals.collapsedSeries.length;k++)s.globals.collapsedSeries[k].index===r&&(C=1,i=0);0===t&&0===e&&(i=0),c.animateCircle(x,{cx:b,cy:w,r:_},{cx:t,cy:e,r:i},C,s.globals.easing)}else x.attr({r:i});return x.attr({rel:a,j:a,index:r,"default-marker-size":i}),u.setSelectionFilter(x,r,a),h.addEvents(x),x.node.classList.add("apexcharts-marker"),x}},{key:"centerTextInBubble",value:function(t){return{y:t+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),t}(),D=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"dataLabelsCorrection",value:function(t,e,n,i,r,a,o){var s=this.w,l=!1,c=new y(this.ctx).getTextRects(n,o),u=c.width,d=c.height;if(void 0===s.globals.dataLabelsRects[i]&&(s.globals.dataLabelsRects[i]=[]),s.globals.dataLabelsRects[i].push({x:t,y:e,width:u,height:d}),void 0!==s.globals.dataLabelsRects[i][s.globals.dataLabelsRects[i].length-2]){var h=s.globals.dataLabelsRects[i][void 0!==s.globals.lastDrawnDataLabelsIndexes[i]?s.globals.lastDrawnDataLabelsIndexes[i][s.globals.lastDrawnDataLabelsIndexes[i].length-1]:0];(t>h.x+h.width+2||e>h.y+h.height+2||t+u<h.x)&&(l=!0)}return(0===r||a)&&(l=!0),{x:t,y:e,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t,e,n){var i=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=this.w,o=new y(this.ctx),s=a.config.dataLabels,l=0,c=0,u=n,d=null;if(!s.enabled||!Array.isArray(t.x))return d;d=o.group({class:"apexcharts-data-labels"});for(var h=0;h<t.x.length;h++)if(l=t.x[h]+s.offsetX,c=t.y[h]+s.offsetY+r,!isNaN(l)){1===n&&0===h&&(u=0),1===n&&1===h&&(u=1);var f=a.globals.series[e][u],g="",p=function(t){return a.config.dataLabels.formatter(t,{ctx:i.ctx,seriesIndex:e,dataPointIndex:u,w:a})};if("bubble"===a.config.chart.type){g=p(f=a.globals.seriesZ[e][u]),c=t.y[h];var m=new I(this.ctx),v=m.centerTextInBubble(c,e,u);c=v.y}else void 0!==f&&(g=p(f));this.plotDataLabelsText({x:l,y:c,text:g,i:e,j:u,parent:d,offsetCorrection:!0,dataLabelsConfig:a.config.dataLabels})}return d}},{key:"plotDataLabelsText",value:function(t){var e=this.w,n=new y(this.ctx),i=t.x,r=t.y,a=t.i,o=t.j,s=t.text,l=t.textAnchor,c=t.parent,u=t.dataLabelsConfig,d=t.color,h=t.alwaysDrawDataLabel,f=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(a)<0)){var g={x:i,y:r,drawnextLabel:!0};f&&(g=this.dataLabelsCorrection(i,r,s,a,o,h,parseInt(u.style.fontSize,10))),e.globals.zoomed||(i=g.x,r=g.y),g.textRects&&(i+g.textRects.width<-20||i>e.globals.gridWidth+20)&&(s="");var p=e.globals.dataLabels.style.colors[a];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(p=e.globals.dataLabels.style.colors[o]),d&&(p=d);var v=u.offsetX,x=u.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(v=0,x=0),g.drawnextLabel){var b=n.drawText({width:100,height:parseInt(u.style.fontSize,10),x:i+v,y:r+x,foreColor:p,textAnchor:l||u.textAnchor,text:s,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight||"normal"});if(b.attr({class:"apexcharts-datalabel",cx:i,cy:r}),u.dropShadow.enabled){var w=u.dropShadow;new m(this.ctx).dropShadow(b,w)}c.add(b),void 0===e.globals.lastDrawnDataLabelsIndexes[a]&&(e.globals.lastDrawnDataLabelsIndexes[a]=[]),e.globals.lastDrawnDataLabelsIndexes[a].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var n=this.w,i=n.config.dataLabels.background,r=i.padding,a=i.padding/2,o=e.width,s=e.height,l=new y(this.ctx).drawRect(e.x-r,e.y-a/2,o+2*r,s+a,i.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,i.opacity,i.borderWidth,i.borderColor);return i.dropShadow.enabled&&new m(this.ctx).dropShadow(l,i.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<e.length;n++){var i=e[n],r=i.getBBox(),a=null;if(r.width&&r.height&&(a=this.addBackgroundToDataLabel(i,r)),a){i.parentNode.insertBefore(a.node,i);var o=i.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?a.attr({fill:o}):a.animate().attr({fill:o}),i.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),i=0;i<e.length;i++)n&&n.insertBefore(e[i],n.nextSibling)}}]),t}(),P=function(){function t(n){e(this,t),this.w=n.w,this.barCtx=n}return i(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,n=t.y,i=t.y1,r=t.y2,a=t.i,o=t.j,s=t.realIndex,l=t.series,c=t.barHeight,u=t.barWidth,d=t.barYPosition,h=t.visibleSeries,f=t.renderedPath,g=this.w,p=new y(this.barCtx.ctx),m=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,v=e+parseFloat(u*h),x=n+parseFloat(c*h);g.globals.isXNumeric&&!g.globals.isBarHorizontal&&(v=e+parseFloat(u*(h+1)),x=n+parseFloat(c*(h+1))-m);var b,w=e,_=n,S=g.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==d&&this.barCtx.isTimelineBar&&(x=d,_=d);var k=S.offsetX,A=S.offsetY,M={width:0,height:0};if(g.config.dataLabels.enabled){var T=String(g.globals.minY).length>String(g.globals.maxY).length?g.globals.minY:g.globals.maxY;M=p.getTextRects(g.globals.yLabelFormatters[0](T),parseFloat(S.style.fontSize))}var I={x:e,y:n,i:a,j:o,renderedPath:f,bcx:v,bcy:x,barHeight:c,barWidth:u,textRects:M,strokeWidth:m,dataLabelsX:w,dataLabelsY:_,barDataLabelsConfig:C,offX:k,offY:A};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(I):this.calculateColumnsDataLabelsPosition(I),f.attr({cy:b.bcy,cx:b.bcx,j:o,val:l[a][o],barHeight:c,barWidth:u}),this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isTimelineBar?[i,r]:l[a][o],i:s,j:o,barWidth:u,barHeight:c,textRects:M,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,n=this.w,i=t.i,r=t.j,a=t.y,o=t.bcx,s=t.barWidth,l=t.barHeight,c=t.textRects,u=t.dataLabelsY,d=t.barDataLabelsConfig,h=t.strokeWidth,f=t.offX,g=t.offY;l=Math.abs(l);var p="vertical"===n.config.plotOptions.bar.dataLabels.orientation;o-=h/2,e=n.globals.isXNumeric?o-s/2+f:o-n.globals.gridWidth/n.globals.dataPoints+s/2+f,p&&(e=e+c.height/2-h/2-2);var m=this.barCtx.series[i][r]<0,v=a;switch(this.barCtx.isReversed&&(v=a-l+(m?2*l:0),a-=l),d.position){case"center":u=p?m?v+l/2+g:v+l/2-g:m?v-l/2+c.height/2+g:v+l/2+c.height/2-g;break;case"bottom":u=p?m?v+l+g:v+l-g:m?v-l+c.height+h+g:v+l-c.height/2+h-g;break;case"top":u=p?m?v+g:v-g:m?v-c.height/2-g:v+c.height+g}return n.config.chart.stacked||(u<0?u=0+h:u+c.height/3>n.globals.gridHeight&&(u=n.globals.gridHeight-h)),{bcx:o,bcy:a,dataLabelsX:e,dataLabelsY:u}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,n=t.x,i=t.i,r=t.j,a=t.bcy,o=t.barHeight,s=t.barWidth,l=t.textRects,c=t.dataLabelsX,u=t.strokeWidth,d=t.barDataLabelsConfig,h=t.offX,f=t.offY,g=e.globals.gridHeight/e.globals.dataPoints;s=Math.abs(s);var p=a-(this.barCtx.isTimelineBar?0:g)+o/2+l.height/2+f-3,m=this.barCtx.series[i][r]<0,v=n;switch(this.barCtx.isReversed&&(v=n+s-(m?2*s:0),n=e.globals.gridWidth-s),d.position){case"center":c=m?v+s/2-h:v-s/2+h;break;case"bottom":c=m?v+s-u-Math.round(l.width/2)-h:v-s+u+Math.round(l.width/2)+h;break;case"top":c=m?v-u+Math.round(l.width/2)-h:v-u-Math.round(l.width/2)+h}return e.config.chart.stacked||(c<0?c=c+l.width+u:c+l.width/2>e.globals.gridWidth&&(c=e.globals.gridWidth-l.width-u)),{bcx:n,bcy:a,dataLabelsX:c,dataLabelsY:p}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,n=t.y,i=t.val,r=t.i,a=t.j,s=t.textRects,l=t.barHeight,c=t.barWidth,u=t.dataLabelsConfig,d=this.w,h="rotate(0)";"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&(h="rotate(-90, ".concat(e,", ").concat(n,")"));var f=new D(this.barCtx.ctx),g=new y(this.barCtx.ctx),p=u.formatter,m=null,v=d.globals.collapsedSeriesIndices.indexOf(r)>-1;if(u.enabled&&!v){m=g.group({class:"apexcharts-data-labels",transform:h});var x="";void 0!==i&&(x=p(i,{seriesIndex:r,dataPointIndex:a,w:d})),0===i&&d.config.chart.stacked&&(x="");var b=d.globals.series[r][a]<=0,w=d.config.plotOptions.bar.dataLabels.position;"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&("top"===w&&(u.textAnchor=b?"end":"start"),"center"===w&&(u.textAnchor="middle"),"bottom"===w&&(u.textAnchor=b?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<g.getTextRects(x,parseFloat(u.style.fontSize)).width&&(x=""),d.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?((c=Math.abs(d.globals.series[r][a])/this.barCtx.invertedYRatio[this.barCtx.yaxisIndex])>0&&s.width/1.6>c||c<0&&s.width/1.6<c)&&(x=""):(l=Math.abs(d.globals.series[r][a])/this.barCtx.yRatio[this.barCtx.yaxisIndex],s.height/1.6>l&&(x="")));var _=o({},u);this.barCtx.isHorizontal&&i<0&&("start"===u.textAnchor?_.textAnchor="end":"end"===u.textAnchor&&(_.textAnchor="start")),f.plotDataLabelsText({x:e,y:n,text:x,i:r,j:a,parent:m,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}}]),t}(),L=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.legendInactiveClass="legend-mouseover-inactive"}return i(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector("[seriesName='".concat(p.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),n=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(t,e){var n=this.w;function i(n){for(var i=0;i<n.length;i++)n[i].index===e&&t.node.classList.add("apexcharts-series-collapsed")}i(n.globals.collapsedSeries),i(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.w,r=p.clone(i.globals.initialSeries);i.globals.previousPaths=[],n?(i.globals.collapsedSeries=[],i.globals.ancillaryCollapsedSeries=[],i.globals.collapsedSeriesIndices=[],i.globals.ancillaryCollapsedSeriesIndices=[]):r=this.emptyCollapsedSeries(r),i.config.series=r,t&&(e&&(i.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,n=0;n<t.length;n++)e.globals.collapsedSeriesIndices.indexOf(n)>-1&&(t[n].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var n=this.w,i=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1,a=null,o=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(a=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"))):a=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")):a=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var s=0;s<i.length;s++)i[s].classList.add(this.legendInactiveClass);null!==a&&(n.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<i.length;l++)i[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var n=this,i=this.w,r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),a=function(t){for(var e=0;e<r.length;e++)r[e].classList[t](n.legendInactiveClass)};if("mousemove"===t.type){var o=parseInt(e.getAttribute("rel"),10)-1;a("add"),function(t){for(var e=0;e<r.length;e++){var i=parseInt(r[e].getAttribute("val"),10);i>=t.from&&i<=t.to&&r[e].classList.remove(n.legendInactiveClass)}}(i.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===t.type&&a("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.w,n=0;if(e.config.series.length>1)for(var i=e.config.series.map((function(n,i){var r=!1;return t&&(r="bar"===e.config.series[i].type||"column"===e.config.series[i].type),n.data&&n.data.length>0&&!r?i:-1})),r=0;r<i.length;r++)if(-1!==i[r]){n=i[r];break}return n}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,n,i){for(var r=e[n].childNodes,a={type:i,paths:[],realIndex:e[n].getAttribute("data:realIndex")},o=0;o<r.length;o++)if(r[o].hasAttribute("pathTo")){var s=r[o].getAttribute("pathTo");a.paths.push({d:s})}t.globals.previousPaths.push(a)}t.globals.previousPaths=[],["line","area","bar","candlestick","radar"].forEach((function(n){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series")),r=0;r<i.length;r++)e(i,r,n)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series");if(n.length>0)for(var i=0;i<n.length;i++){for(var r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series[data\\:realIndex='".concat(i,"'] rect")),a=[],o=0;o<r.length;o++)a.push({color:r[o].getAttribute("color")});t.globals.previousPaths.push(a)}t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(n.length>0)for(var i=0;i<n.length;i++){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(i,"'] circle")),a=[],o=0;o<r.length;o++)a.push({x:r[o].getAttribute("cx"),y:r[o].getAttribute("cy"),r:r[o].getAttribute("r")});e.globals.previousPaths.push(a)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,n=new y(this.ctx),i=t.globals.svgWidth/2,r=t.globals.svgHeight/2,a="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(i=10,a="start"):"right"===e.align&&(i=t.globals.svgWidth-10,a="end"),"top"===e.verticalAlign?r=50:"bottom"===e.verticalAlign&&(r=t.globals.svgHeight-50),i+=e.offsetX,r=r+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var o=n.drawText({x:i,y:r,text:e.text,textAnchor:a,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,n=0;n<t.length;n++)if(0===t[n].length)for(var i=0;i<t[e.globals.maxValsInArrayIndex].length;i++)t[n].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,n=this.filteredSeriesX(),i=0;i<n.length-1;i++)if(n[i][0]!==n[i+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}))}}]),t}(),E=function(){function t(n){e(this,t),this.w=n.w,this.barCtx=n}return i(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<t.length;n++)if(t[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[n].length),e.globals.isXNumeric)for(var i=0;i<t[n].length;i++)e.globals.seriesX[n][i]>e.globals.minX&&e.globals.seriesX[n][i]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1)}},{key:"initialPositions",value:function(){var t,e,n,i,r,a,o,s,l=this.w,c=l.globals.dataPoints;if(this.barCtx.isTimelineBar&&(c=l.globals.labels.length),this.barCtx.isHorizontal)r=(n=l.globals.gridHeight/c)/this.barCtx.seriesLen,l.globals.isXNumeric&&(r=(n=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),r=r*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(n-r*this.barCtx.seriesLen)/2;else{if(i=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(i=l.globals.gridWidth/l.globals.dataPoints),a=i/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var u=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(u=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/u>0&&(i=l.globals.minXDiff/u),(a=i/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}o=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(i-a*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:n,xDivision:i,barHeight:r,barWidth:a,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(t,e,n,i){var r=this.w,a=new M(this.barCtx.ctx),o=null,s=this.barCtx.barOptions.distributed?n:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(i){t[e][n]>=i.from&&t[e][n]<=i.to&&(o=i.color)})),r.config.series[e].data[n]&&r.config.series[e].data[n].fillColor&&(o=r.config.series[e].data[n].fillColor),a.fillPath({seriesNumber:this.barCtx.barOptions.distributed?s:i,dataPointIndex:n,color:o,value:t[e][n]})}},{key:"getStrokeWidth",value:function(t,e,n){var i=0,r=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[t][e],r.config.stroke.show&&(this.barCtx.isNullValue||(i=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),i}},{key:"barBackground",value:function(t){var e=t.j,n=t.i,i=t.x1,r=t.x2,a=t.y1,o=t.y2,s=t.elSeries,l=this.w,c=new y(this.barCtx.ctx),u=new L(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===n){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e-=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=c.drawRect(void 0!==i?i:0,void 0!==a?a:0,void 0!==r?r:l.globals.gridWidth,void 0!==o?o:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[e],this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(d),d.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,n=t.barXPosition,i=t.yRatio,r=t.y1,a=t.y2,o=t.strokeWidth,s=t.series,l=t.realIndex,c=t.i,u=t.j,d=t.w,h=new y(this.barCtx.ctx);(o=Array.isArray(o)?o[l]:o)||(o=0);var f=this.getRoundedBars(d,{barWidth:e,strokeWidth:o,yRatio:i,barXPosition:n,y1:r,y2:a},s,c,u),g=n,p=n+e,m=h.move(g,f.y1),v=h.move(g,f.y1);return d.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(l,u,!1)),{pathTo:m=m+h.line(g,f.y2)+f.endingPath+h.line(p-o,f.y2)+h.line(p-o,f.y1)+f.startingPath+"z",pathFrom:v=v+h.line(g,r)+h.line(p-o,r)+h.line(p-o,r)+h.line(p-o,r)+h.line(g,r)}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,n=t.barHeight,i=t.x1,r=t.x2,a=t.strokeWidth,o=t.series,s=t.realIndex,l=t.i,c=t.j,u=t.w,d=new y(this.barCtx.ctx);(a=Array.isArray(a)?a[s]:a)||(a=0);var h=this.getRoundedBars(u,{barHeight:n,strokeWidth:a,barYPosition:e,x2:r,x1:i},o,l,c),f=d.move(h.x1,e),g=d.move(h.x1,e);u.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(s,c,!1));var p=e,m=e+n;return{pathTo:f=f+d.line(h.x2,p)+h.endingPath+d.line(h.x2,m-a)+d.line(h.x1,m-a)+h.startingPath+"z",pathFrom:g=g+d.line(i,p)+d.line(i,m-a)+d.line(i,m-a)+d.line(i,m-a)+d.line(i,p)}}},{key:"getRoundedBars",value:function(t,e,n,i,r){var a=new y(this.barCtx.ctx),o=Array.isArray(e.strokeWidth)?e.strokeWidth[i]:e.strokeWidth;if(o||(o=0),this.barCtx.isHorizontal){var s=null,l="",c=e.x2,u=e.x1;if(void 0!==n[i][r]||null!==n[i][r]){var d=e.barHeight/2-o;switch(n[i][r]<0&&(d=-e.barHeight/2-o),d>Math.abs(c-u)&&(d=Math.abs(c-u)),"rounded"===this.barCtx.barOptions.endingShape&&(c=e.x2-d/2),"rounded"===this.barCtx.barOptions.startingShape&&(u=e.x1+d/2),this.barCtx.barOptions.endingShape){case"flat":s=a.line(c,e.barYPosition+e.barHeight-o);break;case"rounded":s=a.quadraticCurve(c+d,e.barYPosition+(e.barHeight-o)/2,c,e.barYPosition+e.barHeight-o)}switch(this.barCtx.barOptions.startingShape){case"flat":l=a.line(u,e.barYPosition+e.barHeight-o);break;case"rounded":l=a.quadraticCurve(u-d,e.barYPosition+e.barHeight/2,u,e.barYPosition)}}return{endingPath:s,startingPath:l,x2:c,x1:u}}var h=null,f="",g=e.y2,p=e.y1;if(void 0!==n[i][r]||null!==n[i][r]){var m=e.barWidth/2-o;switch(n[i][r]<0&&(m=-e.barWidth/2-o),m>Math.abs(g-p)&&(m=Math.abs(g-p)),"rounded"===this.barCtx.barOptions.endingShape&&(g+=m/2),"rounded"===this.barCtx.barOptions.startingShape&&(p-=m/2),this.barCtx.barOptions.endingShape){case"flat":h=a.line(e.barXPosition+e.barWidth-o,g);break;case"rounded":h=a.quadraticCurve(e.barXPosition+(e.barWidth-o)/2,g-m,e.barXPosition+e.barWidth-o,g)}switch(this.barCtx.barOptions.startingShape){case"flat":f=a.line(e.barXPosition+e.barWidth-o,p);break;case"rounded":f=a.quadraticCurve(e.barXPosition+(e.barWidth-o)/2,p+m,e.barXPosition,p)}}return{endingPath:h,startingPath:f,y2:g,y1:p}}}]),t}(),N=function(){function t(n,i){e(this,t),this.ctx=n,this.w=n.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===r.config.xaxis.type&&r.globals.seriesRangeBarTimeline.length,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new E(this)}return i(t,[{key:"draw",value:function(t,e){var n=this.w,i=new y(this.ctx),r=new w(this.ctx,n);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var a=i.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,l=0;s<t.length;s++,l++){var c,u,d,h,f=void 0,g=void 0,m=[],v=[],x=n.globals.comboCharts?e[s]:s,b=i.group({class:"apexcharts-series",rel:s+1,seriesName:p.escapeString(n.globals.seriesNames[x]),"data:realIndex":x});this.ctx.series.addCollapsedClassToSeries(b,x),t[s].length>0&&(this.visibleI=this.visibleI+1);var _=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=x),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();g=C.y,_=C.barHeight,u=C.yDivision,h=C.zeroW,f=C.x,S=C.barWidth,c=C.xDivision,d=C.zeroH,this.horizontal||v.push(f+S/2);for(var k=i.group({class:"apexcharts-datalabels","data:realIndex":x}),A=0;A<n.globals.dataPoints;A++){var M=this.barHelpers.getStrokeWidth(s,A,x),T=null,I={indexes:{i:s,j:A,realIndex:x,bc:l},x:f,y:g,strokeWidth:M,elSeries:b};this.isHorizontal?(T=this.drawBarPaths(o(o({},I),{},{barHeight:_,zeroW:h,yDivision:u})),S=this.series[s][A]/this.invertedYRatio):(T=this.drawColumnPaths(o(o({},I),{},{xDivision:c,barWidth:S,zeroH:d})),_=this.series[s][A]/this.yRatio[this.yaxisIndex]),g=T.y,f=T.x,A>0&&v.push(f+S/2),m.push(g);var D=this.barHelpers.getPathFillColor(t,s,A,x);this.renderSeries({realIndex:x,pathFill:D,j:A,i:s,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:M,elSeries:b,x:f,y:g,series:t,barHeight:_,barWidth:S,elDataLabelsWrap:k,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[x]=v,n.globals.seriesYvalues[x]=m,a.add(b)}return a}},{key:"renderSeries",value:function(t){var e=t.realIndex,n=t.pathFill,i=t.lineFill,r=t.j,a=t.i,o=t.pathFrom,s=t.pathTo,l=t.strokeWidth,c=t.elSeries,u=t.x,d=t.y,h=t.y1,f=t.y2,g=t.series,p=t.barHeight,v=t.barWidth,x=t.barYPosition,b=t.elDataLabelsWrap,w=t.visibleSeries,_=t.type,S=this.w,C=new y(this.ctx);i||(i=this.barOptions.distributed?S.globals.stroke.colors[r]:S.globals.stroke.colors[e]),S.config.series[a].data[r]&&S.config.series[a].data[r].strokeColor&&(i=S.config.series[a].data[r].strokeColor),this.isNullValue&&(n="none");var k=C.renderPaths({i:a,j:r,realIndex:e,pathFrom:o,pathTo:s,stroke:i,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:n,animationDelay:r/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(_,"-area")});k.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")")),void 0!==h&&void 0!==f&&(k.attr("data-range-y1",h),k.attr("data-range-y2",f)),new m(this.ctx).setSelectionFilter(k,e,r),c.add(k);var A=new P(this).handleBarDataLabels({x:u,y:d,y1:h,y2:f,i:a,j:r,series:g,realIndex:e,barHeight:p,barWidth:v,barYPosition:x,renderedPath:k,visibleSeries:w});return null!==A&&b.add(A),c.add(b),c}},{key:"drawBarPaths",value:function(t){var e,n=t.indexes,i=t.barHeight,r=t.zeroW,a=t.y,o=t.yDivision,s=t.elSeries,l=this.w,c=n.i,u=n.j;l.globals.isXNumeric&&(a=(l.globals.seriesX[c][u]-l.globals.minX)/this.invertedXRatio-i);var d=a+i*this.visibleI,h=this.barHelpers.getBarpaths({barYPosition:d,barHeight:i,x1:r,x2:e=null==this.series[c][u]?r:r+this.series[c][u]/this.invertedYRatio-2*(this.isReversed?this.series[c][u]/this.invertedYRatio:0),strokeWidth:t.strokeWidth,series:this.series,realIndex:n.realIndex,i:c,j:u,w:l});return l.globals.isXNumeric||(a+=o),this.barHelpers.barBackground({j:u,i:c,y1:d-i*this.visibleI,y2:i*this.seriesLen,elSeries:s}),{pathTo:h.pathTo,pathFrom:h.pathFrom,x:e,y:a,barYPosition:d}}},{key:"drawColumnPaths",value:function(t){var e,n=t.indexes,i=t.x,r=t.xDivision,a=t.barWidth,o=t.zeroH,s=t.strokeWidth,l=t.elSeries,c=this.w,u=n.i,d=n.j,h=n.bc;if(c.globals.isXNumeric){var f=u;c.globals.seriesX[u].length||(f=c.globals.maxValsInArrayIndex),i=(c.globals.seriesX[f][d]-c.globals.minX)/this.xRatio-a*this.seriesLen/2}var g=i+a*this.visibleI,p=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:a,y1:o,y2:e=null==this.series[u][d]?o:o-this.series[u][d]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[u][d]/this.yRatio[this.yaxisIndex]:0),strokeWidth:s,series:this.series,realIndex:n.realIndex,i:u,j:d,w:c});return c.globals.isXNumeric||(i+=r),this.barHelpers.barBackground({bc:h,j:d,i:u,x1:g-s/2-a*this.visibleI,x2:a*this.seriesLen+s/2,elSeries:l}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:i,y:e,barXPosition:g}}},{key:"getPreviousPath",value:function(t,e){for(var n,i=this.w,r=0;r<i.globals.previousPaths.length;r++){var a=i.globals.previousPaths[r];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(t,10)&&void 0!==i.globals.previousPaths[r].paths[e]&&(n=i.globals.previousPaths[r].paths[e].d)}return n}}]),t}(),R=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return i(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var n=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var n=this.w.globals.locale,i=this.w.config.xaxis.labels.datetimeUTC,r=["\0"].concat(d(n.months)),a=[""].concat(d(n.shortMonths)),o=[""].concat(d(n.days)),s=[""].concat(d(n.shortDays));function l(t,e){var n=t+"";for(e=e||2;n.length<e;)n="0"+n;return n}var c=i?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var u=(i?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+l(u))).replace(/(^|[^\\])M/g,"$1"+u);var h=i?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+l(h))).replace(/(^|[^\\])d/g,"$1"+h);var f=i?t.getUTCHours():t.getHours(),g=f>12?f-12:0===f?12:f;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(f))).replace(/(^|[^\\])H/g,"$1"+f)).replace(/(^|[^\\])hh+/g,"$1"+l(g))).replace(/(^|[^\\])h/g,"$1"+g);var p=i?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var m=i?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var v=i?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(v,3)),v=Math.round(v/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(v)),v=Math.round(v/10);var y=f<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var x=y.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var b=-t.getTimezoneOffset(),w=i||!b?"Z":b>0?"+":"-";if(!i){var _=(b=Math.abs(b))%60;w+=l(Math.floor(b/60))+":"+l(_)}e=e.replace(/(^|[^\\])K/g,"$1"+w);var S=(i?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(r[0],"g"),r[u])).replace(new RegExp(a[0],"g"),a[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,n){var i=this.w;void 0!==i.config.xaxis.min&&(t=i.config.xaxis.min),void 0!==i.config.xaxis.max&&(e=i.config.xaxis.max);var r=this.getDate(t),a=this.getDate(e),o=this.formatDate(r,"yyyy MM dd HH mm").split(" "),s=this.formatDate(a,"yyyy MM dd HH mm").split(" ");return{minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,n){return this.determineDaysOfMonths(t,e)-n}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,n){var i=this.daysCntOfYear[e]+n;return e>1&&this.isLeapYear()&&i++,i}},{key:"determineDaysOfMonths",value:function(t,e){var n=30;switch(t=p.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(n=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:n=31}return n}}]),t}(),O=function(t){s(r,t);var n=u(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"draw",value:function(t,e){var n=this.w,i=new y(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var r=i.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),a=0;a<t.length;a++){var s,l,c,u=void 0,d=void 0,h=void 0,f=n.globals.comboCharts?e[a]:a,g=i.group({class:"apexcharts-series",seriesName:p.escapeString(n.globals.seriesNames[f]),rel:a+1,"data:realIndex":f});t[a].length>0&&(this.visibleI=this.visibleI+1);var m=0,v=0;this.yRatio.length>1&&(this.yaxisIndex=f);var x=this.barHelpers.initialPositions();d=x.y,c=x.zeroW,u=x.x,v=x.barWidth,s=x.xDivision,l=x.zeroH;for(var b=i.group({class:"apexcharts-datalabels","data:realIndex":f}),w=0;w<n.globals.dataPoints;w++){var _=this.barHelpers.getStrokeWidth(a,w,f),S=this.seriesRangeStart[a][w],C=this.seriesRangeEnd[a][w],k=null,A=null,M={x:u,y:d,strokeWidth:_,elSeries:g};if(h=x.yDivision,m=x.barHeight,this.isHorizontal){A=d+m*this.visibleI;var T=(h-m*this.seriesLen)/2;if(void 0===n.config.series[a].data[w])break;if(this.isTimelineBar&&n.config.series[a].data[w].x){var I=this.detectOverlappingBars({i:a,j:w,barYPosition:A,srty:T,barHeight:m,yDivision:h,initPositions:x});m=I.barHeight,A=I.barYPosition}v=(k=this.drawRangeBarPaths(o({indexes:{i:a,j:w,realIndex:f},barHeight:m,barYPosition:A,zeroW:c,yDivision:h,y1:S,y2:C},M))).barWidth}else m=(k=this.drawRangeColumnPaths(o({indexes:{i:a,j:w,realIndex:f},zeroH:l,barWidth:v,xDivision:s},M))).barHeight;d=k.y,u=k.x;var D=this.barHelpers.getPathFillColor(t,a,w,f);this.renderSeries({realIndex:f,pathFill:D,lineFill:n.globals.stroke.colors[f],j:w,i:a,x:u,y:d,y1:S,y2:C,pathFrom:k.pathFrom,pathTo:k.pathTo,strokeWidth:_,elSeries:g,series:t,barHeight:m,barYPosition:A,barWidth:v,elDataLabelsWrap:b,visibleSeries:this.visibleI,type:"rangebar"})}r.add(g)}return r}},{key:"detectOverlappingBars",value:function(t){var e=t.i,n=t.j,i=t.barYPosition,r=t.srty,a=t.barHeight,o=t.yDivision,s=t.initPositions,l=this.w,c=[],u=l.config.series[e].data[n].rangeName,d=l.config.series[e].data[n].x,h=l.globals.labels.indexOf(d),f=l.globals.seriesRangeBarTimeline[e].findIndex((function(t){return t.x===d&&t.overlaps.length>0}));return i=r+a*this.visibleI+o*h,f>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRangeBarTimeline[e][f].overlaps).indexOf(u)>-1&&(i=(a=s.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+a*(this.visibleI+c.indexOf(u))+o*h),{barYPosition:i,barHeight:a}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,n=t.x,i=t.xDivision,r=t.barWidth,a=t.zeroH,o=this.w,s=e.i,l=e.j,c=this.yRatio[this.yaxisIndex],u=e.realIndex,d=this.getRangeValue(u,l),h=Math.min(d.start,d.end),f=Math.max(d.start,d.end);o.globals.isXNumeric&&(n=(o.globals.seriesX[s][l]-o.globals.minX)/this.xRatio-r/2);var g=n+r*this.visibleI;null==this.series[s][l]?h=a:(h=a-h/c,f=a-f/c);var p=Math.abs(f-h),m=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:r,y1:h,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:u,j:l,w:o});return o.globals.isXNumeric||(n+=i),{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:p,x:n,y:f,barXPosition:g}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,n=t.y,i=t.yDivision,r=t.barHeight,a=t.barYPosition,o=t.zeroW,s=this.w,l=o+t.y1/this.invertedYRatio,c=o+t.y2/this.invertedYRatio,u=Math.abs(c-l),d=this.barHelpers.getBarpaths({barYPosition:a,barHeight:r,x1:l,x2:c,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,j:e.j,w:s});return s.globals.isXNumeric||(n+=i),{pathTo:d.pathTo,pathFrom:d.pathFrom,barWidth:u,x:c,y:n}}},{key:"getRangeValue",value:function(t,e){var n=this.w;return{start:n.globals.seriesRangeStart[t][e],end:n.globals.seriesRangeEnd[t][e]}}},{key:"getTooltipValues",value:function(t){var e=t.ctx,n=t.seriesIndex,i=t.dataPointIndex,r=t.y1,a=t.y2,o=t.w,s=o.globals.seriesRangeStart[n][i],l=o.globals.seriesRangeEnd[n][i],c=o.globals.labels[i],u=o.config.series[n].name,d=o.config.tooltip.y.formatter,h=o.config.tooltip.y.title.formatter,f={w:o,seriesIndex:n,dataPointIndex:i};"function"==typeof h&&(u=h(u,f)),r&&a&&(s=r,l=a,o.config.series[n].data[i].x&&(c=o.config.series[n].data[i].x+":"),"function"==typeof d&&(c=d(c,f)));var g="",p="",m=o.globals.colors[n];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var v=new R(e);g=v.formatDate(v.getDate(s),o.config.tooltip.x.format),p=v.formatDate(v.getDate(l),o.config.tooltip.x.format)}else g=s,p=l;else g=o.config.tooltip.x.formatter(s),p=o.config.tooltip.x.formatter(l);return{start:s,end:l,startVal:g,endVal:p,ylabel:c,color:m,seriesName:u}}},{key:"buildCustomTooltipHTML",value:function(t){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t.color+'">'+(t.seriesName||"")+'</span></div><div> <span class="category">'+t.ylabel+' </span> <span class="value start-value">'+t.start+'</span> <span class="separator">-</span> <span class="value end-value">'+t.end+"</span></div></div>"}}]),r}(N),z=function(){function t(n){e(this,t),this.opts=n}return i(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,p.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var e=t.seriesIndex,n=t.dataPointIndex,i=t.w;return'<div class="apexcharts-tooltip-candlestick"><div>Open: <span class="value">'+i.globals.seriesCandleO[e][n]+'</span></div><div>High: <span class="value">'+i.globals.seriesCandleH[e][n]+'</span></div><div>Low: <span class="value">'+i.globals.seriesCandleL[e][n]+'</span></div><div>Close: <span class="value">'+i.globals.seriesCandleC[e][n]+"</span></div></div>"}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){var n=e.seriesIndex,i=e.dataPointIndex,r=e.w;return r.globals.seriesRangeEnd[n][i]-r.globals.seriesRangeStart[n][i]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=new O(t.ctx,null),n=e.getTooltipValues(t);return e.buildCustomTooltipHTML({color:n.color,seriesName:n.seriesName,ylabel:n.ylabel,start:n.startVal,end:n.endVal})}(t):function(t){var e=new O(t.ctx,null),n=e.getTooltipValues(t);return e.buildCustomTooltipHTML({color:n.color,seriesName:n.seriesName,ylabel:n.ylabel,start:n.start,end:n.end})}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return p.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach((function(e,n){t.yaxis[n].min=0,t.yaxis[n].max=100})),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,n){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return p.isNumber(t)?Math.floor(t):t};var i=t.xaxis.labels.formatter,r=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return n&&n.length&&(r=n.map((function(t){return t.toString()}))),r&&r.length&&(t.xaxis.labels.formatter=function(t){return p.isNumber(t)?i(r[Math.floor(t)-1]):i(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}}]),t}(),B=function(){function n(t){e(this,n),this.opts=t}return i(n,[{key:"init",value:function(e){var n=e.responsiveOverride,i=this.opts,r=new k,a=new z(i);this.chartType=i.chart.type,"histogram"===this.chartType&&(i.chart.type="bar",i=p.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},i)),i=this.extendYAxis(i),i=this.extendAnnotations(i);var o=r.init(),s={};if(i&&"object"===t(i)){var l={};l=-1!==["line","area","bar","candlestick","rangeBar","histogram","bubble","scatter","heatmap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?a[i.chart.type]():a.line(),i.chart.brush&&i.chart.brush.enabled&&(l=a.brush(l)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=a.stacked100(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},n||(i.xaxis.convertedCatToNumeric=!1),((i=this.checkForCatToNumericXAxis(this.chartType,l,i)).chart.sparkline&&i.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=a.sparkline(l)),s=p.extend(o,l)}var c=p.extend(s,window.Apex);return o=p.extend(c,i),this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(t,e,n){var i=new z(n);return"bar"===t&&n.plotOptions&&n.plotOptions.bar&&n.plotOptions.bar.horizontal||"pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t||!("datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type)||"between"===(n.xaxis.tickPlacement?n.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement)||(n=i.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(t,e){var n=new k;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=p.extend(t.yaxis,window.Apex.yaxis)),t.yaxis=t.yaxis.constructor!==Array?[p.extend(n.yAxis,t.yaxis)]:p.extendArray(t.yaxis,n.yAxis);var i=!1;t.yaxis.forEach((function(t){t.logarithmic&&(i=!0)}));var r=t.series;return e&&!r&&(r=e.config.series),i&&r.length!==t.yaxis.length&&r.length&&(t.yaxis=r.map((function(e,i){if(e.name||(r[i].name="series-".concat(i+1)),t.yaxis[i])return t.yaxis[i].seriesName=r[i].name,t.yaxis[i];var a=p.extend(n.yAxis,t.yaxis[0]);return a.show=!1,a}))),i&&r.length>1&&r.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new k;return t.annotations.yaxis=p.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new k;return t.annotations.xaxis=p.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new k;return t.annotations.points=p.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&("barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(console.warn('crosshairs.width = "barWidth" is only supported in single series, not in a multi-series barChart.'),e.xaxis.crosshairs.width="tickWidth"),e.plotOptions.bar.horizontal&&(e.states.hover.type="none",e.tooltip.shared=!1),e.tooltip.followCursor||(console.warn("followCursor option in shared columns cannot be turned off. Please set %ctooltip.followCursor: true","color: blue;"),e.tooltip.followCursor=!0)),"candlestick"===e.chart.type&&e.yaxis[0].reversed&&(console.warn("Reversed y-axis in candlestick chart is not supported."),e.yaxis[0].reversed=!1),e.chart.group&&0===e.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(e.stroke.width)&&"line"!==e.chart.type&&"area"!==e.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),e.stroke.width=e.stroke.width[0]),e}}]),n}(),F=function(){function t(){e(this,t)}return i(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBarTimeline=[],t.seriesPercent=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=p.extend({},t),e.initialSeries=p.clone(t.series),e.lastXAxis=p.clone(e.initialConfig.xaxis),e.lastYAxis=p.clone(e.initialConfig.yaxis),e}}]),t}(),H=function(){function t(n){e(this,t),this.opts=n}return i(t,[{key:"init",value:function(){var t=new B(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new F).init(t)}}}]),t}(),V=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.coreUtils=new w(this.ctx)}return i(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new L(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new L(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!=t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){var n=this.w.config,i=this.w.globals;n.xaxis.sorted&&("datetime"===n.xaxis.type?t[e].data.sort((function(t,e){return new Date(t[0]).getTime()-new Date(e[0]).getTime()})):"numeric"===n.xaxis.type&&t[e].data.sort((function(t,e){return t[0]-e[0]})));for(var r=0;r<t[e].data.length;r++)if(void 0!==t[e].data[r][1]&&(Array.isArray(t[e].data[r][1])&&4===t[e].data[r][1].length?this.twoDSeries.push(p.parseNumber(t[e].data[r][1][3])):this.twoDSeries.push(p.parseNumber(5===t[e].data[r].length?t[e].data[r][4]:t[e].data[r][1])),i.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var a=new Date(t[e].data[r][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(t[e].data[r][0]);for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o][2]&&(this.threeDSeries.push(t[e].data[o][2]),i.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var n=this.w.config,i=this.w.globals,r=new R(this.ctx),a=e;i.collapsedSeriesIndices.indexOf(e)>-1&&(a=this.activeSeriesIndex),n.xaxis.sorted&&("datetime"===n.xaxis.type?t[e].data.sort((function(t,e){return new Date(t.x).getTime()-new Date(e.x).getTime()})):"numeric"===n.xaxis.type&&t[e].data.sort((function(t,e){return t.x-e.x})));for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o].y&&(Array.isArray(t[e].data[o].y)?this.twoDSeries.push(p.parseNumber(t[e].data[o].y[t[e].data[o].y.length-1])):this.twoDSeries.push(p.parseNumber(t[e].data[o].y)));for(var s=0;s<t[a].data.length;s++){var l="string"==typeof t[a].data[s].x,c=Array.isArray(t[a].data[s].x),u=!c&&!!r.isValidDate(t[a].data[s].x.toString());l||u?l||n.xaxis.convertedCatToNumeric?"datetime"!==n.xaxis.type||i.isBarHorizontal&&i.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[s].x)):this.twoDSeriesX.push(r.parseDate(t[a].data[s].x)):"datetime"===n.xaxis.type?this.twoDSeriesX.push(r.parseDate(t[a].data[s].x.toString())):(i.dataFormatXNumeric=!0,i.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[a].data[s].x))):c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[s].x)):(i.isXNumeric=!0,i.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[a].data[s].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var d=0;d<t[e].data.length;d++)this.threeDSeries.push(t[e].data[d].z);i.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var n=this.w.config,i=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(r.start),i.seriesRangeEnd.push(r.end),"datetime"===n.xaxis.type&&i.seriesRangeBarTimeline.push(r.rangeUniques),i.seriesRangeBarTimeline.forEach((function(t,e){t&&t.forEach((function(t,e){t.y.forEach((function(e,n){for(var i=0;i<t.y.length;i++)n!==i&&e.y1<=t.y[i].y2&&t.y[i].y1<=e.y2&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[i].rangeName)<0&&t.overlaps.push(t.y[i].rangeName))}))}))})),r}},{key:"handleCandleStickData",value:function(t,e){var n=this.w.globals,i={};return this.isFormat2DArray()?i=this.handleCandleStickDataFormat("array",t,e):this.isFormatXY()&&(i=this.handleCandleStickDataFormat("xy",t,e)),n.seriesCandleO[e]=i.o,n.seriesCandleH[e]=i.h,n.seriesCandleL[e]=i.l,n.seriesCandleC[e]=i.c,i}},{key:"handleRangeDataFormat",value:function(t,e,n){var i=[],r=[],a=e[n].data.filter((function(t,e,n){return e===n.findIndex((function(e){return e.x===t.x}))})).map((function(t,e){return{x:t.x,overlaps:[],y:[]}})),o="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",s=new L(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==e[s].data[0][1].length)throw new Error(o);for(var l=0;l<e[n].data.length;l++)i.push(e[n].data[l][1][0]),r.push(e[n].data[l][1][1])}else if("xy"===t){if(2!==e[s].data[0].y.length)throw new Error(o);for(var c=function(t){var o=p.randomId(),s=e[n].data[t].x,l={y1:e[n].data[t].y[0],y2:e[n].data[t].y[1],rangeName:o};e[n].data[t].rangeName=o;var c=a.findIndex((function(t){return t.x===s}));a[c].y.push(l),i.push(l.y1),r.push(l.y2)},u=0;u<e[n].data.length;u++)c(u)}return{start:i,end:r,rangeUniques:a}}},{key:"handleCandleStickDataFormat",value:function(t,e,n){var i=[],r=[],a=[],o=[],s="Please provide [Open, High, Low and Close] values in valid format. Read more https://apexcharts.com/docs/series/#candlestick";if("array"===t){if(!Array.isArray(e[n].data[0][1])&&5!==e[n].data[0].length||Array.isArray(e[n].data[0][1])&&4!==e[n].data[0][1].length)throw new Error(s);if(5===e[n].data[0].length)for(var l=0;l<e[n].data.length;l++)i.push(e[n].data[l][1]),r.push(e[n].data[l][2]),a.push(e[n].data[l][3]),o.push(e[n].data[l][4]);else for(var c=0;c<e[n].data.length;c++)i.push(e[n].data[c][1][0]),r.push(e[n].data[c][1][1]),a.push(e[n].data[c][1][2]),o.push(e[n].data[c][1][3])}else if("xy"===t){if(4!==e[n].data[0].y.length)throw new Error(s);for(var u=0;u<e[n].data.length;u++)i.push(e[n].data[u].y[0]),r.push(e[n].data[u].y[1]),a.push(e[n].data[u].y[2]),o.push(e[n].data[u].y[3])}return{o:i,h:r,l:a,c:o}}},{key:"parseDataAxisCharts",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,i=this.w.config,r=this.w.globals,a=new R(n),o=i.labels.length>0?i.labels.slice():i.xaxis.categories.slice(),s=function(){for(var t=0;t<o.length;t++)if("string"==typeof o[t]){if(!a.isValidDate(o[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(a.parseDate(o[t]))}else e.twoDSeriesX.push(o[t])},l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==i.chart.type&&"rangeArea"!==i.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(r.isRangeData=!0,this.handleRangeData(t,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==i.chart.type&&"candlestick"!==t[l].type||this.handleCandleStickData(t,l),r.series.push(this.twoDSeries),r.labels.push(this.twoDSeriesX),r.seriesX.push(this.twoDSeriesX),l!==this.activeSeriesIndex||this.fallbackToCategory||(r.isXNumeric=!0);else{"datetime"===i.xaxis.type?(r.isXNumeric=!0,s(),r.seriesX.push(this.twoDSeriesX)):"numeric"===i.xaxis.type&&(r.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,r.seriesX.push(this.twoDSeriesX))),r.labels.push(this.twoDSeriesX);var c=t[l].data.map((function(t){return p.parseNumber(t)}));r.series.push(c)}r.seriesZ.push(this.threeDSeries),r.seriesNames.push(void 0!==t[l].name?t[l].name:"series-"+parseInt(l+1,10)),r.seriesColors.push(void 0!==t[l].color?t[l].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,n=this.w.config;e.series=t.slice(),e.seriesNames=n.labels.slice();for(var i=0;i<e.series.length;i++)void 0===e.seriesNames[i]&&e.seriesNames.push("series-"+(i+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,n=this.w.globals;e.xaxis.categories.length>0?n.labels=e.xaxis.categories:e.labels.length>0?n.labels=e.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRangeBarTimeline.length&&(n.seriesRangeBarTimeline.map((function(t){t.forEach((function(t){n.labels.indexOf(t.x)<0&&t.x&&n.labels.push(t.x)}))})),n.labels=n.labels.filter((function(t,e,n){return n.indexOf(t)===e}))),e.xaxis.convertedCatToNumeric&&(new z(e).convertCatToNumericXaxis(e,this.ctx,n.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,n=this.w.config,i=[];if(e.axisCharts){if(e.series.length>0)for(var r=0;r<e.series[e.maxValsInArrayIndex].length;r++)i.push(r+1);e.seriesX=[];for(var a=0;a<t.length;a++)e.seriesX.push(i);e.isXNumeric=!0}if(0===i.length){i=e.axisCharts?[]:e.series.map((function(t,e){return e+1}));for(var o=0;o<t.length;o++)e.seriesX.push(i)}e.labels=i,n.xaxis.convertedCatToNumeric&&(e.categoryLabels=i.map((function(t){return n.xaxis.labels.formatter(t)}))),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,n=e.config,i=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),i.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===n.chart.type&&n.chart.stacked){var r=new L(this.ctx);i.series=r.setNullSeriesToZeroValues(i.series)}this.coreUtils.getSeriesTotals(),i.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),i.dataFormatXNumeric||i.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var a=this.coreUtils.getCategoryLabels(i.labels),o=0;o<a.length;o++)if(Array.isArray(a[o])){i.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map((function(n,i){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return n.index}))}}]),t}(),W=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.tooltipKeyFormat="dd MMM"}return i(t,[{key:"xLabelFormat",value:function(t,e,n){var i=this.w;if("datetime"===i.config.xaxis.type&&void 0===i.config.xaxis.labels.formatter&&void 0===i.config.tooltip.x.formatter){var r=new R(this.ctx);return r.formatDate(r.getDate(e),i.config.tooltip.x.format)}return t(e,n)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map((function(t){return t})):t}},{key:"defaultYFormatter",value:function(t,e,n){var i=this.w;return p.isNumber(t)&&(t=t.toFixed(0!==i.globals.yValueDecimal?void 0!==e.decimalsInFloat?e.decimalsInFloat:i.globals.yValueDecimal:i.globals.maxYArr[n]-i.globals.minYArr[n]<10?1:0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xLabelFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xLabelFormatter=void 0!==e.config.xaxis.labels.formatter?e.config.xaxis.labels.formatter:function(t){return p.isNumber(t)?t.toFixed(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type&&e.globals.dataPoints<50||e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?1:0):t},e.globals.ttKeyFormatter="function"==typeof e.config.tooltip.x.formatter?e.config.tooltip.x.formatter:e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((function(n,i){e.globals.yLabelFormatters[i]=void 0!==n.labels.formatter?n.labels.formatter:function(r){return e.globals.xyCharts?Array.isArray(r)?r.map((function(e){return t.defaultYFormatter(e,n,i)})):t.defaultYFormatter(r,n,i):r}})),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce((function(t,e){return t.length>e.length?t:e}),0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),X=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"getLabel",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=this.w,s=void 0===t[i]?"":t[i],l=s,c=o.globals.xLabelFormatter,u=o.config.xaxis.labels.formatter,d=!1,h=new W(this.ctx),f=s;l=h.xLabelFormat(c,s,f),void 0!==u&&(l=u(s,t[i],i));var g=function(t){var n=null;return e.forEach((function(t){"month"===t.unit?n="year":"day"===t.unit?n="month":"hour"===t.unit?n="day":"minute"===t.unit&&(n="hour")})),n===t};e.length>0?(d=g(e[i].unit),n=e[i].position,l=e[i].value):"datetime"===o.config.xaxis.type&&void 0===u&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();var p=new y(this.ctx),m={};return m=o.globals.rotateXLabels?p.getTextRects(l,parseInt(a,10),null,"rotate(".concat(o.config.xaxis.labels.rotate," 0 0)"),!1):p.getTextRects(l,parseInt(a,10)),!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||l.toLowerCase().indexOf("infinity")>=0||r.indexOf(l)>=0&&!o.config.xaxis.labels.showDuplicates&&"hours"!==this.ctx.timeScale.tickInterval&&"minutes"!==this.ctx.timeScale.tickInterval)&&(l=""),{x:n,text:l,textRect:m,isBold:d}}},{key:"checkForOverflowingLabels",value:function(t,e,n,i,r){var a=this.w;if(0===t&&a.globals.skipFirstTimelinelabel&&(e.text=""),t===n-1&&a.globals.skipLastTimelinelabel&&(e.text=""),a.config.xaxis.labels.hideOverlappingLabels&&i.length>0){var o=r[r.length-1];e.x<o.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+o.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var n=this.w;return n.config.yaxis[t]&&n.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,n=new w(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&n.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"drawYAxisTicks",value:function(t,e,n,i,r,a,o){var s=this.w,l=new y(this.ctx),c=s.globals.translateY;if(i.show&&e>0){!0===s.config.yaxis[r].opposite&&(t+=i.width);for(var u=e;u>=0;u--){var d=c+e/10+s.config.yaxis[r].labels.offsetY-1;s.globals.isBarHorizontal&&(d=a*u),"heatmap"===s.config.chart.type&&(d+=a/2);var h=l.drawLine(t+n.offsetX-i.width+i.offsetX,d+i.offsetY,t+n.offsetX+i.offsetX,d+i.offsetY,i.color);o.add(h),c+=a}}}}]),t}(),Y=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"fixSvgStringForIe11",value:function(t){if(!p.isIE11())return t;var e=0,n=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':t}));return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(){var t=this.w.globals.dom.Paper.svg();return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(i,(function(t){t.setAttribute("width",0)})),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(){var t=this;return new Promise((function(e){var n=t.w;t.cleanup();var i=document.createElement("canvas");i.width=n.globals.svgWidth,i.height=parseInt(n.globals.dom.elWrap.style.height,10);var r="transparent"===n.config.chart.background?"#fff":n.config.chart.background,a=i.getContext("2d");a.fillStyle=r,a.fillRect(0,0,i.width,i.height);var o=t.getSvgString();if(window.canvg&&p.isIE11()){var s=window.canvg.Canvg.fromString(a,o,{ignoreClear:!0,ignoreDimensions:!0});s.start();var l=i.msToBlob();s.stop(),e({blob:l})}else{var c="data:image/svg+xml,"+encodeURIComponent(o),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(a.drawImage(u,0,0),i.msToBlob){var t=i.msToBlob();e({blob:t})}else{var n=i.toDataURL("image/png");e({imgURI:n})}},u.src=c}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),null,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then((function(e){var n=e.imgURI,i=e.blob;i?navigator.msSaveOrOpenBlob(i,t.w.globals.chartID+".png"):t.triggerDownload(n,null,".png")}))}},{key:"exportToCSV",value:function(t){var e=this,n=t.series,i=t.columnDelimiter,r=t.lineDelimiter,a=void 0===r?"\n":r,o=this.w,s=[],l=[],c="data:text/csv;charset=utf-8,",u=new V(this.ctx),d=new X(this.ctx),h=function(t){var n="";if(o.globals.axisCharts){if("category"===o.config.xaxis.type||o.config.xaxis.convertedCatToNumeric)if(o.globals.isBarHorizontal){var i=o.globals.yLabelFormatters[0],r=new L(e.ctx).getActiveConfigSeriesIndex();n=i(o.globals.labels[t],{seriesIndex:r,dataPointIndex:t,w:o})}else n=d.getLabel(o.globals.labels,o.globals.timescaleLabels,0,t).text;"datetime"===o.config.xaxis.type&&(o.config.xaxis.categories.length?n=o.config.xaxis.categories[t]:o.config.labels.length&&(n=o.config.labels[t]))}else n=o.config.labels[t];return n};s.push(o.config.chart.toolbar.export.csv.headerCategory),n.map((function(t,e){o.globals.axisCharts&&s.push(t.name?t.name:"series-".concat(e))})),o.globals.axisCharts||(s.push(o.config.chart.toolbar.export.csv.headerValue),l.push(s.join(i))),n.map((function(t,e){o.globals.axisCharts?function(t,e){if(s.length&&0===e&&l.push(s.join(i)),t.data&&t.data.length)for(var r=0;r<t.data.length;r++){s=[];var a=h(r);if(a||(u.isFormatXY()?a=n[e].data[r].x:u.isFormat2DArray()&&(a=n[e].data[r]?n[e].data[r][0]:"")),0===e){s.push("datetime"===o.config.xaxis.type&&String(a).length>=10?o.config.chart.toolbar.export.csv.dateFormatter(a):a);for(var c=0;c<o.globals.series.length;c++)s.push(o.globals.series[c][r])}("candlestick"===o.config.chart.type||t.type&&"candlestick"===t.type)&&(s.pop(),s.push(o.globals.seriesCandleO[e][r]),s.push(o.globals.seriesCandleH[e][r]),s.push(o.globals.seriesCandleL[e][r]),s.push(o.globals.seriesCandleC[e][r])),"rangeBar"===o.config.chart.type&&(s.pop(),s.push(o.globals.seriesRangeStart[e][r]),s.push(o.globals.seriesRangeEnd[e][r])),s.length&&l.push(s.join(i))}}(t,e):((s=[]).push(o.globals.labels[e]),s.push(o.globals.series[e]),l.push(s.join(i)))})),c+=l.join(a),this.triggerDownload(encodeURI(c),o.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,n){var i=document.createElement("a");i.href=t,i.download=(e||this.w.globals.chartID)+n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]),t}(),G=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w;var i=this.w;this.axesUtils=new X(n),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===i.config.xaxis.position?0:i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return i(t,[{key:"drawXaxis",value:function(){var t,e=this,n=this.w,i=new y(this.ctx),r=i.group({class:"apexcharts-xaxis",transform:"translate(".concat(n.config.xaxis.offsetX,", ").concat(n.config.xaxis.offsetY,")")}),a=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(n.globals.translateXAxisX,", ").concat(n.globals.translateXAxisY,")")});r.add(a);for(var o=n.globals.padHorizontal,s=[],l=0;l<this.xaxisLabels.length;l++)s.push(this.xaxisLabels[l]);var c=s.length;if(o=n.globals.isXNumeric?o+(t=n.globals.gridWidth/(c>1?c-1:c))/2+n.config.xaxis.labels.offsetX:o+(t=n.globals.gridWidth/s.length)+n.config.xaxis.labels.offsetX,n.config.xaxis.labels.show)for(var u=function(r){var l=o-t/2+n.config.xaxis.labels.offsetX;0===r&&1===c&&t/2===o&&1===n.globals.dataPoints&&(l=n.globals.gridWidth/2);var u=e.axesUtils.getLabel(s,n.globals.timescaleLabels,l,r,e.drawnLabels,e.xaxisFontSize),d=28;n.globals.rotateXLabels&&(d=22),(u=e.axesUtils.checkForOverflowingLabels(r,u,c,e.drawnLabels,e.drawnLabelsRects)).text&&n.globals.xaxisLabelsCount++;var h=i.drawText({x:u.x,y:e.offY+n.config.xaxis.labels.offsetY+d-("top"===n.config.xaxis.position?n.globals.xAxisHeight+n.config.xaxis.axisTicks.height-2:0),text:u.text,textAnchor:"middle",fontWeight:u.isBold?600:n.config.xaxis.labels.style.fontWeight,fontSize:e.xaxisFontSize,fontFamily:e.xaxisFontFamily,foreColor:Array.isArray(e.xaxisForeColors)?n.config.xaxis.convertedCatToNumeric?e.xaxisForeColors[n.globals.minX+r-1]:e.xaxisForeColors[r]:e.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+n.config.xaxis.labels.style.cssClass});a.add(h);var f=document.createElementNS(n.globals.SVGNS,"title");f.textContent=Array.isArray(u.text)?u.text.join(" "):u.text,h.node.appendChild(f),""!==u.text&&(e.drawnLabels.push(u.text),e.drawnLabelsRects.push(u)),o+=t},d=0;d<=c-1;d++)u(d);if(void 0!==n.config.xaxis.title.text){var h=i.group({class:"apexcharts-xaxis-title"}),f=i.drawText({x:n.globals.gridWidth/2+n.config.xaxis.title.offsetX,y:this.offY-parseFloat(this.xaxisFontSize)+n.globals.xAxisLabelsHeight+n.config.xaxis.title.offsetY,text:n.config.xaxis.title.text,textAnchor:"middle",fontSize:n.config.xaxis.title.style.fontSize,fontFamily:n.config.xaxis.title.style.fontFamily,fontWeight:n.config.xaxis.title.style.fontWeight,foreColor:n.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+n.config.xaxis.title.style.cssClass});h.add(f),r.add(h)}if(n.config.xaxis.axisBorder.show){var g=n.globals.barPadForNumericAxis,p=i.drawLine(n.globals.padHorizontal+n.config.xaxis.axisBorder.offsetX-g,this.offY,this.xaxisBorderWidth+g,this.offY,n.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);r.add(p)}return r}},{key:"drawXaxisInversed",value:function(t){var e,n,i=this.w,r=new y(this.ctx),a=i.config.yaxis[0].opposite?i.globals.translateYAxisX[t]:0,o=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),s=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});o.add(s);var l=[];if(i.config.yaxis[t].show)for(var c=0;c<this.xaxisLabels.length;c++)l.push(this.xaxisLabels[c]);n=-(e=i.globals.gridHeight/l.length)/2.2;var u=i.globals.yLabelFormatters[0],d=i.config.yaxis[0].labels;if(d.show)for(var h=0;h<=l.length-1;h++){var f=void 0===l[h]?"":l[h];f=u(f,{seriesIndex:t,dataPointIndex:h,w:i});var g=0;Array.isArray(f)&&(g=f.length/2*parseInt(d.style.fontSize,10));var p=r.drawText({x:d.offsetX-15,y:n+e+d.offsetY-g,text:f,textAnchor:this.yaxis.opposite?"start":"end",foreColor:Array.isArray(d.style.colors)?d.style.colors[h]:d.style.colors,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass});s.add(p);var m=document.createElementNS(i.globals.SVGNS,"title");if(m.textContent=f.text,p.node.appendChild(m),0!==i.config.yaxis[t].labels.rotate){var v=r.rotateAroundCenter(p.node);p.node.setAttribute("transform","rotate(".concat(i.config.yaxis[t].labels.rotate," 0 ").concat(v.y,")"))}n+=e}if(void 0!==i.config.yaxis[0].title.text){var x=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),b=r.drawText({x:0,y:i.globals.gridHeight/2,text:i.config.yaxis[0].title.text,textAnchor:"middle",foreColor:i.config.yaxis[0].title.style.color,fontSize:i.config.yaxis[0].title.style.fontSize,fontWeight:i.config.yaxis[0].title.style.fontWeight,fontFamily:i.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[0].title.style.cssClass});x.add(b),o.add(x)}var w=0;this.isCategoryBarHorizontal&&i.config.yaxis[0].opposite&&(w=i.globals.gridWidth);var _=i.config.xaxis.axisBorder;if(_.show){var S=r.drawLine(i.globals.padHorizontal+_.offsetX+w,1+_.offsetY,i.globals.padHorizontal+_.offsetX+w,i.globals.gridHeight+_.offsetY,_.color,0);o.add(S)}return i.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(w,l.length,i.config.yaxis[0].axisBorder,i.config.yaxis[0].axisTicks,0,e,o),o}},{key:"drawXaxisTicks",value:function(t,e){var n=this.w,i=t;if(!(t<0||t-2>n.globals.gridWidth)){var r=this.offY+n.config.xaxis.axisTicks.offsetY,a=r+n.config.xaxis.axisTicks.height;if("top"===n.config.xaxis.position&&(a=r-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var o=new y(this.ctx).drawLine(t+n.config.xaxis.axisTicks.offsetX,r+n.config.xaxis.offsetY,i+n.config.xaxis.axisTicks.offsetX,a+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);e.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],n=this.xaxisLabels.length,i=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var r=0;r<n;r++)e.push(i=this.xaxisLabels[r].position);else for(var a=n,o=0;o<a;o++){var s=a;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(s-=1),e.push(i+=t.globals.gridWidth/s)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new y(this.ctx),n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var o=0;o<i.length;o++){var s=e.rotateAroundCenter(i[o]);s.y=s.y-1,s.x=s.x+1,i[o].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),i[o].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")")),t.config.xaxis.labels.trim&&Array.prototype.forEach.call(i[o].childNodes,(function(n){e.placeTextWithEllipsis(n,n.textContent,t.config.xaxis.labels.maxHeight-("bottom"===t.config.legend.position?20:10))}))}else!function(){for(var n=t.globals.gridWidth/(t.globals.labels.length+1),r=0;r<i.length;r++)t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(i[r].childNodes,(function(t){e.placeTextWithEllipsis(t,t.textContent,n)}))}();if(r.length>0){var l=r[r.length-1].getBBox(),c=r[0].getBBox();l.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var u=0;u<a.length;u++)e.placeTextWithEllipsis(a[u],a[u].textContent,t.config.yaxis[0].labels.maxWidth-2*parseFloat(t.config.yaxis[0].title.style.fontSize)-20)}}}]),t}(),U=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new X(n),this.isTimelineBar="datetime"===i.config.xaxis.type&&i.globals.seriesRangeBarTimeline.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return i(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,n=new y(this.ctx);null===t&&(t=n.group({class:"apexcharts-grid"}));var i=n.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),r=n.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(r),t.add(i),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,n=new y(this.ctx),i=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var r=0;t.config.stroke.width.forEach((function(t){r=Math.max(r,t)})),i=r}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid));var a=t.config.chart.type,o=0,s=0;("bar"===a||"rangeBar"===a||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(s=t.config.grid.padding.right,e.barPadForNumericAxis>(o=t.config.grid.padding.left)&&(o=e.barPadForNumericAxis,s=e.barPadForNumericAxis)),e.dom.elGridRect=n.drawRect(-i/2-o-2,-i/2,e.gridWidth+i+s+o+4,e.gridHeight+i,0,"#fff"),new w(this).getLargestMarkerSize();var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=n.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var c=e.dom.baseEl.querySelector("defs");c.appendChild(e.dom.elGridRectMask),c.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,n=t.x1,i=this.w;0===e&&i.globals.skipFirstTimelinelabel||e===t.xCount-1&&i.globals.skipLastTimelinelabel&&!i.config.xaxis.labels.formatter||"radar"===i.config.chart.type||(i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:t.y1,x2:t.x2,y2:t.y2,parent:t.parent}),new G(this.ctx).drawXaxisTicks(n,this.elg))}},{key:"_drawGridLine",value:function(t){var e=t.x1,n=t.y1,i=t.x2,r=t.y2,a=t.parent,o=this.w,s=a.node.classList.contains("apexcharts-gridlines-horizontal"),l=o.config.grid.strokeDashArray,c=o.globals.barPadForNumericAxis,u=new y(this).drawLine(e-(s?c:0),n,i+(s?c:0),r,o.config.grid.borderColor,l);u.node.classList.add("apexcharts-gridline"),a.add(u)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,n=t.x1,i=t.y1,r=t.x2,a=t.y2,o=t.type,s=this.w,l=new y(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var u=l.drawRect(n-("row"===o?c:0),i,r+("row"===o?2*c:0),a,0,s.config.grid[o].colors[e],s.config.grid[o].opacity);this.elg.add(u),u.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),u.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(t){var e=this,n=t.xCount,i=t.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var a=r.globals.padHorizontal,o=r.globals.gridHeight;r.globals.timescaleLabels.length?function(t){for(var i=t.xC,r=t.y1,a=t.y2,o=0;o<i;o++)e._drawGridLines({i:o,x1:e.xaxisLabels[o].position,y1:r,x2:e.xaxisLabels[o].position,y2:a,xCount:n,parent:e.elgridLinesV})}({xC:n,x1:a,y1:0,x2:void 0,y2:o}):(r.globals.isXNumeric&&(n=r.globals.xAxisScale.result.length),r.config.xaxis.convertedCatToNumeric&&(n=r.globals.xaxisLabelsCount),function(t){for(var i=t.xC,a=t.x1,o=t.y1,s=t.x2,l=t.y2,c=0;c<i+(r.globals.isXNumeric?0:1);c++)0===c&&1===i&&1===r.globals.dataPoints&&(s=a=r.globals.gridWidth/2),e._drawGridLines({i:c,x1:a,y1:o,x2:s,y2:l,xCount:n,parent:e.elgridLinesV}),s=a+=r.globals.gridWidth/(r.globals.isXNumeric?i-1:i)}({xC:n,x1:a,y1:0,x2:void 0,y2:o}))}if(r.config.grid.yaxis.lines.show){var s=0,l=0,c=r.globals.gridWidth,u=i+1;this.isTimelineBar&&(u=r.globals.labels.length);for(var d=0;d<u+(this.isTimelineBar?1:0);d++)this._drawGridLine({x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=r.globals.gridHeight/(this.isTimelineBar?u:i)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var i,r=n.globals.padHorizontal,a=n.globals.gridHeight,o=0;o<e+1;o++)n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:r,y1:0,x2:i,y2:a,parent:this.elgridLinesV}),new G(this.ctx).drawXaxisTicks(r,this.elg),i=r=r+n.globals.gridWidth/e+.3;if(n.config.grid.yaxis.lines.show)for(var s=0,l=0,c=n.globals.gridWidth,u=0;u<n.globals.dataPoints+1;u++)this._drawGridLine({x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new y(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var n,i=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,r=0;r<t.globals.series.length&&(void 0!==t.globals.yAxisScale[r]&&(i=t.globals.yAxisScale[r].result.length-1),!(i>2));r++);return!t.globals.isBarHorizontal||this.isTimelineBar?(n=this.xaxisLabels.length,this.isTimelineBar&&(i=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(n=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:n,tickAmount:i})):this._drawInvertedXYLines({xCount:n=i,tickAmount:i=t.globals.xTickAmount}),this.drawGridBands(n,i),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/n}}},{key:"drawGridBands",value:function(t,e){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var i=0,r=n.globals.gridHeight/e,a=n.globals.gridWidth,o=0,s=0;o<e;o++,s++)s>=n.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:i,x2:a,y2:r,type:"row"}),i+=n.globals.gridHeight/e;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var l=n.globals.isBarHorizontal||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?t:t-1,c=n.globals.padHorizontal,u=n.globals.padHorizontal+n.globals.gridWidth/l,d=n.globals.gridHeight,h=0,f=0;h<t;h++,f++)f>=n.config.grid.column.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:c,y1:0,x2:u,y2:d,type:"column"}),c+=n.globals.gridWidth/l}}]),t}(),j=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"niceScale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=this.w;if("dataPoints"===n&&(n=a.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!p.isNumber(t)&&!p.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE){var o=this.linearScale(t=0,e=n,n);return o}t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var s=[],l=Math.abs(e-t);l<1&&r&&("candlestick"===a.config.chart.type||"candlestick"===a.config.series[i].type||a.globals.isRangeData)&&(e*=1.01);var c=n+1;c<2?c=2:c>2&&(c-=2);var u=l/c,d=Math.floor(p.log10(u)),h=Math.pow(10,d),f=Math.round(u/h);f<1&&(f=1);var g=f*h,m=g*Math.floor(t/g),v=g*Math.ceil(e/g),y=m;if(r&&l>2){for(;s.push(y),!((y+=g)>v););return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}var x=t;(s=[]).push(x);for(var b=Math.abs(e-t)/n,w=0;w<=n;w++)s.push(x+=b);return s[s.length-2]>=e&&s.pop(),{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"linearScale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=Math.abs(e-t),r=i/n;n===Number.MAX_VALUE&&(n=10,r=1);for(var a=[],o=t;n>=0;)a.push(o),o+=r,n-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScale",value:function(t,e,n,i){(e<=0||e===Number.MIN_VALUE)&&(e=.01);for(var r=Math.log(e)/Math.log(10),a=Math.log(n)/Math.log(10),o=Math.abs(n-e)/i,s=[],l=e;i>=0;)s.push(l),l+=o,i-=1;var c=s.map((function(t,i){t<=0&&(t=.01);var o=Math.pow(10,r+(a-r)/(n-e)*(t-r));return Math.round(o/p.roundToBase(o,10))*p.roundToBase(o,10)}));return 0===c[0]&&(c[0]=1),{result:c,niceMin:c[0],niceMax:c[c.length-1]}}},{key:"setYScaleForIndex",value:function(t,e,n){var i=this.w.globals,r=this.w.config,a=i.isBarHorizontal?r.xaxis:r.yaxis[t];void 0===i.yAxisScale[t]&&(i.yAxisScale[t]=[]);var o=Math.abs(n-e);a.logarithmic&&o<=5&&(i.invalidLogScale=!0),a.logarithmic&&o>5?(i.allSeriesCollapsed=!1,i.yAxisScale[t]=this.logarithmicScale(t,e,n,a.tickAmount?a.tickAmount:Math.floor(Math.log10(n)))):n!==-Number.MAX_VALUE&&p.isNumber(n)?(i.allSeriesCollapsed=!1,i.yAxisScale[t]=void 0===a.min&&void 0===a.max||a.forceNiceScale?this.niceScale(e,n,a.tickAmount?a.tickAmount:o<5&&o>1?o+1:5,t,void 0===r.yaxis[t].max&&void 0===r.yaxis[t].min||r.yaxis[t].forceNiceScale):this.linearScale(e,n,a.tickAmount)):i.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var n=this.w,i=n.globals,r=n.config.xaxis,a=Math.abs(e-t);return i.xAxisScale=e!==-Number.MAX_VALUE&&p.isNumber(e)?this.niceScale(t,e,r.tickAmount?r.tickAmount:a<5&&a>1?a+1:5,0):this.linearScale(0,5,5),i.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,n=this.w.config,i=e.minYArr.concat([]),r=e.maxYArr.concat([]),a=[];n.yaxis.forEach((function(e,o){var s=o;n.series.forEach((function(t,n){t.name===e.seriesName&&(s=n,a.push(o!==n?{index:n,similarIndex:o,alreadyExists:!0}:{index:n}))})),t.setYScaleForIndex(o,i[s],r[s])})),this.sameScaleInMultipleAxes(i,r,a)}},{key:"sameScaleInMultipleAxes",value:function(t,e,n){var i=this,r=this.w.config,a=this.w.globals,o=[];n.forEach((function(t){t.alreadyExists&&(void 0===o[t.index]&&(o[t.index]=[]),o[t.index].push(t.index),o[t.index].push(t.similarIndex))})),a.yAxisSameScaleIndices=o,o.forEach((function(t,e){o.forEach((function(n,i){var r,a;e!==i&&(r=t,a=n,r.filter((function(t){return-1!==a.indexOf(t)}))).length>0&&(o[e]=o[e].concat(o[i]))}))}));var s=o.map((function(t){return t.filter((function(e,n){return t.indexOf(e)===n}))})).map((function(t){return t.sort()}));o=o.filter((function(t){return!!t}));var l=s.slice(),c=l.map((function(t){return JSON.stringify(t)}));l=l.filter((function(t,e){return c.indexOf(JSON.stringify(t))===e}));var u=[],d=[];t.forEach((function(t,n){l.forEach((function(i,r){i.indexOf(n)>-1&&(void 0===u[r]&&(u[r]=[],d[r]=[]),u[r].push({key:n,value:t}),d[r].push({key:n,value:e[n]}))}))}));var h=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),f=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);u.forEach((function(t,e){t.forEach((function(t,n){h[e]=Math.min(t.value,h[e])}))})),d.forEach((function(t,e){t.forEach((function(t,n){f[e]=Math.max(t.value,f[e])}))})),t.forEach((function(t,e){d.forEach((function(t,n){var o=h[n],s=f[n];r.chart.stacked&&(s=0,t.forEach((function(t,e){t.value!==-Number.MAX_VALUE&&(s+=t.value),o!==Number.MIN_VALUE&&(o+=u[n][e].value)}))),t.forEach((function(n,l){t[l].key===e&&(void 0!==r.yaxis[e].min&&(o="function"==typeof r.yaxis[e].min?r.yaxis[e].min(a.minY):r.yaxis[e].min),void 0!==r.yaxis[e].max&&(s="function"==typeof r.yaxis[e].max?r.yaxis[e].max(a.maxY):r.yaxis[e].max),i.setYScaleForIndex(e,o,s))}))}))}))}},{key:"autoScaleY",value:function(t,e,n){t||(t=this);var i=t.w;if(i.globals.isMultipleYAxis||i.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var r=i.globals.seriesX[0],a=i.config.chart.stacked;return e.forEach((function(t,o){for(var s=0,l=0;l<r.length;l++)if(r[l]>=n.xaxis.min){s=l;break}var c,u,d=i.globals.minYArr[o],h=i.globals.maxYArr[o],f=i.globals.stackedSeriesTotals;i.globals.series.forEach((function(o,l){var g=o[s];a?(c=u=g=f[s],f.forEach((function(t,e){r[e]<=n.xaxis.max&&r[e]>=n.xaxis.min&&(t>u&&null!==t&&(u=t),o[e]<c&&null!==o[e]&&(c=o[e]))}))):(c=u=g,o.forEach((function(t,e){if(r[e]<=n.xaxis.max&&r[e]>=n.xaxis.min){var a=t,o=t;i.globals.series.forEach((function(n,i){null!==t&&(a=Math.min(n[e],a),o=Math.max(n[e],o))})),o>u&&null!==o&&(u=o),a<c&&null!==a&&(c=a)}}))),void 0===c&&void 0===u&&(c=d,u=h),(u*=u<0?.9:1.1)<0&&u<h&&(u=h),(c*=c<0?1.1:.9)<0&&c>d&&(c=d),e.length>1?(e[l].min=void 0===t.min?c:t.min,e[l].max=void 0===t.max?u:t.max):(e[0].min=void 0===t.min?c:t.min,e[0].max=void 0===t.max?u:t.max)}))})),e}}]),t}(),q=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.scales=new j(n)}return i(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w.config,a=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===i&&(i=t+1);var l=a.series,c=l,u=l;"candlestick"===r.chart.type?(c=a.seriesCandleL,u=a.seriesCandleH):a.isRangeData&&(c=a.seriesRangeStart,u=a.seriesRangeEnd);for(var d=t;d<i;d++){a.dataPoints=Math.max(a.dataPoints,l[d].length);for(var h=0;h<a.series[d].length;h++){var f=l[d][h];null!==f&&p.isNumber(f)?(o=Math.max(o,u[d][h]),e=Math.min(e,c[d][h]),n=Math.max(n,c[d][h]),"candlestick"===this.w.config.chart.type&&(o=Math.max(o,a.seriesCandleO[d][h]),o=Math.max(o,a.seriesCandleH[d][h]),o=Math.max(o,a.seriesCandleL[d][h]),n=o=Math.max(o,a.seriesCandleC[d][h])),p.isFloat(f)&&(f=p.noExponents(f),a.yValueDecimal=Math.max(a.yValueDecimal,f.toString().split(".")[1].length)),s>c[d][h]&&c[d][h]<0&&(s=c[d][h])):a.hasNullValues=!0}}return"rangeBar"===r.chart.type&&a.seriesRangeStart.length&&a.isBarHorizontal&&"datetime"===r.xaxis.type&&(s=e),"bar"===r.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:e,highestY:n}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var n=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var i=0;i<t.series.length;i++){var r=this.getMinYMaxY(i,n,null,i+1);t.minYArr.push(r.minY),t.maxYArr.push(r.maxY),n=r.lowestY}var a=this.getMinYMaxY(0,n,null,t.series.length);if(t.minY=a.minY,t.maxY=a.maxY,n=a.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==t.maxY){var o=t.maxY-n;n>=0&&n<=10&&(o=0),t.minY=n-5*o/100,n>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*o/100}return e.yaxis.forEach((function(e,n){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[n]=e.max:"function"==typeof e.max&&(t.maxYArr[n]=e.max(t.maxY)),t.maxY=t.maxYArr[n]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[n]=e.min:"function"==typeof e.min&&(t.minYArr[n]=e.min(t.minY)),t.minY=t.minYArr[n])})),t.isBarHorizontal&&["min","max"].forEach((function(n){void 0!==e.xaxis[n]&&"number"==typeof e.xaxis[n]&&("min"===n?t.minY=e.xaxis[n]:t.maxY=e.xaxis[n])})),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=n,t.yAxisScale.forEach((function(e,n){t.minYArr[n]=e.niceMin,t.maxYArr[n]=e.niceMax}))):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,n="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var n=0;n<t.labels[e].length;n++)null!==t.labels[e][n]&&p.isNumber(t.labels[e][n])&&(t.maxX=Math.max(t.maxX,t.labels[e][n]),t.initialMaxX=Math.max(t.maxX,t.labels[e][n]),t.minX=Math.min(t.minX,t.labels[e][n]),t.initialMinX=Math.min(t.minX,t.labels[e][n]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var i;if(void 0===e.xaxis.tickAmount?(i=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(i=t.dataPoints-1),i>t.dataPoints&&0!==t.dataPoints&&(i=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(i=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(i=t.maxX-t.minX-1)):i=e.xaxis.tickAmount,t.xTickAmount=i,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var r=[],a=t.minX-1;a<t.maxX;a++)r.push(a+1);t.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,i,i),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,i-1),t.seriesX=t.labels.slice());n&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var n=0;n<t.seriesZ[e].length;n++)null!==t.seriesZ[e][n]&&p.isNumber(t.seriesZ[e][n])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][n]),t.minZ=Math.min(t.minZ,t.seriesZ[e][n]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var n=new R(this.ctx);if("datetime"===e.xaxis.type){var i=n.getDate(t.minX);i.setUTCDate(i.getDate()-2),t.minX=new Date(i).getTime();var r=n.getDate(t.maxX);r.setUTCDate(r.getDate()+2),t.maxX=new Date(r).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach((function(e,n){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var i=e.slice();i.sort((function(t,e){return t-e})),i.forEach((function(e,i){if(i>0){var r=e-t.seriesX[n][i-1];r>0&&(t.minXDiff=Math.min(r,t.minXDiff))}})),1===t.dataPoints&&t.minXDiff===Number.MAX_VALUE&&(t.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],n=[];if(t.series.length)for(var i=0;i<t.series[t.maxValsInArrayIndex].length;i++)for(var r=0,a=0,o=0;o<t.series.length;o++)null!==t.series[o][i]&&p.isNumber(t.series[o][i])&&(t.series[o][i]>0?r=r+parseFloat(t.series[o][i])+1e-4:a+=parseFloat(t.series[o][i])),o===t.series.length-1&&(e.push(r),n.push(a));for(var s=0;s<e.length;s++)t.maxY=Math.max(t.maxY,e[s]),t.minY=Math.min(t.minY,n[s])}}]),t}(),Z=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new X(n)}return i(t,[{key:"drawYaxis",value:function(t){var e=this.w,n=new y(this.ctx),i=e.config.yaxis[t].labels.style,r=i.fontSize,a=i.fontFamily,o=i.fontWeight,s=n.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+e.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return s;var l=n.group({class:"apexcharts-yaxis-texts-g"});s.add(l);var c=e.globals.yAxisScale[t].result.length-1,u=e.globals.gridHeight/c,d=e.globals.translateY,h=e.globals.yLabelFormatters[t],f=e.globals.yAxisScale[t].result.slice();f=this.axesUtils.checkForReversedLabels(t,f);var g="";if(e.config.yaxis[t].labels.show)for(var p=function(s){var p=f[s];p=h(p,s);var m=e.config.yaxis[t].labels.padding;e.config.yaxis[t].opposite&&0!==e.config.yaxis.length&&(m*=-1);var v=n.drawText({x:m,y:d+c/10+e.config.yaxis[t].labels.offsetY+1,text:p,textAnchor:e.config.yaxis[t].opposite?"start":"end",fontSize:r,fontFamily:a,fontWeight:o,foreColor:Array.isArray(i.colors)?i.colors[s]:i.colors,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+i.cssClass});if(s===c&&(g=v),l.add(v),0!==e.config.yaxis[t].labels.rotate){var y=n.rotateAroundCenter(g.node),x=n.rotateAroundCenter(v.node);v.node.setAttribute("transform","rotate(".concat(e.config.yaxis[t].labels.rotate," ").concat(y.x," ").concat(x.y,")"))}d+=u},m=c;m>=0;m--)p(m);if(void 0!==e.config.yaxis[t].title.text){var v=n.group({class:"apexcharts-yaxis-title"}),x=0;e.config.yaxis[t].opposite&&(x=e.globals.translateYAxisX[t]);var b=n.drawText({x:x,y:e.globals.gridHeight/2+e.globals.translateY+e.config.yaxis[t].title.offsetY,text:e.config.yaxis[t].title.text,textAnchor:"end",foreColor:e.config.yaxis[t].title.style.color,fontSize:e.config.yaxis[t].title.style.fontSize,fontWeight:e.config.yaxis[t].title.style.fontWeight,fontFamily:e.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+e.config.yaxis[t].title.style.cssClass});v.add(b),s.add(v)}var w=e.config.yaxis[t].axisBorder,_=31+w.offsetX;if(e.config.yaxis[t].opposite&&(_=-31-w.offsetX),w.show){var S=n.drawLine(_,e.globals.translateY+w.offsetY-2,_,e.globals.gridHeight+e.globals.translateY+w.offsetY+2,w.color,0,w.width);s.add(S)}return e.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(_,c,w,e.config.yaxis[t].axisTicks,t,u,s),s}},{key:"drawYaxisInversed",value:function(t){var e=this.w,n=new y(this.ctx),i=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(r);var a=e.globals.yAxisScale[t].result.length-1,o=e.globals.gridWidth/a+.1,s=o+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,c=e.globals.yAxisScale[t].result.slice(),u=e.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),a=(c=u.slice()).length),c=this.axesUtils.checkForReversedLabels(t,c);var d=u.length;if(e.config.xaxis.labels.show)for(var h=d?0:a;d?h<d:h>=0;d?h++:h--){var f=c[h];f=l(f,h);var g=e.globals.gridWidth+e.globals.padHorizontal-(s-o+e.config.xaxis.labels.offsetX);if(u.length){var p=this.axesUtils.getLabel(c,u,g,h,this.drawnLabels,this.xaxisFontSize);g=p.x,f=p.text,this.drawnLabels.push(p.text),0===h&&e.globals.skipFirstTimelinelabel&&(f=""),h===c.length-1&&e.globals.skipLastTimelinelabel&&(f="")}var m=n.drawText({x:g,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});r.add(m),m.tspan(f);var v=document.createElementNS(e.globals.SVGNS,"title");v.textContent=f,m.node.appendChild(v),s+=o}return this.inversedYAxisTitleText(i),this.inversedYAxisBorder(i),i}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,n=new y(this.ctx),i=e.config.xaxis.axisBorder;if(i.show){var r=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(r-=15);var a=n.drawLine(e.globals.padHorizontal+r+i.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,i.color,0,i.height);t.add(a)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,n=new y(this.ctx);if(void 0!==e.config.xaxis.title.text){var i=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=n.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});i.add(r),t.add(i)}}},{key:"yAxisTitleRotate",value:function(t,e){var n=this.w,i=new y(this.ctx),r={width:0,height:0},a={width:0,height:0},o=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==o&&(r=o.getBoundingClientRect());var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==s&&(a=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(t,r,a,e);s.setAttribute("x",l.xPos-(e?10:0))}if(null!==s){var c=i.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(e?-1*n.config.yaxis[t].title.rotate:n.config.yaxis[t].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,n,i){var r=this.w,a=0,o=0,s=10;return void 0===r.config.yaxis[t].title.text||t<0?{xPos:o,padd:0}:(i?(o=e.width+r.config.yaxis[t].title.offsetX+n.width/2+s/2,0===(a+=1)&&(o-=s/2)):(o=-1*e.width+r.config.yaxis[t].title.offsetX+s/2+n.width/2,r.globals.isBarHorizontal&&(o=-1*e.width-r.config.yaxis[t].title.offsetX-(s=25))),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(t,e){var n=this.w,i=0,r=0,a=18,o=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map((function(s,l){var c=n.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===t[l].width,u=t[l].width+e[l].width;s.opposite?n.globals.isBarHorizontal?n.globals.translateYAxisX[l]=(r=n.globals.gridWidth+n.globals.translateX-1)-s.labels.offsetX:(r=n.globals.gridWidth+n.globals.translateX+o,c||(o=o+u+20),n.globals.translateYAxisX[l]=r-s.labels.offsetX+20):(i=n.globals.translateX-a,c||(a=a+u+20),n.globals.translateYAxisX[l]=i+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=p.listToArray(e)).forEach((function(e,n){var i=t.config.yaxis[n];if(void 0!==i.labels.align){var r=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"));a=p.listToArray(a);var o=r.getBoundingClientRect();"left"===i.labels.align?(a.forEach((function(t,e){t.setAttribute("text-anchor","start")})),i.opposite||r.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===i.labels.align?(a.forEach((function(t,e){t.setAttribute("text-anchor","middle")})),r.setAttribute("transform","translate(".concat(o.width/2*(i.opposite?1:-1),", 0)"))):"right"===i.labels.align&&(a.forEach((function(t,e){t.setAttribute("text-anchor","end")})),i.opposite&&r.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),t}(),$=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.documentEvent=p.bind(this.documentEvent,this)}return i(t,[{key:"addEventListener",value:function(t,e){var n=this.w;n.globals.events.hasOwnProperty(t)?n.globals.events[t].push(e):n.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var n=this.w;if(n.globals.events.hasOwnProperty(t)){var i=n.globals.events[t].indexOf(e);-1!==i&&n.globals.events[t].splice(i,1)}}},{key:"fireEvent",value:function(t,e){var n=this.w;if(n.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var i=n.globals.events[t],r=i.length,a=0;a<r;a++)i[a].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,n=this.ctx,i=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach((function(t){i.addEventListener(t,(function(t){var i=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,n,i):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,n,i),n.ctx.events.fireEvent("click",[t,n,i]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(n){e.globals.dom.baseEl.addEventListener(n,t.documentEvent)})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,n=t.target.className;if("click"===t.type){var i=e.globals.dom.baseEl.querySelector(".apexcharts-menu");i&&i.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&i.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),K=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=e.filter((function(e){return e.name===t}))[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var i=p.extend(C,n);this.w.globals.locale=i.options}}]),t}(),J=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"drawAxis",value:function(t,e){var n,i,r=this.w.globals,a=this.w.config,o=new G(this.ctx),s=new Z(this.ctx);r.axisCharts&&"radar"!==t&&(r.isBarHorizontal?(i=s.drawYaxisInversed(0),n=o.drawXaxisInversed(0),r.dom.elGraphical.add(n),r.dom.elGraphical.add(i)):(n=o.drawXaxis(),r.dom.elGraphical.add(n),a.yaxis.map((function(t,e){-1===r.ignoreYAxisIndexes.indexOf(e)&&(i=s.drawYaxis(e),r.dom.Paper.add(i))})))),a.yaxis.map((function(t,e){-1===r.ignoreYAxisIndexes.indexOf(e)&&s.yAxisTitleRotate(e,t.opposite)}))}}]),t}(),Q=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new y(this.ctx),n=new m(this.ctx),i=t.config.xaxis.crosshairs.fill.gradient,r=t.config.xaxis.crosshairs.dropShadow,a=r.enabled,o=r.left,s=r.top,l=r.blur,c=r.color,u=r.opacity,d=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===t.config.xaxis.crosshairs.fill.type&&(d=e.drawGradient("vertical",i.colorFrom,i.colorTo,i.opacityFrom,i.opacityTo,null,i.stops,null));var h=e.drawRect();1===t.config.xaxis.crosshairs.width&&(h=e.drawLine()),h.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:t.globals.gridHeight,width:p.isNumber(t.config.xaxis.crosshairs.width)?t.config.xaxis.crosshairs.width:0,height:t.globals.gridHeight,fill:d,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),a&&(h=n.dropShadow(h,{left:o,top:s,blur:l,color:c,opacity:u})),t.globals.dom.elGraphical.add(h)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new y(this.ctx),n=t.config.yaxis[0].crosshairs,i=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var r=e.drawLine(-i,0,t.globals.gridWidth+i,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);r.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(r)}var a=e.drawLine(-i,0,t.globals.gridWidth+i,0,n.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(a)}}]),t}(),tt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,n=this.w,i=n.config;if(0!==i.responsive.length){var r=i.responsive.slice();r.sort((function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0})).reverse();var a=new B({}),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>i){var s=w.extendArrayProps(a,n.globals.initialConfig,n);t=p.extend(s,t),t=p.extend(n.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<r.length;l++)o<r[l].breakpoint&&(t=w.extendArrayProps(a,r[l].options,n),t=p.extend(n.config,t),e.overrideResponsiveOptions(t))};if(t){var s=w.extendArrayProps(a,t,n);s=p.extend(n.config,s),o(s=p.extend(s,t))}else o({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new B(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),et=function(){function t(n){e(this,t),this.ctx=n,this.colors=[],this.w=n.w;var i=this.w;this.isColorFn=!1,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return i(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,n=new p;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&"function"==typeof e.config.colors[0]&&(e.globals.colors=e.config.series.map((function(n,i){var r=e.config.colors[i];return r||(r=e.config.colors[0]),"function"==typeof r?(t.isColorFn=!0,r({value:e.globals.axisCharts?e.globals.series[i][0]?e.globals.series[i][0]:0:e.globals.series[i],seriesIndex:i,dataPointIndex:i,w:e})):r})))),e.globals.seriesColors.map((function(t,n){t&&(e.globals.colors[n]=t)})),e.config.theme.monochrome.enabled){var i=[],r=e.globals.series.length;this.isBarDistributed&&(r=e.globals.series[0].length*e.globals.series.length);for(var a=e.config.theme.monochrome.color,o=1/(r/e.config.theme.monochrome.shadeIntensity),s=e.config.theme.monochrome.shadeTo,l=0,c=0;c<r;c++){var u=void 0;"dark"===s?(u=n.shadeColor(-1*l,a),l+=o):(u=n.shadeColor(l,a),l+=o),i.push(u)}e.globals.colors=i.slice()}var d=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach((function(n){e.globals[n].colors=void 0===e.config[n].colors?t.isColorFn?e.config.colors:d:e.config[n].colors.slice(),t.pushExtraColors(e.globals[n].colors)})),e.globals.dataLabels.style.colors=void 0===e.config.dataLabels.style.colors?d:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),e.globals.radarPolygons.fill.colors=void 0===e.config.plotOptions.radar.polygons.fill.colors?["dark"===e.config.theme.mode?"#424242":"#fff"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),e.globals.markers.colors=void 0===e.config.markers.colors?d:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.w,r=e||i.globals.series.length;if(null===n&&(n=this.isBarDistributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.colorScale.inverse),n&&(r=i.globals.series[0].length*i.globals.series.length),t.length<r)for(var a=r-t.length,o=0;o<a;o++)t.push(t[o])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",n=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",i=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=i,t.theme.palette=n,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),t}(),nt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,n="title"===t?e.config.title:e.config.subtitle,i=e.globals.svgWidth/2,r=n.offsetY,a="middle";if("left"===n.align?(i=10,a="start"):"right"===n.align&&(i=e.globals.svgWidth-10,a="end"),i+=n.offsetX,r=r+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var o=new y(this.ctx).drawText({x:i,y:r,text:n.text,textAnchor:a,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(o)}}}]),t}(),it=function(){function t(n){e(this,t),this.w=n.w,this.dCtx=n}return i(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,n=0,i=0,r="title"===t?e.config.title.floating:e.config.subtitle.floating,a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==a&&!r){var o=a.getBoundingClientRect();n=o.width,i=e.globals.axisCharts?o.height+5:o.height}return{width:n,height:i}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend"),n=Object.assign({},p.getBoundingClientRect(e));return this.dCtx.lgRect=null!==e&&!t.config.legend.floating&&t.config.legend.show?{x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:{x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var n=t;if(this.w.globals.isMultiLineX){var i=e.map((function(t,e){return Array.isArray(t)?t.length:1})),r=Math.max.apply(Math,d(i));n=e[i.indexOf(r)]}return n}}]),t}(),rt=function(){function t(n){e(this,t),this.w=n.w,this.dCtx=n}return i(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,n=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var i=this.getxAxisTimeScaleLabelsCoords();t={width:i.width,height:i.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var r=e.globals.xLabelFormatter,a=p.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,n);e.globals.isBarHorizontal&&(o=a=e.globals.yAxisScale[0].result.reduce((function(t,e){return t.length>e.length?t:e}),0));var s=new W(this.dCtx.ctx),l=a;a=s.xLabelFormat(r,a,l),o=s.xLabelFormat(r,o,l),(e.config.xaxis.convertedCatToNumeric&&void 0===a||""===String(a).trim())&&(o=a="1");var c=new y(this.dCtx.ctx),u=c.getTextRects(a,e.config.xaxis.labels.style.fontSize),d=u;if(a!==o&&(d=c.getTextRects(o,e.config.xaxis.labels.style.fontSize)),(t={width:u.width>=d.width?u.width:d.width,height:u.height>=d.height?u.height:d.height}).width*n.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var h=function(t){return c.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};u=h(a),a!==o&&(d=h(o)),t.height=(u.height>d.height?u.height:d.height)/1.5,t.width=u.width>d.width?u.width:d.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,n=0;if(void 0!==t.config.xaxis.title.text){var i=new y(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=i.width,n=i.height}return{width:e,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map((function(t){return t.value})),i=n.reduce((function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e}),0);return 1.05*(t=new y(this.dCtx.ctx).getTextRects(i,e.config.xaxis.labels.style.fontSize)).width*n.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,n=this.w,i=n.globals,r=n.config,a=r.xaxis.type,o=t.width;i.skipLastTimelinelabel=!1,i.skipFirstTimelinelabel=!1;var s=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,l=function(t,s){(function(t){return-1!==i.collapsedSeriesIndices.indexOf(t)})(s)||("datetime"!==a&&e.dCtx.gridPad.left<o/2-e.dCtx.yAxisWidthLeft&&!i.rotateXLabels&&!r.xaxis.labels.trim&&(e.dCtx.xPadLeft=o/2+1),function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var r=e.dCtx.timescaleLabels[0].position-o/1.75+e.dCtx.yAxisWidthLeft;e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+o/1.75-e.dCtx.yAxisWidthRight>i.gridWidth&&(i.skipLastTimelinelabel=!0),r<0&&(i.skipFirstTimelinelabel=!0)}else"datetime"===a?e.dCtx.gridPad.right<o&&!i.rotateXLabels&&(i.skipLastTimelinelabel=!0):"datetime"!==a&&e.dCtx.gridPad.right<o/2-e.dCtx.yAxisWidthRight&&!i.rotateXLabels&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(e.dCtx.xPadRight=o/2+1)}())};r.yaxis.forEach((function(t,n){s?(e.dCtx.gridPad.left<o&&(e.dCtx.xPadLeft=o/2+1),e.dCtx.xPadRight=o/2+1):l(0,n)}))}}]),t}(),at=function(){function t(n){e(this,t),this.w=n.w,this.dCtx=n}return i(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,n=[],i=10,r=new X(this.dCtx.ctx);return e.config.yaxis.map((function(a,o){var s=e.globals.yAxisScale[o];if(!r.isYAxisHidden(o)&&a.labels.show&&s.result.length){var l=e.globals.yLabelFormatters[o],c=String(s.niceMin).length>String(s.niceMax).length?s.niceMin:s.niceMax,u=l(c,{seriesIndex:o,dataPointIndex:-1,w:e}),d=u;if(void 0!==u&&0!==u.length||(u=c),e.globals.isBarHorizontal){i=0;var h=e.globals.labels.slice();u=l(u=p.getLargestStringFromArr(h),{seriesIndex:o,dataPointIndex:-1,w:e}),d=t.dCtx.dimHelpers.getLargestStringFromMultiArr(u,h)}var f=new y(t.dCtx.ctx),g=f.getTextRects(u,a.labels.style.fontSize),m=g;u!==d&&(m=f.getTextRects(d,a.labels.style.fontSize)),n.push({width:(m.width>g.width?m.width:g.width)+i,height:m.height>g.height?m.height:g.height})}else n.push({width:0,height:0})})),n}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=[];return this.w.config.yaxis.map((function(n,i){if(n.show&&void 0!==n.title.text){var r=new y(t.dCtx.ctx).getTextRects(n.title.text,n.title.style.fontSize,n.title.style.fontFamily,"rotate(-90 0 0)",!1);e.push({width:r.width,height:r.height})}else e.push({width:0,height:0})})),e}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,n=0,i=0,r=t.globals.yAxisScale.length>1?10:0,a=new X(this.dCtx.ctx),o=function(o,s){var l=t.config.yaxis[s].floating,c=0;o.width>0&&!l?(c=o.width+r,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(s)&&(c=c-o.width-r)):c=l||a.isYAxisHidden(s)?0:5,t.config.yaxis[s].opposite?i+=c:n+=c,e+=c};return t.globals.yLabelsCoords.map((function(t,e){o(t,e)})),t.globals.yTitleCoords.map((function(t,e){o(t,e)})),t.globals.isBarHorizontal&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=i,e}}]),t}(),ot=function(){function t(n){e(this,t),this.w=n.w,this.dCtx=n}return i(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var n=e.config.chart.type,i=0,r="bar"===n||"rangeBar"===n?e.config.series.length:1;if(e.globals.comboBarCount>0&&(r=e.globals.comboBarCount),e.globals.collapsedSeries.forEach((function(t){"bar"!==t.type&&"rangeBar"!==t.type||(r-=1)})),e.config.chart.stacked&&(r=1),("bar"===n||"rangeBar"===n||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&r>0){var a,o,s=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);s<=3&&(s=e.globals.dataPoints),a=s/t,e.globals.minXDiff&&e.globals.minXDiff/a>0&&(o=e.globals.minXDiff/a),o>t/2&&(o/=2),(i=o/r*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(i=1),e.globals.barPadForNumericAxis=i=i/(r>1?1:1.5)+5}return i}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,n=e.globals,i=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach((function(n){i+=void 0!==e.config[n].text?e.config[n].margin:t.dCtx.isSparkline||!e.globals.axisCharts?0:5})),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(i+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-r.height-a.height-i,n.translateY=n.translateY+r.height+a.height+i}},{key:"setGridXPosForDualYAxis",value:function(t,e){var n=this.w,i=new X(this.dCtx.ctx);n.config.yaxis.map((function(r,a){-1!==n.globals.ignoreYAxisIndexes.indexOf(a)||r.floating||i.isYAxisHidden(a)||(r.opposite&&(n.globals.translateX=n.globals.translateX-(e[a].width+t[a].width)-parseInt(n.config.yaxis[a].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))}))}}]),t}(),st=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new it(this),this.dimYAxis=new at(this),this.dimXAxis=new rt(this),this.dimGrid=new ot(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return i(t,[{key:"plotCoords",value:function(){var t=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),t.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),t.gridHeight=t.gridHeight-this.gridPad.top-this.gridPad.bottom,t.gridWidth=t.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var e=this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth);t.gridWidth=t.gridWidth-2*e,t.translateX=t.translateX+this.gridPad.left+this.xPadLeft+(e>0?e+4:0),t.translateY=t.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,n=e.globals,i=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((function(t,n){e.globals.yLabelsCoords.push({width:i[n].width,index:n}),e.globals.yTitleCoords.push({width:r[n].width,index:n})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var a=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(a,o),n.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+e.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+e.config.xaxis.labels.offsetX;var s=this.yAxisWidth,l=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var c=10;("radar"===e.config.chart.type||this.isSparkline)&&(s=0,l=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0},l=0,s=0,c=0),this.dimXAxis.additionalPaddingXLabels(a);var u=function(){n.translateX=s,n.gridHeight=n.svgHeight-t.lgRect.height-l-(t.isSparkline?0:e.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-s};switch("top"===e.config.xaxis.position&&(c=n.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":n.translateY=c,u();break;case"top":n.translateY=this.lgRect.height+c,u();break;case"left":n.translateY=c,n.translateX=this.lgRect.width+s,n.gridHeight=n.svgHeight-l-12,n.gridWidth=n.svgWidth-this.lgRect.width-s;break;case"right":n.translateY=c,n.translateX=s,n.gridHeight=n.svgHeight-l-12,n.gridWidth=n.svgWidth-this.lgRect.width-s-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,i),new Z(this.ctx).setYAxisXPosition(i,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,n=t.config,i=0;t.config.legend.show&&!t.config.legend.floating&&(i=20);var r="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",a=n.plotOptions[r].offsetY,o=n.plotOptions[r].offsetX;if(!n.legend.show||n.legend.floating)return e.gridHeight=e.svgHeight-n.grid.padding.left+n.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=a,void(e.translateX=o+(e.svgWidth-e.gridWidth)/2);switch(n.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.gridHeight,e.translateY=a-10,e.translateX=o+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.gridHeight,e.translateY=this.lgRect.height+a+10,e.translateX=o+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-i,e.gridHeight="auto"!==n.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=o+this.lgRect.width+i;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-i-5,e.gridHeight="auto"!==n.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e){var n=this.w;this.xAxisHeight=(t.height+e.height)*(n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO)+(n.globals.rotateXLabels?22:10),this.xAxisWidth=t.width,this.xAxisHeight-e.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var i=0,r=0;n.config.yaxis.forEach((function(t){i+=t.labels.minWidth,r+=t.labels.maxWidth})),this.yAxisWidth<i&&(this.yAxisWidth=i),this.yAxisWidth>r&&(this.yAxisWidth=r)}}]),t}(),lt=function(){function t(n){e(this,t),this.w=n.w,this.lgCtx=n}return i(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:t.height,clww:t.width}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var n=this,i=this.w;if(i.globals.axisCharts||"radialBar"===i.config.chart.type){i.globals.resized=!0;var r=null,a=null;i.globals.risingSeries=[],i.globals.axisCharts?(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),a=parseInt(r.getAttribute("data:realIndex"),10)):(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),a=parseInt(r.getAttribute("rel"),10)-1),e?[{cs:i.globals.collapsedSeries,csi:i.globals.collapsedSeriesIndices},{cs:i.globals.ancillaryCollapsedSeries,csi:i.globals.ancillaryCollapsedSeriesIndices}].forEach((function(t){n.riseCollapsedSeries(t.cs,t.csi,a)})):this.hideSeries({seriesEl:r,realIndex:a})}else{var o=i.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),s=i.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var l=i.config.plotOptions.pie.donut.labels;new y(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,l)}o.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,n=t.realIndex,i=this.w,r=p.clone(i.config.series);if(i.globals.axisCharts){var a=!1;if(i.config.yaxis[n]&&i.config.yaxis[n].show&&i.config.yaxis[n].showAlways&&(a=!0,i.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(i.globals.ancillaryCollapsedSeries.push({index:n,data:r[n].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.ancillaryCollapsedSeriesIndices.push(n))),!a){i.globals.collapsedSeries.push({index:n,data:r[n].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.collapsedSeriesIndices.push(n);var o=i.globals.risingSeries.indexOf(n);i.globals.risingSeries.splice(o,1)}}else i.globals.collapsedSeries.push({index:n,data:r[n]}),i.globals.collapsedSeriesIndices.push(n);for(var s=e.childNodes,l=0;l<s.length;l++)s[l].classList.contains("apexcharts-series-markers-wrap")&&(s[l].classList.contains("apexcharts-hide")?s[l].classList.remove("apexcharts-hide"):s[l].classList.add("apexcharts-hide"));i.globals.allSeriesCollapsed=i.globals.collapsedSeries.length===i.config.series.length,r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,n){var i=this.w,r=p.clone(i.config.series);if(t.length>0){for(var a=0;a<t.length;a++)t[a].index===n&&(i.globals.axisCharts?(r[n].data=t[a].data.slice(),t.splice(a,1),e.splice(a,1),i.globals.risingSeries.push(n)):(r[n]=t[a].data,t.splice(a,1),e.splice(a,1),i.globals.risingSeries.push(n)));r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return t.forEach(e.globals.axisCharts?function(n,i){e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[])}:function(n,i){e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i]=0)}),t}}]),t}(),ct=function(){function t(n,i){e(this,t),this.ctx=n,this.w=n.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new lt(this)}return i(t,[{key:"init",value:function(){var t=this.w,e=t.globals,n=t.config;if((n.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&n.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),p.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this.w,e=t.config.legend.fontFamily,n=t.globals.seriesNames,i=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var r=t.config.plotOptions.heatmap.colorScale.ranges;n=r.map((function(t){return t.name?t.name:t.from+" - "+t.to})),i=r.map((function(t){return t.color}))}else this.isBarsDistributed&&(n=t.globals.labels.slice());for(var a=t.globals.legendFormatter,o=t.config.legend.inverseOrder,s=o?n.length-1:0;o?s>=0:s<=n.length-1;o?s--:s++){var l=a(n[s],{seriesIndex:s,w:t}),c=!1,u=!1;if(t.globals.collapsedSeries.length>0)for(var d=0;d<t.globals.collapsedSeries.length;d++)t.globals.collapsedSeries[d].index===s&&(c=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var h=0;h<t.globals.ancillaryCollapsedSeriesIndices.length;h++)t.globals.ancillaryCollapsedSeriesIndices[h]===s&&(u=!0);var f=document.createElement("span");f.classList.add("apexcharts-legend-marker");var g=t.config.legend.markers.offsetX,p=t.config.legend.markers.offsetY,m=t.config.legend.markers.height,v=t.config.legend.markers.width,x=t.config.legend.markers.strokeWidth,b=t.config.legend.markers.strokeColor,_=t.config.legend.markers.radius,S=f.style;S.background=i[s],S.color=i[s],t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[s]&&(S.background=t.config.legend.markers.fillColors[s]),void 0!==t.globals.seriesColors[s]&&(S.background=t.globals.seriesColors[s],S.color=t.globals.seriesColors[s]),S.height=Array.isArray(m)?parseFloat(m[s])+"px":parseFloat(m)+"px",S.width=Array.isArray(v)?parseFloat(v[s])+"px":parseFloat(v)+"px",S.left=Array.isArray(g)?g[s]:g,S.top=Array.isArray(p)?p[s]:p,S.borderWidth=Array.isArray(x)?x[s]:x,S.borderColor=Array.isArray(b)?b[s]:b,S.borderRadius=Array.isArray(_)?parseFloat(_[s])+"px":parseFloat(_)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[s]&&(f.innerHTML=t.config.legend.markers.customHTML[s]()):f.innerHTML=t.config.legend.markers.customHTML()),y.setAttrs(f,{rel:s+1,"data:collapsed":c||u}),(c||u)&&f.classList.add("apexcharts-inactive-legend");var C=document.createElement("div"),k=document.createElement("span");k.classList.add("apexcharts-legend-text"),k.innerHTML=Array.isArray(l)?l.join(" "):l;var A=t.config.legend.labels.useSeriesColors?t.globals.colors[s]:t.config.legend.labels.colors;A||(A=t.config.chart.foreColor),k.style.color=A,k.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",k.style.fontWeight=t.config.legend.fontWeight,k.style.fontFamily=e||t.config.chart.fontFamily,y.setAttrs(k,{rel:s+1,i:s,"data:default-text":encodeURIComponent(l),"data:collapsed":c||u}),C.appendChild(f),C.appendChild(k);var M=new w(this.ctx);t.config.legend.showForZeroSeries||0===M.getSeriesTotalByIndex(s)&&M.seriesHaveSameValues(s)&&!M.isSeriesNull(s)&&-1===t.globals.collapsedSeriesIndices.indexOf(s)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)&&C.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||M.isSeriesNull(s)&&-1===t.globals.collapsedSeriesIndices.indexOf(s)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)&&C.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(C),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("position-"+t.config.legend.position),C.classList.add("apexcharts-legend-series"),C.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",y.setAttrs(C,{rel:s+1,"data:collapsed":c||u}),(c||u)&&C.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||C.classList.add("apexcharts-no-click")}"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&t.globals.dom.elWrap.addEventListener("click",this.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&(t.globals.dom.elWrap.addEventListener("mousemove",this.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",this.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var n=this.w,i=n.globals.dom.baseEl.querySelector(".apexcharts-legend"),r=i.getBoundingClientRect(),a=0,o=0;if("bottom"===n.config.legend.position)o+=n.globals.svgHeight-r.height/2;else if("top"===n.config.legend.position){var s=new st(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(l>0?l-10:0)+(c>0?c-10:0)}i.style.position="absolute",o=o+e+n.config.legend.offsetY,i.style.left=(a=a+t+n.config.legend.offsetX)+"px",i.style.top=o+"px","bottom"===n.config.legend.position?(i.style.top="auto",i.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(i.style.left="auto",i.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach((function(t){i.style[t]&&(i.style[t]=parseInt(n.config.legend[t],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),n=new st(this.ctx),i=n.dimHelpers.getTitleSubtitleCoords("title"),r=n.dimHelpers.getTitleSubtitleCoords("subtitle"),a=0;"bottom"===t.config.legend.position?a=-e.clwh/1.8:"top"===t.config.legend.position&&(a=i.height+r.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,a)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),n=0;"left"===t.config.legend.position&&(n=20),"right"===t.config.legend.position&&(n=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,n=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(n){var i=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,i,this.w]),new L(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&n&&new L(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){if(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker")){var e=parseInt(t.target.getAttribute("rel"),10)-1,n="true"===t.target.getAttribute("data:collapsed"),i=this.w.config.chart.events.legendClick;"function"==typeof i&&i(this.ctx,e,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,e,this.w]);var r=this.w.config.legend.markers.onClick;"function"==typeof r&&t.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,e,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,e,this.w])),this.legendHelpers.toggleDataSeries(e,n)}}}]),t}(),ut=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar}return i(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,n=function(){return document.createElement("div")},i=n();if(i.setAttribute("class","apexcharts-toolbar"),i.style.top=e.config.chart.toolbar.offsetY+"px",i.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(i),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(n());var a=[],o=function(n,i,r){var o=n.toLowerCase();t.t[o]&&e.config.chart.zoom.enabled&&a.push({el:i,icon:"string"==typeof t.t[o]?t.t[o]:r,title:t.localeValues[n],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(n){t.t[n]&&e.config.chart[n].enabled&&a.push({el:"zoom"===n?t.elZoom:t.elSelection,icon:"string"==typeof t.t[n]?t.t[n]:"zoom"===n?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===n?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(n,"-icon")})};s("zoom"),s("selection"),this.t.pan&&e.config.chart.zoom.enabled&&a.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&a.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)a.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});a.forEach((function(t,e){t.index&&p.moveIndexInArray(a,e,t.index)}));for(var c=0;c<a.length;c++)y.setAttrs(a[c].el,{class:a[c].class,title:a[c].title}),a[c].el.innerHTML=a[c].icon,i.appendChild(a[c].el);this._createHamburgerMenu(i),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),y.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var n=0;n<e.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=e[n].title,y.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(e[n].name),title:e[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))}));for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls();var n="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,i="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[i]=!e.w.globals[i],n.classList.contains(e.ctx.toolbar.selectedClass)?n.classList.remove(e.ctx.toolbar.selectedClass):n.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,n="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(e){e&&e.classList.remove(t.selectedClass)}))}},{key:"handleZoomIn",value:function(){var t=this.w,e=(t.globals.minX+t.globals.maxX)/2,n=this._getNewMinXMaxX((t.globals.minX+e)/2,(t.globals.maxX+e)/2);t.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(!("datetime"===t.config.xaxis.type&&new Date(t.globals.minX).getUTCFullYear()<1e3)){var e=(t.globals.minX+t.globals.maxX)/2,n=this._getNewMinXMaxX(t.globals.minX-(e-t.globals.minX),t.globals.maxX-(e-t.globals.maxX));t.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(t):t,maxX:n?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var n=this.w;if(void 0!==t||void 0!==e){if(!(n.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=n.globals.dataPoints),e-t<2))){var i={min:t,max:e},r=this.getBeforeZoomRange(i);r&&(i=r.xaxis);var a={xaxis:i},o=p.clone(n.globals.initialConfig.yaxis);n.config.chart.zoom.autoScaleYaxis&&(o=new j(this.ctx).autoScaleY(this.ctx,o,{xaxis:i})),n.config.chart.group||(a.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(i,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),n}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout((function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(t){var e=this.w,n=new Y(this.ctx);switch(t){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach((function(t){var e=t.w;e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var n=t.ctx.series.emptyCollapsedSeries(p.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(n,e.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),dt=function(t){s(r,t);var n=u(r);function r(t){var i;return e(this,r),(i=n.call(this,t)).ctx=t,i.w=t.w,i.dragged=!1,i.graphics=new y(i.ctx),i.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],i.clientX=0,i.clientY=0,i.startX=0,i.endX=0,i.dragX=0,i.startY=0,i.endY=0,i.dragY=0,i.moveDirection="none",i}return i(r,[{key:"init",value:function(t){var e=this,n=t.xyRatios,i=this.w,r=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=i.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),i.globals.dom.elGraphical.add(this.zoomRect),i.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===i.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:i.globals.gridWidth,maxY:i.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===i.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:i.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=i.globals.dom.baseEl.querySelector("".concat(i.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(t){e.hoverArea.addEventListener(t,r.svgMouseEvents.bind(r,n),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var n=this.w,i=this,r=this.ctx.toolbar,a=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,o=n.config.chart.toolbar.autoSelected;e.shiftKey?(this.shiftWasPressed=!0,r.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(r.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1);var s=e.target.classList;if(!(s.contains("apexcharts-selection-rect")||s.contains("apexcharts-legend-marker")||s.contains("apexcharts-legend-text")||e.target.parentNode.classList.contains("apexcharts-toolbar"))){if(i.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,i.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var l=i.gridRect.getBoundingClientRect();i.startX=i.clientX-l.left,i.startY=i.clientY-l.top,i.dragged=!1,i.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(i.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,i.w.globals.mousedown&&i.panDragging({context:i,zoomtype:a,xyRatios:t})):(i.w.globals.mousedown&&n.globals.zoomEnabled||i.w.globals.mousedown&&n.globals.selectionEnabled)&&(i.selection=i.selectionDrawing({context:i,zoomtype:a}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var c=i.gridRect.getBoundingClientRect();i.w.globals.mousedown&&(i.endX=i.clientX-c.left,i.endY=i.clientY-c.top,i.dragX=Math.abs(i.endX-i.startX),i.dragY=Math.abs(i.endY-i.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&i.selectionDrawn({context:i,zoomtype:a}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&i.delayedPanScrolled()),n.globals.zoomEnabled&&i.hideSelectionRect(this.selectionRect),i.dragged=!1,i.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(null!=t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var n=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio;this.drawSelectionRect({x:n,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-n,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,n=t.y,i=t.width,r=t.height,a=t.translateX,o=t.translateY,s=this.w,l=this.zoomRect,c=this.selectionRect;if(this.dragged||null!==s.globals.selection){var u={transform:"translate("+(void 0===a?0:a)+", "+(void 0===o?0:o)+")"};s.globals.zoomEnabled&&this.dragged&&(i<0&&(i=1),l.attr({x:e,y:n,width:i,height:r,fill:s.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":s.config.chart.zoom.zoomedArea.fill.opacity,stroke:s.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":s.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":s.config.chart.zoom.zoomedArea.stroke.opacity}),y.setAttrs(l.node,u)),s.globals.selectionEnabled&&(c.attr({x:e,y:n,width:i>0?i:0,height:r>0?r:0,fill:s.config.chart.selection.fill.color,"fill-opacity":s.config.chart.selection.fill.opacity,stroke:s.config.chart.selection.stroke.color,"stroke-width":s.config.chart.selection.stroke.width,"stroke-dasharray":s.config.chart.selection.stroke.dashArray,"stroke-opacity":s.config.chart.selection.stroke.opacity}),y.setAttrs(c.node,u))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e,n=t.zoomtype,i=this.w,r=t.context,a=this.gridRect.getBoundingClientRect(),o=r.startX-1,s=r.startY,l=!1,c=!1,u=r.clientX-a.left-o,d=r.clientY-a.top-s;return Math.abs(u+o)>i.globals.gridWidth?u=i.globals.gridWidth-o:r.clientX-a.left<0&&(u=o),o>r.clientX-a.left&&(l=!0,u=Math.abs(u)),s>r.clientY-a.top&&(c=!0,d=Math.abs(d)),r.drawSelectionRect(e="x"===n?{x:l?o-u:o,y:0,width:u,height:i.globals.gridHeight}:"y"===n?{x:0,y:c?s-d:s,width:i.globals.gridWidth,height:d}:{x:l?o-u:o,y:c?s-d:s,width:u,height:d}),r.selectionDragging("resizing"),e}},{key:"selectionDragging",value:function(t,e){var n=this,i=this.w,r=this.xyRatios,a=this.selectionRect,o=0;"resizing"===t&&(o=30);var s=function(t){return parseFloat(a.node.getAttribute(t))},l={x:s("x"),y:s("y"),width:s("width"),height:s("height")};i.globals.selection=l,"function"==typeof i.config.chart.events.selection&&i.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var t=n.gridRect.getBoundingClientRect(),e=a.node.getBoundingClientRect();i.config.chart.events.selection(n.ctx,{xaxis:{min:i.globals.xAxisScale.niceMin+(e.left-t.left)*r.xRatio,max:i.globals.xAxisScale.niceMin+(e.right-t.left)*r.xRatio},yaxis:{min:i.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*r.yRatio[0],max:i.globals.yAxisScale[0].niceMax-(e.top-t.top)*r.yRatio[0]}})}),o))}},{key:"selectionDrawn",value:function(t){var e=t.zoomtype,n=this.w,i=t.context,r=this.xyRatios,a=this.ctx.toolbar;if(i.startX>i.endX){var o=i.startX;i.startX=i.endX,i.endX=o}if(i.startY>i.endY){var s=i.startY;i.startY=i.endY,i.endY=s}var l=n.globals.xAxisScale.niceMin+i.startX*r.xRatio,c=n.globals.xAxisScale.niceMin+i.endX*r.xRatio,u=[],d=[];if(n.config.yaxis.forEach((function(t,e){u.push(n.globals.yAxisScale[e].niceMax-r.yRatio[e]*i.startY),d.push(n.globals.yAxisScale[e].niceMax-r.yRatio[e]*i.endY)})),i.dragged&&(i.dragX>10||i.dragY>10)&&l!==c)if(n.globals.zoomEnabled){var h=p.clone(n.globals.initialConfig.yaxis),f=p.clone(n.globals.initialConfig.xaxis);if(n.globals.zoomed=!0,n.config.xaxis.convertedCatToNumeric&&(l=Math.floor(l),c=Math.floor(c),l<1&&(l=1,c=n.globals.dataPoints),c-l<2&&(c=l+1)),"xy"!==e&&"x"!==e||(f={min:l,max:c}),"xy"!==e&&"y"!==e||h.forEach((function(t,e){h[e].min=d[e],h[e].max=u[e]})),n.config.chart.zoom.autoScaleYaxis){var g=new j(i.ctx);h=g.autoScaleY(i.ctx,h,{xaxis:f})}if(a){var m=a.getBeforeZoomRange(f,h);m&&(f=m.xaxis?m.xaxis:f,h=m.yaxis?m.yaxis:h)}var v={xaxis:f};n.config.chart.group||(v.yaxis=h),i.ctx.updateHelpers._updateOptions(v,!1,i.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof n.config.chart.events.zoomed&&a.zoomCallback(f,h)}else if(n.globals.selectionEnabled){var y,x=null;y={min:l,max:c},"xy"!==e&&"y"!==e||(x=p.clone(n.config.yaxis)).forEach((function(t,e){x[e].min=d[e],x[e].max=u[e]})),n.globals.selection=i.selection,"function"==typeof n.config.chart.events.selection&&n.config.chart.events.selection(i.ctx,{xaxis:y,yaxis:x})}}},{key:"panDragging",value:function(t){var e=this.w,n=t.context;if(void 0!==e.globals.lastClientPosition.x){var i=e.globals.lastClientPosition.x-n.clientX,r=e.globals.lastClientPosition.y-n.clientY;Math.abs(i)>Math.abs(r)&&i>0?this.moveDirection="left":Math.abs(i)>Math.abs(r)&&i<0?this.moveDirection="right":Math.abs(r)>Math.abs(i)&&r>0?this.moveDirection="up":Math.abs(r)>Math.abs(i)&&r<0&&(this.moveDirection="down")}e.globals.lastClientPosition={x:n.clientX,y:n.clientY},e.config.xaxis.convertedCatToNumeric||n.panScrolled(e.globals.minX,e.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,n=t.globals.maxX,i=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+i,n=t.globals.maxX+i):"right"===this.moveDirection&&(e=t.globals.minX-i,n=t.globals.maxX-i),e=Math.floor(e),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:e,max:n}},e,n)}},{key:"panScrolled",value:function(t,e){var n=this.w,i=this.xyRatios,r=p.clone(n.globals.initialConfig.yaxis);"left"===this.moveDirection?(t=n.globals.minX+n.globals.gridWidth/15*i.xRatio,e=n.globals.maxX+n.globals.gridWidth/15*i.xRatio):"right"===this.moveDirection&&(t=n.globals.minX-n.globals.gridWidth/15*i.xRatio,e=n.globals.maxX-n.globals.gridWidth/15*i.xRatio),(t<n.globals.initialMinX||e>n.globals.initialMaxX)&&(t=n.globals.minX,e=n.globals.maxX);var a={min:t,max:e};n.config.chart.zoom.autoScaleYaxis&&(r=new j(this.ctx).autoScaleY(this.ctx,r,{xaxis:a}));var o={xaxis:{min:t,max:e}};n.config.chart.group||(o.yaxis=r),this.updateScrolledChart(o,t,e)}},{key:"updateScrolledChart",value:function(t,e,n){var i=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof i.config.chart.events.scrolled&&i.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:n}})}}]),r}(ut),ht=function(){function t(n){e(this,t),this.w=n.w,this.ttCtx=n,this.ctx=n.ctx}return i(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,n=t.clientX,i=t.clientY,r=this.w,a=r.globals.gridWidth,o=a/(r.globals.dataPoints-1),s=t.elGrid.getBoundingClientRect(),l=this.hasBars();!r.globals.comboCharts&&!l||r.config.xaxis.convertedCatToNumeric||(o=a/r.globals.dataPoints);var c=n-s.left-r.globals.barPadForNumericAxis,u=i-s.top;c<0||u<0||c>r.globals.gridWidth||u>r.globals.gridHeight?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):r.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):r.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var d=Math.round(c/o);l&&!r.config.xaxis.convertedCatToNumeric&&(d=Math.ceil(c/o),d-=1);for(var h,f=null,g=null,m=[],v=0;v<r.globals.seriesXvalues.length;v++)m.push([r.globals.seriesXvalues[v][0]-1e-6].concat(r.globals.seriesXvalues[v]));return m=m.map((function(t){return t.filter((function(t){return t}))})),h=r.globals.seriesYvalues.map((function(t){return t.filter((function(t){return p.isNumber(t)}))})),r.globals.isXNumeric&&(f=(g=this.closestInMultiArray(c,u,m,h)).index,d=g.j,null!==f&&(d=(g=this.closestInArray(c,m=r.globals.seriesXvalues[f])).index)),r.globals.capturedSeriesIndex=null===f?-1:f,(!d||d<1)&&(d=0),r.globals.capturedDataPointIndex=d,{capturedSeries:f,j:d,hoverX:c,hoverY:u}}},{key:"closestInMultiArray",value:function(t,e,n,i){var r=0,a=null,o=-1;this.w.globals.series.length>1?r=this.getFirstActiveXArray(n):a=0;var s=i[r][0],l=Math.abs(t-n[r][0]),c=Math.abs(e-s),u=c+l;return i.map((function(r,s){r.map((function(r,d){var h=Math.abs(e-i[s][d]),f=Math.abs(t-n[s][d]),g=f+h;g<u&&(u=g,l=f,c=h,a=s,o=d)}))})),{index:a,j:o}}},{key:"getFirstActiveXArray",value:function(t){for(var e=0,n=t.map((function(t,e){return t.length>0?e:-1})),i=0;i<n.length;i++)if(-1!==n[i]){e=n[i];break}return e}},{key:"closestInArray",value:function(t,e){for(var n=null,i=Math.abs(t-e[0]),r=0;r<e.length;r++){var a=Math.abs(t-e[r]);a<i&&(i=a,n=r)}return{index:n}}},{key:"isXoverlap",value:function(t){var e=[],n=this.w.globals.seriesX.filter((function(t){return void 0!==t[0]}));if(n.length>0)for(var i=0;i<n.length-1;i++)void 0!==n[i][t]&&void 0!==n[i+1][t]&&n[i][t]!==n[i+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,n=0;n<e.length-1;n++)if(e[n].data.length!==e[n+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return d(t).reduce((function(t,e){return t+e.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=d(t)).sort((function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1}));var e=[];return t.forEach((function(t){e.push(t.querySelector(".apexcharts-marker"))})),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,n=e.config.markers.hover.size;return void 0===n&&(n=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var i=n.allTooltipSeriesGroups,r=0;r<i.length;r++)"enable"===t?(i[r].classList.add("apexcharts-active"),i[r].style.display=e.config.tooltip.items.display):(i[r].classList.remove("apexcharts-active"),i[r].style.display="none")}}]),t}(),ft=function(){function t(n){e(this,t),this.w=n.w,this.ctx=n.ctx,this.ttCtx=n,this.tooltipUtil=new ht(n)}return i(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,n=void 0===e||e,i=t.ttItems,r=t.i,a=void 0===r?0:r,o=t.j,s=void 0===o?null:o,l=this.w;void 0!==l.config.tooltip.custom?this.handleCustomTooltip({i:a,j:s,y1:t.y1,y2:t.y2,w:l}):this.toggleActiveInactiveSeries(n);var c=this.getValuesToPrint({i:a,j:s});this.printLabels({i:a,j:s,values:c,ttItems:i,shared:n});var u=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=u.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=u.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,n=this,i=t.i,r=t.j,a=t.values,o=t.ttItems,s=t.shared,l=this.w,c=a.xVal,u=a.zVal,d=a.xAxisTTVal,h="",f=l.globals.colors[i];null!==r&&l.config.plotOptions.bar.distributed&&(f=l.globals.colors[r]);for(var g=function(t,a){var g=n.getFormatters(i);h=n.getSeriesName({fn:g.yLbTitleFormatter,index:i,seriesIndex:i,j:r});var p=l.config.tooltip.inverseOrder?a:t;if(l.globals.axisCharts){var m=function(t){return g.yLbFormatter(l.globals.series[t][r],{series:l.globals.series,seriesIndex:t,dataPointIndex:r,w:l})};s?(g=n.getFormatters(p),h=n.getSeriesName({fn:g.yLbTitleFormatter,index:p,seriesIndex:i,j:r}),f=l.globals.colors[p],e=m(p)):e=m(i)}null===r&&(e=g.yLbFormatter(l.globals.series[i],l)),n.DOMHandling({i:i,t:p,j:r,ttItems:o,values:{val:e,xVal:c,xAxisTTVal:d,zVal:u},seriesName:h,shared:s,pColor:f})},p=0,m=l.globals.series.length-1;p<l.globals.series.length;p++,m--)g(p,m)}},{key:"getFormatters",value:function(t){var e,n=this.w,i=n.globals.yLabelFormatters[t];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(i=n.globals.ttVal[t]&&n.globals.ttVal[t].formatter,e=n.globals.ttVal[t]&&n.globals.ttVal[t].title&&n.globals.ttVal[t].title.formatter):(i=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(e=n.globals.ttVal.title.formatter)):e=n.config.tooltip.y.title.formatter,"function"!=typeof i&&(i=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:i,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.seriesIndex,n=t.j,i=this.w;return(0,t.fn)(String(i.globals.seriesNames[t.index]),{series:i.globals.series,seriesIndex:e,dataPointIndex:n,w:i})}},{key:"DOMHandling",value:function(t){var e=t.t,n=t.ttItems,i=t.values,r=t.seriesName,a=t.shared,o=t.pColor,s=this.w,l=this.ttCtx,c=i.val,u=i.xVal,d=i.xAxisTTVal,h=i.zVal,f=null;f=n[e].children,s.config.tooltip.fillSeriesColor&&(n[e].style.backgroundColor=o,f[0].style.display="none"),l.showTooltipTitle&&(null===l.tooltipTitle&&(l.tooltipTitle=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),l.tooltipTitle.innerHTML=u),l.blxaxisTooltip&&(l.xaxisTooltipText.innerHTML=""!==d?d:u);var g=n[e].querySelector(".apexcharts-tooltip-text-label");g&&(g.innerHTML=r||"");var p=n[e].querySelector(".apexcharts-tooltip-text-value");p&&(p.innerHTML=void 0!==c?c:""),f[0]&&f[0].classList.contains("apexcharts-tooltip-marker")&&(s.config.tooltip.marker.fillColors&&Array.isArray(s.config.tooltip.marker.fillColors)&&(o=s.config.tooltip.marker.fillColors[e]),f[0].style.backgroundColor=o),s.config.tooltip.marker.show||(f[0].style.display="none"),null!==h&&(n[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=s.config.tooltip.z.title,n[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==h?h:""),a&&f[0]&&(f[0].parentNode.style.display=null==c||s.globals.collapsedSeriesIndices.indexOf(e)>-1?"none":s.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,n=t.j,i=this.w,r=this.ctx.series.filteredSeriesX(),a="",o="",s=null,l=null,c={series:i.globals.series,seriesIndex:e,dataPointIndex:n,w:i},u=i.globals.ttZFormatter;null===n?l=i.globals.series[e]:i.globals.isXNumeric?(a=r[e][n],0===r[e].length&&(a=r[this.tooltipUtil.getFirstActiveXArray(r)][n])):a=void 0!==i.globals.labels[n]?i.globals.labels[n]:"";var d=a;return i.globals.isXNumeric&&"datetime"===i.config.xaxis.type?a=new W(this.ctx).xLabelFormat(i.globals.ttKeyFormatter,d,d):i.globals.isBarHorizontal||(a=i.globals.xLabelFormatter(d,c)),void 0!==i.config.tooltip.x.formatter&&(a=i.globals.ttKeyFormatter(d,c)),i.globals.seriesZ.length>0&&i.globals.seriesZ[0].length>0&&(s=u(i.globals.seriesZ[e][n],i)),o="function"==typeof i.config.xaxis.tooltip.formatter?i.globals.xaxisTooltipFormatter(d,c):a,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(a)?a.join(" "):a,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,n=t.j,i=t.y1,r=t.y2,a=t.w,o=this.ttCtx.getElTooltip(),s=a.config.tooltip.custom;Array.isArray(s)&&s[e]&&(s=s[e]),o.innerHTML=s({ctx:this.ctx,series:a.globals.series,seriesIndex:e,dataPointIndex:n,y1:i,y2:r,w:a})}}]),t}(),gt=function(){function t(n){e(this,t),this.ttCtx=n,this.ctx=n.ctx,this.w=n.w}return i(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,i=this.w,r=n.getElXCrosshairs(),a=t-n.xcrosshairsWidth/2,o=i.globals.labels.slice().length;if(null!==e&&(a=i.globals.gridWidth/o*e),null!==r&&(r.setAttribute("x",a),r.setAttribute("x1",a),r.setAttribute("x2",a),r.setAttribute("y2",i.globals.gridHeight),r.classList.add("apexcharts-active")),a<0&&(a=0),a>i.globals.gridWidth&&(a=i.globals.gridWidth),n.blxaxisTooltip){var s=a;"tickWidth"!==i.config.xaxis.crosshairs.width&&"barWidth"!==i.config.xaxis.crosshairs.width||(s=a+n.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&y.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&y.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip){n.xaxisTooltip.classList.add("apexcharts-active");var i,r=n.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;t-=n.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=e.globals.translateX,i=new y(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=i.width+"px",n.xaxisTooltip.style.left=t+"px",n.xaxisTooltip.style.top=r+"px")}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var i=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),r=e.globals.translateY+i,a=n.yaxisTTEls[t].getBoundingClientRect().height,o=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(o-=26),r-=a/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(n.yaxisTTEls[t].classList.add("apexcharts-active"),n.yaxisTTEls[t].style.top=r+"px",n.yaxisTTEls[t].style.left=o+e.config.yaxis[t].tooltip.offsetX+"px"):n.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.w,r=this.ttCtx,a=r.getElTooltip(),o=r.tooltipRect,s=null!==n?parseFloat(n):1,l=parseFloat(t)+s+5,c=parseFloat(e)+s/2;if(l>i.globals.gridWidth/2&&(l=l-o.ttWidth-s-15),l>i.globals.gridWidth-o.ttWidth-10&&(l=i.globals.gridWidth-o.ttWidth),l<-20&&(l=-20),i.config.tooltip.followCursor){var u=r.getElGrid(),d=u.getBoundingClientRect();c=r.e.clientY+i.globals.translateY-d.top-o.ttHeight/2}if(!i.config.tooltip.followCursor){var h=this.positionChecks(o,l,c);l=h.x,c=h.y}isNaN(l)||(a.style.left=(l+=i.globals.translateX)+"px",a.style.top=c+"px")}},{key:"positionChecks",value:function(t,e,n){var i=this.w;return t.ttHeight/2+n>i.globals.gridHeight&&(n=i.globals.gridHeight-t.ttHeight+i.globals.translateY),n<0&&(n=0),{x:e,y:n}}},{key:"moveMarkers",value:function(t,e){var n=this.w,i=this.ttCtx;if(n.globals.markers.size[t]>0)for(var r=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),a=0;a<r.length;a++)parseInt(r[a].getAttribute("rel"),10)===e&&(i.marker.resetPointsSize(),i.marker.enlargeCurrentPoint(e,r[a]));else i.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var n,i,r=this.w,a=this.ttCtx,o=r.globals.pointsArray,s=a.tooltipUtil.getHoverMarkerSize(e),l=r.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l){n=o[e][t][0],i=o[e][t][1]?o[e][t][1]:0;var c=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));c&&i<r.globals.gridHeight&&i>0&&(c.setAttribute("r",s),c.setAttribute("cx",n),c.setAttribute("cy",i)),this.moveXCrosshairs(n),a.fixedTooltip||this.moveTooltip(n,i,s)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,n=this.ttCtx,i=n.w,r=0,a=0,o=i.globals.pointsArray;e=new L(this.ctx).getActiveConfigSeriesIndex(!0);var s=n.tooltipUtil.getHoverMarkerSize(e);o[e]&&(r=o[e][t][0],a=o[e][t][1]);var l=n.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<i.globals.series.length;c++){var u=o[c];if(i.globals.comboCharts&&void 0===u&&l.splice(c,0,null),u&&u.length){var d=o[c][t][1];l[c].setAttribute("cx",r),null!==d&&!isNaN(d)&&d<i.globals.gridHeight&&d>0?(l[c]&&l[c].setAttribute("r",s),l[c]&&l[c].setAttribute("cy",d)):l[c]&&l[c].setAttribute("r",0)}}this.moveXCrosshairs(r),n.fixedTooltip||this.moveTooltip(r,a||i.globals.gridHeight,s)}},{key:"moveStickyTooltipOverBars",value:function(t){var e,n=this.w,i=this.ttCtx,r=n.globals.columnSeries?n.globals.columnSeries.length:n.globals.series.length,a=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1,o=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(a,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(t,"']")),s=o?parseFloat(o.getAttribute("cx")):0,l=o?parseFloat(o.getAttribute("barWidth")):0;n.globals.isXNumeric?s-=r%2!=0?l/2:0:(s=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(s)&&(s=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2));var c=i.getElGrid().getBoundingClientRect();e=i.e.clientY-c.top-i.tooltipRect.ttHeight/2,this.moveXCrosshairs(s),i.fixedTooltip||this.moveTooltip(s,e||n.globals.gridHeight)}}]),t}(),pt=function(){function t(n){e(this,t),this.w=n.w,this.ttCtx=n,this.ctx=n.ctx,this.tooltipPosition=new gt(n)}return i(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new y(this.ctx),n=new T(this.ctx),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");i=d(i),t.config.chart.stacked&&i.sort((function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))}));for(var r=0;r<i.length;r++){var a=i[r].querySelector(".apexcharts-series-markers-wrap");if(null!==a){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(s+=" no-pointer-events");var l=n.getMarkerConfig(s,r);(o=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(t.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),a.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w;"bubble"!==r.config.chart.type&&this.newPointSize(t,e);var a=e.getAttribute("cx"),o=e.getAttribute("cy");if(null!==n&&null!==i&&(a=n,o=i),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if("radar"===r.config.chart.type){var s=this.ttCtx.getElGrid(),l=s.getBoundingClientRect();a=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(a,o,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,n=this.ttCtx,i=t,r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=e.config.markers.hover.size,o=0;o<r.length;o++){var s=r[o].getAttribute("rel"),l=r[o].getAttribute("index");if(void 0===a&&(a=e.globals.markers.size[l]+e.config.markers.hover.sizeOffset),i===parseInt(s,10)){this.newPointSize(i,r[o]);var c=r[o].getAttribute("cx"),u=r[o].getAttribute("cy");this.tooltipPosition.moveXCrosshairs(c),n.fixedTooltip||this.tooltipPosition.moveTooltip(c,u,a)}else this.oldPointSize(r[o])}}},{key:"newPointSize",value:function(t,e){var n=this.w,i=n.config.markers.hover.size,r=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==r.getAttribute("default-marker-size")){var a=parseInt(r.getAttribute("index"),10);void 0===i&&(i=n.globals.markers.size[a]+n.config.markers.hover.sizeOffset),r.setAttribute("r",i)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var n=parseFloat(t[e].getAttribute("default-marker-size"));p.isNumber(n)?t[e].setAttribute("r",n):t[e].setAttribute("r",0)}}}]),t}(),mt=function(){function t(n){e(this,t),this.w=n.w,this.ttCtx=n}return i(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTooltip",value:function(t){var e=t.e,n=t.opt,i=t.x,r=t.y,a=this.ttCtx,o=this.w;if(e.target.classList.contains("apexcharts-heatmap-rect")){var s=this.getAttr(e,"i"),l=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),u=this.getAttr(e,"cy"),d=this.getAttr(e,"width"),h=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:s,j:l,shared:!1}),o.globals.capturedSeriesIndex=s,o.globals.capturedDataPointIndex=l,i=c+a.tooltipRect.ttWidth/2+d,r=u+a.tooltipRect.ttHeight/2-h/2,a.tooltipPosition.moveXCrosshairs(c+d/2),i>o.globals.gridWidth/2&&(i=c-a.tooltipRect.ttWidth/2+d),a.w.config.tooltip.followCursor){var f=a.getElGrid().getBoundingClientRect();r=a.e.clientY-f.top+o.globals.translateY/2-10}}return{x:i,y:r}}},{key:"handleMarkerTooltip",value:function(t){var e,n,i=t.e,r=t.opt,a=t.x,o=t.y,s=this.w,l=this.ttCtx;if(i.target.classList.contains("apexcharts-marker")){var c=parseInt(r.paths.getAttribute("cx"),10),u=parseInt(r.paths.getAttribute("cy"),10),d=parseFloat(r.paths.getAttribute("val"));if(n=parseInt(r.paths.getAttribute("rel"),10),e=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var h=p.findAncestor(r.paths,"apexcharts-series");h&&(e=parseInt(h.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:e,j:n,shared:!l.showOnIntersect&&s.config.tooltip.shared}),"mouseup"===i.type&&l.markerClick(i,e,n),s.globals.capturedSeriesIndex=e,s.globals.capturedDataPointIndex=n,a=c,o=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var f=l.getElGrid().getBoundingClientRect();o=l.e.clientY+s.globals.translateY-f.top}d<0&&(o=u),l.marker.enlargeCurrentPoint(n,r.paths,a,o)}return{x:a,y:o}}},{key:"handleBarTooltip",value:function(t){var e,n,i=t.e,r=t.opt,a=this.w,o=this.ttCtx,s=o.getElTooltip(),l=0,c=0,u=0,d=this.getBarTooltipXY({e:i,opt:r}),h=d.barHeight,f=d.j;if(a.globals.capturedSeriesIndex=e=d.i,a.globals.capturedDataPointIndex=f,a.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!a.config.tooltip.shared?(c=d.x,u=d.y,n=Array.isArray(a.config.stroke.width)?a.config.stroke.width[e]:a.config.stroke.width,l=c):a.globals.comboCharts||a.config.tooltip.shared||(l/=2),isNaN(u)?u=a.globals.svgHeight-o.tooltipRect.ttHeight:u<0&&(u=0),c+o.tooltipRect.ttWidth>a.globals.gridWidth?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();u=o.e.clientY-g.top}if(null===o.tooltip&&(o.tooltip=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),a.config.tooltip.shared||o.tooltipPosition.moveXCrosshairs(a.globals.comboBarCount>0?l+n/2:l),!o.fixedTooltip&&(!a.config.tooltip.shared||a.globals.isBarHorizontal&&o.tooltipUtil.hasBars())){var p=a.globals.isMultipleYAxis?a.config.yaxis[m]&&a.config.yaxis[m].reversed:a.config.yaxis[0].reversed;p&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),s.style.left=c+a.globals.translateX+"px";var m=parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10);!p||a.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(u=u+h-2*(a.globals.series[e][f]<0?h:0)),s.style.top=o.tooltipRect.ttHeight+u>a.globals.gridHeight?(u=a.globals.gridHeight-o.tooltipRect.ttHeight+a.globals.translateY)+"px":u+a.globals.translateY-o.tooltipRect.ttHeight/2+"px"}}},{key:"getBarTooltipXY",value:function(t){var e=t.e,n=t.opt,i=this.w,r=null,a=this.ttCtx,o=0,s=0,l=0,c=0,u=0,d=e.target.classList;if(d.contains("apexcharts-bar-area")||d.contains("apexcharts-candlestick-area")||d.contains("apexcharts-rangebar-area")){var h=e.target,f=h.getBoundingClientRect(),g=n.elGrid.getBoundingClientRect(),p=f.height;u=f.height;var m=f.width,v=parseInt(h.getAttribute("cx"),10),y=parseInt(h.getAttribute("cy"),10);c=parseFloat(h.getAttribute("barWidth"));var x="touchmove"===e.type?e.touches[0].clientX:e.clientX;r=parseInt(h.getAttribute("j"),10),o=parseInt(h.parentNode.getAttribute("rel"),10)-1;var b=h.getAttribute("data-range-y1"),w=h.getAttribute("data-range-y2");i.globals.comboCharts&&(o=parseInt(h.parentNode.getAttribute("data:realIndex"),10)),a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:o,j:r,y1:b?parseInt(b,10):null,y2:w?parseInt(w,10):null,shared:!a.showOnIntersect&&i.config.tooltip.shared}),i.config.tooltip.followCursor?i.globals.isBarHorizontal?(s=x-g.left+15,l=y-a.dataPointsDividedHeight+p/2-a.tooltipRect.ttHeight/2):(s=i.globals.isXNumeric?v-m/2:v-a.dataPointsDividedWidth+m/2,l=e.clientY-g.top-a.tooltipRect.ttHeight/2-15):i.globals.isBarHorizontal?((s=v)<a.xyRatios.baseLineInvertedY&&(s=v-a.tooltipRect.ttWidth),l=y-a.dataPointsDividedHeight+p/2-a.tooltipRect.ttHeight/2):(s=i.globals.isXNumeric?v-m/2:v-a.dataPointsDividedWidth+m/2,l=y)}return{x:s,y:l,barHeight:u,barWidth:c,i:o,j:r}}}]),t}(),vt=function(){function t(n){e(this,t),this.w=n.w,this.ttCtx=n}return i(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,n="bottom"===t.config.xaxis.position;e.xaxisOffY=n?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var i=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=t.globals.dom.elWrap;e.blxaxisTooltip&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",i+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,n=function(n){var i=t.config.yaxis[n].opposite||t.config.yaxis[n].crosshairs.opposite;e.yaxisOffX=i?t.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,i?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map((function(e,i){e.map((function(e,i){i===n&&(r+=t.config.yaxis[i].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var a=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+t.config.tooltip.theme),a.appendChild(e.yaxisTooltip),0===n&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[n]=document.createElement("div"),e.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[n]))},i=0;i<t.config.yaxis.length;i++)n(i)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,n=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var i=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==i&&"barWidth"===t.config.xaxis.crosshairs.width){var r=parseFloat(i.getAttribute("barWidth"));e.xcrosshairsWidth=r}else"tickWidth"===t.config.xaxis.crosshairs.width&&(e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length)}else if("tickWidth"===t.config.xaxis.crosshairs.width)e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length;else if("barWidth"===t.config.xaxis.crosshairs.width){var a=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==a){var o=parseFloat(a.getAttribute("barWidth"));e.xcrosshairsWidth=o}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==n&&e.xcrosshairsWidth>0&&n.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,n){var i=this.ttCtx,r=this.w,a=r.globals.yLabelFormatters[t];if(i.yaxisTooltips[t]){var o=i.getElGrid().getBoundingClientRect(),s=r.globals.minYArr[t]+(r.globals.maxYArr[t]-r.globals.minYArr[t]-(e-o.top)*n.yRatio[t]);i.tooltipPosition.moveYCrosshairs(e-o.top),i.yaxisTooltipText[t].innerHTML=a(s),i.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),yt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new ht(this),this.tooltipLabels=new ft(this),this.tooltipPosition=new gt(this),this.marker=new pt(this),this.intersect=new mt(this),this.axesTooltip=new vt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared}return i(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.blxaxisTooltip=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map((function(t,n){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)})),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(n),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var i=new G(this.ctx);this.xAxisTicksPositions=i.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var r=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this.w,n=[],i=this.getElTooltip(),r=0;r<t;r++){var a=document.createElement("div");a.classList.add("apexcharts-tooltip-series-group"),this.tConfig.shared&&this.tConfig.enabledOnSeries&&Array.isArray(this.tConfig.enabledOnSeries)&&this.tConfig.enabledOnSeries.indexOf(r)<0&&a.classList.add("apexcharts-tooltip-series-group-hidden");var o=document.createElement("span");o.classList.add("apexcharts-tooltip-marker"),o.style.backgroundColor=e.globals.colors[r],a.appendChild(o);var s=document.createElement("div");s.classList.add("apexcharts-tooltip-text"),s.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,s.style.fontSize=this.tConfig.style.fontSize;var l=document.createElement("div");l.classList.add("apexcharts-tooltip-y-group");var c=document.createElement("span");c.classList.add("apexcharts-tooltip-text-label"),l.appendChild(c);var u=document.createElement("span");u.classList.add("apexcharts-tooltip-text-value"),l.appendChild(u);var d=document.createElement("div");d.classList.add("apexcharts-tooltip-z-group");var h=document.createElement("span");h.classList.add("apexcharts-tooltip-text-z-label"),d.appendChild(h);var f=document.createElement("span");f.classList.add("apexcharts-tooltip-text-z-value"),d.appendChild(f),s.appendChild(l),s.appendChild(d),a.appendChild(s),i.appendChild(a),n.push(a)}return n}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,n=this.getElTooltip(),i=!("bar"!==e&&"candlestick"!==e&&"rangeBar"!==e),r="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,a=t.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,l=[],c=[],u={hoverArea:a,elGrid:o,tooltipEl:n,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(t.globals.axisCharts&&(r?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):i?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"===e&&(s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap")),s&&s.length))for(var d=0;d<s.length;d++)l.push(s[d].getAttribute("cy")),c.push(s[d].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||i&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],u);else if(i&&!t.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!t.globals.axisCharts||"heatmap"===e){var h=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(h,u)}if(this.showOnIntersect){var f=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");f.length>0&&this.addPathsEventListeners(f,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),n=e.getBoundingClientRect(),i=n.width+10,r=n.height+10,a=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(a=a+t.globals.svgWidth-i+10),s.indexOf("bottom")>-1&&(o=o+t.globals.svgHeight-r-10),e.style.left=a+"px",e.style.top=o+"px",{x:a,y:o,ttWidth:i,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var n=this,i=function(i){var r={paths:t[i],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(e){return t[i].addEventListener(e,n.seriesHover.bind(n,r),{capture:!1,passive:!0})}))},r=0;r<t.length;r++)i(r)}},{key:"seriesHover",value:function(t,e){var n=this,i=[],r=this.w;r.config.chart.group&&(i=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||0===r.globals.dataPoints)||(i.length?i.forEach((function(i){var r=n.getElTooltip(i);i.w.globals.minX===n.w.globals.minX&&i.w.globals.maxX===n.w.globals.maxX&&i.w.globals.tooltip.seriesHoverByContext({chartCtx:i,ttCtx:i.w.globals.tooltip,opt:{paths:t.paths,tooltipEl:r,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:i.w.globals.tooltip.ttItems},e:e})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,n=t.ttCtx,i=t.opt,r=t.e,a=e.w,o=this.getElTooltip();n.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},n.e=r,!n.tooltipUtil.hasBars()||a.globals.comboCharts||n.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new L(e).toggleSeriesOnHover(r,r.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),a.globals.axisCharts?n.axisChartsTooltips({e:r,opt:i,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:r,opt:i,tooltipRect:n.tooltipRect})}},{key:"axisChartsTooltips",value:function(t){var e,n,i=t.e,r=t.opt,a=this.w,o=r.elGrid.getBoundingClientRect(),s="touchmove"===i.type?i.touches[0].clientX:i.clientX,l="touchmove"===i.type?i.touches[0].clientY:i.clientY;if(this.clientY=l,this.clientX=s,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,l<o.top||l>o.top+o.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var c=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(r)}var u=this.getElTooltip(),d=this.getElXCrosshairs(),h=a.globals.xyCharts||"bar"===a.config.chart.type&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if(a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&(h=!1),"mousemove"===i.type||"touchmove"===i.type||"mouseup"===i.type){null!==d&&d.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter((function(t){return!0===t}));if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),h&&!this.showOnIntersect)this.handleStickyTooltip(i,s,l,r);else if("heatmap"===a.config.chart.type){var g=this.intersect.handleHeatTooltip({e:i,opt:r,x:e,y:n});n=g.y,u.style.left=(e=g.x)+"px",u.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:i,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:i,opt:r,x:e,y:n});if(this.yaxisTooltips.length)for(var p=0;p<a.config.yaxis.length;p++)this.axesTooltip.drawYaxisTooltipText(p,l,this.xyRatios);r.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==i.type&&"touchend"!==i.type||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,n=t.opt,i=t.tooltipRect,r=this.w,a=n.paths.getAttribute("rel"),o=this.getElTooltip(),s=r.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(a,10)-1,shared:!1});var l=r.globals.clientY-s.top-i.ttHeight-10;o.style.left=r.globals.clientX-s.left-i.ttWidth/2+"px",o.style.top=l+"px"}else"mouseout"!==e.type&&"touchend"!==e.type||o.classList.remove("apexcharts-active")}},{key:"handleStickyTooltip",value:function(t,e,n,i){var r=this.w,a=this.tooltipUtil.getNearestValues({context:this,hoverArea:i.hoverArea,elGrid:i.elGrid,clientX:e,clientY:n}),o=a.j,s=a.capturedSeries;a.hoverX<0||a.hoverX>r.globals.gridWidth?this.handleMouseOut(i):null!==s?this.handleStickyCapturedSeries(t,s,i,o):this.tooltipUtil.isXoverlap(o)&&this.create(t,this,0,o,i.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,n,i){var r=this.w;null===r.globals.series[e][i]?this.handleMouseOut(n):void 0!==r.globals.series[e][i]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(i)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,i,n.ttItems):this.create(t,this,e,i,n.ttItems,!1):this.tooltipUtil.isXoverlap(i)&&this.create(t,this,0,i,n.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new y(this.ctx),n=t.globals.dom.Paper.select(".apexcharts-bar-area"),i=0;i<n.length;i++)e.pathMouseLeave(n[i])}},{key:"handleMouseOut",value:function(t){var e=this.w,n=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var i=0;i<this.yaxisTTEls.length;i++)this.yaxisTTEls[i].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"markerClick",value:function(t,e,n){var i=this.w;"function"==typeof i.config.chart.events.markerClick&&i.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:n,w:i}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:n,w:i}])}},{key:"create",value:function(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=e;"mouseup"===t.type&&this.markerClick(t,n,i),null===a&&(a=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var u=o.config.legend.tooltipHoverFormatter,d=Array.from(this.legendLabels);d.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}));for(var h=0;h<d.length;h++){var f=d[h],g=parseInt(f.getAttribute("i"),10),p=decodeURIComponent(f.getAttribute("data:default-text")),m=u(p,{seriesIndex:a?g:n,dataPointIndex:i,w:o});if(a)f.innerHTML=o.globals.collapsedSeriesIndices.indexOf(g)<0?m:p;else if(f.innerHTML=g===n?m:p,n===g)break}}if(a){if(s.tooltipLabels.drawSeriesTexts({ttItems:r,i:n,j:i,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(i):s.tooltipPosition.moveDynamicPointsOnHover(i)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var v=new y(this.ctx),x=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(i,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(i);for(var b=0;b<x.length;b++)v.pathMouseEnter(x[b])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:r,i:n,j:i}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(i),l&&s.tooltipPosition.moveMarkers(n,i)}}]),t}(),xt=function(t){s(r,t);var n=u(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"draw",value:function(t,e){var n=this,i=this.w;this.graphics=new y(this.ctx),this.bar=new N(this.ctx,this.xyRatios);var r=new w(this.ctx,i);t=r.getLogSeries(t),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===i.config.chart.stackType&&(t=i.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var a=0;a<t.length;a++)t[a].length>0&&(this.totalItems+=t[a].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,u=function(r,a){var u=void 0,d=void 0,h=void 0,f=void 0,g=[],m=[],v=i.globals.comboCharts?e[r]:r;n.yRatio.length>1&&(n.yaxisIndex=v),n.isReversed=i.config.yaxis[n.yaxisIndex]&&i.config.yaxis[n.yaxisIndex].reversed;var y=n.graphics.group({class:"apexcharts-series",seriesName:p.escapeString(i.globals.seriesNames[v]),rel:r+1,"data:realIndex":v});n.ctx.series.addCollapsedClassToSeries(y,v);var x=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),b=0,w=0,_=n.initialPositions(l,c,u,d,h,f);c=_.y,b=_.barHeight,d=_.yDivision,f=_.zeroW,l=_.x,w=_.barWidth,u=_.xDivision,h=_.zeroH,n.yArrj=[],n.yArrjF=[],n.yArrjVal=[],n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],1===n.prevY.length&&n.prevY[0].every((function(t){return isNaN(t)}))&&(n.prevY[0]=n.prevY[0].map((function(t){return h})),n.prevYF[0]=n.prevYF[0].map((function(t){return 0})));for(var S=0;S<i.globals.dataPoints;S++){var C=n.barHelpers.getStrokeWidth(r,S,v),k={indexes:{i:r,j:S,realIndex:v,bc:a},strokeWidth:C,x:l,y:c,elSeries:y},A=null;n.isHorizontal?(A=n.drawStackedBarPaths(o(o({},k),{},{zeroW:f,barHeight:b,yDivision:d})),w=n.series[r][S]/n.invertedYRatio):(A=n.drawStackedColumnPaths(o(o({},k),{},{xDivision:u,barWidth:w,zeroH:h})),b=n.series[r][S]/n.yRatio[n.yaxisIndex]),c=A.y,g.push(l=A.x),m.push(c);var M=n.barHelpers.getPathFillColor(t,r,S,v);y=n.renderSeries({realIndex:v,pathFill:M,j:S,i:r,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:C,elSeries:y,x:l,y:c,series:t,barHeight:b,barWidth:w,elDataLabelsWrap:x,type:"bar",visibleSeries:0})}i.globals.seriesXvalues[v]=g,i.globals.seriesYvalues[v]=m,n.prevY.push(n.yArrj),n.prevYF.push(n.yArrjF),n.prevYVal.push(n.yArrjVal),n.prevX.push(n.xArrj),n.prevXF.push(n.xArrjF),n.prevXVal.push(n.xArrjVal),s.add(y)},d=0,h=0;d<t.length;d++,h++)u(d,h);return s}},{key:"initialPositions",value:function(t,e,n,i,r,a){var o,s,l=this.w;return this.isHorizontal?(o=(o=i=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,a=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(i-o)/2):(s=n=l.globals.gridWidth/l.globals.dataPoints,s=l.globals.isXNumeric&&l.globals.dataPoints>1?(n=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,r=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(n-s)/2),{x:t,y:e,yDivision:i,xDivision:n,barHeight:o,barWidth:s,zeroH:r,zeroW:a}}},{key:"drawStackedBarPaths",value:function(t){for(var e,n,i=t.indexes,r=t.barHeight,a=t.strokeWidth,o=t.zeroW,s=t.y,l=t.yDivision,c=t.elSeries,u=this.w,d=s,h=i.i,f=i.j,g=0,p=0;p<this.prevXF.length;p++)g+=this.prevXF[p][f];if(h>0){var m=o;this.prevXVal[h-1][f]<0?m=this.series[h][f]>=0?this.prevX[h-1][f]+g-2*(this.isReversed?g:0):this.prevX[h-1][f]:this.prevXVal[h-1][f]>=0&&(m=this.series[h][f]>=0?this.prevX[h-1][f]:this.prevX[h-1][f]-g+2*(this.isReversed?g:0)),e=m}else e=o;this.xArrj.push(n=null===this.series[h][f]?e:e+this.series[h][f]/this.invertedYRatio-2*(this.isReversed?this.series[h][f]/this.invertedYRatio:0)),this.xArrjF.push(Math.abs(e-n)),this.xArrjVal.push(this.series[h][f]);var v=this.barHelpers.getBarpaths({barYPosition:d,barHeight:r,x1:e,x2:n,strokeWidth:a,series:this.series,realIndex:i.realIndex,i:h,j:f,w:u});return this.barHelpers.barBackground({j:f,i:h,y1:d,y2:r,elSeries:c}),{pathTo:v.pathTo,pathFrom:v.pathFrom,x:n,y:s+=l}}},{key:"drawStackedColumnPaths",value:function(t){var e,n=t.indexes,i=t.x,r=t.xDivision,a=t.barWidth,o=t.zeroH,s=t.elSeries,l=this.w,c=n.i,u=n.j,d=n.bc;if(l.globals.isXNumeric){var h=l.globals.seriesX[c][u];h||(h=0),i=(h-l.globals.minX)/this.xRatio-a/2}for(var f,g=i,p=0,m=0;m<this.prevYF.length;m++)p+=isNaN(this.prevYF[m][u])?0:this.prevYF[m][u];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][u]===l.globals.seriesX[c][u]){var v,y,x=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var b=1;b<x;b++)if(!isNaN(this.prevY[c-b][u])){y=this.prevY[c-b][u];break}for(var w=1;w<x;w++){if(this.prevYVal[c-w][u]<0){v=this.series[c][u]>=0?y-p+2*(this.isReversed?p:0):y;break}if(this.prevYVal[c-w][u]>=0){v=this.series[c][u]>=0?y:y+p-2*(this.isReversed?p:0);break}}void 0===v&&(v=l.globals.gridHeight),f=this.prevYF[0].every((function(t){return 0===t}))&&this.prevYF.slice(1,c).every((function(t){return t.every((function(t){return isNaN(t)}))}))?l.globals.gridHeight-o:v}else f=l.globals.gridHeight-o;this.yArrj.push(e=f-this.series[c][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][u]/this.yRatio[this.yaxisIndex]:0)),this.yArrjF.push(Math.abs(f-e)),this.yArrjVal.push(this.series[c][u]);var _=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:a,y1:f,y2:e,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:n.realIndex,i:c,j:u,w:l});return this.barHelpers.barBackground({bc:d,j:u,i:c,x1:g,x2:a,elSeries:s}),i+=r,{pathTo:_.pathTo,pathFrom:_.pathFrom,x:l.globals.isXNumeric?i-r:i,y:e}}}]),r}(N),bt=function(t){s(r,t);var n=u(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"draw",value:function(t,e){var n=this.w,i=new y(this.ctx),r=new M(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick;var a=new w(this.ctx,n);t=a.getLogSeries(t),this.series=t,this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var o=i.group({class:"apexcharts-candlestick-series apexcharts-plot-series"}),s=0;s<t.length;s++){var l,c,u,d,h=void 0,f=void 0,g=[],m=[],v=n.globals.comboCharts?e[s]:s,x=i.group({class:"apexcharts-series",seriesName:p.escapeString(n.globals.seriesNames[v]),rel:s+1,"data:realIndex":v});t[s].length>0&&(this.visibleI=this.visibleI+1),this.yRatio.length>1&&(this.yaxisIndex=v);var b=this.barHelpers.initialPositions();f=b.y,u=b.barHeight,l=b.xDivision,c=b.zeroH,m.push((h=b.x)+(d=b.barWidth)/2);for(var _=i.group({class:"apexcharts-datalabels","data:realIndex":v}),S=0;S<n.globals.dataPoints;S++){var C,k=this.barHelpers.getStrokeWidth(s,S,v),A=this.drawCandleStickPaths({indexes:{i:s,j:S,realIndex:v},x:h,y:f,xDivision:l,barWidth:d,zeroH:c,strokeWidth:k,elSeries:x});f=A.y,h=A.x,C=A.color,S>0&&m.push(h+d/2),g.push(f);var T=r.fillPath({seriesNumber:v,dataPointIndex:S,color:C,value:t[s][S]});this.renderSeries({realIndex:v,pathFill:T,lineFill:this.candlestickOptions.wick.useFillColor?C:void 0,j:S,i:s,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:k,elSeries:x,x:h,y:f,series:t,barHeight:u,barWidth:d,elDataLabelsWrap:_,visibleSeries:this.visibleI,type:"candlestick"})}n.globals.seriesXvalues[v]=m,n.globals.seriesYvalues[v]=g,o.add(x)}return o}},{key:"drawCandleStickPaths",value:function(t){var e=t.indexes,n=t.x,i=t.xDivision,r=t.barWidth,a=t.zeroH,o=t.strokeWidth,s=this.w,l=new y(this.ctx),c=e.i,u=e.j,d=!0,h=s.config.plotOptions.candlestick.colors.upward,f=s.config.plotOptions.candlestick.colors.downward,g=this.yRatio[this.yaxisIndex],p=e.realIndex,m=this.getOHLCValue(p,u),v=a,x=a;m.o>m.c&&(d=!1);var b=Math.min(m.o,m.c),w=Math.max(m.o,m.c);s.globals.isXNumeric&&(n=(s.globals.seriesX[p][u]-s.globals.minX)/this.xRatio-r/2);var _=n+r*this.visibleI;null==this.series[c][u]?b=a:(b=a-b/g,w=a-w/g,v=a-m.h/g,x=a-m.l/g);var S=l.move(_,a),C=l.move(_,b);return s.globals.previousPaths.length>0&&(C=this.getPreviousPath(p,u,!0)),S=l.move(_,w)+l.line(_+r/2,w)+l.line(_+r/2,v)+l.line(_+r/2,w)+l.line(_+r,w)+l.line(_+r,b)+l.line(_+r/2,b)+l.line(_+r/2,x)+l.line(_+r/2,b)+l.line(_,b)+l.line(_,w-o/2),C+=l.move(_,b),s.globals.isXNumeric||(n+=i),{pathTo:S,pathFrom:C,x:n,y:w,barXPosition:_,color:d?h:f}}},{key:"getOHLCValue",value:function(t,e){var n=this.w;return{o:n.globals.seriesCandleO[t][e],h:n.globals.seriesCandleH[t][e],l:n.globals.seriesCandleL[t][e],c:n.globals.seriesCandleC[t][e]}}}]),r}(N),wt=function(){function t(n,i){e(this,t),this.ctx=n,this.w=n.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.negRange=!1,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return i(t,[{key:"draw",value:function(t){var e=this.w,n=new y(this.ctx),i=n.group({class:"apexcharts-heatmap"});i.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var r=e.globals.gridWidth/e.globals.dataPoints,a=e.globals.gridHeight/e.globals.series.length,o=0,s=!1;this.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var c=s?0:l.length-1;s?c<l.length:c>=0;s?c++:c--){var u=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:p.escapeString(e.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(u,c),e.config.chart.dropShadow.enabled){var d=e.config.chart.dropShadow;new m(this.ctx).dropShadow(u,d,c)}for(var h=0,f=0;f<l[c].length;f++){var g=1,v=e.config.plotOptions.heatmap.shadeIntensity,x=this.determineHeatColor(c,f);g=e.globals.hasNegs||this.negRange?e.config.plotOptions.heatmap.reverseNegativeShade?x.percent<0?x.percent/100*(1.25*v):1.25*v*(1-x.percent/100):x.percent<=0?1-(1+x.percent/100)*v:(1-x.percent/100)*v:1-x.percent/100;var b=x.color,w=new p;e.config.plotOptions.heatmap.enableShades&&(g<0&&(g=0),b=p.hexToRgba(w.shadeColor("dark"===this.w.config.theme.mode?-1*g:g,x.color),e.config.fill.opacity)),"image"===e.config.fill.type&&(b=new M(this.ctx).fillPath({seriesNumber:c,dataPointIndex:f,opacity:e.globals.hasNegs?x.percent<0?1-(1+x.percent/100):v+x.percent/100:x.percent/100,patternID:p.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:r,height:e.config.fill.image.height?e.config.fill.image.height:a}));var _=n.drawRect(h,o,r,a,this.rectRadius);if(_.attr({cx:h,cy:o}),_.node.classList.add("apexcharts-heatmap-rect"),u.add(_),_.attr({fill:b,i:c,index:c,j:f,val:l[c][f],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?b:e.globals.stroke.colors[0],color:b}),_.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,_)),_.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,_)),_.node.addEventListener("mousedown",n.pathMouseDown.bind(this,_)),e.config.chart.animations.enabled&&!e.globals.dataChanged){var S=1;e.globals.resized||(S=e.config.chart.animations.speed),this.animateHeatMap(_,h,o,r,a,S)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var k=e.globals.previousPaths[c]&&e.globals.previousPaths[c][f]&&e.globals.previousPaths[c][f].color;k||(k="rgba(255, 255, 255, 0)"),this.animateHeatColor(_,p.isColorHex(k)?k:p.rgb2hex(k),p.isColorHex(b)?b:p.rgb2hex(b),C)}}var A=this.calculateHeatmapDataLabels({x:h,y:o,i:c,j:f,heatColorProps:x,series:l,rectHeight:a,rectWidth:r});null!==A&&u.add(A),h+=r}o+=a,i.add(u)}var T=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?T.unshift(""):T.push(""),e.globals.yAxisScale[0].result=T,e.config.yaxis[0].labels.offsetY=-e.globals.gridHeight/e.globals.series.length/2,i}},{key:"checkColorRange",value:function(){var t=this,e=this.w.config.plotOptions.heatmap;e.colorScale.ranges.length>0&&e.colorScale.ranges.map((function(e,n){e.from<=0&&(t.negRange=!0)}))}},{key:"determineHeatColor",value:function(t,e){var n=this.w,i=n.globals.series[t][e],r=n.config.plotOptions.heatmap,a=n.globals.colors[r.colorScale.inverse?e:t],o=null,s=Math.min.apply(Math,d(n.globals.series[t])),l=Math.max.apply(Math,d(n.globals.series[t]));r.distributed||(s=n.globals.minY,l=n.globals.maxY),void 0!==r.colorScale.min&&(s=r.colorScale.min<n.globals.minY?r.colorScale.min:n.globals.minY,l=r.colorScale.max>n.globals.maxY?r.colorScale.max:n.globals.maxY);var c=Math.abs(l)+Math.abs(s),u=100*i/(0===c?c-1e-6:c);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map((function(t,e){if(i>=t.from&&i<=t.to){a=t.color,o=t.foreColor?t.foreColor:null,s=t.from,l=t.to;var n=Math.abs(l)+Math.abs(s);u=100*i/(0===n?n-1e-6:n)}})),{color:a,foreColor:o,percent:u}}},{key:"calculateHeatmapDataLabels",value:function(t){var e=t.x,n=t.y,i=t.i,r=t.j,a=t.heatColorProps,o=t.rectHeight,s=t.rectWidth,l=this.w,c=l.config.dataLabels,u=new y(this.ctx),d=new D(this.ctx),h=c.formatter,f=null;if(c.enabled){f=u.group({class:"apexcharts-data-labels"});var g=c.offsetY,p=e+s/2+c.offsetX,m=n+o/2+parseFloat(c.style.fontSize)/3+g,v=h(l.globals.series[i][r],{seriesIndex:i,dataPointIndex:r,w:l});d.plotDataLabelsText({x:p,y:m,text:v,i:i,j:r,color:a.foreColor,parent:f,dataLabelsConfig:c})}return f}},{key:"animateHeatMap",value:function(t,e,n,i,r,a){var o=new v(this.ctx);o.animateRect(t,{x:e+i/2,y:n+r/2,width:0,height:0},{x:e,y:n,width:i,height:r},a,(function(){o.animationCompleted(t)}))}},{key:"animateHeatColor",value:function(t,e,n,i){t.attr({fill:e}).animate(i).attr({fill:n})}}]),t}(),_t=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"drawYAxisTexts",value:function(t,e,n,i){var r=this.w,a=r.config.yaxis[0],o=r.globals.yLabelFormatters[0];return new y(this.ctx).drawText({x:t+a.labels.offsetX,y:e+a.labels.offsetY,text:o(i,n),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[n]:a.labels.style.colors})}}]),t}(),St=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight:i.globals.gridWidth,this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,this.fullAngle=360,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return i(t,[{key:"draw",value:function(t){var e=this,n=this.w,i=new y(this.ctx);if(this.ret=i.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var r=0,a=0;a<t.length;a++)r+=p.negToZero(t[a]);var o=[],s=i.group();0===r&&(r=1e-5),t.forEach((function(t){e.maxY=Math.max(e.maxY,t)})),"polarArea"===this.chartType&&this.drawPolarElements();for(var l=0;l<t.length;l++){var c=this.fullAngle*p.negToZero(t[l])/r;o.push(c),"polarArea"===this.chartType?(o[l]=this.fullAngle/t.length,this.sliceSizes.push(n.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var u,d=0,h=0;h<n.globals.previousPaths.length;h++)d+=p.negToZero(n.globals.previousPaths[h]);for(var f=0;f<n.globals.previousPaths.length;f++)u=this.fullAngle*p.negToZero(n.globals.previousPaths[f])/d,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var g=n.config.plotOptions.pie.customScale,m=n.globals.gridWidth/2-n.globals.gridWidth/2*g,v=n.globals.gridHeight/2-n.globals.gridHeight/2*g;if("donut"===this.chartType){var x=i.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),s.add(x)}var b=this.drawArcs(o,t);if(this.sliceLabels.forEach((function(t){b.add(t)})),s.attr({transform:"translate(".concat(m,", ").concat(v,") scale(").concat(g,")")}),s.add(b),this.ret.add(s),this.donutDataLabels.show){var w=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:m,translateY:v});this.ret.add(w)}return this.ret}},{key:"drawArcs",value:function(t,e){var n=this.w,i=new m(this.ctx),r=new y(this.ctx),a=new M(this.ctx),o=r.group({class:"apexcharts-slices"}),s=n.config.plotOptions.pie.startAngle%this.fullAngle,l=s,c=s,u=s,d=s;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var h=0;h<t.length;h++){var f=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:p.escapeString(n.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(f),u=(l=u)+t[h],d=(c=d)+this.prevSectorAngleArr[h];var g=u<l?this.fullAngle+u-l:u-l,v=a.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:e[h]}),x=this.getChangedPath(c,d),b=r.drawPath({d:x,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:v,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});b.attr({index:0,j:h}),n.config.chart.dropShadow.enabled&&i.dropShadow(b,n.config.chart.dropShadow,h),this.addListeners(b,this.donutDataLabels),y.setAttrs(b.node,{"data:angle":g,"data:startAngle":l,"data:strokeWidth":this.strokeWidth,"data:value":e[h]});var w={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?w=p.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle):"donut"===this.chartType&&(w=p.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle)),f.add(b);var _=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0==(_=g/this.fullAngle*n.config.chart.animations.speed)&&(_=1),this.animDur=_+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(b,this.dynamicAnim&&n.globals.dataChanged?{size:this.sliceSizes[h],endAngle:u,startAngle:l,prevStartAngle:c,prevEndAngle:d,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[h],endAngle:u,startAngle:l,i:h,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:_}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&b.click(this.pieClicked.bind(this,h)),n.config.dataLabels.enabled){var S=w.x,C=w.y,k=100*g/this.fullAngle+"%";if(0!==g&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[h]){var A=n.config.dataLabels.formatter;void 0!==A&&(k=A(n.globals.seriesPercent[h][0],{seriesIndex:h,w:n}));var T=n.globals.dataLabels.style.colors[h],I=r.group({class:"apexcharts-datalabels"}),D=r.drawText({x:S,y:C,text:k,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:T});I.add(D),n.config.dataLabels.dropShadow.enabled&&i.dropShadow(D,n.config.dataLabels.dropShadow),D.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(D.node.classList.add("apexcharts-pie-label-delay"),D.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(I)}}}return o}},{key:"addListeners",value:function(t,e){var n=new y(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var n=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,i=n,r=e.startAngle,a=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(r=e.prevEndAngle,i=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===this.w.config.series.length-1&&(n+a>this.fullAngle?e.endAngle=e.endAngle-(n+a):n+a<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(n+a)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(t,r,a,n,i,e)}},{key:"animateArc",value:function(t,e,n,i,r,a){var o,s=this,l=this.w,c=new v(this.ctx),u=a.size;(isNaN(e)||isNaN(r))&&(e=n,r=i,a.dur=0);var d=i,h=n,f=e<n?this.fullAngle+e-n:e-n;l.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:u}),t.attr({d:o})),0!==a.dur?t.animate(a.dur,l.globals.easing,a.animBeginArr[a.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),a.i===l.config.series.length-1&&c.animationCompleted(t)})).during((function(l){d=f+(i-f)*l,a.animateStartingPos&&(d=r+(i-r)*l,h=e-r+(n-(e-r))*l),o=s.getPiePath({me:s,startAngle:h,angle:d,size:u}),t.node.setAttribute("data:pathOrig",o),t.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:h,angle:i,size:u}),a.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",o),t.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,n=this.w,i=this.sliceSizes[t]+(n.config.plotOptions.pie.expandOnClick?4:0),r=n.globals.dom.Paper.select(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==r.attr("data:pieClicked")){var a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,(function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)})),r.attr("data:pieClicked","true");var o=parseInt(r.attr("data:startAngle"),10),s=parseInt(r.attr("data:angle"),10);e=this.getPiePath({me:this,startAngle:o,angle:s,size:i}),360!==s&&r.plot(e)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var l=r.attr("data:pathOrig");r.attr({d:l})}}},{key:"getChangedPath",value:function(t,e){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),n}},{key:"getPiePath",value:function(t){var e=t.me,n=t.startAngle,i=t.angle,r=t.size,a=n,o=Math.PI*(a-90)/180,s=i+n;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var l=Math.PI*(s-90)/180,c=e.centerX+r*Math.cos(o),u=e.centerY+r*Math.sin(o),d=e.centerX+r*Math.cos(l),h=e.centerY+r*Math.sin(l),f=p.polarToCartesian(e.centerX,e.centerY,e.donutSize,s),g=p.polarToCartesian(e.centerX,e.centerY,e.donutSize,a),m=i>180?1:0,v=["M",c,u,"A",r,r,0,m,1,d,h];return"donut"===e.chartType?[].concat(v,["L",f.x,f.y,"A",e.donutSize,e.donutSize,0,m,0,g.x,g.y,"L",c,u,"z"]).join(" "):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(v,["L",e.centerX,e.centerY,"L",c,u]).join(" "):[].concat(v).join(" ")}},{key:"drawPolarElements",value:function(){var t=this.w,e=new j(this.ctx),n=new y(this.ctx),i=new _t(this.ctx),r=n.group(),a=n.group(),o=void 0===t.config.yaxis[0].max&&void 0===t.config.yaxis[0].min,s=e.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,o),l=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var u=t.globals.radialSize,d=u/(c-1),h=0;h<c-1;h++){var f=n.drawCircle(u);if(f.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var g=i.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,h,l[h]);a.add(g)}r.add(f),u-=d}this.ret.add(r),this.ret.add(a)}},{key:"renderInnerDataLabels",value:function(t,e){var n=this.w,i=new y(this.ctx),r=i.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),a=t.total.show;r.node.style.opacity=e.opacity;var o,s,l=e.centerX,c=e.centerY;o=void 0===t.name.color?n.globals.colors[0]:t.name.color;var u=t.name.fontSize,d=t.name.fontFamily,h=t.value.fontWeight;s=void 0===t.value.color?n.config.chart.foreColor:t.value.color;var f=t.value.formatter,g="",p="";if(a?(o=t.total.color,u=t.total.fontSize,d=t.total.fontFamily,h=t.total.fontWeight,p=t.total.label,g=t.total.formatter(n)):1===n.globals.series.length&&(g=f(n.globals.series[0],n),p=n.globals.seriesNames[0]),p&&(p=t.name.formatter(p,t.total.show,n)),t.name.show){var m=i.drawText({x:l,y:c+parseFloat(t.name.offsetY),text:p,textAnchor:"middle",foreColor:o,fontSize:u,fontWeight:h,fontFamily:d});m.node.classList.add("apexcharts-datalabel-label"),r.add(m)}if(t.value.show){var v=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,x=i.drawText({x:l,y:c+v,text:g,textAnchor:"middle",foreColor:s,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});x.node.classList.add("apexcharts-datalabel-value"),r.add(x)}return r}},{key:"printInnerLabels",value:function(t,e,n,i){var r,a=this.w;i?r=void 0===t.name.color?a.globals.colors[parseInt(i.parentNode.getAttribute("rel"),10)-1]:t.name.color:a.globals.series.length>1&&t.total.show&&(r=t.total.color);var o=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,t.value.formatter)(n,a),i||"function"!=typeof t.total.formatter||(n=t.total.formatter(a)),e=t.name.formatter(e,e===t.total.label,a),null!==o&&(o.textContent=e),null!==s&&(s.textContent=n),null!==o&&(o.style.fill=r)}},{key:"printDataLabelsInner",value:function(t,e){var n=this.w,i=t.getAttribute("data:value"),r=n.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(e,r,i,t);var a=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==a&&(a.style.opacity=1)}},{key:"revertDataLabelsInner",value:function(t,e,n){var i=this,r=this.w,a=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var n=t.makeSliceOut,r=t.printLabel;Array.prototype.forEach.call(s,(function(t){"true"===t.getAttribute("data:pieClicked")&&(n&&(o=!0),r&&i.printDataLabelsInner(t,e))}))};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&r.globals.series.length>1)o&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(r));else if(l({makeSliceOut:!1,printLabel:!0}),!o)if(r.globals.selectedDataPoints.length&&r.globals.series.length>1)if(r.globals.selectedDataPoints[0].length>0){var c=r.globals.selectedDataPoints[0],u=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(u,e)}else a&&r.globals.selectedDataPoints.length&&0===r.globals.selectedDataPoints[0].length&&(a.style.opacity=0);else a&&r.globals.series.length>1&&(a.style.opacity=0)}}]),t}(),Ct=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new y(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.maxValue=this.w.globals.maxY,this.minValue=this.w.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return i(t,[{key:"draw",value:function(t){var e=this,n=this.w,i=new M(this.ctx),r=[],a=new D(this.ctx);t.length&&(this.dataPointsLen=t[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=n.globals.gridHeight/2+n.config.plotOptions.radar.offsetY,l=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(n.globals.gridWidth/2+n.config.plotOptions.radar.offsetX||0,", ").concat(s||0,")")}),c=[],u=null,d=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach((function(t,s){var l=t.length===n.globals.dataPoints,h=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:p.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});e.dataRadiusOfPercent[s]=[],e.dataRadius[s]=[],e.angleArr[s]=[],t.forEach((function(t,n){var i=Math.abs(e.maxValue-e.minValue);t+=Math.abs(e.minValue),e.dataRadiusOfPercent[s][n]=t/i,e.dataRadius[s][n]=e.dataRadiusOfPercent[s][n]*e.size,e.angleArr[s][n]=n*e.disAngle})),c=e.getDataPointsPos(e.dataRadius[s],e.angleArr[s]);var f=e.createPaths(c,{x:0,y:0});u=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),d=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),n.globals.delayedElements.push({el:u.node,index:s});var g={i:s,realIndex:s,animationDelay:s,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[s],strokeLineCap:n.config.stroke.lineCap},v=null;n.globals.previousPaths.length>0&&(v=e.getPreviousPath(s));for(var y=0;y<f.linePathsTo.length;y++){var x=e.graphics.renderPaths(o(o({},g),{},{pathFrom:null===v?f.linePathsFrom[y]:v,pathTo:f.linePathsTo[y],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[s]:e.strokeWidth,fill:"none",drawShadow:!1}));h.add(x);var b=i.fillPath({seriesNumber:s}),w=e.graphics.renderPaths(o(o({},g),{},{pathFrom:null===v?f.areaPathsFrom[y]:v,pathTo:f.areaPathsTo[y],strokeWidth:0,fill:b,drawShadow:!1}));n.config.chart.dropShadow.enabled&&new m(e.ctx).dropShadow(w,Object.assign({},n.config.chart.dropShadow,{noUserSpaceOnUse:!0}),s),h.add(w)}t.forEach((function(t,i){var r=new T(e.ctx).getMarkerConfig("apexcharts-marker",s,i),l=e.graphics.drawMarker(c[i].x,c[i].y,r);l.attr("rel",i),l.attr("j",i),l.attr("index",s),l.node.setAttribute("default-marker-size",r.pSize);var f=e.graphics.group({class:"apexcharts-series-markers"});f&&f.add(l),u.add(f),h.add(u);var g=n.config.dataLabels;if(g.enabled){var p=g.formatter(n.globals.series[s][i],{seriesIndex:s,dataPointIndex:i,w:n});a.plotDataLabelsText({x:c[i].x,y:c[i].y,text:p,textAnchor:"middle",i:s,j:s,parent:d,offsetCorrection:!1,dataLabelsConfig:o({},g)})}h.add(d)})),r.push(h)})),this.drawPolygons({parent:l}),n.config.xaxis.labels.show){var h=this.drawXAxisTexts();l.add(h)}return l.add(this.yaxisLabels),r.forEach((function(t){l.add(t)})),l}},{key:"drawPolygons",value:function(t){for(var e=this,n=this.w,i=t.parent,r=new _t(this.ctx),a=n.globals.yAxisScale[0].result.reverse(),o=a.length,s=[],l=this.size/(o-1),c=0;c<o;c++)s[c]=l*c;s.reverse();var u=[],d=[];s.forEach((function(t,n){var i=e.getPolygonPos(t),r="";i.forEach((function(t,i){if(0===n){var a=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[i]:e.polygons.connectorColors);d.push(a)}0===i&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),r+=t.x+","+t.y+" "})),u.push(r)})),u.forEach((function(t,r){var a=e.polygons.strokeColors,o=e.polygons.strokeWidth,s=e.graphics.drawPolygon(t,Array.isArray(a)?a[r]:a,Array.isArray(o)?o[r]:o,n.globals.radarPolygons.fill.colors[r]);i.add(s)})),d.forEach((function(t){i.add(t)})),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(t,n){var i=r.drawYAxisTexts(t.x,t.y,n,a[n]);e.yaxisLabels.add(i)}))}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,n=e.config.xaxis.labels,i=this.graphics.group({class:"apexcharts-xaxis"}),r=this.getPolygonPos(this.size);return e.globals.labels.forEach((function(a,s){var l=e.config.xaxis.labels.formatter,c=new D(t.ctx);if(r[s]){var u=t.getTextPos(r[s],t.size),d=l(a,{seriesIndex:-1,dataPointIndex:s,w:e});c.plotDataLabelsText({x:u.newX,y:u.newY,text:d,textAnchor:u.textAnchor,i:s,j:s,parent:i,color:n.style.colors[s]?n.style.colors[s]:"#a8a8a8",dataLabelsConfig:o({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}})),i}},{key:"createPaths",value:function(t,e){var n=this,i=[],r=[],a=[],o=[];if(t.length){r=[this.graphics.move(e.x,e.y)],o=[this.graphics.move(e.x,e.y)];var s=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach((function(e,i){s+=n.graphics.line(e.x,e.y),l+=n.graphics.line(e.x,e.y),i===t.length-1&&(s+="Z",l+="Z")})),i.push(s),a.push(l)}return{linePathsFrom:r,linePathsTo:i,areaPathsFrom:o,areaPathsTo:a}}},{key:"getTextPos",value:function(t,e){var n="middle",i=t.x,r=t.y;return Math.abs(t.x)>=10?t.x>0?(n="start",i+=10):t.x<0&&(n="end",i-=10):n="middle",Math.abs(t.y)>=e-10&&(t.y<0?r-=10:t.y>0&&(r+=10)),{textAnchor:n,newX:i,newY:r}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,n=null,i=0;i<e.globals.previousPaths.length;i++){var r=e.globals.previousPaths[i];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[i].paths[0]&&(n=e.globals.previousPaths[i].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var i=[],r=0;r<n;r++){var a={};a.x=t[r]*Math.sin(e[r]),a.y=-t[r]*Math.cos(e[r]),i.push(a)}return i}},{key:"getPolygonPos",value:function(t){for(var e=[],n=2*Math.PI/this.dataPointsLen,i=0;i<this.dataPointsLen;i++){var r={};r.x=t*Math.sin(i*n),r.y=-t*Math.cos(i*n),e.push(r)}return e}}]),t}(),kt=function(t){s(r,t);var n=u(r);function r(t){var i;e(this,r),(i=n.call(this,t)).ctx=t,i.w=t.w,i.animBeginArr=[0],i.animDur=0;var a=i.w;return i.startAngle=a.config.plotOptions.radialBar.startAngle,i.endAngle=a.config.plotOptions.radialBar.endAngle,i.totalAngle=Math.abs(a.config.plotOptions.radialBar.endAngle-a.config.plotOptions.radialBar.startAngle),i.trackStartAngle=a.config.plotOptions.radialBar.track.startAngle,i.trackEndAngle=a.config.plotOptions.radialBar.track.endAngle,i.radialDataLabels=a.config.plotOptions.radialBar.dataLabels,i.trackStartAngle||(i.trackStartAngle=i.startAngle),i.trackEndAngle||(i.trackEndAngle=i.endAngle),360===i.endAngle&&(i.endAngle=359.99),i.margin=parseInt(a.config.plotOptions.radialBar.track.margin,10),i}return i(r,[{key:"draw",value:function(t){var e=this.w,n=new y(this.ctx),i=n.group({class:"apexcharts-radialbar"});if(e.globals.noData)return i;var r=n.group(),a=this.defaultSize/2,o=e.globals.gridWidth/2,s=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(s=s-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:o,centerY:a,colorArr:l,series:t});r.add(c)}var u=this.drawArcs({size:s,centerX:o,centerY:a,colorArr:l,series:t}),d=360;e.config.plotOptions.radialBar.startAngle<0&&(d=this.totalAngle);var h=(360-d)/360;if(e.globals.radialSize=s-s*h,this.radialDataLabels.value.show){var f=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=f*h}return r.add(u.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),i.add(r),i}},{key:"drawTracks",value:function(t){var e=this.w,n=new y(this.ctx),i=n.group({class:"apexcharts-tracks"}),r=new m(this.ctx),a=new M(this.ctx),o=this.getStrokeWidth(t);t.size=t.size-o/2;for(var s=0;s<t.series.length;s++){var l=n.group({class:"apexcharts-radialbar-track apexcharts-track"});i.add(l),l.attr({rel:s+1}),t.size=t.size-o-this.margin;var c=e.config.plotOptions.radialBar.track,u=a.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),d=this.trackStartAngle,h=this.trackEndAngle;Math.abs(h)+Math.abs(d)>=360&&(h=360-Math.abs(this.startAngle)-.1);var f=n.drawPath({d:"",stroke:u,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});c.dropShadow.enabled&&r.dropShadow(f,c.dropShadow),l.add(f),f.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(f,{centerX:t.centerX,centerY:t.centerY,endAngle:h,startAngle:d,size:t.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return i}},{key:"drawArcs",value:function(t){var e=this.w,n=new y(this.ctx),i=new M(this.ctx),r=new m(this.ctx),a=n.group(),o=this.getStrokeWidth(t);t.size=t.size-o/2;var s=e.config.plotOptions.radialBar.hollow.background,l=t.size-o*t.series.length-this.margin*t.series.length-o*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(t,a,l,s));var u=this.drawHollow({size:c,centerX:t.centerX,centerY:t.centerY,fill:s||"transparent"});e.config.plotOptions.radialBar.hollow.dropShadow.enabled&&r.dropShadow(u,e.config.plotOptions.radialBar.hollow.dropShadow);var d=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(d=0);var h=null;this.radialDataLabels.show&&(h=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:d})),"back"===e.config.plotOptions.radialBar.hollow.position&&(a.add(u),h&&a.add(h));var f=!1;e.config.plotOptions.radialBar.inverseOrder&&(f=!0);for(var g=f?t.series.length-1:0;f?g>=0:g<t.series.length;f?g--:g++){var v=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:p.escapeString(e.globals.seriesNames[g])});a.add(v),v.attr({rel:g+1,"data:realIndex":g}),this.ctx.series.addCollapsedClassToSeries(v,g),t.size=t.size-o-this.margin;var x=i.fillPath({seriesNumber:g,size:t.size,value:t.series[g]}),b=this.startAngle,w=void 0,_=p.negToZero(t.series[g]>100?100:t.series[g])/100,S=Math.round(this.totalAngle*_)+this.startAngle,C=void 0;e.globals.dataChanged&&(w=this.startAngle,C=Math.round(this.totalAngle*p.negToZero(e.globals.previousPaths[g])/100)+w),Math.abs(S)+Math.abs(b)>=360&&(S-=.01),Math.abs(C)+Math.abs(w)>=360&&(C-=.01);var k=S-b,A=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[g]:e.config.stroke.dashArray,T=n.drawPath({d:"",stroke:x,strokeWidth:o,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+g,strokeDashArray:A});y.setAttrs(T.node,{"data:angle":k,"data:value":t.series[g]}),e.config.chart.dropShadow.enabled&&r.dropShadow(T,e.config.chart.dropShadow,g),this.addListeners(T,this.radialDataLabels),v.add(T),T.attr({index:0,j:g});var I=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(this.animDur=(I=(S-b)/360*e.config.chart.animations.speed)/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),e.globals.dataChanged&&(this.animDur=(I=(S-b)/360*e.config.chart.animations.dynamicAnimation.speed)/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(T,{centerX:t.centerX,centerY:t.centerY,endAngle:S,startAngle:b,prevEndAngle:C,prevStartAngle:w,size:t.size,i:g,totalItems:2,animBeginArr:this.animBeginArr,dur:I,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:a,elHollow:u,dataLabels:h}}},{key:"drawHollow",value:function(t){var e=new y(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,n,i){var r=this.w,a=new M(this.ctx),o=p.randomId(),s=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)a.clippedImgArea({width:n,height:n,image:s,patternID:"pattern".concat(r.globals.cuid).concat(o)}),i="url(#pattern".concat(r.globals.cuid).concat(o,")");else{var l=r.config.plotOptions.radialBar.hollow.imageWidth,c=r.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var u=r.globals.dom.Paper.image(s).loaded((function(e){this.move(t.centerX-e.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}));e.add(u)}else{var d=r.globals.dom.Paper.image(s).loaded((function(e){this.move(t.centerX-l/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-c/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));e.add(d)}}return i}},{key:"getStrokeWidth",value:function(t){return t.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),r}(St),At=function(){function t(n){e(this,t),this.w=n.w,this.lineCtx=n}return i(t,[{key:"sameValueSeriesFix",value:function(t,e){var n=this.w;if("line"===n.config.chart.type&&("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[t])&&new w(this.lineCtx.ctx,n).seriesHaveSameValues(t)){var i=e[t].slice();i[i.length-1]=i[i.length-1]+1e-6,e[t]=i}return e}},{key:"calculatePoints",value:function(t){var e=t.series,n=t.x,i=t.y,r=t.i,a=t.j,o=t.prevY,s=this.w,l=[],c=[];if(0===a){var u=this.lineCtx.categoryAxisCorrection+s.config.markers.offsetX;s.globals.isXNumeric&&(u=(s.globals.seriesX[t.realIndex][0]-s.globals.minX)/this.lineCtx.xRatio+s.config.markers.offsetX),l.push(u),c.push(p.isNumber(e[r][0])?o+s.config.markers.offsetY:null),l.push(n+s.config.markers.offsetX),c.push(p.isNumber(e[r][a+1])?i+s.config.markers.offsetY:null)}else l.push(n+s.config.markers.offsetX),c.push(p.isNumber(e[r][a+1])?i+s.config.markers.offsetY:null);return{x:l,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,n=t.pathFromArea,i=t.realIndex,r=this.w,a=0;a<r.globals.previousPaths.length;a++){var o=r.globals.previousPaths[a];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(i,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,e=r.globals.previousPaths[a].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,n=r.globals.previousPaths[a].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[a].paths[1]&&(e=r.globals.previousPaths[a].paths[1].d)))}return{pathFromLine:e,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,n=t.series,i=t.prevY,r=t.lineYPosition,a=this.w;if(void 0!==n[e][0])i=(r=a.config.chart.stacked&&e>0?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-n[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(a.config.chart.stacked&&e>0&&void 0===n[e][0])for(var o=e-1;o>=0;o--)if(null!=n[o][0]){i=r=this.lineCtx.prevSeriesY[o][0];break}return{prevY:i,lineYPosition:r}}}]),t}(),Mt=function(){function t(n,i,r){e(this,t),this.ctx=n,this.w=n.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new I(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new At(this),this.markers=new T(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return i(t,[{key:"draw",value:function(t,e,n){var i=this.w,r=new y(this.ctx),a=i.globals.comboCharts?e:i.config.chart.type,o=r.group({class:"apexcharts-".concat(a,"-series apexcharts-plot-series")}),s=new w(this.ctx,i);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=s.getLogSeries(t),this.yRatio=s.getLogYRatios(this.yRatio);for(var l=[],c=0;c<t.length;c++){t=this.lineHelpers.sameValueSeriesFix(c,t);var u=i.globals.comboCharts?n[c]:c;this._initSerieVariables(t,c,u);var d=[],h=[],f=i.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,u),i.globals.isXNumeric&&i.globals.seriesX.length>0&&(f=(i.globals.seriesX[u][0]-i.globals.minX)/this.xRatio),h.push(f);var g,p=f,m=p,v=this.zeroY;v=this.lineHelpers.determineFirstPrevY({i:c,series:t,prevY:v,lineYPosition:0}).prevY,d.push(v),g=v;var x=this._calculatePathsFrom({series:t,i:c,realIndex:u,prevX:m,prevY:v}),b=this._iterateOverDataPoints({series:t,realIndex:u,i:c,x:f,y:1,pX:p,pY:g,pathsFrom:x,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:h,yArrj:d});this._handlePaths({type:a,realIndex:u,i:c,paths:b}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(i.config.chart.stacked)for(var _=l.length;_>0;_--)o.add(l[_-1]);else for(var S=0;S<l.length;S++)o.add(l[S]);return o}},{key:"_initSerieVariables",value:function(t,e,n){var i=this.w,r=new y(this.ctx);this.xDivision=i.globals.gridWidth/(i.globals.dataPoints-("on"===i.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(i.config.stroke.width)?i.config.stroke.width[n]:i.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=n),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed,this.zeroY=i.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?i.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>i.globals.gridHeight||"end"===i.config.plotOptions.area.fillTo)&&(this.areaBottomY=i.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",seriesName:p.escapeString(i.globals.seriesNames[n])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":n}),this.elSeries.attr({"data:longestSeries":t[e].length===i.globals.dataPoints,rel:e+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,n,i,r,a=t.series,o=t.i,s=t.realIndex,l=t.prevX,c=t.prevY,u=this.w,d=new y(this.ctx);if(null===a[o][0]){for(var h=0;h<a[o].length;h++)if(null!==a[o][h]){e=d.move(l=this.xDivision*h,c=this.zeroY-a[o][h]/this.yRatio[this.yaxisIndex]),n=d.move(l,this.areaBottomY);break}}else e=d.move(l,c),n=d.move(l,this.areaBottomY)+d.line(l,c);if(i=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),r=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),u.globals.previousPaths.length>0){var f=this.lineHelpers.checkPreviousPaths({pathFromLine:i,pathFromArea:r,realIndex:s});i=f.pathFromLine,r=f.pathFromArea}return{prevX:l,prevY:c,linePath:e,areaPath:n,pathFromLine:i,pathFromArea:r}}},{key:"_handlePaths",value:function(t){var e=t.type,n=t.realIndex,i=t.i,r=t.paths,a=this.w,s=new y(this.ctx),l=new M(this.ctx);this.prevSeriesY.push(r.yArrj),a.globals.seriesXvalues[n]=r.xArrj,a.globals.seriesYvalues[n]=r.yArrj,this.pointsChart||a.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var c={i:i,realIndex:n,animationDelay:i,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var u=l.fillPath({seriesNumber:n}),d=0;d<r.areaPaths.length;d++){var h=s.renderPaths(o(o({},c),{},{pathFrom:r.pathFromArea,pathTo:r.areaPaths[d],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:u}));this.elSeries.add(h)}if(a.config.stroke.show&&!this.pointsChart){var f;f="line"===e?l.fillPath({seriesNumber:n,i:i}):a.globals.stroke.colors[n];for(var g=0;g<r.linePaths.length;g++){var p=s.renderPaths(o(o({},c),{},{pathFrom:r.pathFromLine,pathTo:r.linePaths[g],stroke:f,strokeWidth:this.strokeWidth,strokeLineCap:a.config.stroke.lineCap,fill:"none"}));this.elSeries.add(p)}}}},{key:"_iterateOverDataPoints",value:function(t){for(var e=t.series,n=t.realIndex,i=t.i,r=t.x,a=t.y,o=t.pX,s=t.pY,l=t.pathsFrom,c=t.linePaths,u=t.areaPaths,d=t.seriesIndex,h=t.lineYPosition,f=t.xArrj,g=t.yArrj,m=this.w,v=new y(this.ctx),x=this.yRatio,b=l.prevY,w=l.linePath,_=l.areaPath,S=l.pathFromLine,C=l.pathFromArea,k=p.isNumber(m.globals.minYArr[n])?m.globals.minYArr[n]:m.globals.minY,A=m.globals.dataPoints>1?m.globals.dataPoints-1:m.globals.dataPoints,M=0;M<A;M++){var T=null==e[i][M+1];if(m.globals.isXNumeric){var I=m.globals.seriesX[n][M+1];void 0===m.globals.seriesX[n][M+1]&&(I=m.globals.seriesX[n][A-1]),r=(I-m.globals.minX)/this.xRatio}else r+=this.xDivision;h=m.config.chart.stacked&&i>0&&m.globals.collapsedSeries.length<m.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,n=0;n<m.globals.series.length;n++)if(m.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(i-1)][M+1]:this.zeroY,a=T?h-k/x[this.yaxisIndex]+2*(this.isReversed?k/x[this.yaxisIndex]:0):h-e[i][M+1]/x[this.yaxisIndex]+2*(this.isReversed?e[i][M+1]/x[this.yaxisIndex]:0),f.push(r),g.push(a);var D=this.lineHelpers.calculatePoints({series:e,x:r,y:a,realIndex:n,i:i,j:M,prevY:b}),P=this._createPaths({series:e,i:i,realIndex:n,j:M,x:r,y:a,pX:o,pY:s,linePath:w,areaPath:_,linePaths:c,areaPaths:u,seriesIndex:d});u=P.areaPaths,c=P.linePaths,o=P.pX,s=P.pY,_=P.areaPath,w=P.linePath,this.appendPathFrom&&(S+=v.line(r,this.zeroY),C+=v.line(r,this.zeroY)),this.handleNullDataPoints(e,D,i,M,n),this._handleMarkersAndLabels({pointsPos:D,series:e,x:r,y:a,prevY:b,i:i,j:M,realIndex:n})}return{yArrj:g,xArrj:f,pathFromArea:C,areaPaths:u,pathFromLine:S,linePaths:c}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos,n=t.i,i=t.j,r=t.realIndex,a=this.w,o=new D(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,i,{realIndex:r,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain});else{a.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var s=this.markers.plotChartMarkers(e,r,i+1);null!==s&&this.elPointsMain.add(s)}var l=o.drawDataLabel(e,r,i+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(t){var e=t.series,n=t.i,i=t.realIndex,r=t.j,a=t.x,o=t.y,s=t.pX,l=t.pY,c=t.linePath,u=t.areaPath,d=t.linePaths,h=t.areaPaths,f=t.seriesIndex,g=this.w,p=new y(this.ctx),m=g.config.stroke.curve,v=this.areaBottomY;if(Array.isArray(g.config.stroke.curve)&&(m=Array.isArray(f)?g.config.stroke.curve[f[n]]:g.config.stroke.curve[n]),"smooth"===m){var x=.35*(a-s);g.globals.hasNullValues?(null!==e[n][r]&&(null!==e[n][r+1]?(c=p.move(s,l)+p.curve(s+x,l,a-x,o,a+1,o),u=p.move(s+1,l)+p.curve(s+x,l,a-x,o,a+1,o)+p.line(a,v)+p.line(s,v)+"z"):(c=p.move(s,l),u=p.move(s,l)+"z")),d.push(c),h.push(u)):(c+=p.curve(s+x,l,a-x,o,a,o),u+=p.curve(s+x,l,a-x,o,a,o)),s=a,l=o,r===e[n].length-2&&(u=u+p.curve(s,l,a,o,a,v)+p.move(a,o)+"z",g.globals.hasNullValues||(d.push(c),h.push(u)))}else null===e[n][r+1]&&(c+=p.move(a,o),u=u+p.line(g.globals.isXNumeric?(g.globals.seriesX[i][r]-g.globals.minX)/this.xRatio:a-this.xDivision,v)+p.move(a,o)+"z"),null===e[n][r]&&(c+=p.move(a,o),u+=p.move(a,v)),"stepline"===m?(c=c+p.line(a,null,"H")+p.line(null,o,"V"),u=u+p.line(a,null,"H")+p.line(null,o,"V")):"straight"===m&&(c+=p.line(a,o),u+=p.line(a,o)),r===e[n].length-2&&(u=u+p.line(a,v)+p.move(a,o)+"z",d.push(c),h.push(u));return{linePaths:d,areaPaths:h,pX:s,pY:l,linePath:c,areaPath:u}}},{key:"handleNullDataPoints",value:function(t,e,n,i,r){var a=this.w;if(null===t[n][i]&&a.config.markers.showNullDataPoints||1===t[n].length){var o=this.markers.plotChartMarkers(e,r,i+1,this.strokeWidth-a.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),t}(),Tt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return i(t,[{key:"calculateTimeScaleTicks",value:function(t,e){var n=this,i=this.w;if(i.globals.allSeriesCollapsed)return i.globals.labels=[],i.globals.timescaleLabels=[],[];var r=new R(this.ctx),a=(e-t)/864e5;this.determineInterval(a),i.globals.disableZoomIn=!1,i.globals.disableZoomOut=!1,a<.005?i.globals.disableZoomIn=!0:a>5e4&&(i.globals.disableZoomOut=!0);var s=r.getTimeUnitsfromTimestamp(t,e,this.utc),l=i.globals.gridWidth/a,c=l/24,u=c/60,d=Math.floor(24*a),h=Math.floor(24*a*60),f=Math.floor(a),g=Math.floor(a/30),p=Math.floor(a/365),m={minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},v={firstVal:m,currentMinute:m.minMinute,currentHour:m.minHour,currentMonthDate:m.minDate,currentDate:m.minDate,currentMonth:m.minMonth,currentYear:m.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,numberOfMinutes:h,numberOfHours:d,numberOfDays:f,numberOfMonths:g,numberOfYears:p};switch(this.tickInterval){case"years":this.generateYearScale(v);break;case"months":case"half_year":this.generateMonthScale(v);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(v);break;case"hours":this.generateHourScale(v);break;case"minutes":this.generateMinuteScale(v)}var y=this.timeScaleArray.map((function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?o(o({},e),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?o(o({},e),{},{value:t.value}):"minute"===t.unit?o(o({},e),{},{value:t.value,minute:t.value}):t}));return y.filter((function(t){var e=1,r=Math.ceil(i.globals.gridWidth/120),a=t.value;void 0!==i.config.xaxis.tickAmount&&(r=i.config.xaxis.tickAmount),y.length>r&&(e=Math.floor(y.length/r));var o=!1,s=!1;switch(n.tickInterval){case"years":"year"===t.unit&&(o=!0);break;case"half_year":e=7,"year"===t.unit&&(o=!0);break;case"months":e=1,"year"===t.unit&&(o=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(o=!0),30===a&&(s=!0);break;case"months_days":e=10,"month"===t.unit&&(o=!0),30===a&&(s=!0);break;case"week_days":e=8,"month"===t.unit&&(o=!0);break;case"days":e=1,"month"===t.unit&&(o=!0);break;case"hours":"day"===t.unit&&(o=!0);break;case"minutes":a%5!=0&&(s=!0)}if("minutes"===n.tickInterval||"hours"===n.tickInterval){if(!s)return!0}else if((a%e==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var n=this.w,i=this.formatDates(t),r=this.removeOverlappingTS(i);n.globals.timescaleLabels=r.slice(),new st(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){switch(!0){case t>1825:this.tickInterval="years";break;case t>800&&t<=1825:this.tickInterval="half_year";break;case t>180&&t<=800:this.tickInterval="months";break;case t>90&&t<=180:this.tickInterval="months_fortnight";break;case t>60&&t<=90:this.tickInterval="months_days";break;case t>30&&t<=60:this.tickInterval="week_days";break;case t>2&&t<=30:this.tickInterval="days";break;case t>.1&&t<=2:this.tickInterval="hours";break;case t<.1:this.tickInterval="minutes";break;default:this.tickInterval="days"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,n=t.currentMonth,i=t.currentYear,r=t.daysWidthOnXAxis,a=t.numberOfYears,o=e.minYear,s=0,l=new R(this.ctx);if(e.minDate>1||e.minMonth>0){var c=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);s=(l.determineDaysOfYear(e.minYear)-c+1)*r,this.timeScaleArray.push({position:s,value:o=e.minYear+1,unit:"year",year:o,month:p.monthMod(n+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:"year",year:i,month:p.monthMod(n+1)});for(var u=o,d=s,h=0;h<a;h++)u++,d=l.determineDaysOfYear(u-1)*r+d,this.timeScaleArray.push({position:d,value:u,unit:"year",year:u,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,n=t.currentMonthDate,i=t.currentMonth,r=t.currentYear,a=t.daysWidthOnXAxis,o=t.numberOfMonths,s=i,l=0,c=new R(this.ctx),u="month",d=0;if(e.minDate>1){l=(c.determineDaysOfMonths(i+1,e.minYear)-n+1)*a,s=p.monthMod(i+1);var h=r+d,f=p.monthMod(s),g=s;0===s&&(u="year",g=h,f=1,h+=d+=1),this.timeScaleArray.push({position:l,value:g,unit:u,year:h,month:f})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:r,month:p.monthMod(i)});for(var m=s+1,v=l,y=0,x=1;y<o;y++,x++){0===(m=p.monthMod(m))?(u="year",d+=1):u="month";var b=this._getYear(r,m,d);v=c.determineDaysOfMonths(m,b)*a+v,this.timeScaleArray.push({position:v,value:0===m?b:m,unit:u,year:b,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,n=t.currentMonth,i=t.currentYear,r=t.hoursWidthOnXAxis,a=t.numberOfDays,o=new R(this.ctx),s="day",l=e.minDate+1,c=l,u=function(t,e,n){return t>o.determineDaysOfMonths(e+1,n)?(c=1,s="month",h=e+=1,e):e},d=(24-e.minHour)*r,h=l,f=u(c,n,i);0===e.minHour&&1===e.minDate&&(d=0,h=p.monthMod(e.minMonth),s="month",c=e.minDate,a++),this.timeScaleArray.push({position:d,value:h,unit:s,year:this._getYear(i,f,0),month:p.monthMod(f),day:c});for(var g=d,m=0;m<a;m++){s="day",f=u(c+=1,f,this._getYear(i,f,0));var v=this._getYear(i,f,0);g=24*r+g;var y=1===c?p.monthMod(f):c;this.timeScaleArray.push({position:g,value:y,unit:s,year:v,month:p.monthMod(f),day:y})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,n=t.currentDate,i=t.currentMonth,r=t.currentYear,a=t.minutesWidthOnXAxis,o=t.numberOfHours,s=new R(this.ctx),l="hour",c=function(t,e){return t>s.determineDaysOfMonths(e+1,r)&&(m=1,e+=1),{month:e,date:m}},u=function(t,e){return t>s.determineDaysOfMonths(e+1,r)?e+=1:e},d=60-e.minMinute,h=d*a,f=e.minHour+1,g=f+1;60===d&&(h=0,g=(f=e.minHour)+1);var m=n,v=u(m,i);this.timeScaleArray.push({position:h,value:f,unit:l,day:m,hour:g,year:r,month:p.monthMod(v)});for(var y=h,x=0;x<o;x++){l="hour",g>=24&&(g=0,l="day",v=c(m+=1,v).month,v=u(m,v));var b=this._getYear(r,v,0);this.timeScaleArray.push({position:y=0===g&&0===x?d*a:60*a+y,value:0===g?m:g,unit:l,hour:g,day:m,year:b,month:p.monthMod(v)}),g++}}},{key:"generateMinuteScale",value:function(t){var e=t.firstVal,n=t.currentYear,i=t.minutesWidthOnXAxis,r=t.numberOfMinutes,a=i-(t.currentMinute-e.minMinute),o=e.minMinute+1,s=o+1,l=t.currentDate,c=t.currentMonth,u=t.currentHour;this.timeScaleArray.push({position:a,value:o,unit:"minute",day:l,hour:u,minute:s,year:n,month:p.monthMod(c)});for(var d=a,h=0;h<r;h++)s>=60&&(s=0,24===(u+=1)&&(u=0)),this.timeScaleArray.push({position:d=i+d,value:s,unit:"minute",hour:u,minute:s,day:l,year:this._getYear(n,c,0),month:p.monthMod(c)}),s++}},{key:"createRawDateString",value:function(t,e){var n=t.year;return n+="-"+("0"+t.month.toString()).slice(-2),n+="day"===t.unit?"day"===t.unit?"-"+("0"+e).slice(-2):"-01":"-"+("0"+(t.day?t.day:"1")).slice(-2),n+="hour"===t.unit?"hour"===t.unit?"T"+("0"+e).slice(-2):"T00":"T"+("0"+(t.hour?t.hour:"0")).slice(-2),n+="minute"===t.unit?":"+("0"+e).slice(-2)+":00":":00:00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(t){var e=this,n=this.w;return t.map((function(t){var i=t.value.toString(),r=new R(e.ctx),a=e.createRawDateString(t,i),o=r.getDate(r.parseDate(a));if(e.utc||(o=r.getDate(r.parseDateWithTimezone(a))),void 0===n.config.xaxis.labels.format){var s="dd MMM",l=n.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(s=l.year),"month"===t.unit&&(s=l.month),"day"===t.unit&&(s=l.day),"hour"===t.unit&&(s=l.hour),"minute"===t.unit&&(s=l.minute),i=r.formatDate(o,s)}else i=r.formatDate(o,n.config.xaxis.labels.format);return{dateString:a,position:t.position,value:i,unit:t.unit,year:t.year,month:t.month}}))}},{key:"removeOverlappingTS",value:function(t){var e,n=this,i=new y(this.ctx),r=!1;t.length>0&&t[0].value&&t.every((function(e){return e.value.length===t[0].value.length}))&&(r=!0,e=i.getTextRects(t[0].value).width);var a=0;return t.map((function(o,s){if(s>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var l=r?e:i.getTextRects(t[a].value).width;return o.position>t[a].position+l+10?(a=s,o):null}return o})).filter((function(t){return null!==t}))}},{key:"_getYear",value:function(t,e,n){return t+Math.floor(e/12)+n}}]),t}(),It=function(){function t(n,i){e(this,t),this.ctx=i,this.w=i.w,this.el=n}return i(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,n=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","scatter","bubble","radar","heatmap"].indexOf(n)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","scatter","bubble"].indexOf(n)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.cuid,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),y.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var n=this.w,i=n.config,r=n.globals,a={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},u={series:[],i:[]};r.series.map((function(e,d){void 0!==t[d].type?("column"===t[d].type||"bar"===t[d].type?(r.series.length>1&&i.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(e),c.i.push(d),n.globals.columnSeries=c.series):"area"===t[d].type?(o.series.push(e),o.i.push(d)):"line"===t[d].type?(a.series.push(e),a.i.push(d)):"scatter"===t[d].type?(s.series.push(e),s.i.push(d)):"bubble"===t[d].type?(l.series.push(e),l.i.push(d)):"candlestick"===t[d].type?(u.series.push(e),u.i.push(d)):console.warn("You have specified an unrecognized chart type. Available types for this propery are line/area/column/bar/scatter/bubble"),r.comboCharts=!0):(a.series.push(e),a.i.push(d))}));var d=new Mt(this.ctx,e),h=new bt(this.ctx,e);this.ctx.pie=new St(this.ctx);var f=new kt(this.ctx),g=new O(this.ctx,e),p=new Ct(this.ctx),m=[];if(r.comboCharts){if(o.series.length>0&&m.push(d.draw(o.series,"area",o.i)),c.series.length>0)if(n.config.chart.stacked){var v=new xt(this.ctx,e);m.push(v.draw(c.series,c.i))}else{var y=new N(this.ctx,e);m.push(y.draw(c.series,c.i))}if(a.series.length>0&&m.push(d.draw(a.series,"line",a.i)),u.series.length>0&&m.push(h.draw(u.series,u.i)),s.series.length>0){var x=new Mt(this.ctx,e,!0);m.push(x.draw(s.series,"scatter",s.i))}if(l.series.length>0){var b=new Mt(this.ctx,e,!0);m.push(b.draw(l.series,"bubble",l.i))}}else switch(i.chart.type){case"line":m=d.draw(r.series,"line");break;case"area":m=d.draw(r.series,"area");break;case"bar":m=i.chart.stacked?new xt(this.ctx,e).draw(r.series):new N(this.ctx,e).draw(r.series);break;case"candlestick":m=new bt(this.ctx,e).draw(r.series);break;case"rangeBar":m=g.draw(r.series);break;case"heatmap":m=new wt(this.ctx,e).draw(r.series);break;case"pie":case"donut":case"polarArea":m=this.ctx.pie.draw(r.series);break;case"radialBar":m=f.draw(r.series);break;case"radar":m=p.draw(r.series);break;default:m=d.draw(r.series)}return m}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var n=p.getDimensions(this.el),i=e.chart.width.toString().split(/[0-9]+/g).pop();if("%"===i?p.isNumber(n[0])&&(0===n[0].width&&(n=p.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(e.chart.width,10)/100):"px"!==i&&""!==i||(t.svgWidth=parseInt(e.chart.width,10)),"auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===e.chart.height.toString().split(/[0-9]+/g).pop()){var r=p.getDimensions(this.el.parentNode);t.svgHeight=r[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),y.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+(e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0)+"px",t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals;y.setAttrs(t.dom.elGraphical.node,{transform:"translate("+t.translateX+", "+t.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,n=0,i=t.config.chart.sparkline.enabled?1:15;i+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(n=new ct(this.ctx).legendHelpers.getLegendBBox().clwh+10);var r=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar"),a=2.05*t.globals.radialSize;if(r&&!t.config.chart.sparkline.enabled){var o=p.getBoundingClientRect(r);a=o.bottom,a=Math.max(2.05*t.globals.radialSize,o.bottom-o.top)}var s=a+e.translateY+n+i;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",s),e.dom.elWrap.style.height=s+"px",y.setAttrs(e.dom.Paper.node,{height:s}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=s+"px"}},{key:"coreCalculations",value:function(){new q(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map((function(t){return[]}))},n=new F,i=this.w.globals;n.initGlobalVars(i),i.seriesXvalues=e(),i.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new Q(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new Q(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new Tt(this.ctx);var n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}t=new w(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.w;if(e.config.chart.brush.enabled&&"function"!=typeof e.config.chart.events.selection){var n=e.config.chart.brush.targets||[e.config.chart.brush.target];n.forEach((function(e){var n=ApexCharts.getChartByID(e);n.w.globals.brushSource=t.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){t.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){t.updateSourceChart(n)})})),e.config.chart.events.selection=function(t,i){n.forEach((function(t){var n=ApexCharts.getChartByID(t),r=p.clone(e.config.yaxis);if(e.config.chart.brush.autoScaleYaxis&&1===n.w.globals.series.length){var a=new j(n);r=a.autoScaleY(n,r,i)}var s=n.w.config.yaxis.reduce((function(t,e,i){return[].concat(d(t),[o(o({},n.w.config.yaxis[i]),{},{min:r[0].min,max:r[0].max})])}),[]);n.ctx.updateHelpers._updateOptions({xaxis:{min:i.xaxis.min,max:i.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),t}(),Dt=function(){function n(t){e(this,n),this.ctx=t,this.w=t.w}return i(n,[{key:"_updateOptions",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[this.ctx];a&&(s=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(s=[this.ctx],this.ctx.w.globals.isExecCalled=!1),s.forEach((function(a){var s=a.w;return s.globals.shouldAnimate=r,i||(s.globals.resized=!0,s.globals.dataChanged=!0,r&&a.series.getPreviousPaths()),e&&"object"===t(e)&&(a.config=new B(e),e=w.extendArrayProps(a.config,e,s),a.w.globals.chartID!==n.ctx.w.globals.chartID&&delete e.series,s.config=p.extend(s.config,e),o&&(s.globals.lastXAxis=e.xaxis?p.clone(e.xaxis):[],s.globals.lastYAxis=e.yaxis?p.clone(e.yaxis):[],s.globals.initialConfig=p.extend({},s.config),s.globals.initialSeries=p.clone(s.config.series))),a.update(e)}))}},{key:"_updateSeries",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.w;return a.globals.shouldAnimate=e,a.globals.dataChanged=!0,e&&this.ctx.series.getPreviousPaths(),a.globals.axisCharts?(0===(n=t.map((function(t,e){return i._extendSeries(t,e)}))).length&&(n=[{data:[]}]),a.config.series=n):a.config.series=t.slice(),r&&(a.globals.initialSeries=p.clone(a.config.series)),this.ctx.update({series:t})}},{key:"_extendSeries",value:function(t,e){var n=this.w,i=n.config.series[e];return o(o({},n.config.series[e]),{},{name:t.name?t.name:i&&i.name,color:t.color?t.color:i&&i.color,type:t.type?t.type:i&&i.type,data:t.data?t.data:i&&i.data})}},{key:"toggleDataPointSelection",value:function(t,e){var n=this.w,i=null,r=".apexcharts-series[data\\:realIndex='".concat(t,"']");return n.globals.axisCharts?i=n.globals.dom.Paper.select("".concat(r," path[j='").concat(e,"'], ").concat(r," circle[j='").concat(e,"'], ").concat(r," rect[j='").concat(e,"']")).members[0]:void 0===e&&(i=n.globals.dom.Paper.select("".concat(r," path[j='").concat(t,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(t)),i?(new y(this.ctx).pathMouseDown(i,null),i.node?i.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach((function(n){void 0!==t.xaxis[n]&&(e.config.xaxis[n]=t.xaxis[n],e.globals.lastXAxis[n]=t.xaxis[n])})),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var n=new z(t);t=n.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){var e=this.w;return e.config.chart.stacked&&"100%"===e.config.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach((function(e,n){t.yaxis[n].min=0,t.yaxis[n].max=100})):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(){var t=this,e=this.w;e.config.xaxis.min=e.globals.lastXAxis.min,e.config.xaxis.max=e.globals.lastXAxis.max,e.config.yaxis.map((function(n,i){e.globals.zoomed||void 0!==e.globals.lastYAxis[i]?function(t){void 0!==e.globals.lastYAxis[t]&&(e.config.yaxis[t].min=e.globals.lastYAxis[t].min,e.config.yaxis[t].max=e.globals.lastYAxis[t].max)}(i):void 0!==t.ctx.opts.yaxis[i]&&(n.min=t.ctx.opts.yaxis[i].min,n.max=t.ctx.opts.yaxis[i].max)}))}}]),n}();f="undefined"!=typeof window?window:void 0,g=function(e,n){var i=(void 0!==this?this:e).SVG=function(t){if(i.supported)return t=new i.Doc(t),i.parser.draw||i.prepare(),t};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.com/svgjs",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(t){return"Svgjs"+d(t)+i.did++},i.create=function(t){var e=n.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},i.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var n=t.length-1;n>=0;n--)if(t[n])for(var r in e)t[n].prototype[r]=e[r];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,i.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&i.extend(e,t.extend),t.construct&&i.extend(t.parent||i.Container,t.construct),e},i.adopt=function(t){return t?t.instance?t.instance:((n="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new i.Nested:new i.Doc:"linearGradient"==t.nodeName?new i.Gradient("linear"):"radialGradient"==t.nodeName?new i.Gradient("radial"):i[d(t.nodeName)]?new(i[d(t.nodeName)]):new i.Element(t)).type=t.nodeName,n.node=t,t.instance=n,n instanceof i.Doc&&n.namespace().defs(),n.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),n):null;var n},i.prepare=function(){var t=n.getElementsByTagName("body")[0],e=(t?new i.Doc(t):i.adopt(n.documentElement).nested()).size(2,0);i.parser={body:t||n.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:e.polyline().node,path:e.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},n.addEventListener("DOMContentLoaded",(function(){i.parser.draw||i.prepare()}),!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(t,e){for(var n=t.length,i=[],r=0;r<n;r++)i.push(e(t[r]));return i},filter:function(t,e){for(var n=t.length,i=[],r=0;r<n;r++)e(t[r])&&i.push(t[r]);return i},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(e){var n,r;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?i.regex.isRgb.test(e)?(n=i.regex.rgb.exec(e.replace(i.regex.whitespace,"")),this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3])):i.regex.isHex.test(e)&&(n=i.regex.hex.exec(4==(r=e).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),this.b=parseInt(n[3],16)):"object"===t(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new i.Color(t),this},at:function(t){return this.destination?new i.Color({r:~~(this.r+(this.destination.r-this.r)*(t=t<0?0:t>1?1:t)),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)}):this}}),i.Color.test=function(t){return i.regex.isHex.test(t+="")||i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},i.Color.isColor=function(t){return i.Color.isRgb(t)||i.Color.test(t)},i.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),i.PointArray=function(t,e){i.Array.call(this,t,e||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var r={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]}},a="mlhvqtcsaz".split(""),o=0,s=a.length;o<s;++o)r[a[o]]=function(t){return function(e,n,i){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var a=0,o=e.length;a<o;++a)e[a]=e[a]+(a%2?n.y:n.x);return r[t](e,n,i)}}(a[o].toUpperCase());i.PathArray=function(t,e){i.Array.call(this,t,e||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){return this.bbox(),this},at:function(t){if(!this.destination)return this;for(var e=this.value,n=this.destination.value,r=[],a=new i.PathArray,o=0,s=e.length;o<s;o++){r[o]=[e[o][0]];for(var l=1,c=e[o].length;l<c;l++)r[o][l]=e[o][l]+(n[o][l]-e[o][l])*t;"A"===r[o][0]&&(r[o][4]=+(0!=r[o][4]),r[o][5]=+(0!=r[o][5]))}return a.value=r,a},parse:function(t){if(t instanceof i.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(i.regex.numbersWithDots,c).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var a=[],o=new i.Point,s=new i.Point,l=0,u=t.length;do{i.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),a.push(r[e].call(null,t.slice(l,l+=n[e.toUpperCase()]).map(parseFloat),o,s))}while(u>l);return a},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(i.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof i.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new i.Number(t),new i.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new i.Number(t),new i.Number(this-t,this.unit||t.unit)},times:function(t){return t=new i.Number(t),new i.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new i.Number(t),new i.Number(this/t,this.unit||t.unit)},to:function(t){var e=new i.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new i.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new i.Number(this.destination).minus(this).times(t).plus(this):this}}}),i.Element=i.invent({create:function(t){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=f(this,t,e);return this.width(new i.Number(n.width)).height(new i.Number(n.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(i.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return i.get(this.attr(t))},parent:function(t){var n=this;if(!n.node.parentNode)return null;if(n=i.adopt(n.node.parentNode),!t)return n;for(;n&&n.node instanceof e.SVGElement;){if("string"==typeof t?n.matches(t):n instanceof t)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName)return null;n=i.adopt(n.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var e=n.createElement("svg");if(!(t&&this instanceof i.Parent))return e.appendChild(t=n.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,a=e.firstChild.childNodes.length;r<a;r++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),i.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},i.morph=function(t){return function(e,n){return new i.MorphObj(e,n).at(t)}},i.Situation=i.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(t.duration).valueOf(),this.delay=new i.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,n,r){"object"===t(e)&&(n=e.ease,r=e.delay,e=e.duration);var a=new i.Situation({duration:e||1e3,delay:r||0,ease:i.easing[n||"-"]||n});return this.queue(a),this},target:function(t){return t&&t instanceof i.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof i.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var n in e.animations){t=this.target()[n](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[n])||(e.animations[n]=[e.animations[n]]);for(var r=t.length;r--;)e.animations[n][r]instanceof i.Number&&(t[r]=new i.Number(t[r])),e.animations[n][r]=t[r].morph(e.animations[n][r])}for(var n in e.attrs)e.attrs[n]=new i.MorphObj(this.target().attr(n),e.attrs[n]);for(var n in e.styles)e.styles[n]=new i.MorphObj(this.target().style(n),e.styles[n]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",(function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))})),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,i.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after((function(){this.off("during.fx",n)})),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=r&&(this.situation.once[a].call(this.target(),this.pos,r),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e=this,n=this.target(),r=this.situation;for(var a in r.animations)t=[].concat(r.animations[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n[a].apply(n,t);for(var a in r.attrs)t=[a].concat(r.attrs[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n.attr.apply(n,t);for(var a in r.styles)t=[a].concat(r.styles[a]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n.style.apply(n,t);if(r.transforms.length){t=r.initialTransformation,a=0;for(var o=r.transforms.length;a<o;a++){var s=r.transforms[a];s instanceof i.Matrix?t=s.relative?t.multiply((new i.Matrix).morph(s).at(r.ease(this.pos))):t.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(t.extract()),t=t.multiply(s.at(r.ease(this.pos))))}n.matrix(t)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:i.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new i.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new i.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(t,e){return i.Color.isColor(e)?new i.Color(t).morph(e):i.regex.delimiter.test(t)?i.regex.pathLetters.test(t)?new i.PathArray(t).morph(e):new i.Array(t).morph(e):i.regex.numberAndUnit.test(e)?new i.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(e,n,i){if("object"===t(e))for(var r in e)this.attr(r,e[r]);else this.add(e,n,"attrs");return this},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))}}),i.Box=i.invent({create:function(e,n,r,a){if(!("object"!==t(e)||e instanceof i.Element))return i.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=n,this.width=r,this.height=a),v(this)}}),i.BBox=i.invent({create:function(t){if(i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element){var e;try{if(!n.documentElement.contains){for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=n)throw new Error("Element not in the dom")}e=t.node.getBBox()}catch(n){if(t instanceof i.Shape){i.parser.draw||i.prepare();var a=t.clone(i.parser.draw.instance).show();e=a.node.getBBox(),a.remove()}else e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}i.Box.call(this,e)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(e){var n=p([1,0,0,1,0,0]);e=e instanceof i.Element?e.matrixify():"string"==typeof e?p(e.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(e)?p(e):"object"===t(e)?e:n;for(var r=x.length-1;r>=0;--r)this[x[r]]=null!=e[x[r]]?e[x[r]]:n[x[r]]},extend:{extract:function(){var t=g(this,0,1),e=(g(this,1,0),180/Math.PI*Math.atan2(t.y,t.x)-90);return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(t){return this.destination=new i.Matrix(t),this},multiply:function(t){return new i.Matrix(this.native().multiply(function(t){return t instanceof i.Matrix||(t=new i.Matrix(t)),t}(t).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(t,e){return new i.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=i.parser.native.createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new i.Matrix(e)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(e,n){var i;i=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===t(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=n?n:e}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(t,e){return this.destination=new i.Point(t,e),this}}}),i.extend(i.Element,{point:function(t,e){return new i.Point(t,e).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(e,n,r){if(null==e){for(e={},r=(n=this.node.attributes).length-1;r>=0;r--)e[n[r].nodeName]=i.regex.isNumber.test(n[r].nodeValue)?parseFloat(n[r].nodeValue):n[r].nodeValue;return e}if("object"===t(e))for(var a in e)this.attr(a,e[a]);else if(null===n)this.node.removeAttribute(e);else{if(null==n)return null==(n=this.node.getAttribute(e))?i.defaults.attrs[e]:i.regex.isNumber.test(n)?parseFloat(n):n;"stroke-width"==e?this.attr("stroke",parseFloat(n)>0?this._stroke:null):"stroke"==e&&(this._stroke=n),"fill"!=e&&"stroke"!=e||(i.regex.isImage.test(n)&&(n=this.doc().defs().image(n,0,0)),n instanceof i.Image&&(n=this.doc().defs().pattern(0,0,(function(){this.add(n)})))),"number"==typeof n?n=new i.Number(n):i.Color.isColor(n)?n=new i.Color(n):Array.isArray(n)&&(n=new i.Array(n)),"leading"==e?this.leading&&this.leading(n):"string"==typeof r?this.node.setAttributeNS(r,e,n.toString()):this.node.setAttribute(e,n.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,n)}return this}}),i.extend(i.Element,{transform:function(e,n){var r;return"object"!==t(e)?(r=new i.Matrix(this).extract(),"string"==typeof e?r[e]:r):(r=new i.Matrix(this),n=!!n||!!e.relative,null!=e.a&&(r=n?r.multiply(new i.Matrix(e)):new i.Matrix(e)),this.attr("transform",r))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(i.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])}),new i.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(e,n){if(arguments.length>1&&"boolean"!=typeof n)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=e[i];else if("object"===t(e))for(i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=e[this.arguments[i]];this.inversed=!1,!0===n&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(e,n){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===t(e))for(var r in e)this.style(r,e[r]);else{if(!i.regex.isCss.test(e))return this.node.style[u(e)];for(e=e.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));n=e.pop();)this.style(n[0],n[1])}else this.node.style[u(e)]=null===n||i.regex.isBlank.test(n)?"":n;return this}}),i.Parent=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),(function(t){return i.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return i.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var n=this.children(),r=0,a=n.length;r<a;r++)n[r]instanceof i.Element&&t.apply(n[r],[r,n]),e&&n[r]instanceof i.Container&&n[r].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(t,e){return 0===e||this instanceof i.Defs||this.node==i.parser.draw||(t=t||(this instanceof i.Doc?this:this.parent(i.Parent)),e=e||1/0,this.each((function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),i.Container=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){i.Element.prototype[t]=function(e){return i.on(this.node,t,e),this}})),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(t,e,n,r,a){var o=n.bind(r||t.instance||t),s=(i.handlerMap.indexOf(t)+1||i.handlerMap.push(t))-1,l=e.split(".")[0],c=e.split(".")[1]||"*";i.listeners[s]=i.listeners[s]||{},i.listeners[s][l]=i.listeners[s][l]||{},i.listeners[s][l][c]=i.listeners[s][l][c]||{},n._svgjsListenerId||(n._svgjsListenerId=++i.listenerId),i.listeners[s][l][c][n._svgjsListenerId]=o,t.addEventListener(l,o,a||!1)},i.off=function(t,e,n){var r=i.handlerMap.indexOf(t),a=e&&e.split(".")[0],o=e&&e.split(".")[1],s="";if(-1!=r)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;i.listeners[r][a]&&i.listeners[r][a][o||"*"]&&(t.removeEventListener(a,i.listeners[r][a][o||"*"][n],!1),delete i.listeners[r][a][o||"*"][n])}else if(o&&a){if(i.listeners[r][a]&&i.listeners[r][a][o]){for(var l in i.listeners[r][a][o])i.off(t,[a,o].join("."),l);delete i.listeners[r][a][o]}}else if(o)for(var c in i.listeners[r])for(var s in i.listeners[r][c])o===s&&i.off(t,[c,o].join("."));else if(a){if(i.listeners[r][a]){for(var s in i.listeners[r][a])i.off(t,[a,s].join("."));delete i.listeners[r][a]}}else{for(var c in i.listeners[r])i.off(t,c);delete i.listeners[r],delete i.handlerMap[r]}},i.extend(i.Element,{on:function(t,e,n,r){return i.on(this.node,t,e,n,r),this},off:function(t,e){return i.off(this.node,t,e),this},fire:function(t,n){return this.node.dispatchEvent(t instanceof e.Event?t:t=new i.CustomEvent(t,{detail:n,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(t){t&&("svg"==(t="string"==typeof t?n.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,i.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var t;return this._defs||(this._defs=(t=this.node.getElementsByTagName("defs")[0])?i.adopt(t):new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=m(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(t){this.constructor.call(this,i.create(t+"Gradient")),this.type=t},inherit:i.Container,extend:{at:function(t,e,n){return this.put(new i.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),i.extend(i.Gradient,i.FX,{from:function(t,e){return this.attr("radial"==(this._target||this).type?{fx:new i.Number(t),fy:new i.Number(e)}:{x1:new i.Number(t),y1:new i.Number(e)})},to:function(t,e){return this.attr("radial"==(this._target||this).type?{cx:new i.Number(t),cy:new i.Number(e)}:{x2:new i.Number(t),y2:new i.Number(e)})}}),i.extend(i.Defs,{gradient:function(t,e){return this.put(new i.Gradient(t)).update(e)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(t){return("number"==typeof t||t instanceof i.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new i.Number(t.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),i.extend(i.Defs,{pattern:function(t,e,n){return this.put(new i.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,i.xlink)}},construct:{use:function(t,e){return this.put(new i.Use).element(t,e)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(t,e){return this.put(new i.Rect).size(t,e)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(t){return this.put(new i.Circle).rx(new i.Number(t).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(t,e){return this.put(new i.Ellipse).size(t,e).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),i.extend(i.Circle,i.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new i.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new i.Number(t).divide(2))},size:function(t,e){var n=f(this,t,e);return this.rx(new i.Number(n.width).divide(2)).ry(new i.Number(n.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new i.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=f(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,r){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=t?[t,e,n,r]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(t){return this.put(new i.Polyline).plot(t||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(t){return this.put(new i.Polygon).plot(t||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new i.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=f(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new i.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new i.Path).plot(t||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(t){if(!t)return this;var n=this,r=new e.Image;return i.on(r,"load",(function(){i.off(r);var e=n.parent(i.Pattern);null!==e&&(0==n.width()&&0==n.height()&&n.size(r.width,r.height),e&&0==e.width()&&0==e.height()&&e.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:r.width,height:r.height,ratio:r.width/r.height,url:t}))})),i.on(r,"error",(function(t){i.off(r),"function"==typeof n._error&&n._error.call(n,t)})),this.attr("href",r.src=this.src=t,i.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new i.Image).load(t).size(e||0,n||e||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,n=0,r=e.length;n<r;++n)0!=n&&3!=e[n].nodeType&&1==i.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{n=0;for(var a=(t=t.split("\n")).length;n<a;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new i.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=i.utils.map(i.utils.filterSVGElements(t.childNodes),(function(t){return i.adopt(t)}));return new i.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=r:(this.attr("dy",r+n),n=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new i.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new i.Text).text(t)},plain:function(t){return this.put(new i.Text).plain(t)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(i.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(n.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new i.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function c(t,e,n,r){return n+r.replace(i.regex.dots," .")}function u(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function f(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function g(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function m(t){for(var n=t.childNodes.length-1;n>=0;n--)t.childNodes[n]instanceof e.SVGElement&&m(t.childNodes[n]);return i.adopt(t).id(i.eid(t.nodeName))}function v(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function y(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||i.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var n=l[t].length-1;n>=0;n--)null!=e[l[t][n]]&&this.attr(l.prefix(t,l[t][n]),e[l[t][n]]);return this},i.extend(i.Element,i.FX,e)})),i.extend(i.Element,i.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new i.Number(t).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(t){return this.y(new i.Number(t).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),i.Set=i.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,n=t.length;e<n;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new i.Set(t)}}}),i.FX.Set=i.invent({create:function(t){this.set=t}}),i.Set.inherit=function(){var t=[];for(var e in i.Shape.prototype)"function"==typeof i.Shape.prototype[e]&&"function"!=typeof i.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){i.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new i.FX.Set(this)):this}})),t=[],i.FX.prototype)"function"==typeof i.FX.prototype[e]&&"function"!=typeof i.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){i.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(e,n){if("object"===t(arguments[0]))for(var i in e)this.remember(i,e[i]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=n}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(t){var e=n.getElementById(function(t){var e=(t||"").toString().match(i.regex.reference);if(e)return e[1]}(t)||t);return i.adopt(e)},i.select=function(t,e){return new i.Set(i.utils.map((e||n).querySelectorAll(t),(function(t){return i.adopt(t)})))},i.extend(i.Parent,{select:function(t){return i.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof e.CustomEvent){var b=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=n.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i};b.prototype=e.Event.prototype,i.CustomEvent=b}else i.CustomEvent=e.CustomEvent;return i},"function"==typeof define&&define.amd?define((function(){return g(f,f.document)})):"object"===("undefined"==typeof exports?"undefined":t(exports))&&"undefined"!=typeof module?module.exports=f.document?g(f,f.document):function(t){return g(t,t.document)}:f.SVG=g(f,f.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,n){return this.put(new SVG.BlendEffect(t,e,n))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,n){return this.put(new SVG.CompositeEffect(t,e,n))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,n){return this.put(new SVG.DiffuseLightingEffect(t,e,n))},displacementMap:function(t,e,n,i,r){return this.put(new SVG.DisplacementMapEffect(t,e,n,i,r))},specularLighting:function(t,e,n,i){return this.put(new SVG.SpecularLightingEffect(t,e,n,i))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,n,i,r){return this.put(new SVG.TurbulenceEffect(t,e,n,i,r))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,n){return this.parent()&&this.parent().diffuseLighting(t,e,n).in(this)},displacementMap:function(t,e,n,i){return this.parent()&&this.parent().displacementMap(this,t,e,n,i)},specularLighting:function(t,e,n,i){return this.parent()&&this.parent().specularLighting(t,e,n,i).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,n,i,r){return this.parent()&&this.parent().turbulence(t,e,n,i,r).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,n){this.attr({in:t,in2:e,mode:n||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=r(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=r(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,n){this.attr({in:t,in2:e,operator:n})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,n,i,r){this.attr({in:t,in2:e,scale:n,xChannelSelector:i,yChannelSelector:r})},gaussianBlur:function(t,e){this.attr("stdDeviation",null!=t||null!=e?a(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,n,i,r){this.attr({numOctaves:e,seed:n,stitchTiles:i,baseFrequency:t,type:r})}},n={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each((function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))}))}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<t.length;n++)t[n]instanceof SVG.MergeNode?this.put(t[n]):this.put(new SVG.MergeNode(t[n]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}).bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach((function(e){this[e].attr(t.rgb)}).bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,n){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:n})},specularLighting:function(t,e,n,i){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:n,kernelUnitLength:i})}},i={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,n){this.attr({x:t,y:e,z:n})},spotLight:function(t,e,n,i,r,a){this.attr({x:t,y:e,z:n,pointsAtX:i,pointsAtY:r,pointsAtZ:a})},mergeNode:function(t){this.attr("in",t)}};function r(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function a(t){if(!Array.isArray(t))return t;for(var e=0,n=t.length,i=[];e<n;e++)i.push(t[e]);return i.join(" ")}function o(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[e])t(arguments[e][n],n,arguments[e])}["r","g","b","a"].forEach((function(t){i["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(e,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(n,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(i,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function t(t,r,a,o,s,l,c){for(var u=t.slice(r,a||c),d=o.slice(s,l||c),h=0,f={pos:[0,0],start:[0,0]},g={pos:[0,0],start:[0,0]};u[h]=e.call(f,u[h]),d[h]=e.call(g,d[h]),u[h][0]!=d[h][0]||"M"==u[h][0]||"A"==u[h][0]&&(u[h][4]!=d[h][4]||u[h][5]!=d[h][5])?(Array.prototype.splice.apply(u,[h,1].concat(i.call(f,u[h]))),Array.prototype.splice.apply(d,[h,1].concat(i.call(g,d[h])))):(u[h]=n.call(f,u[h]),d[h]=n.call(g,d[h])),++h!=u.length||h!=d.length;)h==u.length&&u.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),h==d.length&&d.push(["C",g.pos[0],g.pos[1],g.pos[0],g.pos[1],g.pos[0],g.pos[1]]);return{start:u,dest:d}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function n(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function i(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var n,i,r,a,o,s,l,c,u,d,h,f,g,p,m,v,y,x,b,w,_,S,C=Math.abs(e[1]),k=Math.abs(e[2]),A=e[3]%360,M=e[4],T=e[5],I=e[6],D=e[7],P=new SVG.Point(t),L=new SVG.Point(I,D),E=[];if(0===C||0===k||P.x===L.x&&P.y===L.y)return[["C",P.x,P.y,L.x,L.y,L.x,L.y]];for((i=(n=new SVG.Point((P.x-L.x)/2,(P.y-L.y)/2).transform((new SVG.Matrix).rotate(A))).x*n.x/(C*C)+n.y*n.y/(k*k))>1&&(C*=i=Math.sqrt(i),k*=i),r=(new SVG.Matrix).rotate(A).scale(1/C,1/k).rotate(-A),P=P.transform(r),s=(a=[(L=L.transform(r)).x-P.x,L.y-P.y])[0]*a[0]+a[1]*a[1],o=Math.sqrt(s),a[0]/=o,a[1]/=o,l=s<4?Math.sqrt(1-s/4):0,M===T&&(l*=-1),c=new SVG.Point((L.x+P.x)/2+l*-a[1],(L.y+P.y)/2+l*a[0]),u=new SVG.Point(P.x-c.x,P.y-c.y),d=new SVG.Point(L.x-c.x,L.y-c.y),h=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(h*=-1),f=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(f*=-1),T&&h>f&&(f+=2*Math.PI),!T&&h<f&&(f-=2*Math.PI),v=[],y=h,g=(f-h)/(p=Math.ceil(2*Math.abs(h-f)/Math.PI)),m=4*Math.tan(g/4)/3,_=0;_<=p;_++)b=Math.cos(y),x=Math.sin(y),w=new SVG.Point(c.x+b,c.y+x),v[_]=[new SVG.Point(w.x+m*x,w.y-m*b),w,new SVG.Point(w.x-m*x,w.y+m*b)],y+=g;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),r=(new SVG.Matrix).rotate(A).scale(C,k).rotate(-A),_=0,S=v.length;_<S;_++)v[_][0]=v[_][0].transform(r),v[_][1]=v[_][1].transform(r),v[_][2]=v[_][2].transform(r);for(_=1,S=v.length;_<S;_++)E.push(["C",(w=v[_-1][2]).x,w.y,(w=v[_][0]).x,w.y,I=(w=v[_][1]).x,D=w.y]);return E}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function r(t,e){if(!1===e)return!1;for(var n=e,i=t.length;n<i;++n)if("M"==t[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var n=this.value,i=this.parse(e),a=0,o=0,s=!1,l=!1;!1!==a||!1!==o;){var c;s=r(n,!1!==a&&a+1),l=r(i,!1!==o&&o+1),!1===a&&(a=0==(c=new SVG.PathArray(u.start).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(u.dest).bbox()).height||0==c.width?i.push(i[0])-1:i.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var u=t(n,a,s,i,o,l);n=n.slice(0,a).concat(u.start,!1===s?[]:n.slice(s)),i=i.slice(0,o).concat(u.dest,!1===l?[]:i.slice(l)),a=!1!==s&&a+u.start.length,o=!1!==l&&o+u.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=i,this}})}(),(function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var n=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",(function(t){n.start(t)})),this.el.on("touchstart.drag",(function(t){n.start(t)}))},t.prototype.transformPoint=function(t,e){var n=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=n.clientX-(e||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,i=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(t,n),box:i,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(t){e.drag(t)})),SVG.on(window,"touchmove.drag",(function(t){e.drag(t)})),SVG.on(window,"mouseup.drag",(function(t){e.end(t)})),SVG.on(window,"touchend.drag",(function(t){e.end(t)})),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),n=this.transformPoint(t),i=this.startPoints.box.x+n.x-this.startPoints.point.x,r=this.startPoints.box.y+n.y-this.startPoints.point.y,a=this.constraint,o=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof a){var l=a.call(this.el,i,r,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(i):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(r):!1!==l.y&&this.el.y(l.y)}else"object"==typeof a&&(null!=a.minX&&i<a.minX?o=(i=a.minX)-this.startPoints.box.x:null!=a.maxX&&i>a.maxX-e.width&&(o=(i=a.maxX-e.width)-this.startPoints.box.x),null!=a.minY&&r<a.minY?s=(r=a.minY)-this.startPoints.box.y:null!=a.maxY&&r>a.maxY-e.height&&(s=(r=a.maxY-e.height)-this.startPoints.box.y),null!=a.snapToGrid&&(i-=i%a.snapToGrid,r-=r%a.snapToGrid,o-=o%a.snapToGrid,s-=s%a.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(i,r));return n},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,n){"function"!=typeof e&&"object"!=typeof e||(n=e,e=!0);var i=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?i.init(n||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,n){var i="string"!=typeof t?t:e[t];return n?i/2:i},this.pointCoords=function(t,e){var n=this.pointsList[t];return{x:this.pointCoord(n[0],e,"t"===t||"b"===t),y:this.pointCoord(n[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var n=this.el.bbox();this.options={};var i=this.el.selectize.defaults.points;for(var r in this.el.selectize.defaults)this.options[r]=this.el.selectize.defaults[r],void 0!==e[r]&&(this.options[r]=e[r]);var a=["points","pointsExclude"];for(var r in a){var o=this.options[a[r]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===a[r]&&(o=o?i:[]),this.options[a[r]]=o}this.options.points=[i,this.options.points].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map((function(e){return[e[0]-t.x,e[1]-t.y]}))},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),n=0,i=e.length;n<i;++n){var r=function(e){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation(),t.el.fire("point",{x:n.pageX||n.touches[0].pageX,y:n.pageY||n.touches[0].pageY,i:e,event:n})}}(n),a=this.drawPoint(e[n][0],e[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",r).on("mousedown",r);this.pointSelection.set.add(a)}},t.prototype.drawPoint=function(t,e){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof n)return n.call(this,t,e);throw new Error("Unknown "+n+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each((function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])}))},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map((function(n,i){var r=t.pointCoords(n,e);t.rectSelection.set.get(i+1).center(r.x,r.y)})),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,n=this.el.bbox();function i(t){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation(),e.el.fire(t,{x:n.pageX||n.touches[0].pageX,y:n.pageY||n.touches[0].pageY,event:n})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(t,r){var a=e.pointCoords(t,n),o=e.drawPoint(a.x,a.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",i(t)).on("touchstart",i(t));e.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(e.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var r=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),e.el.fire("rot",{x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY,event:t})},a=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",r).on("mousedown",r);this.rectSelection.set.add(a)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){t.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){t.handler()}))},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,n){return"object"==typeof e&&(n=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,n||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,n){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==t[n]&&(this.options[n]=t[n]);this.el.on("lt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rb.resize",(function(t){e.resize(t||window.event)})),this.el.on("lb.resize",(function(t){e.resize(t||window.event)})),this.el.on("t.resize",(function(t){e.resize(t||window.event)})),this.el.on("r.resize",(function(t){e.resize(t||window.event)})),this.el.on("b.resize",(function(t){e.resize(t||window.event)})),this.el.on("l.resize",(function(t){e.resize(t||window.event)})),this.el.on("rot.resize",(function(t){e.resize(t||window.event)})),this.el.on("point.resize",(function(t){e.resize(t||window.event)})),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var i=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[i[t.detail.i][0],i[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var n=this.snapToGrid(t,e);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y+n[1]).size(this.parameters.box.width-n[0],this.parameters.box.height-n[1])}};break;case"rt":this.calc=function(t,e){var n=this.snapToGrid(t,e,2);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).size(this.parameters.box.width+n[0],this.parameters.box.height-n[1])}};break;case"rb":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+n[0],this.parameters.box.height+n[1])}};break;case"lb":this.calc=function(t,e){var n=this.snapToGrid(t,e,1);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).size(this.parameters.box.width-n[0],this.parameters.box.height+n[1])}};break;case"t":this.calc=function(t,e){var n=this.snapToGrid(t,e,2);if(this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).height(this.parameters.box.height-n[1])}};break;case"r":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.width+n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+n[0])}};break;case"b":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+n[1])}};break;case"l":this.calc=function(t,e){var n=this.snapToGrid(t,e,1);if(this.parameters.box.width-n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).width(this.parameters.box.width-n[0])}};break;case"rot":this.calc=function(t,e){var n=t+this.parameters.p.x,i=e+this.parameters.p.y,r=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),a=Math.atan2(i-this.parameters.box.y-this.parameters.box.height/2,n-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(a-r)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var n=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),i=this.el.array().valueOf();i[this.parameters.i][0]=this.parameters.pointCoords[0]+n[0],i[this.parameters.i][1]=this.parameters.pointCoords[1]+n[1],this.el.plot(i)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"touchend.resize",(function(){e.done()})),SVG.on(window,"mousemove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"mouseup.resize",(function(){e.done()}))},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),n=this.transformPoint(e.x,e.y),i=n.x-this.parameters.p.x,r=n.y-this.parameters.p.y;this.lastUpdateCall=[i,r],this.calc(i,r),this.el.fire("resizing",{dx:i,dy:r,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,n,i){var r;return r=void 0!==i?[(n+t)%this.options.snapToGrid,(i+e)%this.options.snapToGrid]:[(this.parameters.box.x+t+(1&(n=null==n?3:n)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&n?0:this.parameters.box.height))%this.options.snapToGrid],t<0&&(r[0]-=this.options.snapToGrid),e<0&&(r[1]-=this.options.snapToGrid),t-=Math.abs(r[0])<this.options.snapToGrid/2?r[0]:r[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(r[1])<this.options.snapToGrid/2?r[1]:r[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,n,i)},t.prototype.constraintToBox=function(t,e,n,i){var r,a,o=this.options.constraint||{};return void 0!==i?(r=n,a=i):(r=this.parameters.box.x+(1&n?0:this.parameters.box.width),a=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==o.minX&&r+t<o.minX&&(t=o.minX-r),void 0!==o.maxX&&r+t>o.maxX&&(t=o.maxX-r),void 0!==o.minY&&a+e<o.minY&&(e=o.minY-a),void 0!==o.maxY&&a+e>o.maxY&&(e=o.maxY-a),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var n=t.slice(),i=this.parameters.box.width/this.parameters.box.height,r=this.parameters.box.width+t[0],a=this.parameters.box.height-t[1],o=r/a;return o<i?(n[1]=r/i-this.parameters.box.height,e&&(n[1]=-n[1])):o>i&&(n[0]=this.parameters.box.width-a*i,e&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-z-label:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-candlestick {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-candlestick>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-candlestick span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'),function(){function t(t){var e=t.__resizeTriggers__,n=e.firstElementChild,i=e.lastElementChild,r=n?n.firstElementChild:null;i&&(i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight),r&&(r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px"),n&&(n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight)}function e(e){var n=this;t(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach((function(t){t.call(e)})))}))}var n,i,r=(n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return n(t)}),a=(i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return i(t)}),o=!1,s="animationstart",l="Webkit Moz O ms".split(" "),c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),u=document.createElement("fakeelement");if(void 0!==u.style.animationName&&(o=!0),!1===o)for(var d=0;d<l.length;d++)if(void 0!==u.style[l[d]+"AnimationName"]){s=c[d];break}window.addResizeListener=function(n,i){n.__resizeTriggers__||("static"==getComputedStyle(n).position&&(n.style.position="relative"),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',n.appendChild(n.__resizeTriggers__),t(n),n.addEventListener("scroll",e,!0),s&&n.__resizeTriggers__.addEventListener(s,(function(e){"resizeanim"==e.animationName&&t(n)}))),n.__resizeListeners__.push(i)},window.removeResizeListener=function(t,n){t&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(n),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",e),t.__resizeTriggers__.parentNode&&(t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__))))}}(),window.Apex={};var Pt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","touchstart","touchmove","mouseup","touchend"],this.ctx.animations=new v(this.ctx),this.ctx.axes=new J(this.ctx),this.ctx.core=new It(this.ctx.el,this.ctx),this.ctx.config=new B({}),this.ctx.data=new V(this.ctx),this.ctx.grid=new U(this.ctx),this.ctx.graphics=new y(this.ctx),this.ctx.coreUtils=new w(this.ctx),this.ctx.crosshairs=new Q(this.ctx),this.ctx.events=new $(this.ctx),this.ctx.exports=new Y(this.ctx),this.ctx.localization=new K(this.ctx),this.ctx.options=new k,this.ctx.responsive=new tt(this.ctx),this.ctx.series=new L(this.ctx),this.ctx.theme=new et(this.ctx),this.ctx.formatters=new W(this.ctx),this.ctx.titleSubtitle=new nt(this.ctx),this.ctx.legend=new ct(this.ctx),this.ctx.toolbar=new ut(this.ctx),this.ctx.dimensions=new st(this.ctx),this.ctx.updateHelpers=new Dt(this.ctx),this.ctx.zoomPanSelection=new dt(this.ctx),this.ctx.w.globals.tooltip=new yt(this.ctx)}}]),t}(),Lt=function(){function t(n){e(this,t),this.ctx=n,this.w=n.w}return i(t,[{key:"clear",value:function(){this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements()}},{key:"killSVG",value:function(t){t.each((function(t,e){this.removeClass("*"),this.off(),this.stop()}),!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(){var t=this,e=this.w.globals.dom.Paper.node;e.parentNode&&e.parentNode.parentNode&&(e.parentNode.parentNode.style.minHeight="unset"),this.ctx.eventList.forEach((function(e){t.w.globals.dom.baseEl.removeEventListener(e,t.ctx.events.documentEvent)}));var n=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(n.Paper),n.Paper.remove(),n.elWrap=null,n.elGraphical=null,n.elAnnotations=null,n.elLegendWrap=null,n.baseEl=null,n.elGridRect=null,n.elGridRectMask=null,n.elGridRectMarkerMask=null,n.elDefs=null}}]),t}();return function(){function t(n,i){e(this,t),this.opts=i,this.ctx=this,this.w=new H(i).init(),this.el=n,this.w.globals.cuid=p.randomId(),this.w.globals.chartID=this.w.config.chart.id?this.w.config.chart.id:this.w.globals.cuid,new Pt(this).initModules(),this.create=p.bind(this.create,this),this.windowResizeHandler=this._windowResize.bind(this)}return i(t,[{key:"render",value:function(){var t=this;return new Promise((function(e,n){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var i=t.w.config.chart.events.beforeMount;"function"==typeof i&&i(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),window.addResizeListener(t.el.parentNode,t._parentResizeCallback.bind(t));var r=t.create(t.w.config.series,{});if(!r)return e(t);t.mount(r).then((function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(r)})).catch((function(t){n(t)}))}else n(new Error("Element not found"))}))}},{key:"create",value:function(t,e){var n=this.w;new Pt(this).initModules();var i=this.w.globals;if(i.noData=!1,i.animationEnded=!1,this.responsive.checkResponsiveConfig(e),n.config.xaxis.convertedCatToNumeric&&new z(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el)return i.animationEnded=!0,null;if(this.core.setupElements(),0===i.svgWidth)return i.animationEnded=!0,null;var r=w.checkComboSeries(t);i.comboCharts=r.comboCharts,i.comboBarCount=r.comboBarCount;var a=t.every((function(t){return t.data&&0===t.data.length}));(0===t.length||a)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new T(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),i.noData&&i.collapsedSeries.length!==i.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),i.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters()),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(t,o),l=new D(this);return l.bringForward(),n.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:s,xyRatios:o,elInner:n.globals.dom.elGraphical,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,i=n.w;return new Promise((function(r,a){if(null===n.el)return a(new Error("Not enough data to display or target element not found"));(null===e||i.globals.allSeriesCollapsed)&&n.series.handleNoData(),n.axes.drawAxis(i.config.chart.type,e.xyRatios),n.grid=new U(n);var o=n.grid.drawGrid();n.annotations=new A(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===i.config.grid.position&&o&&i.globals.dom.elGraphical.add(o.el);var s=new G(t.ctx),l=new Z(t.ctx);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),l.setYAxisTextAlignments()),"back"===i.config.annotations.position&&(i.globals.dom.Paper.add(i.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),Array.isArray(e.elGraph))for(var c=0;c<e.elGraph.length;c++)i.globals.dom.elGraphical.add(e.elGraph[c]);else i.globals.dom.elGraphical.add(e.elGraph);if("front"===i.config.grid.position&&o&&i.globals.dom.elGraphical.add(o.el),"front"===i.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===i.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"front"===i.config.annotations.position&&(i.globals.dom.Paper.add(i.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),!i.globals.noData){if(i.config.tooltip.enabled&&!i.globals.noData&&n.w.globals.tooltip.drawTooltip(e.xyRatios),i.globals.axisCharts&&(i.globals.isXNumeric||i.config.xaxis.convertedCatToNumeric))(i.config.chart.zoom.enabled||i.config.chart.selection&&i.config.chart.selection.enabled||i.config.chart.pan&&i.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:e.xyRatios});else{var u=i.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(t){u[t]=!1}))}i.config.chart.toolbar.show&&!i.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}i.globals.memory.methodsToExec.length>0&&i.globals.memory.methodsToExec.forEach((function(t){t.method(t.params,!1,t.context)})),i.globals.axisCharts||i.globals.noData||n.core.resizeNonAxisCharts(),r(n)}))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this._parentResizeCallback.bind(this));var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach((function(e,n){e.id===t&&Apex._chartInstances.splice(n,1)})),new Lt(this.ctx).clear()}},{key:"updateOptions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map((function(t,n){return e.updateHelpers._extendSeries(t,n)}))),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,n,i,r,a)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,n)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.w.config.series.slice();return i.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(i,e,n)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var i=n.w.config.series.slice(),r=0;r<i.length;r++)if(null!=t[r])for(var a=0;a<t[r].data.length;a++)i[r].data.push(t[r].data[a]);return n.w.config.series=i,e&&(n.w.globals.initialSeries=p.clone(n.w.config.series)),this.update({series:this.w.config.series})}},{key:"update",value:function(t){var e=this;return new Promise((function(n,i){new Lt(e.ctx).clear();var r=e.create(e.w.config.series,t);if(!r)return n(e);e.mount(r).then((function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,n(e)})).catch((function(t){i(t)}))}))}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach((function(t){e.push(t)}))),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(e){return t.w.config.chart.group===e.group?e.chart:t}))}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addXaxisAnnotationExternal(t,e,i)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addYaxisAnnotationExternal(t,e,i)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addPointAnnotationExternal(t,e,i)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;e&&(n=e),n.annotations.removeAnnotation(n,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new q(this.ctx);return e.getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new q(this.ctx);return e.getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(){return new Y(this.ctx).dataURI()}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){!this.w.globals.noData&&this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update({series:t.w.config.series})}),150)}}],[{key:"getChartByID",value:function(t){var e=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return e&&e.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),n=0;n<e.length;n++)new t(e[n],JSON.parse(e[n].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var n=this.getChartByID(t);if(n){n.w.globals.isExecCalled=!0;var i=null;if(-1!==n.publicMethods.indexOf(e)){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];i=n[e].apply(n,a)}return i}}},{key:"merge",value:function(t,e){return p.extend(t,e)}}]),t}()}));